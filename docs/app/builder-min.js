/*! Storymaps-Cascade - v1.3.3 - 2017-04-25, 03:22:47 PM - This application is released under the Apache License V2.0 by Esri http://www.esri.com/ - https://github.com/Esri/story-map-cascade */function debugLine(e,t,n){e===!0&&(e="true"),e===!1&&(e="false");var i=e;if("object"==typeof e){i="";for(name in e){var r=e[name];i+=" "+name+": "+r}}if(1!=t||n||(i+=" "+Math.random()),1==n){var o=jQuery("#debug_line");o.width(200),o.height()>=500&&o.html("");var a=o.html();i=a+"<br> -------------- <br>"+i}jQuery("#debug_line").show().html(i)}function debugSide(e){var t="";for(name in e){var n=e[name];t+=name+" : "+n+"<br>"}jQuery("#debug_side").show().html(t)}function trace(e){"undefined"!=typeof console&&console.log(e)}function UGFunctions(){function e(e,t,n){t.addEventListener?t.addEventListener(e,n,!1):t.attachEvent?t.attachEvent("on"+e,n):t[e]=n}var t=null,n=this,i={starTime:0,arrThemes:[],isTouchDevice:-1,isRgbaSupported:-1,timeCache:{},dataCache:{},lastEventType:"",lastEventTime:0,handle:null};this.debugVar="",this.z__________FULL_SCREEN___________=function(){},this.toFullscreen=function(e,t){if(e.requestFullscreen)e.requestFullscreen();else if(e.mozRequestFullScreen)e.mozRequestFullScreen();else if(e.webkitRequestFullscreen)e.webkitRequestFullscreen();else{if(!e.msRequestFullscreen)return!1;e.msRequestFullscreen()}return!0},this.exitFullscreen=function(){if(0==n.isFullScreen())return!1;if(document.exitFullscreen)document.exitFullscreen();else if(document.cancelFullScreen)document.cancelFullScreen();else if(document.mozCancelFullScreen)document.mozCancelFullScreen();else if(document.webkitExitFullscreen)document.webkitExitFullscreen();else{if(!document.msExitFullscreen)return!1;document.msExitFullscreen()}return!0},this.addFullScreenChangeEvent=function(t){document.webkitCancelFullScreen?e("webkitfullscreenchange",document,t):document.msExitFullscreen?e("MSFullscreenChange",document,t):document.mozCancelFullScreen?e("mozfullscreenchange",document,t):e("fullscreenchange",document,t)},this.destroyFullScreenChangeEvent=function(){jQuery(document).unbind("fullscreenChange"),jQuery(document).unbind("mozfullscreenchange"),jQuery(document).unbind("webkitfullscreenchange"),jQuery(document).unbind("MSFullscreenChange")},this.getFullScreenElement=function(){var e=document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement;return e},this.isFullScreen=function(){var e=document.fullscreen||document.mozFullScreen||document.webkitIsFullScreen||document.msFullscreenElement;return e=!!e},this.z__________GET_PROPS___________=function(){},this.getBrowserPrefix=function(){if(null!==t)return t;var e=["webkit","Moz","ms","O"],n=document.createElement("div");for(var i in e){var r=e[i];if(r+"Transform"in n.style)return r=r.toLowerCase(),t=r,r}return t="",""},this.getImageInsideParentDataByImage=function(e,t,i){var r=e.parent(),o=n.getImageOriginalSize(e),a=n.getImageInsideParentData(r,o.width,o.height,t,i);return a},this.getImageInsideParentData=function(e,t,n,i,r,o,a){if(!r)var r={};var s={};if("undefined"==typeof o)var o=e.width();if("undefined"==typeof a)var a=e.height();r.padding_left&&(o-=r.padding_left),r.padding_right&&(o-=r.padding_right),r.padding_top&&(a-=r.padding_top),r.padding_bottom&&(a-=r.padding_bottom);var l=null,u="100%",c=null,d=null,p="display:block;margin:0px auto;";if(t>0&&n>0){if("down"==i&&t<o&&n<a)u=n,l=t,d=(o-l)/2,c=(a-u)/2;else if("fill"==i){var f=t/n;u=a,l=u*f,l<o?(l=o,u=l/f,d=0,c=Math.round((u-a)/2*-1)):(c=0,d=Math.round((l-o)/2*-1))}else{var f=t/n;u=a,l=u*f,c=0,d=(o-l)/2,"fitvert"!=i&&l>o&&(l=o,u=l/f,d=0,c=(a-u)/2)}l=Math.floor(l),u=Math.floor(u),c=Math.floor(c),d=Math.floor(d),p="position:absolute;"}return r.padding_top&&(c+=r.padding_top),r.padding_left&&(d+=r.padding_left),s.imageWidth=l,s.imageHeight=u,s.imageTop=c,s.imageLeft=d,s.imageRight=d+l,0==c||"100%"==u?s.imageBottom=null:s.imageBottom=c+u,s.style=p,s},this.getElementCenterPosition=function(e,t){var i=e.parent(),r=n.getElementSize(e),o=n.getElementSize(i),a=o.width,s=o.height;t&&void 0!==t.padding_top&&(s-=t.padding_top),t&&void 0!==t.padding_bottom&&(s-=t.padding_bottom),t&&void 0!==t.padding_left&&(a-=t.padding_left),t&&void 0!==t.padding_right&&(a-=t.padding_right);var l={};return l.left=Math.round((a-r.width)/2),l.top=Math.round((s-r.height)/2),t&&void 0!==t.padding_top&&(l.top+=t.padding_top),t&&void 0!==t.padding_left&&(l.left+=t.padding_left),l},this.getElementCenterPoint=function(e,t){if(!t)var t=!1;var i=n.getElementSize(e),r={};return r.x=i.width/2,r.y=i.height/2,1==t&&(r.x+=i.left,r.y+=i.top),r.x=Math.round(r.x),r.y=Math.round(r.y),r},this.getMousePosition=function(e,t){var n={pageX:e.pageX,pageY:e.pageY,clientX:e.clientX,clientY:e.clientY};if(e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(n.pageX=e.originalEvent.touches[0].pageX,n.pageY=e.originalEvent.touches[0].pageY,n.clientX=e.originalEvent.touches[0].clientX,n.clientY=e.originalEvent.touches[0].clientY),t){var i=t.offset();n.mouseX=n.pageX-i.left,n.mouseY=n.pageY-i.top}return n},this.getMouseElementPoint=function(e,t){var i={x:e.pageX,y:e.pageY},r=n.getElementLocalPoint(i,t);return r},this.getElementLocalPoint=function(e,t){var n={},i=t.offset();return n.x=Math.round(e.x-i.left),n.y=Math.round(e.y-i.top),n},this.getImageOriginalSize=function(e,t,n){if("undefined"!=typeof t&&"undefined"!=typeof n)return{width:t,height:n};var i=e[0];if("undefined"==typeof i)throw new Error("getImageOriginalSize error - Image not found");var r={};if("undefined"==typeof i.naturalWidth||0===i.naturalWidth&&0===i.naturalHeight){if("number"==typeof e.data("naturalWidth")){var r={};return r.width=e.data("naturalWidth"),r.height=e.data("naturalHeight"),r}var o=new Image;return o.src=i.src,o.complete?(r.width=o.width,r.height=o.height,e.data("naturalWidth",r.width),e.data("naturalHeight",r.height),r):{width:e.data("backupWidth"),height:e.data("backupHeight")}}return r.width=i.naturalWidth,r.height=i.naturalHeight,r},this.getimageRatio=function(e){var t=n.getImageOriginalSize(e),i=n.getElementSize(e),r=i.width/t.width;return r},this.isImageFitParent=function(e){var t=e.parent(),i=n.getElementSize(e),r=n.getElementSize(t);return i.width<=r.width&&i.height<=r.height},this.getElementSize=function(e){if(void 0===e)throw new Error("Can't get size, empty element");var t=e.position();return t.height=e.outerHeight(),t.width=e.outerWidth(),t.left=Math.round(t.left),t.top=Math.round(t.top),t.right=t.left+t.width,t.bottom=t.top+t.height,t},this.isElementBiggerThenParent=function(e){var t=e.parent(),i=n.getElementSize(e),r=n.getElementSize(t);return i.width>r.width||i.height>r.height},this.isPointInsideElement=function(e,t){var n=e.x>=0&&e.x<t.width;if(0==n)return!1;var i=e.y>=0&&e.y<t.height;return 0!=i},this.getElementRelativePos=function(e,t,i,r){if(!r)var r=e.parent();if("number"==typeof e)var o={width:e,height:e};else var o=n.getElementSize(e);var a=n.getElementSize(r);switch(t){case"top":case"left":t=0,i&&(t+=i);break;case"center":t=Math.round((a.width-o.width)/2),i&&(t+=i);break;case"right":t=a.width-o.width,i&&(t-=i);break;case"middle":t=Math.round((a.height-o.height)/2),i&&(t+=i);break;case"bottom":t=a.height-o.height,i&&(t-=i)}return t},this.z_________SET_ELEMENT_PROPS_______=function(){},this.zoomImageInsideParent=function(e,t,i,r,o,a,s){if(!i)var i=1.2;if(!o)var o="fit";var l,u,c,d,p=i,f=e.parent(),h=n.getElementSize(e),m=n.getImageOriginalSize(e),v=!1,g=0,b=0,y=0,_=0;if(r){var w=n.getMouseElementPoint(r,e);v=n.isPointInsideElement(w,h),y=w.x,_=w.y}else v=!1;if(0==v){var C=n.getElementCenterPoint(e);y=C.x,_=C.y}if(1==t)l=h.height*p,u=h.width*p,0!=y&&(g=-(y*p-y)),0!=_&&(b=-(_*p-_));else{l=h.height/p,u=h.width/p;var E=n.getImageInsideParentData(f,m.width,m.height,o,s);if(u<E.imageWidth)return n.scaleImageFitParent(e,m.width,m.height,o,s),!0;1==v&&(0!=y&&(g=-(y/p-y)),0!=_&&(b=-(_/p-_)))}if(a){var k=1;if(0!=m.width&&(k=u/m.width),k>a)return!1}if(n.setElementSize(e,u,l),0==t&&0==v){var T=n.getElementCenterPosition(e);c=T.left,d=T.top}else c=h.left+g,d=h.top+b;return n.placeElement(e,c,d),!0},this.placeElement=function(e,t,i,r,o,a){if(0==jQuery.isNumeric(t)||0==jQuery.isNumeric(i)){if(!a)var a=e.parent();var s=n.getElementSize(e),l=n.getElementSize(a)}if(0==jQuery.isNumeric(t))switch(t){case"left":t=0,r&&(t+=r);break;case"center":t=Math.round((l.width-s.width)/2),r&&(t+=r);break;case"right":t=l.width-s.width,r&&(t-=r)}if(0==jQuery.isNumeric(i))switch(i){case"top":i=0,o&&(i+=o);break;case"middle":case"center":i=Math.round((l.height-s.height)/2),o&&(i+=o);break;case"bottom":i=l.height-s.height,o&&(i-=o)}var u={position:"absolute",margin:"0px"};null!==t&&(u.left=t),null!==i&&(u.top=i),e.css(u)},this.placeElementInParentCenter=function(e){n.placeElement(e,"center","middle")},this.setElementSizeAndPosition=function(e,t,n,i,r){var o={width:i+"px",height:r+"px",left:t+"px",top:n+"px",position:"absolute",margin:"0px"};e.css(o)},this.setElementSize=function(e,t,n){var i={width:t+"px"};null!==n&&"undefined"!=typeof n&&(i.height=n+"px"),e.css(i)},this.cloneElementSizeAndPos=function(e,t,i,r,o){var a=e.position();if(void 0==a)throw new Error("Can't get size, empty element");i===!0?(a.height=e.outerHeight(),a.width=e.outerWidth()):(a.height=e.height(),a.width=e.width()),a.left=Math.round(a.left),a.top=Math.round(a.top),r&&(a.left+=r),o&&(a.top+=o),n.setElementSizeAndPosition(t,a.left,a.top,a.width,a.height)},this.placeImageInsideParent=function(e,t,i,r,o,a){var s=n.getImageInsideParentData(t,i,r,o,a),l="<img";null!==s.imageWidth&&(l+=" width = '"+s.imageWidth+"'",s.style+="width:"+s.imageWidth+";"),null!=s.imageHeight&&("100%"==s.imageHeight?(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+";"):(l+=" height = '"+s.imageHeight+"'",s.style+="height:"+s.imageHeight+"px;")),null!==s.imageTop&&(s.style+="top:"+s.imageTop+"px;"),null!==s.imageLeft&&(s.style+="left:"+s.imageLeft+"px;"),e=n.escapeDoubleSlash(e),l+=" style='"+s.style+"'",l+=' src="'+e+'"',l+=">",t.html(l);var u=t.children("img");return u},this.scaleImageCoverParent=function(e,t,i){if("number"==typeof t)var r=t,o=i;else var r=t.outerWidth(),o=t.outerHeight();var a=n.getImageOriginalSize(e),s=a.width,l=a.height,u=s/l,c=o,d=c*u,p=0,f=0;d<r?(d=r,c=d/u,f=0,p=Math.round((c-o)/2*-1)):(p=0,f=Math.round((d-r)/2*-1)),d=Math.round(d),c=Math.round(c),e.css({width:d+"px",height:c+"px",left:f+"px",top:p+"px"})},this.scaleImageFitParent=function(e,t,i,r,o){var a=e.parent(),s=n.getImageInsideParentData(a,t,i,r,o),l=!1,u={};return null!==s.imageWidth&&(l=!0,e.removeAttr("width"),u.width=s.imageWidth+"px"),null!=s.imageHeight&&(l=!0,e.removeAttr("height"),u.height=s.imageHeight+"px"),null!==s.imageTop&&(l=!0,u.top=s.imageTop+"px"),null!==s.imageLeft&&(l=!0,u.left=s.imageLeft+"px"),1==l&&(u.position="absolute",u.margin="0px 0px",e.css(u)),s},this.scaleImageByHeight=function(e,t,i,r){var o=n.getImageOriginalSize(e,i,r),a=o.width/o.height,s=Math.round(t*a);t=Math.round(t),n.setElementSize(e,s,t)},this.scaleImageByWidth=function(e,t,i,r){var o=n.getImageOriginalSize(e,i,r),a=o.width/o.height,s=Math.round(t/a);t=Math.round(t),n.setElementSize(e,t,s)},this.scaleImageExactSizeInParent=function(e,t,i,r,o,a){var s=e.parent(),l=n.getElementSize(s);l.width<r&&(r=l.width),l.height<o&&(o=l.height);var u=n.getImageInsideParentData(null,t,i,a,null,r,o),c=r,d=o,p=u.imageLeft,f=u.imageLeft,h=u.imageTop,m=u.imageTop,v=Math.round((l.width-r)/2),g=Math.round((l.height-o)/2),b=u.imageWidth+p+f,y=r-b;0!=y&&(f+=y);var _=u.imageHeight+h+m,y=o-_;0!=y&&(m+=y),e.removeAttr("width"),e.removeAttr("height");var w={position:"absolute",margin:"0px 0px"};w.width=c+"px",w.height=d+"px",w.left=v+"px",w.top=g+"px",w["padding-left"]=p+"px",w["padding-top"]=h+"px",w["padding-right"]=f+"px",w["padding-bottom"]=m+"px",e.css(w);var C={};return C.imageWidth=c,C.imageHeight=d,C},this.showElement=function(e,t,n){e.show().fadeTo(0,1),t&&t.show().fadeTo(0,1),n&&n.show().fadeTo(0,1)},this.z_________GALLERY_RELATED_FUNCTIONS_______=function(){},this.disableButton=function(e,t){if(!t)var t="ug-button-disabled";0==n.isButtonDisabled(e,t)&&e.addClass(t)},this.convertCustomPrefixOptions=function(e,t,n){if(!t)return e;var i={};return jQuery.each(e,function(e,r){if(0===e.indexOf(t+"_"+n+"_")){var o=e.replace(t+"_"+n+"_",n+"_");i[o]=r}else i[e]=r}),i},this.enableButton=function(e,t){if(!t)var t="ug-button-disabled";1==n.isButtonDisabled(e,t)&&e.removeClass(t)},this.isButtonDisabled=function(e,t){if(!t)var t="ug-button-disabled";return!!e.hasClass(t)},this.z_________MATH_FUNCTIONS_______=function(){},this.normalizeSetting=function(e,t,n,i,r,o){if(!o)var o=!1;var a=(r-n)/(i-n);return r=e+(t-e)*a,1==o&&(r<e&&(r=e),r>t&&(r=t)),r},this.getNormalizedValue=function(e,t,n,i,r){var o=(r-e)/(t-e);return r=e+(i-n)*o},this.getDistance=function(e,t,n,i){var r=Math.round(Math.sqrt(Math.abs((n-e)*(n-e)+(i-t)*(i-t))));return r},this.getMiddlePoint=function(e,t,n,i){var r={};return r.x=e+Math.round((n-e)/2),r.y=t+Math.round((i-t)/2),r},this.getNumItemsInSpace=function(e,t,n){var i=Math.floor((e+n)/(t+n));return i},this.getNumItemsInSpaceRound=function(e,t,n){var i=Math.round((e+n)/(t+n));return i},this.getSpaceByNumItems=function(e,t,n){var i=e*t+(e-1)*n;return i},this.getItemSizeInSpace=function(e,t,n){var i=Math.floor((e-(t-1)*n)/t);return i},this.getColX=function(e,t,n){var i=e*(t+n);return i},this.getColByIndex=function(e,t){var n=t%e;return n},this.getColRowByIndex=function(e,t){var n=Math.floor(e/t),i=Math.floor(e%t);return{col:i,row:n}},this.getIndexByRowCol=function(e,t,n){if(e<0)return-1;if(t<0)return-1;var i=e*n+t;return i},this.getPrevRowSameColIndex=function(e,t){var i=n.getColRowByIndex(e,t),r=n.getIndexByRowCol(i.row-1,i.col,t);return r},this.getNextRowSameColIndex=function(e,t){var i=n.getColRowByIndex(e,t),r=n.getIndexByRowCol(i.row+1,i.col,t);return r},this.z_________DATA_FUNCTIONS_______=function(){},this.setGlobalData=function(e,t){jQuery.data(document.body,e,t)},this.getGlobalData=function(e){var t=jQuery.data(document.body,e);return t},this.z_________EVENT_DATA_FUNCTIONS_______=function(){},this.handleScrollTop=function(e){if(0==n.isTouchDevice())return null;var t=n.getStoredEventData(e),r=15,o=15;if(null===t.scrollDir&&(Math.abs(t.diffMouseX)>r?t.scrollDir="hor":Math.abs(t.diffMouseY)>o&&Math.abs(t.diffMouseY)>Math.abs(t.diffMouseX)&&(t.scrollDir="vert",t.scrollStartY=t.lastMouseClientY,t.scrollOrigin=jQuery(document).scrollTop(),i.dataCache[e].scrollStartY=t.lastMouseClientY,i.dataCache[e].scrollOrigin=t.scrollOrigin),i.dataCache[e].scrollDir=t.scrollDir),"vert"!==t.scrollDir)return t.scrollDir;var a=(jQuery(document).scrollTop(),t.scrollOrigin-(t.lastMouseClientY-t.scrollStartY));return a>=0&&jQuery(document).scrollTop(a),t.scrollDir},this.wasVerticalScroll=function(e){var t=n.getStoredEventData(e);return"vert"===t.scrollDir},this.storeEventData=function(e,t,r){var o=n.getMousePosition(e),a=jQuery.now(),s={startTime:a,lastTime:a,startMouseX:o.pageX,startMouseY:o.pageY,lastMouseX:o.pageX,lastMouseY:o.pageY,startMouseClientY:o.clientY,lastMouseClientY:o.clientY,scrollTop:jQuery(document).scrollTop(),scrollDir:null};r&&(s=jQuery.extend(s,r)),i.dataCache[t]=s},this.updateStoredEventData=function(e,t,r){if(!i.dataCache[t])throw new Error("updateEventData error: must have stored cache object");var o=i.dataCache[t],a=n.getMousePosition(e);o.lastTime=jQuery.now(),void 0!==a.pageX&&(o.lastMouseX=a.pageX,o.lastMouseY=a.pageY,o.lastMouseClientY=a.clientY),r&&(o=jQuery.extend(o,r)),i.dataCache[t]=o},this.getStoredEventData=function(e,t){if(!i.dataCache[e])throw new Error("updateEventData error: must have stored cache object");var n=i.dataCache[e];return n.diffMouseX=n.lastMouseX-n.startMouseX,n.diffMouseY=n.lastMouseY-n.startMouseY,n.diffMouseClientY=n.lastMouseClientY-n.startMouseClientY,n.diffTime=n.lastTime-n.startTime,t===!0?(n.startMousePos=n.lastMouseY,n.lastMousePos=n.lastMouseY,n.diffMousePos=n.diffMouseY):(n.startMousePos=n.lastMouseX,n.lastMousePos=n.lastMouseX,n.diffMousePos=n.diffMouseX),n},this.isApproveStoredEventClick=function(e,t){if(!i.dataCache[e])return!0;var r=n.getStoredEventData(e,t),o=Math.abs(r.diffMousePos);return!(r.diffTime>400)&&!(o>30)},this.clearStoredEventData=function(e){i.dataCache[e]=null},this.z_________CHECK_SUPPORT_FUNCTIONS_______=function(){},this.isCanvasExists=function(){var e=jQuery('<canvas width="500" height="500" > </canvas>')[0];return"function"==typeof e.getContext},this.isScrollbarExists=function(){var e=window.innerWidth>document.documentElement.clientWidth;return e},this.isTouchDevice=function(){if(i.isTouchDevice!==-1)return i.isTouchDevice;try{document.createEvent("TouchEvent"),i.isTouchDevice=!0}catch(e){i.isTouchDevice=!1}return i.isTouchDevice},this.isRgbaSupported=function(){if(i.isRgbaSupported!==-1)return i.isRgbaSupported;var e=document.getElementsByTagName("script")[0],t=e.style.color;try{e.style.color="rgba(1,5,13,0.44)"}catch(e){}var n=e.style.color!=t;return e.style.color=t,i.isRgbaSupported=n,n},this.z_________GENERAL_FUNCTIONS_______=function(){},this.checkMinJqueryVersion=function(e){for(var t=jQuery.fn.jquery.split("."),n=e.split("."),i=0,r=t.length;i<r;i++){var o=parseInt(t[i]),a=parseInt(n[i]);if("undefined"==typeof n[i])return!0;if(a>o)return!1;if(o>a)return!0}return!0},this.getCssSizeParam=function(e){return jQuery.isNumeric(e)?e+"px":e},this.convertHexToRGB=function(e,t){var n=e.replace("#","");return n===e?e:(r=parseInt(n.substring(0,2),16),g=parseInt(n.substring(2,4),16),b=parseInt(n.substring(4,6),16),result="rgba("+r+","+g+","+b+","+t+")",result)},this.timestampToString=function(e){var t=new Date(e),n=t.getDate()+"/"+t.getMonth();return n+=" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()+":"+t.getMilliseconds()},this.getArrTouches=function(e){var t=[];return e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches.length>0&&(t=e.originalEvent.touches),t},this.getArrTouchPositions=function(e){for(var t=[],n=0;n<e.length;n++){var i={pageX:e[n].pageX,pageY:e[n].pageY};t.push(i)}return t},this.startTimeDebug=function(){i.starTime=jQuery.now()},this.showTimeDebug=function(){var e=jQuery.now(),t=e-i.starTime;debugLine({"Time Passed":t},!0)},this.initProgressIndicator=function(e,t,i){switch("bar"!=e&&0==n.isCanvasExists()&&(e="bar"),e){case"bar":var r=new UGProgressBar;r.putHidden(i,t);break;default:case"pie":var r=new UGProgressPie;r.putHidden(i,t);break;case"pie2":t.type_fill=!0;var r=new UGProgressPie;r.putHidden(i,t)}return r},this.setButtonMobileReady=function(e){e.on("touchstart",function(e){jQuery(this).addClass("ug-nohover")}),e.on("mousedown touchend",function(e){return e.stopPropagation(),e.stopImmediatePropagation(),!1})},this.registerTheme=function(e){i.arrThemes.push(e)},this.getArrThemes=function(){return i.arrThemes},this.isThemeRegistered=function(e){return jQuery.inArray(e,i.arrThemes)!==-1},this.getFirstRegisteredTheme=function(){if(0==i.arrThemes.length)return"";var e=i.arrThemes[0];return e},this.isTimePassed=function(e,t){if(!t)var t=100;var n=jQuery.now();0==i.timeCache.hasOwnProperty(e)?lastTime=0:lastTime=i.timeCache[e];var r=n-lastTime;return i.timeCache[e]=n,!(r<=t)},this.whenContiniousEventOver=function(e,t,n){if(!n)var n=300;1==i.timeCache.hasOwnProperty(e)&&null!=i.timeCache[e]&&(clearTimeout(i.timeCache[e]),i.timeCache[e]=null),i.timeCache[e]=setTimeout(t,n)},this.validateClickTouchstartEvent=function(e){var t=!0,n=jQuery.now()-i.lastEventTime;return"click"==e&&"touchstart"==i.lastEventType&&n<1e3&&(t=!1),i.lastEventTime=jQuery.now(),i.lastEventType=e,t},this.addClassOnHover=function(e,t){if(!t)var t="ug-button-hover";e.hover(function(){jQuery(this).addClass(t)},function(){jQuery(this).removeClass(t)})},this.destroyButton=function(e){e.off("mouseenter"),e.off("mouseleave"),e.off("click"),e.off("touchstart"),e.off("touchend"),e.off("mousedown")},this.setButtonOnClick=function(e,t){n.setButtonMobileReady(e),e.on("click touchstart",function(e){return objThis=jQuery(this),e.stopPropagation(),e.stopImmediatePropagation(),0==n.validateClickTouchstartEvent(e.type)||void t(objThis,e)})},this.loadJs=function(e,t){t===!0&&(e=location.protocol+"//"+e);var n=document.createElement("script");n.src=e;var i=document.getElementsByTagName("script")[0];i.parentNode.insertBefore(n,i)},this.loadCss=function(e,t){t===!0&&(e=location.protocol+"//"+e);var n=document.createElement("link");n.setAttribute("rel","stylesheet"),n.setAttribute("type","text/css"),n.setAttribute("href",e),document.getElementsByTagName("head")[0].appendChild(n)},this.addEvent=function(e,t,n){"undefined"!=typeof e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)},this.checkImagesLoaded=function(e,t,n){function i(e,i){r++,"function"==typeof n&&setTimeout(function(){n(e,i)}),r==o&&"function"==typeof t&&setTimeout(function(){t()})}var r=0,o=e.length;return 0==o&&t?(t(),!1):void setTimeout(function(){for(var t=0;t<o;t++){var n=e[t];if(void 0!==n.naturalWidth&&0!==n.naturalWidth)i(e[t],!1);else{var r=jQuery("<img/>");r.data("index",t),r.on("load",function(){var t=jQuery(this).data("index");i(e[t],!1)}),r.on("error",function(){var t=jQuery(this).data("index");i(e[t],!0)}),r.attr("src",n.src)}}})},this.waitForWidth=function(e,t){var n=e.width();return 0!=n?(t(),!1):void(i.handle=setInterval(function(){n=e.width(),0!=n&&(clearInterval(i.handle),t())},300))},this.arrayShuffle=function(e){if("object"!=typeof e)return e;for(var t,n,i=e.length;i;t=parseInt(Math.random()*i),n=e[--i],e[i]=e[t],e[t]=n);return e},this.getObjectLength=function(e){var t=0;for(var n in e)t++;return t},this.normalizePercent=function(e){return e<0&&(e=0),e>1&&(e=1),e},this.stripTags=function(e){var t=e.replace(/(<([^>]+)>)/gi,"");return t},this.escapeDoubleSlash=function(e){return e.replace('"','"')},this.htmlentitles=function(e){var t=jQuery("<div/>").text(e).html();return t},this.z_________END_GENERAL_FUNCTIONS_______=function(){}}function UGThumbsGeneral(){function e(e,t,n,i){var r={width:e+"px",height:t+"px"},o={width:e-P.thumbInnerReduce+"px",height:t-P.thumbInnerReduce+"px"},a=".ug-thumb-loader, .ug-thumb-error, .ug-thumb-border-overlay, .ug-thumb-overlay";n?(i!==!0&&n.css(r),n.children(a).css(o)):(C.children(".ug-thumb-wrapper").css(r),C.find(a).css(o))}function t(e,t,n,i){if(!i)var i=!1;T.isFakeFullscreen()&&(i=!0);var r=e.children(".ug-thumb-border-overlay"),o={};o["border-width"]=t+"px",0!=t&&(o["border-color"]=n),i&&i===!0?(r.css(o),0==t?r.hide():r.show()):(0==t?r.stop().fadeOut(S.thumb_transition_duration):r.show().stop().fadeIn(S.thumb_transition_duration),s(r,o))}function n(e,t,n){var i=e.children(".ug-thumb-overlay"),r=S.thumb_transition_duration;n&&n===!0&&(r=0),t?i.stop(!0).fadeTo(r,P.colorOverlayOpacity):i.stop(!0).fadeTo(r,0)}function i(e,t,n){var i=e.children("img.ug-thumb-image"),r=e.children("img.ug-thumb-image-overlay"),o=S.thumb_transition_duration;n&&n===!0&&(o=0),t?r.stop(!0).fadeTo(o,1):(i.fadeTo(0,1),r.stop(!0).fadeTo(o,0))}function r(e,r){if(P.isEffectBorder&&t(e,S.thumb_selected_border_width,S.thumb_selected_border_color,r),P.isEffectOverlay){var o=1==S.thumb_overlay_reverse;n(e,o,r)}P.isEffectImage&&i(e,!1,r),k.trigger(E.events.SETSELECTEDSTYLE,e)}function o(e){var t=E.getItemByThumb(e);return t.isLoaded=!0,t.isThumbImageLoaded=!1,1==P.customThumbs?(k.trigger(E.events.IMAGELOADERROR,e),!0):(e.children(".ug-thumb-loader").hide(),void e.children(".ug-thumb-error").show())}function a(){if(S.thumb_round_corners_radius<=0)return!1;var e={"border-radius":S.thumb_round_corners_radius+"px"};C.find(".ug-thumb-wrapper, .ug-thumb-wrapper .ug-thumb-border-overlay").css(e)}function s(e,t){e.stop(!0).animate(t,{duration:S.thumb_transition_duration,easing:S.thumb_transition_easing,queue:!1})}function l(e){1==p(e)?r(e,!0,"redraw"):E.setThumbNormalStyle(e,!0,"redraw")}function u(t,n,i){if(1==S.thumb_fixed_size)x.scaleImageCoverParent(n,t);else{"height"==S.thumb_resize_by?x.scaleImageByHeight(n,S.thumb_height):x.scaleImageByWidth(n,S.thumb_width);var r=x.getElementSize(n);x.placeElement(n,0,0),e(r.width,r.height,t)}t.children(".ug-thumb-loader").hide(),n.show(),0==S.thumb_image_overlay_effect?n.fadeTo(0,1):(1==S.thumb_image_overlay_effect&&c(n),n.fadeTo(0,0),l(t)),k.trigger(E.events.AFTERPLACEIMAGE,t)}function c(e){var t=e.siblings(".ug-thumb-image-overlay");if(0==t.length)return!1;var n=x.getElementSize(e),i={width:n.width+"px",height:n.height+"px",left:n.left+"px",top:n.top+"px"};t.css(i),0==P.customThumbs&&t.fadeTo(0,1)}function d(){var e="",t=S.thumb_image_overlay_type.split(",");for(var n in t){var i=t[n];switch(i){case"bw":e+=" ug-bw-effect";break;case"blur":e+=" ug-blur-effect";break;case"sepia":e+=" ug-sepia-effect"}}return e}function p(e){return!!e.hasClass("ug-thumb-selected")}function f(t,n){n=jQuery(n);var i=(E.getItemByThumb(n),x.getElementSize(n));e(i.width,i.height,n,!0),l(n)}function h(e){return 1==P.touchEnabled?(objThumbs.off("mouseenter").off("mouseleave"),!0):void(0==p(e)&&E.setThumbOverStyle(e))}function m(e){return 1==P.touchEnabled||void(0==p(e)&&E.setThumbNormalStyle(e,!1))}function v(e,t){if(!t)var t=!1;var n=jQuery(e),i=n.parents(".ug-thumb-wrapper");return 0!=i.parent().length&&(objItem=E.getItemByThumb(i),(1!=objItem.isLoaded||t!==!1)&&(E.triggerImageLoadedEvent(i,n),void(1==P.customThumbs?k.trigger(E.events.PLACEIMAGE,[i,n]):u(i,n,objItem))))}function g(e,t,n){objItem=E.getItemByThumb(t),objItem.isLoaded=!0,objItem.isThumbImageLoaded=!0;var i=x.getImageOriginalSize(n);objItem.thumbWidth=i.width,objItem.thumbHeight=i.height,objItem.thumbRatioByWidth=i.width/i.height,objItem.thumbRatioByHeight=i.height/i.width}var b,y,_,w,C,E=this,k=jQuery(E),T=new UniteGalleryMain,x=new UGFunctions;this.events={SETOVERSTYLE:"thumbmouseover",SETNORMALSTYLE:"thumbmouseout",SETSELECTEDSTYLE:"thumbsetselected",PLACEIMAGE:"thumbplaceimage",AFTERPLACEIMAGE:"thumb_after_place_image",IMAGELOADERROR:"thumbimageloaderror",THUMB_IMAGE_LOADED:"thumb_image_loaded"};var S={thumb_width:88,thumb_height:50,thumb_fixed_size:!0,thumb_resize_by:"height",thumb_border_effect:!0,thumb_border_width:0,thumb_border_color:"#000000",thumb_over_border_width:0,thumb_over_border_color:"#d9d9d9",thumb_selected_border_width:1,thumb_selected_border_color:"#d9d9d9",thumb_round_corners_radius:0,thumb_color_overlay_effect:!0,thumb_overlay_color:"#000000",thumb_overlay_opacity:.4,thumb_overlay_reverse:!1,thumb_image_overlay_effect:!1,thumb_image_overlay_type:"bw",thumb_transition_duration:200,thumb_transition_easing:"easeOutQuad",thumb_show_loader:!0,thumb_loader_type:"dark",thumb_wrapper_as_link:!1,thumb_link_newpage:!1},P={touchEnabled:!1,num_thumbs_checking:0,customThumbs:!1,funcSetCustomThumbHtml:null,isEffectBorder:!1,isEffectOverlay:!1,isEffectImage:!1,colorOverlayOpacity:1,thumbInnerReduce:0,allowOnResize:!0},O={timeout_thumb_check:100,thumb_max_check_times:600,eventSizeChange:"thumb_size_change"};this.init=function(e,t){y=e.getObjects(),T=e,b=jQuery(e),_=y.g_objWrapper,w=y.g_arrItems,S=jQuery.extend(S,t),P.isEffectBorder=S.thumb_border_effect,P.isEffectOverlay=S.thumb_color_overlay_effect,P.isEffectImage=S.thumb_image_overlay_effect},this._____________EXTERNAL_SETTERS__________=function(){},this.setHtmlThumbs=function(e){C=e;var t=T.getNumItems();if(1==P.isEffectImage)var n=d();for(var i=0;i<t;i++){var r=w[i],o="";0==P.customThumbs&&(o=" ug-thumb-generated");var a=r.index+1,s="style='z-index:"+a+";'",l="<div class='ug-thumb-wrapper"+o+"' "+s+"></div>";if(1==S.thumb_wrapper_as_link){var u=r.link;""==r.link&&(u="javascript:void(0)");var c="";1==S.thumb_link_newpage&&r.link&&(c=" target='_blank'");var l="<a href='"+u+"'"+c+" class='ug-thumb-wrapper"+o+"'></a>"}var p=jQuery(l),f=r.objThumbImage;if(0==P.customThumbs){if(1==S.thumb_show_loader&&f){var h="ug-thumb-loader-dark";"bright"==S.thumb_loader_type&&(h="ug-thumb-loader-bright"),p.append("<div class='ug-thumb-loader "+h+"'></div>"),p.append("<div class='ug-thumb-error' style='display:none'></div>")}if(f){if(f.addClass("ug-thumb-image"),1==S.thumb_image_overlay_effect){var m=f.clone().appendTo(p);m.addClass("ug-thumb-image-overlay "+n).removeClass("ug-thumb-image"),m.fadeTo(0,0),r.objImageOverlay=m}p.append(f)}}P.isEffectBorder&&p.append("<div class='ug-thumb-border-overlay'></div>"),P.isEffectOverlay&&p.append("<div class='ug-thumb-overlay'></div>"),C.append(p),P.customThumbs&&P.funcSetCustomThumbHtml(p,r),w[i].objThumbWrapper=p}},this.setThumbNormalStyle=function(e,r,o){if(1==P.customThumbs&&e.removeClass("ug-thumb-over"),P.isEffectBorder&&t(e,S.thumb_border_width,S.thumb_border_color,r),P.isEffectOverlay){var a=1!=S.thumb_overlay_reverse;n(e,a,r)}P.isEffectImage&&i(e,!0,r),k.trigger(E.events.SETNORMALSTYLE,e)},this.setThumbOverStyle=function(e){if(1==P.customThumbs&&e.addClass("ug-thumb-over"),P.isEffectBorder&&t(e,S.thumb_over_border_width,S.thumb_over_border_color),P.isEffectOverlay){var r=1==S.thumb_overlay_reverse;n(e,r)}1==P.isEffectImage&&i(e,!1),k.trigger(E.events.SETOVERSTYLE,e)},this.setHtmlProperties=function(){if(0==P.customThumbs){1==S.thumb_fixed_size&&e(S.thumb_width,S.thumb_height),a()}if(C.children(".ug-thumb-wrapper").each(function(){var e=jQuery(this);l(e)}),P.isEffectOverlay&&S.thumb_overlay_color){var t={};if(x.isRgbaSupported()){var n=x.convertHexToRGB(S.thumb_overlay_color,S.thumb_overlay_opacity);t["background-color"]=n}else t["background-color"]=S.thumb_overlay_color,P.colorOverlayOpacity=S.thumb_overlay_opacity;C.find(".ug-thumb-wrapper .ug-thumb-overlay").css(t)}},this.setThumbSelected=function(e){return 1==P.customThumbs&&e.removeClass("ug-thumb-over"),1==p(e)||(e.addClass("ug-thumb-selected"),void r(e))},this.setThumbUnselected=function(e){e.removeClass("ug-thumb-selected"),E.setThumbNormalStyle(e,!1,"set unselected")},this.setOptions=function(e){S=jQuery.extend(S,e)},this.setThumbInnerReduce=function(e){P.thumbInnerReduce=e},this.setCustomThumbs=function(e,t,n){if(P.customThumbs=!0,"function"!=typeof e)throw new Error("The argument should be function");P.funcSetCustomThumbHtml=e,jQuery.inArray("overlay",t)==-1&&(P.isEffectOverlay=!1),jQuery.inArray("border",t)==-1&&(P.isEffectBorder=!1),P.isEffectImage=!1,n&&n.allow_onresize===!1&&(P.allowOnResize=!1)},this._____________EXTERNAL_GETTERS__________=function(){},this.getOptions=function(){return S},this.getNumThumbs=function(){var e=w.length;return e},this.getThumbImage=function(e){var t=e.find(".ug-thumb-image");return t},this.getThumbByIndex=function(e){var t=E.getThumbs();if(e>=t.length||e<0)throw new Error("Wrong thumb index");var n=jQuery(t[e]);return n},this.getThumbs=function(){return C.children(".ug-thumb-wrapper")},this.getItemByThumb=function(e){var t=e.data("index");void 0===t&&(t=e.index());var n=w[t];return n},this.isThumbLoaded=function(e){var t=E.getItemByThumb(e);return t.isLoaded},this.getGlobalThumbSize=function(){var e={width:S.thumb_width,height:S.thumb_height};return e},this._____________EXTERNAL_OTHERS__________=function(){},this.initEvents=function(){var e=C.find(".ug-thumb-wrapper");e.on("touchstart",function(){P.touchEnabled=!0,e.off("mouseenter").off("mouseleave")}),1==P.allowOnResize&&_.on(O.eventSizeChange,f),e.hover(function(e){var t=jQuery(this);h(t)},function(e){var t=jQuery(this);m(t)}),k.on(E.events.THUMB_IMAGE_LOADED,g)},this.destroy=function(){var e=C.find(".ug-thumb-wrapper");e.off("touchstart"),_.off(O.eventSizeChange),e.off("mouseenter"),e.off("mouseleave"),k.off(E.events.THUMB_IMAGE_LOADED)},this.loadThumbsImages=function(){var e=C.find(".ug-thumb-image");x.checkImagesLoaded(e,null,function(e,t){if(0==t)v(e,!0);else{var n=jQuery(e).parent();o(n)}})},this.triggerImageLoadedEvent=function(e,t){k.trigger(E.events.THUMB_IMAGE_LOADED,[e,t])},this.hideThumbs=function(){C.find(".ug-thumb-wrapper").hide()}}function UGTiles(){function e(e,n){g_objects=e.getObjects(),re=e,Q=jQuery(e),X=g_objects.g_objWrapper,Z=g_objects.g_arrItems,ue=jQuery.extend(ue,n),t(),ae.init(e,ue),se=ae.getObjThumbs()}function t(){ue.tiles_min_columns<1&&(ue.tiles_min_columns=1),0!=ue.tiles_max_columns&&ue.tiles_max_columns<ue.tiles_min_columns&&(ue.tiles_max_columns=ue.tiles_min_columns)}function n(e){if(!e)var e=X;
J=e;var t=ue.tiles_type;e.addClass("ug-tiletype-"+t),ae.setHtml(e),e.children(".ug-thumb-wrapper").hide()}function i(){if(J.addClass("ug-tiles-rest-mode"),ce.isTransInited=!0,1==ue.tiles_enable_transition){J.addClass("ug-tiles-transit");var e=ae.getOptions();1==e.tile_enable_image_effect&&0==e.tile_image_effect_reverse&&J.addClass("ug-tiles-transit-overlays"),ce.isTransActive=!0}}function r(){return oe.getElementSize(J).width}function o(){return 0!=ce.isTransInited&&(J.addClass("ug-tiles-transition-active"),J.removeClass("ug-tiles-rest-mode"),0!=ce.isTransActive&&void ae.disableEvents())}function a(){return 0!=ce.isTransInited&&(J.removeClass("ug-tiles-transition-active"),void J.addClass("ug-tiles-rest-mode"))}function s(){1==ce.isTransActive?(setTimeout(function(){ae.enableEvents(),ae.triggerSizeChangeEventAllTiles(),a()},800),ce.handle&&clearTimeout(ce.handle),ce.handle=setTimeout(function(){a(),ae.triggerSizeChangeEventAllTiles(),ce.handle=null},2e3)):(ae.triggerSizeChangeEventAllTiles(),a())}function l(){le.colWidth=(le.availWidth-le.colGap*(le.numCols-1))/le.numCols,le.colWidth=Math.floor(le.colWidth),le.totalWidth=oe.getSpaceByNumItems(le.numCols,le.colWidth,le.colGap)}function u(){if(le.colWidth=ue.tiles_col_width,le.minCols=ue.tiles_min_columns,le.maxCols=ue.tiles_max_columns,0==re.isMobileMode()?le.colGap=ue.tiles_space_between_cols:le.colGap=ue.tiles_space_between_cols_mobile,le.galleryWidth=r(),le.availWidth=le.galleryWidth,1==ue.tiles_include_padding&&(le.availWidth=le.galleryWidth-2*le.colGap),1==ue.tiles_exact_width)le.numCols=oe.getNumItemsInSpace(le.availWidth,le.colWidth,le.colGap),le.maxCols>0&&le.numCols>le.maxCols&&(le.numCols=le.maxCols),le.numCols<le.minCols?(le.numCols=le.minCols,l()):le.totalWidth=le.numCols*(le.colWidth+le.colGap)-le.colGap;else{var e=oe.getNumItemsInSpaceRound(le.availWidth,le.colWidth,le.colGap);e<le.minCols?e=le.minCols:0!=le.maxCols&&e>le.maxCols&&(e=le.maxCols),le.numCols=e,l()}switch(ue.tiles_align){case"center":default:le.addX=Math.round((le.galleryWidth-le.totalWidth)/2);break;case"left":le.addX=0;break;case"right":le.addX=le.galleryWidth-le.totalWidth}for(le.maxColHeight=0,le.arrPosx=[],col=0;col<le.numCols;col++){var t=oe.getColX(col,le.colWidth,le.colGap);le.arrPosx[col]=t+le.addX}le.colHeights=[0]}function c(){var e=0,t=999999999;for(col=0;col<le.numCols;col++){if(void 0==le.colHeights[col]||0==le.colHeights[col])return col;le.colHeights[col]<t&&(e=col,t=le.colHeights[col])}return e}function d(e,t,n,i){if(null===i||"undefined"==typeof i)var i=c();var r=0;void 0!==le.colHeights[i]&&(r=le.colHeights[i]);var o=ae.getTileHeightByWidth(le.colWidth,e,"placeTile");if(null===o){if(1==ue.tiles_enable_transition)throw new Error("Can't know tile height, please turn off transition");var a=oe.getElementSize(e);o=a.height}var s=le.arrPosx[i];oe.placeElement(e,s,r);var l=r+o;le.colHeights[i]=l+le.colGap,le.maxColHeight<l&&(le.maxColHeight=l),1==t&&e.show().fadeTo(0,1),1==n&&J.height(le.maxColHeight)}function p(e){e||(e=!1),u();var t=se.getThumbs();o(),ae.resizeAllTiles(le.colWidth,ae.resizemode.VISIBLE_ELEMENTS);for(var n=0;n<t.length;n++){var i=jQuery(t[n]),r=void 0;1==ue.tiles_keep_order&&(r=oe.getColByIndex(le.numCols,n)),d(i,e,!1,r)}s();var a=J.height();1==ce.isTransActive&&a>le.maxColHeight?setTimeout(function(){J.height(le.maxColHeight)},700):J.height(le.maxColHeight)}function f(e){var t=e.index(),n=re.getItem(t);if(n.ordered_placed===!0)return!1;var i=oe.getPrevRowSameColIndex(t,le.numCols);if(i<0)return!0;var r=re.getItem(i);return r.ordered_placed===!0}function h(e,t){if(t!==!0){var n=f(e);if(0==n)return!1}var i=e.index(),r=oe.getColByIndex(le.numCols,i),o=re.getItem(i);ae.resizeTile(e,le.colWidth),d(e,!0,!0,r),o.ordered_placed=!0;var a=re.getNumItems(),s=oe.getNextRowSameColIndex(i,le.numCols);if(s>=a)return!1;var l=se.getThumbByIndex(s),u=re.getItem(s);se.isThumbLoaded(l);se.isThumbLoaded(l)&&!u.ordered_placed&&h(l,!0)}function m(e,t){if(1==t)return!1;e=jQuery(e);var n=jQuery(e).parent();se.triggerImageLoadedEvent(n,e),1==ue.tiles_keep_order?h(n):(ae.resizeTile(n,le.colWidth),d(n,!0,!0))}function v(){var e=se.getThumbs();ce.isAllLoaded=!1,u();var t=Math.abs(le.galleryWidth-le.totalWidth);if(1==ue.tiles_set_initial_height&&0==oe.isScrollbarExists()&&t<25){var n=(e.length,Math.ceil(e.length/le.numCols)),r=n*ue.tiles_col_width*.75;J.height(r),u()}e.fadeTo(0,0);var o=jQuery(J).find("img.ug-thumb-image");if(1==ce.isFixedMode)ie.trigger(ne.events.TILES_FIRST_PLACED),p(!0),oe.checkImagesLoaded(o,function(){i(),ie.trigger(ne.events.ALL_TILES_LOADED)});else{var a=le.numCols,s=le.galleryWidth,l=!1;oe.checkImagesLoaded(o,function(){u(),a==le.numCols&&s==le.galleryWidth||p(!1),i(),ie.trigger(ne.events.ALL_TILES_LOADED)},function(e,t){0==l&&ie.trigger(ne.events.TILES_FIRST_PLACED),l=!0,m(e,t)})}}function g(){var e=r(),t=se.getThumbs(),n=ue.tiles_justified_row_height,i=[],o=0,a=ue.tiles_justified_space_between,s=t.length;jQuery.each(t,function(e,t){t=jQuery(t);var r=se.getItemByThumb(t),a=r.thumbWidth,s=r.thumbHeight;s!==n&&(a=Math.floor(r.thumbRatioByWidth*n)),i[e]=a,o+=a});var l=Math.ceil(o/e);l>s&&(l=s);var u=o/l,c=[],d=0,p=[],f=[],h=0,m=0;jQuery.each(t,function(e,t){var n=i[e];h+n/2>(m+1)*u&&(p[c.length]=d,c.push(f),f=[],d=0,m++),h+=n,d+=n,f.push(t)}),p[c.length]=d,c.push(f);var v=[],g=[],b=0;jQuery.each(c,function(t,r){var o=(r.length,p[t]),s=(r.length-1)*a,l=(e-s)/o,u=Math.round(n*l);b+=u,t>0&&(b+=a),g.push(u);var c=u/n,d=[],f=s;jQuery.each(r,function(e,t){var n=jQuery(t),r=n.index(),o=i[r],a=Math.round(o*c);d[e]=a,f+=a});var h=f-e;jQuery.each(d,function(e,t){return 0!=h&&(h<0?(d[e]=t+1,h++):(d[e]=t-1,h--),void(e==d.length-1&&0!=h&&(d[e]-=h)))}),v[t]=d});var y={arrRows:c,arrRowWidths:v,arrRowHeights:g,gap:a,totalHeight:b};return y}function b(e){if(!e)var e=!1;var t=r(),n=g();J.height(n.totalHeight);var i=r();i!=t&&(n=g()),o();var a=0,l=0;jQuery.each(n.arrRows,function(t,i){var r=n.arrRowWidths[t],o=n.arrRowHeights[t],s=0;jQuery.each(i,function(t,i){var u=jQuery(i),c=o,d=r[t];ae.resizeTile(u,d,c,ae.resizemode.VISIBLE_ELEMENTS),oe.placeElement(u,s,a),s+=d,s>l&&(l=s),s+=n.gap,1==e&&jQuery(i).show()}),a+=o+n.gap}),s()}function y(){var e=jQuery(X).find("img.ug-thumb-image"),t=se.getThumbs();ce.isAllLoaded=!1,t.fadeTo(0,0),oe.checkImagesLoaded(e,function(){setTimeout(function(){b(!0),t.fadeTo(0,1),ie.trigger(ne.events.TILES_FIRST_PLACED),i(),ie.trigger(ne.events.ALL_TILES_LOADED)})},function(e,t){e=jQuery(e);var n=jQuery(e).parent();se.triggerImageLoadedEvent(n,e)})}function _(){var e=jQuery(X).find("img.ug-thumb-image"),t=se.getThumbs();ce.isAllLoaded=!1,t.fadeTo(0,0),oe.checkImagesLoaded(e,function(){1==re.isMobileMode()?p(!0):C(!0),ie.trigger(ne.events.TILES_FIRST_PLACED),i(),ie.trigger(ne.events.ALL_TILES_LOADED)},function(e,t){e=jQuery(e);var n=jQuery(e).parent();se.triggerImageLoadedEvent(n,e)})}function w(){var e=r();de.galleryWidth=e,ee={},de.colWidth=ue.tiles_nested_col_width,de.optimalTileWidth=ue.tiles_nested_optimal_tile_width,de.currentGap=ue.tiles_space_between_cols,1==re.isMobileMode()&&(de.currentGap=ue.tiles_space_between_cols_mobile),null==de.colWidth?de.colWidth=Math.floor(de.optimalTileWidth/de.nestedOptimalCols):de.optimalTileWidth>de.colWidth?de.nestedOptimalCols=Math.ceil(de.optimalTileWidth/de.colWidth):de.nestedOptimalCols=1,de.maxColumns=oe.getNumItemsInSpace(e,de.colWidth,de.currentGap),de.colWidth=oe.getItemSizeInSpace(e,de.maxColumns,de.currentGap),de.gridY=0,te=[];var t=se.getThumbs();switch(t.each(function(){var e=jQuery(this),t=E(e);te.push(t)}),de.optimalTileWidth>de.colWidth?de.nestedOptimalCols=Math.ceil(de.optimalTileWidth/de.colWidth):de.nestedOptimalCols=1,de.totalWidth=de.maxColumns*(de.colWidth+de.currentGap)-de.currentGap,ue.tiles_align){case"center":default:de.addX=Math.round((de.galleryWidth-de.totalWidth)/2);break;case"left":de.addX=0;break;case"right":de.addX=de.galleryWidth-de.totalWidth}de.maxGridY=0}function C(e){var t=r();w(),x();var n=de.maxGridY*(de.colWidth+de.currentGap)-de.currentGap;J.height(n);var i=r();i!=t&&(w(),x()),0==ue.tiles_nested_debug&&V(e)}function E(e){var t,n,i={},r=de.colWidth,o=de.currentGap,a=ae.getTileImageSize(e),s=e.index(),l=Math.ceil(k(s)*(1*de.nestedOptimalCols/3)+2*de.nestedOptimalCols/3),u=a.width,c=a.height,d=u/c;return u>c?(t=l,n=Math.round(t/d),0==n&&(n=1)):(n=l,t=Math.round(n*d),0==t&&(t=1)),i.dimWidth=t,i.dimHeight=n,i.width=t*r+o*(t-1),i.height=n*r+o*(n-1),i.imgWidth=u,i.imgHeight=c,i.left=0,i.top=0,i}function k(e){return Math.abs(Math.sin(Math.abs(1e3*Math.sin(e))))}function T(e,t){if(0==t){for(var n=de.currentItem;n<te.length;n++)S(n,!0);de.currentItem=te.length-1}else S(de.currentItem,!0);for(var n=0;n<=de.currentItem;n++)G(n,!0);de.currentItem++}function x(e){if(1==ue.tiles_nested_debug)return"undefined"==typeof e&&(e=!0),T(!0,e),!1;for(var t=0;t<te.length;t++)S(t,!0)}function S(e,t){if(!t)var t=!1;de.maxColHeight=0;for(var n=oe.getObjectLength(ee),i=de.gridY;i<=n+1;i++){for(var r=0;r<de.maxColumns;r++)if(0==U(de.gridY)||0==z(de.gridY,r)){var o=B(r);return void P(e,o,r)}de.gridY++}}function P(e,t,n){var i=jQuery.extend(!0,{},te[e]),r=i.dimWidth,o=t-i.dimWidth,a=de.nestedOptimalCols,s=t<=i.dimWidth||o<=.33*a||t<=a;if(s)L(e,t);else if(o<=a)a>=4?1==F(Math.floor(t/2),n)?L(e,Math.floor(t/2)+1):L(e,Math.floor(t/2)):L(objImage,t);else if(1==F(r,n))switch(r>=a){case!0:L(e,r-1);break;case!1:L(e,r+1)}i=jQuery.extend(!0,{},te[e]);var l=N(e,i.dimWidth,n);if(de.columnsValueToEnableHeightResize<=l[0]&&de.maxColumns>=2*de.nestedOptimalCols){var u=j(n,i),c=D(e,u.newHeight,!0);te[e].dimHeight=c.dimHeight;var d=A(l,c.dimWidth,n),p=O(d),f=!1;p>=2&&(f=!0),u.newHeight>=i.dimHeight&&(i=D(e,u.newHeight,!0));var h=I(u.idToResize,u.newHeight,i.dimHeight);i.top=de.gridY,i.left=n,h.push({tileID:e,sizes:i});var m=R(h),v=R(d);return m<v||1==f?void M(h):void M(d)}i.left=n,i.top=de.gridY,te[e]=i,$(e,i,n,de.gridY),de.maxGridY=i.top+i.dimHeight}function O(e){for(var t=0,n=0,i=0;i<e.length-1;i++){var r=e[i].sizes,o=-1,a=-1;U(r.top+r.dimHeight)&&de.maxColumns>r.left+r.dimWidth&&(o=ee[r.top+r.dimHeight-1][r.left+r.dimWidth],a=ee[r.top+r.dimHeight][r.left+r.dimWidth]),o!=a&&t++}for(var i=0;i<e.length-1;i++){var r=e[i].sizes,o=-1,a=-1;U(r.top+r.dimHeight)&&r.left-1>=0&&(o=ee[r.top+r.dimHeight-1][r.left-1],a=ee[r.top+r.dimHeight][r.left-1]),o!=a&&n++}return Math.max(n,t)}function I(e,t,n){var i=te[e],r=i.dimHeight,o=(i.dimWidth,i.left),a=i.top,s=(parseInt(a/(de.colWidth+de.currentGap)),parseInt(o/(de.colWidth+de.currentGap)),r-t+n),l=D(e,s,!0),u=[];return u.push({tileID:e,sizes:l}),u}function M(e){for(var t=0;t<e.length;t++){var n=e[t].sizes,i=e[t].tileID;te[i]=jQuery.extend(!0,{},n),$(i,n,n.left,n.top)}}function A(e,t){for(var n=0,i=0,r=[],o=0,a=0,s=0;s<e[1].length;s++){var l=e[1][s],u=te[e[1][s]];if(i+=u.dimHeight,0!=s)n+=u.dimHeight,r.push([l,u.dimHeight]);else{var c=L(l,t,!0);n+=c.dimHeight,r.push([e[1][s],c.dimHeight])}}o=u.left,a=u.top;for(var d=i,p=[],s=r.length-1;s>=0;s--){var f,l=r[s][0];0!=s?(f=Math.max(Math.round(1*i/3),Math.floor(r[s][1]*(i/n))),d-=f,c=D(l,f,!0),c.left=o,c.top=a,p.push({tileID:l,sizes:c}),a+=c.dimHeight):(f=d,c=D(l,f,!0),c.left=o,c.top=a,p.push({tileID:l,sizes:c}))}return p}function N(e,t,n){var i=de.gridY-1,r=0,o=0,a=1,s=[],l=[];if(s.push(e),i>=0){for(o=0;i>=0;){if(r=ee[i][n],"undefined"!=typeof ee[i][n-1]&&ee[i][n-1]==ee[i][n]||"undefined"!=typeof ee[i][n+t]&&ee[i][n+t-1]==ee[i][n+t]||ee[i][n]!=ee[i][n+t-1])return l.push(a),l.push(s),l;o!=r&&(a++,s.push(r)),i--,o=r}return l.push(a),l.push(s),l}return[0,[]]}function j(e,t){var n=0,i=0,r=t.dimWidth,o=t.dimHeight,a=0,s=0,l=jQuery.map(ee,function(e,t){return[e]});if("undefined"==typeof l[de.gridY]||"undefined"==typeof l[de.gridY][e-1])i=0;else for(var u=0;;){if("undefined"==typeof ee[de.gridY+u]||ee[de.gridY+u][e-1]==-1)break;a=ee[de.gridY+u][e-2],u++,i++}if("undefined"==typeof l[de.gridY]||"undefined"==typeof l[de.gridY][e+r])n=0;else for(u=0;;){if("undefined"==typeof ee[de.gridY+u]||ee[de.gridY+u][e+r]==-1)break;s=ee[de.gridY+u][e+r+1],u++,n++}var c=0,d=0;Math.abs(o-i)<Math.abs(o-n)&&0!=i?(c=i,d=a):0!=n?(c=n,d=s):c=o;var p={newHeight:c,idToResize:d};return p}function L(e,t,n){n||(n=!1);var i=de.colWidth,r=de.currentGap,o=te[e],a=o.imgWidth,s=o.imgHeight,l=a/s;if(dimWidth=t,dimHeight=Math.round(dimWidth/l),1==n){var u=jQuery.extend(!0,{},o);return u.dimWidth=dimWidth,u.dimHeight=dimHeight,u.width=dimWidth*i+r*(dimWidth-1),u.height=dimHeight*i+r*(dimHeight-1),u}o.dimWidth=dimWidth,o.dimHeight=dimHeight,o.width=dimWidth*i+r*(dimWidth-1),o.height=dimHeight*i+r*(dimHeight-1)}function D(e,t,n){n||(n=!1);var i=te[e],r=i.dimWidth,o=de.colWidth,a=de.currentGap;if(1==n){var s=jQuery.extend(!0,{},i);return s.dimHeight=t,s.width=r*o+a*(r-1),s.height=t*o+a*(t-1),s}i.dimHeight=t,i.width=r*o+a*(r-1),i.height=t*o+a*(t-1)}function R(e){for(var t=0,n=0,i=0;i<e.length;i++){var r=te[e[i].tileID];if(0==r.dimHeight||0==r.height)return;resizeVal=r.dimWidth/r.dimHeight/(r.imgWidth/r.imgHeight),resizeVal<1&&(resizeVal=1/resizeVal),t+=resizeVal,n++}return t/n}function F(e,t){var n=de.gridY-1;return!(n<=0||0==U(n))&&ee[n][t+e-1]!=ee[n][t+e]}function B(e){var t=e,n=0;if(1==U(de.gridY))for(;0==z(de.gridY,t);)n++,t++;else n=de.maxColumns;return n}function U(e){return"undefined"!=typeof ee[e]}function $(e,t,n,i){for(var r=0;r<t.dimHeight;r++)for(var o=0;o<t.dimWidth;o++)0==U(i+r)&&H(i+r),W(i+r,n+o,e)}function H(e){ee[e]=new Object;for(var t=0;t<de.maxColumns;t++)ee[e][t]=-1}function z(e,t){return ee[e][t]!=-1}function W(e,t,n){ee[e][t]=n}function V(e){if(!e)var e=!1;o();for(var t=0;t<te.length;t++)G(t,e);J.height(de.maxColHeight),s()}function G(e,t){var n=se.getThumbByIndex(e),i=te[e],r=i.top*(de.colWidth+de.currentGap),o=de.addX+i.left*(de.colWidth+de.currentGap);ae.resizeTile(n,i.width,i.height,ae.resizemode.VISIBLE_ELEMENTS),oe.placeElement(n,o,r),r+i.height>de.maxColHeight&&(de.maxColHeight=r+i.height),1==t&&n.fadeTo(0,1)}function q(){if(1==ce.isFirstTimeRun)return!0;if(0==ce.isAllLoaded)return!1;switch(ue.tiles_type){case"columns":p(!1);break;case"justified":b(!1);break;case"nested":var e=re.isMobileMode();1==e?p(!1):C(!1)}}function K(){ie.on(ne.events.ALL_TILES_LOADED,function(){return 1==ce.isAllLoaded||(ce.isAllLoaded=!0,void Q.trigger(re.events.LOAD))}),Q.on(re.events.SIZE_CHANGE,q),ae.initEvents()}function Y(){switch(X.children(".ug-tile").show(),1==ce.isFirstTimeRun&&K(),ae.run(),ue.tiles_type){default:case"columns":v();break;case"justified":y();break;case"nested":_()}ce.isFirstTimeRun=!1}var Q,X,J,Z,ee,te,ne=this,ie=jQuery(this),re=new UniteGalleryMain,oe=new UGFunctions,ae=new UGTileDesign,se=new UGThumbsGeneral,le={},ue={tiles_type:"columns",tiles_col_width:250,tiles_align:"center",tiles_exact_width:!1,tiles_space_between_cols:3,tiles_space_between_cols_mobile:3,tiles_include_padding:!0,tiles_min_columns:2,tiles_max_columns:0,tiles_keep_order:!1,tiles_set_initial_height:!0,tiles_justified_row_height:150,tiles_justified_space_between:3,tiles_nested_optimal_tile_width:250,tiles_nested_col_width:null,tiles_nested_debug:!1,tiles_enable_transition:!0};this.events={THUMB_SIZE_CHANGE:"thumb_size_change",TILES_FIRST_PLACED:"tiles_first_placed",ALL_TILES_LOADED:"all_tiles_loaded"};var ce={isFixedMode:!1,isFirstTimeRun:!0,handle:null,isTransActive:!1,isTransInited:!1,isAllLoaded:!1},de={colWidth:null,nestedOptimalCols:5,gridY:0,maxColumns:0,columnsValueToEnableHeightResize:3,resizeLeftRightToColumn:!0,currentItem:0,currentGap:null,optimalTileWidth:null,maxGridY:0};this.destroy=function(){Q.off(re.events.SIZE_CHANGE),ae.destroy()},this.setFixedSizeMode=function(){ce.isFixedMode=!0,ae.setFixedMode()},this.init=function(t,n){e(t,n)},this.setHtml=function(e){n(e)},this.getObjTileDesign=function(){return ae},this.run=function(){Y()}}function UGTileDesign(){function e(e,n){U=e,j=jQuery(e);var r=U.getObjects();D=r.g_objWrapper,R=U.getArrItems(),z=jQuery.extend(z,W),z=jQuery.extend(z,n),t(),H.init(e,z);var o={allow_onresize:!1},a=["overlay"];V.funcCustomTileHtml&&(a=[]),H.setCustomThumbs(i,a,o);var s=H.getOptions();z=jQuery.extend(z,s),V.ratioByWidth=z.tile_width/z.tile_height,V.ratioByHeight=z.tile_height/z.tile_width,z.tile_size_by==F.sizeby.GLOBAL_RATIO&&V.isTextpanelOutside&&(V.hasImageContainer=!0)}function t(){if(1==z.tile_enable_overlay?(z.thumb_overlay_opacity=z.tile_overlay_opacity,z.thumb_overlay_color=z.tile_overlay_color):0==z.tile_enable_icons?z.thumb_color_overlay_effect=!1:z.thumb_overlay_opacity=0,z.tile_as_link&&(z.thumb_wrapper_as_link=!0,z.thumb_link_newpage=z.tile_link_newpage),1==z.tile_enable_outline&&0==z.tile_enable_border&&(z.tile_enable_outline=!1),V.tileInnerReduce=0,z.tile_enable_border&&(V.tileInnerReduce=2*z.tile_border_width,H.setThumbInnerReduce(V.tileInnerReduce)),V.isSaparateIcons=!$.isRgbaSupported(),1==z.tile_enable_textpanel){switch(z.tile_textpanel_position){case"top":z.tile_textpanel_align="top";case"bottom":V.isTextpanelOutside=!0,z.tile_textpanel_always_on=!0,z.tile_textpanel_offset=0;break;case"inside_top":z.tile_textpanel_align="top";break;case"middle":z.tile_textpanel_align="middle",z.tile_textpanel_appear_type="fade"}0==z.tile_textpanel_always_on&&(V.isSaparateIcons=!0)}0!=z.tile_textpanel_offset&&(z.tile_textpanel_appear_type="fade",z.tile_textpanel_margin=z.tile_textpanel_offset),"title_and_desc"==z.tile_textpanel_source&&(z.tile_textpanel_enable_description=!0,z.tile_textpanel_desc_style_as_title=!0)}function n(){var e=U.isMobileMode();switch(V.isTextPanelHidden=!1,1==e&&0==z.tile_textpanel_always_on&&(V.isTextPanelHidden=!0),V.isVideoplayIconAlwaysOn=z.tile_videoplay_icon_always_on,z.tile_videoplay_icon_always_on){case"always":V.isVideoplayIconAlwaysOn=!0;break;case"never":V.isVideoplayIconAlwaysOn=!1;break;case"mobile_only":V.isVideoplayIconAlwaysOn=1==e;break;case"desktop_only":V.isVideoplayIconAlwaysOn=0==e}}function i(e,t){if(e.addClass("ug-tile"),V.funcCustomTileHtml)return V.funcCustomTileHtml(e,t),!1;var n="";1==V.hasImageContainer&&(n+="<div class='ug-image-container ug-trans-enabled'>");var i="ug-thumb-image";0!=z.tile_enable_image_effect&&1!=z.tile_image_effect_reverse||(i+=" ug-trans-enabled");var r=$.stripTags(t.title);r=$.htmlentitles(r),n+='<img src="'+$.escapeDoubleSlash(t.urlThumb)+"\" alt='"+r+"' class='"+i+"' data-backup-width='"+t.thumbWidth+"' data-backup-height='"+t.thumbHeight+"'>",1==V.hasImageContainer&&(n+="</div>"),e.append(n),z.tile_size_by==F.sizeby.GLOBAL_RATIO&&e.fadeTo(0,0);var o={};if(1==z.tile_enable_background&&(o["background-color"]=z.tile_background_color),1==z.tile_enable_border&&(o["border-width"]=z.tile_border_width+"px",o["border-style"]="solid",o["border-color"]=z.tile_border_color,z.tile_border_radius&&(o["border-radius"]=z.tile_border_radius+"px")),1==z.tile_enable_outline&&(o.outline="1px solid "+z.tile_outline_color),1==z.tile_enable_shadow){var a=z.tile_shadow_h+"px ";a+=z.tile_shadow_v+"px ",a+=z.tile_shadow_blur+"px ",a+=z.tile_shadow_spread+"px ",a+=z.tile_shadow_color,o["box-shadow"]=a}e.css(o);var s="";if(z.tile_enable_icons){if(0==z.tile_as_link&&1==z.tile_enable_action){var l="ug-button-play ug-icon-zoom";"image"!=t.type&&(l="ug-button-play ug-icon-play"),s+="<div class='ug-tile-icon "+l+"' style='display:none'></div>"}if(t.link&&1==z.tile_show_link_icon||1==z.tile_as_link)if(0==z.tile_as_link){var u="";1==z.tile_link_newpage&&(u=" target='_blank'"),s+="<a href='"+t.link+"'"+u+" class='ug-tile-icon ug-icon-link'></a>"}else s+="<div class='ug-tile-icon ug-icon-link' style='display:none'></div>";var d=V.isSaparateIcons;if(0==d&&"image"!=t.type&&1==V.isVideoplayIconAlwaysOn&&(d=!0),d)var p=e;else var p=e.children(".ug-thumb-overlay");p.append(s);var f=p.children("."+l);0==f.length?f=null:f.hide();var h=p.children(".ug-icon-link");0==h.length?h=null:h.hide(),h||1!=z.tile_enable_action||e.addClass("ug-tile-clickable")}else 1==z.tile_enable_action&&e.addClass("ug-tile-clickable");if(1==z.tile_enable_image_effect){var m="";0==z.tile_image_effect_reverse&&(m=" ug-trans-enabled");var v="<div class='ug-tile-image-overlay"+m+"' >",g=" ug-"+z.tile_image_effect_type+"-effect";v+='<img src="'+$.escapeDoubleSlash(t.urlThumb)+"\" alt='"+t.title+"' class='"+g+m+"'>",v+="</div>",e.append(v),1==z.tile_image_effect_reverse&&e.children(".ug-tile-image-overlay").fadeTo(0,0)}if(1==z.tile_enable_textpanel){var b=new UGTextPanel;b.init(U,z,"tile");var y="";1!=z.tile_textpanel_always_on&&1!=V.isTextpanelOutside||(y="ug-trans-enabled"),b.appendHTML(e,y);var _=t.title,w="";switch(z.tile_textpanel_source){case"desc":case"description":_=t.description;break;case"desc_title":""!=t.description&&(_=t.description);break;case"title_and_desc":_=t.title,w=t.description}if(b.setTextPlain(_,w),0==z.tile_textpanel_always_on&&b.getElement().fadeTo(0,0),e.data("objTextPanel",b),1==z.tile_textpanel_always_on){var C=c(e);C.css("z-index",2)}if(1==V.isTextpanelOutside){var E="<div class='ug-tile-cloneswrapper'></div>";e.append(E);var k=e.children(".ug-tile-cloneswrapper"),T=new UGTextPanel;T.init(U,z,"tile"),T.appendHTML(k),T.setTextPlain(_,w),e.data("objTextPanelClone",T)}}null!==t.addHtml&&e.append(t.addHtml)}function r(e){var t=e.children(".ug-tile-image-overlay");return t}function o(e){var t=e.children(".ug-thumb-overlay");return t}function a(e){if(0==V.hasImageContainer)return null;var t=e.children(".ug-image-container");return t}function s(e){var t=e.find(".ug-tile-image-overlay img");return t}function l(e){var t=e.data("objTextPanel");return t}function u(e){var t=e.data("objTextPanelClone");return t}function c(e){var t=e.children(".ug-textpanel");return t}function d(e){var t=e.find(".ug-tile-cloneswrapper .ug-textpanel");if(0==t.length)throw new Error("text panel cloned element not found");return t}function p(e){if(1==V.isTextpanelOutside)var t=d(e);else var t=c(e);if(!t)return 0;var n=$.getElementSize(t);return n.height}function f(e){var t=e.find(".ug-icon-link");return 0==t.length?null:t}function h(e,t){var n=V.ratioByHeight;switch(z.tile_size_by){default:n=V.ratioByHeight;break;case F.sizeby.IMAGE_RATIO:if(!e)throw new Error("tile should be given for tile ratio");var i=F.getItemByTile(e);if("undefined"!=typeof i.thumbRatioByHeight){if(0==i.thumbRatioByHeight)throw trace(i),new Error("the item ratio not inited yet");n=i.thumbRatioByHeight}break;case F.sizeby.CUSTOM:return null}return n}function m(e){var t=e.find(".ug-button-play");return 0==t.length?null:t}function v(e){return!!e.hasClass("ug-thumb-over")}function g(e){return e.hasClass("ug-tile-clickable")}function b(e){return 1==z.tile_enable_icons&&1==V.isVideoplayIconAlwaysOn&&"image"!=e.type}function y(e,t,n,i){var o=r(e),l=F.getTileImage(e),u=s(e);t-=V.tileInnerReduce,n-=V.tileInnerReduce;var c=null;if(1==V.isTextpanelOutside){var d=p(e);if(n-=d,"top"==z.tile_textpanel_position&&(c=d),1==V.hasImageContainer){var f=a(e);$.setElementSize(f,t,n),null!==c&&$.placeElement(f,0,c)}}if(0==z.tile_enable_image_effect)$.scaleImageCoverParent(l,t,n),0==V.hasImageContainer&&null!==c&&$.placeElement(l,0,c);else{var h="nothing";i===!0&&0==V.isTextpanelOutside&&(h=1==z.tile_image_effect_reverse?"effect":"image"),"effect"!=h&&($.setElementSize(o,t,n),null!==c&&$.placeElement(o,0,c),$.scaleImageCoverParent(u,t,n)),"image"!=h&&(1==V.hasImageContainer?$.scaleImageCoverParent(l,t,n):"effect"==h?($.scaleImageCoverParent(l,t,n),null!==c&&$.placeElement(l,0,c)):$.cloneElementSizeAndPos(u,l,!1,null,c))}}function _(e,t,n,i){var r=null;if(n&&(r=n-V.tileInnerReduce),i&&(i-=V.tileInnerReduce),"clone"==t){var o=u(e);o.refresh(!0,!0,r);var a=F.getItemByTile(e);return a.textPanelCloneSizeSet=!0,!1}var s=l(e);if(!s)return!1;var c=null;1==V.isTextpanelOutside&&(c=p(e)),s.refresh(!1,!0,r,c);var d=1==z.tile_textpanel_always_on||"fade"==z.tile_textpanel_appear_type;if(d)if(1==V.isTextpanelOutside&&i&&"bottom"==z.tile_textpanel_position){var f=i-c;s.positionPanel(f)}else s.positionPanel()}function w(e){var t=(F.getItemByTile(e),m(e)),n=f(e),i=$.getElementSize(e);y(e,i.width,i.height),1==z.tile_enable_textpanel&&_(e,"regular",i.width,i.height);var r=i.width-V.tileInnerReduce,a=i.height-V.tileInnerReduce,s=0;if(1==V.isTextpanelOutside){var l=p(e);a-=l,"top"==z.tile_textpanel_position&&(s=l)}var u=o(e);if($.setElementSizeAndPosition(u,0,s,r,a),t||n){var d=0;if(1==z.tile_enable_textpanel&&0==V.isTextPanelHidden&&0==V.isTextpanelOutside){var h=c(e),v=$.getElementSize(h);v.height>0&&(d=Math.floor(v.height/2*-1))}}if(t&&n){var g=$.getElementSize(t),b=$.getElementSize(n),w=z.tile_space_between_icons,C=g.width+w+b.width,E=Math.floor((i.width-C)/2);E<w&&(w=Math.floor((i.width-g.width-b.width)/3),C=g.width+w+b.width,E=Math.floor((i.width-C)/2)),$.placeElement(t,E,"middle",0,d),$.placeElement(n,E+g.width+w,"middle",0,d)}else t&&$.placeElement(t,"center","middle",0,d),n&&$.placeElement(n,"center","middle",0,d);t&&t.show(),n&&n.show()}function C(e,t){var n=(F.getItemByTile(e),r(e)),i=z.thumb_transition_duration;if(0==z.tile_image_effect_reverse){var o=F.getTileImage(e);t?(o.fadeTo(0,1),n.stop(!0).fadeTo(i,0)):n.stop(!0).fadeTo(i,1)}else t?n.stop(!0).fadeTo(i,1):n.stop(!0).fadeTo(i,0)}function E(e,t){var n=z.thumb_transition_duration,i=c(e);if(!i)return!0;if("slide"==z.tile_textpanel_appear_type){var r=$.getElementSize(i);if(0==r.width)return!1;var o=-r.height,a=0,s={},l={},u="bottom";"inside_top"==z.tile_textpanel_position&&(u="top"),s[u]=o+"px",l[u]=a+"px",1==t?(i.fadeTo(0,1),0==i.is(":animated")&&i.css(s),l.opacity=1,i.stop(!0).animate(l,n)):i.stop(!0).animate(s,n)}else 1==t?i.stop(!0).fadeTo(n,1):i.stop(!0).fadeTo(n,0)}function k(e,t,n){var i=z.thumb_transition_duration;n&&n===!0&&(i=0);var r=m(e),o=f(e),a=t?1:0;r&&r.stop(!0).fadeTo(i,a),o&&o.stop(!0).fadeTo(i,a)}function T(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&C(t,!0),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&0==V.isTextPanelHidden&&E(t,!0),V.isSaparateIcons&&1==z.tile_enable_icons){var n=1==z.thumb_overlay_reverse,i=F.getItemByTile(t);0==b(i)&&k(t,n,!1)}}function x(e,t){if(t=jQuery(t),z.tile_enable_image_effect&&C(t,!1),1==z.tile_enable_textpanel&&0==z.tile_textpanel_always_on&&E(t,!1),1==V.isSaparateIcons&&1==z.tile_enable_icons){var n=1!=z.thumb_overlay_reverse,i=F.getItemByTile(t);0==b(i)?k(t,n,!1):k(t,!0,!0)}}function S(e){var t=H.getThumbs().not(e);t.each(function(e,t){H.setThumbNormalStyle(jQuery(t))})}function P(e,t,n){return t=jQuery(t),1==z.tile_visible_before_image&&t.data("image_placed")!==!0&&n!==!0||(w(t),void H.setThumbNormalStyle(t))}function O(e,t,n){w(t),n.fadeTo(0,1),t.data("image_placed",!0)}function I(e){return 1==g(e)?(B.trigger(F.events.TILE_CLICK,e),!0):void(0==v(e)&&(S(e),H.setThumbOverStyle(e)))}function M(e){var t=jQuery(this),n=t.prop("tagName").toLowerCase(),i=!0;if(V.funcParentApproveClick&&0==V.funcParentApproveClick()&&(i=!1),"a"==n)0==i&&e.preventDefault();else if(0==v(t))1==i&&I(t);else{if(0==g(t))return!0;1==i&&B.trigger(F.events.TILE_CLICK,t)}}function A(e){e.stopPropagation();var t=jQuery(this).parents(".ug-tile"),n=!0;return V.funcParentApproveClick&&0==V.funcParentApproveClick()&&(n=!1),0==v(t)?(I(t),!0):1==n?(B.trigger(F.events.TILE_CLICK,t),!1):void 0}function N(e){var t=jQuery(this).parents(".ug-tile");V.funcParentApproveClick&&0==V.funcParentApproveClick()&&e.preventDefault(),0==v(t)&&0==z.tile_as_link&&(e.preventDefault(),I(t))}var j,L,D,R,F=this,B=jQuery(this),U=new UniteGalleryMain,$=new UGFunctions,H=new UGThumbsGeneral;this.resizemode={FULL:"full",WRAPPER_ONLY:"wrapper_only",VISIBLE_ELEMENTS:"visible_elements"},this.sizeby={GLOBAL_RATIO:"global_ratio",TILE_RATIO:"tile_ratio",IMAGE_RATIO:"image_ratio",CUSTOM:"custom"},this.events={TILE_CLICK:"tile_click"};var z={tile_width:250,tile_height:200,tile_size_by:F.sizeby.IMAGE_RATIO,tile_visible_before_image:!1,tile_enable_background:!0,tile_background_color:"#F0F0F0",tile_enable_border:!1,tile_border_width:3,tile_border_color:"#F0F0F0",tile_border_radius:0,tile_enable_outline:!1,tile_outline_color:"#8B8B8B",tile_enable_shadow:!1,tile_shadow_h:1,tile_shadow_v:1,tile_shadow_blur:3,tile_shadow_spread:2,tile_shadow_color:"#8B8B8B",tile_enable_action:!0,tile_as_link:!1,tile_link_newpage:!0,tile_enable_overlay:!0,tile_overlay_opacity:.4,tile_overlay_color:"#000000",tile_enable_icons:!0,tile_show_link_icon:!1,tile_videoplay_icon_always_on:"never",tile_space_between_icons:26,tile_enable_image_effect:!1,tile_image_effect_type:"bw",tile_image_effect_reverse:!1,tile_enable_textpanel:!1,tile_textpanel_source:"title",tile_textpanel_always_on:!1,tile_textpanel_appear_type:"slide",tile_textpanel_position:"inside_bottom",tile_textpanel_offset:0},W={thumb_color_overlay_effect:!0,thumb_overlay_reverse:!0,thumb_image_overlay_effect:!1,tile_textpanel_enable_description:!1,tile_textpanel_bg_opacity:.6,tile_textpanel_padding_top:8,tile_textpanel_padding_bottom:8},V={ratioByHeight:0,ratioByWidth:0,eventSizeChange:"thumb_size_change",funcCustomTileHtml:null,funcCustomPositionElements:null,funcParentApproveClick:null,isSaparateIcons:!1,tileInnerReduce:0,isTextpanelOutside:!1,hasImageContainer:!1,isVideoplayIconAlwaysOn:!1,isTextPanelHidden:!1};this.loadTileImage=function(e){var t=F.getTileImage(e);$.checkImagesLoaded(t,null,function(t,n){O(null,e,jQuery(t))})},this.setHtml=function(e){L=e,n(),H.setHtmlThumbs(e)},this.initEvents=function(){H.initEvents(),jQuery(H).on(H.events.SETOVERSTYLE,T),jQuery(H).on(H.events.SETNORMALSTYLE,x),jQuery(H).on(H.events.PLACEIMAGE,O),D.on(V.eventSizeChange,P),L.delegate(".ug-tile .ug-button-play","click",A),L.delegate(".ug-tile","click",M),L.delegate(".ug-tile .ug-icon-link","click",N)},this.destroy=function(){if(jQuery(H).off(H.events.SETOVERSTYLE),jQuery(H).off(H.events.SETNORMALSTYLE),jQuery(H).off(H.events.PLACEIMAGE),D.off(V.eventSizeChange),1==z.tile_enable_textpanel){var e=H.getThumbs();jQuery.each(e,function(e,t){var n=l(jQuery(t));n&&n.destroy()})}H.destroy()},this.init=function(t,n,i){e(t,n,i)},this.setFixedMode=function(){z.tile_size_by=F.sizeby.GLOBAL_RATIO,z.tile_visible_before_image=!0},this.setApproveClickFunction=function(e){V.funcParentApproveClick=e},this.resizeTile=function(e,t,n,i){if(1==V.isTextpanelOutside&&_(e,"clone",t),t){if(!n)var n=F.getTileHeightByWidth(t,e,"resizeTile")}else var t=z.tile_width,n=z.tile_height;switch($.setElementSize(e,t,n),i){default:case F.resizemode.FULL:F.triggerSizeChangeEvent(e,!0);break;case F.resizemode.WRAPPER_ONLY:return!0;case F.resizemode.VISIBLE_ELEMENTS:if(V.funcCustomTileHtml)return F.triggerSizeChangeEvent(e,!0),!0;y(e,t,n,!0),1==z.tile_enable_textpanel&&1==z.tile_textpanel_always_on&&t&&_(e,"regular",t,n)}},this.resizeAllTiles=function(e,t){n();var i=null;z.tile_size_by==F.sizeby.GLOBAL_RATIO&&(i=F.getTileHeightByWidth(e,null,"resizeAllTiles"));var r=H.getThumbs();r.each(function(n,r){F.resizeTile(jQuery(r),e,i,t)})},this.triggerSizeChangeEvent=function(e,t){if(!e)return!1;if(!t)var t=!1;D.trigger(V.eventSizeChange,[e,t])},this.triggerSizeChangeEventAllTiles=function(e){var t=H.getThumbs();t.each(function(){var t=jQuery(this);F.triggerSizeChangeEvent(t,e)})},this.disableEvents=function(){var e=H.getThumbs();e.css("pointer-events","none")},this.enableEvents=function(){var e=H.getThumbs();e.css("pointer-events","auto")},this.setOptions=function(e){z=jQuery.extend(z,e),H.setOptions(e)},this.setTileSizeOptions=function(e){if(z.tile_size_by!==F.sizeby.GLOBAL_RATIO)throw new Error("setNewTileOptions works with global ration only");z.tile_width=e,z.tile_height=Math.floor(e*V.ratioByHeight)},this.setCustomFunctions=function(e,t){V.funcCustomTileHtml=e,V.funcCustomPositionElements=t},this.run=function(){var e=H.getThumbs();z.tile_size_by==F.sizeby.GLOBAL_RATIO&&F.resizeAllTiles(z.tile_width,F.resizemode.WRAPPER_ONLY),1==z.tile_enable_image_effect&&0==z.tile_image_effect_reverse&&e.children(".ug-thumb-image").fadeTo(0,0),H.setHtmlProperties(),1==z.tile_visible_before_image&&(e.children(".ug-thumb-image").fadeTo(0,0),H.loadThumbsImages())},this._____________EXTERNAL_GETTERS____________=function(){},this.getObjThumbs=function(){return H},this.getOptions=function(){
return z},this.getTileImage=function(e){var t=e.find("img.ug-thumb-image");return t},this.getItemByTile=function(e){return H.getItemByThumb(e)},this.getTileHeightByWidth=function(e,t,n){var i=h(t,n);if(null===i)return null;var r=Math.floor((e-V.tileInnerReduce)*i)+V.tileInnerReduce;return t&&1==V.isTextpanelOutside&&z.tile_size_by==F.sizeby.IMAGE_RATIO&&(r+=p(t)),r},this.getTileImageSize=function(e){var t=F.getItemByTile(e);if(!t.thumbWidth||!t.thumbHeight)throw new Error("Can't get image size - image not inited.");var n={width:t.thumbWidth,height:t.thumbHeight};return n},this.getGlobalTileSize=function(){if(z.tile_size_by!=F.sizeby.GLOBAL_RATIO)throw new Error("The size has to be global ratio");var e={width:z.tile_width,height:z.tile_height};return e}}function ugCheckForMinJQueryVersion(){var e=g_ugFunctions.checkMinJqueryVersion("1.8.0");if(0==e)throw new Error("The gallery can run from jquery 1.8 You have jQuery "+jQuery.fn.jquery+" Please update your jQuery library.")}function ugCheckForErrors(e,t){function n(){if("undefined"==typeof jQuery)throw new Error("jQuery library not included")}function i(){if("function"==typeof jQuery.fn.unitegallery)return!0;var e="You have some jquery.js library include that comes after the gallery files js include.";throw e+="<br> This include eliminates the gallery libraries, and make it not work.","cms"==t?(e+="<br><br> To fix it you can:<br>&nbsp;&nbsp;&nbsp; 1. In the Gallery Settings -> Troubleshooting set option:  <strong><b>Put JS Includes To Body</b></strong> option to true.",e+="<br>&nbsp;&nbsp;&nbsp; 2. Find the double jquery.js include and remove it."):e+="<br><br> Please find and remove this jquery.js include and the gallery will work. <br> * There should be only one jquery.js include before all other js includes in the page.",new Error(e)}try{"jquery"==t?(n(),ugCheckForMinJQueryVersion()):(ugCheckForMinJQueryVersion(),i())}catch(n){var r=n.message;if(r="Unite Gallery Error: "+r,r="<div style='font-size:16px;color:#BC0C06;max-width:900px;border:1px solid red;padding:10px;'>"+r+"</div>","jquery"==t){var o=document.getElementById(e);o.innerHTML=r,o.style.display="block"}else jQuery(e).show().html(r);return!1}return!0}function UniteGalleryMain(){function __________INIT_GALLERY_______(){}function getThemeFunction(e){var t=e;return t.indexOf("UGTheme_")==-1&&(t="UGTheme_"+t),t}function initTheme(objCustomOptions){if(objCustomOptions.hasOwnProperty("gallery_theme"))g_options.gallery_theme=objCustomOptions.gallery_theme;else{var defaultTheme=g_options.gallery_theme;0==g_ugFunctions.isThemeRegistered(defaultTheme)&&(g_options.gallery_theme=g_ugFunctions.getFirstRegisteredTheme())}var themeFunction=getThemeFunction(g_options.gallery_theme);try{g_options.gallery_theme=eval(themeFunction)}catch(e){}g_options.gallery_theme=eval(themeFunction),g_objTheme=new g_options.gallery_theme,g_objTheme.init(t,objCustomOptions)}function resetOptions(){g_options=jQuery.extend({},g_temp.originalOptions),g_selectedItemIndex=-1,g_selectedItem=null,g_objSlider=void 0,g_objThumbs=void 0,g_objSlider=void 0}function checkForStartupErrors(){try{ugCheckForMinJQueryVersion()}catch(e){throwErrorShowMessage(e.message)}"object"==typeof g_objWrapper.outerWidth()&&throwErrorShowMessage("You have some buggy script. most chances jquery-ui.js that destroy jquery outerWidth, outerHeight functions. The gallery can't run. Please update jquery-ui.js to latest version."),setTimeout(function(){ugCheckForErrors(g_galleryID,"cms")},5e3)}function runGallery(e,n,i,r){var o="object"==typeof n;if(o&&(g_temp.objCustomOptions=n),1==g_temp.isRunFirstTime){if(g_galleryID=e,g_objWrapper=jQuery(g_galleryID),0==g_objWrapper.length)return trace("div with id: "+g_galleryID+" not found"),!1;g_objParent=g_objWrapper.parent(),checkForStartupErrors(),g_temp.originalOptions=jQuery.extend({},g_options),o&&(g_options=jQuery.extend(g_options,n)),1==g_options.gallery_enable_cache&&g_options.gallery_initial_catid&&cacheItems(g_options.gallery_initial_catid),t.setSizeClass();var a=g_objWrapper.children();fillItemsArray(a),loadAPIs(),g_objWrapper.find("img").fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}else if(t.destroy(),resetOptions(),g_options=jQuery.extend(g_options,g_temp.objCustomOptions),i){if(r&&1==g_options.gallery_enable_cache&&cacheItems(r,i),"noitems"==i)return showErrorMessage("No items in this category",""),!1;g_objWrapper.html(i);var a=g_objWrapper.children();fillItemsArray(a),loadAPIs(),g_objWrapper.children().fadeTo(0,0).hide(),g_objWrapper.show(),clearInitData()}1==g_temp.isRunFirstTime&&1==g_options.gallery_enable_tabs&&(g_objTabs=new UGTabs,g_objTabs.init(t,g_options)),o&&modifyInitParams(g_temp.objCustomOptions),validateParams(),1==g_options.gallery_shuffle&&t.shuffleItems(),initTheme(g_temp.objCustomOptions),setGalleryHtml(),setHtmlObjectsProperties();var s=g_objWrapper.width();0==s?g_functions.waitForWidth(g_objWrapper,runGalleryActually):runGalleryActually()}function runGalleryActually(){t.setSizeClass(),0==g_temp.isFreestyleMode&&1==g_options.gallery_preserve_ratio&&setHeightByOriginalRatio(),g_objTheme.run(),g_objTabs&&g_temp.isRunFirstTime&&g_objTabs.run(),preloadBigImages(),initEvents(),g_numItems>0&&t.selectItem(0),1==g_options.gallery_autoplay&&t.startPlayMode(),g_temp.isRunFirstTime=!1}function showErrorMessage(e,t){if("undefined"==typeof t)var t="<b>Unite Gallery Error: </b>";e=t+e;var n="<div class='ug-error-message-wrapper'><div class='ug-error-message'>"+e+"</div></div>";g_objWrapper.children().remove(),g_objWrapper.html(n),g_objWrapper.show()}function throwErrorShowMessage(e){throw showErrorMessage(e),new Error(e)}function modifyInitParams(){g_options.gallery_images_preload_type||(g_options.gallery_images_preload_type="minimal"),(void 0==g_options.gallery_min_height||g_options.gallery_height<g_options.gallery_min_height)&&(g_options.gallery_min_height=0),(void 0==g_options.gallery_min_width||g_options.gallery_width<g_options.gallery_min_width)&&(g_options.gallery_min_width=0)}function validateParams(){if(!g_options.gallery_theme)throw new Error("The gallery can't run without theme");if(jQuery.isNumeric(g_options.gallery_height)&&g_options.gallery_height<g_options.gallery_min_height)throw new Error("The <b>gallery_height</b> option must be bigger then <b>gallery_min_height option</b>");if(g_options.gallery_width<g_options.gallery_min_width)throw new Error("The <b>gallery_width</b> option must be bigger then <b>gallery_min_width option</b>")}function setGalleryHtml(){g_objWrapper.addClass("ug-gallery-wrapper"),g_objWrapper.append("<div class='ug-overlay-disabled' style='display:none'></div>"),t.setSizeClass()}function clearInitData(){g_objWrapper.children().remove()}function storeLastSize(){var e=t.getSize();g_temp.lastWidth=e.width,g_temp.lastHeight=e.height}function setHeightByOriginalRatio(){var e=t.getSize(),n=e.width/e.height;if(n!=e.orig_ratio){var i=e.width/e.orig_ratio;i=Math.round(i),i<g_options.gallery_min_height&&(i=g_options.gallery_min_height),g_objWrapper.height(i)}}function setHtmlObjectsProperties(){var e=g_functions.getCssSizeParam(g_options.gallery_width),t={"max-width":e,"min-width":g_functions.getCssSizeParam(g_options.gallery_min_width)};if(0==g_temp.isFreestyleMode){var n=g_functions.getCssSizeParam(g_options.gallery_height);t.height=n}else t.overflow="visible";g_options.gallery_background_color&&(t["background-color"]=g_options.gallery_background_color),g_objWrapper.css(t)}function fillItemsArray(e){g_arrItems=[];for(var n=t.isMobileMode(),i=0,r=0;r<e.length;r++){var o=jQuery(e[r]),a=o.prop("tagName").toLowerCase(),s="";if("a"==a){s=o.attr("href"),o=o.children();var a=o.prop("tagName").toLowerCase()}var l=o.data("type");void 0==l&&(l="image");var u={};if(u.type=l,"img"==a){var c=o.data("lazyload-src");c&&""!=c&&(o.attr("src",c),jQuery.removeData(o,"lazyload-src"));var d=o.data("image"),p=o.data("thumb");"undefined"==typeof d&&(d=null),"undefined"==typeof p&&(p=null);var f=o.attr("src");d||(d=f),p||(p=f),p||(p=d),d||(d=p),u.urlThumb=p,u.urlImage=d,u.title=o.attr("alt"),u.objThumbImage=o,u.objThumbImage.attr("src",u.urlThumb)}else{if("image"==l)throw trace("Problematic gallery item found:"),trace(o),trace("Please look for some third party js script that could add this item to the gallery"),new Error("The item should not be image type");u.urlThumb=o.data("thumb"),u.title=o.data("title"),u.objThumbImage=null,u.urlImage=o.data("image")}if(1==n){var h=o.data("thumb-mobile");"undefined"!=typeof h&&""!=h&&(u.urlThumb=h,"img"==a&&o.attr("src",u.urlThumb));var m=o.data("image-mobile");"undefined"!=typeof m&&""!=m&&(u.urlImage=m)}u.link=s,u.description=o.attr("title"),u.description||(u.description=o.data("description")),u.description||(u.description=""),u.isLoaded=!1,u.isThumbImageLoaded=!1,u.objPreloadImage=null,u.isBigImageLoadStarted=!1,u.isBigImageLoaded=!1,u.isBigImageLoadError=!1,u.imageWidth=0,u.imageHeight=0,u.thumbWidth=0,u.thumbHeight=0,u.thumbRatioByWidth=0,u.thumbRatioByHeight=0;var v=o.data("width"),g=o.data("height");v&&"number"==typeof v&&g&&"number"==typeof g&&(u.thumbWidth=v,u.thumbHeight=g,u.thumbRatioByWidth=v/g,u.thumbRatioByHeight=g/v),u.addHtml=null;var b=void 0==u.urlImage||""==u.urlImage,y=void 0==u.urlThumb||""==u.urlThumb;switch(u.type){case"youtube":if(u.videoid=o.data("videoid"),b||y){var _=g_ugYoutubeAPI.getVideoImages(u.videoid);b&&(u.urlImage=_.preview),y&&(u.urlThumb=_.thumb,"img"==a&&o.attr("src",u.urlThumb))}g_temp.isYoutubePresent=!0;break;case"vimeo":u.videoid=o.data("videoid"),g_temp.isVimeoPresent=!0;break;case"html5video":u.videoogv=o.data("videoogv"),u.videowebm=o.data("videowebm"),u.videomp4=o.data("videomp4"),g_temp.isHtml5VideoPresent=!0;break;case"soundcloud":u.trackid=o.data("trackid"),g_temp.isSoundCloudPresent=!0;break;case"wistia":u.videoid=o.data("videoid"),g_temp.isWistiaPresent=!0;break;case"custom":var w=o.children("img");w.length&&(w=jQuery(w[0]),u.urlThumb=w.attr("src"),u.title=w.attr("alt"),u.objThumbImage=w);var C=o.children().not("img:first-child");C.length&&(u.addHtml=C.clone())}u.objThumbImage&&(u.objThumbImage.removeAttr("data-description",""),u.objThumbImage.removeAttr("data-image",""),u.objThumbImage.removeAttr("data-thumb",""),u.objThumbImage.removeAttr("title","")),u.index=i,g_arrItems.push(u),i++}g_numItems=g_arrItems.length}function loadAPIs(){g_temp.isYoutubePresent&&g_ugYoutubeAPI.loadAPI(),g_temp.isVimeoPresent&&g_ugVimeoAPI.loadAPI(),g_temp.isHtml5VideoPresent&&g_ugHtml5MediaAPI.loadAPI(),g_temp.isSoundCloudPresent&&g_ugSoundCloudAPI.loadAPI(),g_temp.isWistiaPresent&&g_ugWistiaAPI.loadAPI()}function preloadBigImages(){if("visible"!=g_options.gallery_images_preload_type||g_objThumbs||(g_options.gallery_images_preload_type="minimal"),1==g_temp.isAllItemsPreloaded)return!0;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":jQuery(g_arrItems).each(function(){preloadItemImage(this)});break;case"visible":jQuery(g_arrItems).each(function(){var e=this,t=g_objThumbs.isItemThumbVisible(e);1==t&&preloadItemImage(e)})}}function checkPreloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!1;switch(g_options.gallery_images_preload_type){default:case"minimal":break;case"all":preloadItemImage(e);break;case"visible":var t=g_objThumbs.isItemThumbVisible(e);1==t&&preloadItemImage(e)}}function preloadItemImage(e){if(1==e.isBigImageLoadStarted||1==e.isBigImageLoaded||1==e.isBigImageLoadError)return!0;var n=e.urlImage;return""==n||void 0==n?(e.isBigImageLoadError=!0,!1):(e.isBigImageLoadStarted=!0,e.objPreloadImage=jQuery("<img/>").attr("src",n),e.objPreloadImage.data("itemIndex",e.index),e.objPreloadImage.on("load",t.onItemBigImageLoaded),e.objPreloadImage.on("error",function(){var e=jQuery(this),n=e.data("itemIndex"),i=g_arrItems[n];i.isBigImageLoadError=!0,i.isBigImageLoaded=!1;var r=jQuery(this).attr("src");console.log("Can't load image: "+r),g_objGallery.trigger(t.events.ITEM_IMAGE_UPDATED,[n,i.urlImage]),i.objThumbImage.attr("src",i.urlThumb)}),void checkAllItemsStartedPreloading())}function preloadNearBigImages(e){if(1==g_temp.isAllItemsPreloaded)return!1;if(!e)var e=g_selectedItem;if(!e)return!0;var t=e.index,n=t-1,i=t+1;n>0&&preloadItemImage(g_arrItems[n]),i<g_numItems&&preloadItemImage(g_arrItems[i])}function checkAllItemsStartedPreloading(){if(1==g_temp.isAllItemsPreloaded)return!1;for(var e in g_arrItems)if(0==g_arrItems[e].isBigImageLoadStarted)return!1;g_temp.isAllItemsPreloaded=!0}function __________END_INIT_GALLERY_______(){}function __________EVENTS_____________(){}function onSliderMouseEnter(e){1==g_options.gallery_pause_on_mouseover&&0==t.isFullScreen()&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()&&t.pausePlaying()}function onSliderMouseLeave(e){if(1==g_options.gallery_pause_on_mouseover&&1==g_temp.isPlayMode&&g_objSlider&&0==g_objSlider.isSlideActionActive()){var n=g_objSlider.isCurrentSlideLoadingImage();0==n&&t.continuePlaying()}}function onKeyPress(e){var n=jQuery(e.target);if(n.is("textarea")||n.is("select")||n.is("input"))return!0;var i=e.charCode?e.charCode:e.keyCode?e.keyCode:e.which?e.which:0,r=!0;switch(i){case 39:t.nextItem();break;case 37:t.prevItem();break;default:r=!1}1==r&&(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation()),g_objGallery.trigger(t.events.GALLERY_KEYPRESS,[i,e])}function onGalleryResized(){var e=t.getSize();if(0==e.width)return!0;t.setSizeClass();var e=t.getSize();if(e.width!=g_temp.lastWidth||e.height!=g_temp.lastHeight){var n=!1;if(g_temp.funcCustomHeight){var i=g_temp.funcCustomHeight(e);i&&(g_objWrapper.height(i),n=!0)}0==n&&1==g_options.gallery_preserve_ratio&&0==g_temp.isFreestyleMode&&setHeightByOriginalRatio(),storeLastSize(),g_objGallery.trigger(t.events.SIZE_CHANGE)}}function onThumbsChange(e){"visible"==g_options.gallery_images_preload_type&&0==g_temp.isAllItemsPreloaded&&preloadBigImages()}function onFullScreenChange(){var e=g_functions.isFullScreen(),n=e?t.events.ENTER_FULLSCREEN:t.events.EXIT_FULLSCREEN,i=g_functions.getGlobalData("fullscreenID");return g_galleryID!==i||(e?g_objWrapper.addClass("ug-fullscreen"):g_objWrapper.removeClass("ug-fullscreen"),g_objGallery.trigger(n),void onGalleryResized())}function onItemImageUpdated(e,n){var i=t.getItem(n);checkPreloadItemImage(i)}function onCurrentSlideImageLoadEnd(){1==t.isPlayMode()&&t.continuePlaying()}function initEvents(){if(g_objWrapper.on("dragstart",function(e){e.preventDefault()}),g_objGallery.on(t.events.ITEM_IMAGE_UPDATED,onItemImageUpdated),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).on(g_objThumbs.events.STRIP_MOVE,onThumbsChange);break;case"grid":jQuery(g_objThumbs).on(g_objThumbs.events.PANE_CHANGE,onThumbsChange)}if("advance"==g_options.gallery_mousewheel_role&&0==g_temp.isFreestyleMode&&g_objWrapper.on("mousewheel",t.onGalleryMouseWheel),storeLastSize(),jQuery(window).resize(function(){g_objWrapper.css("width","auto"),g_functions.whenContiniousEventOver("gallery_resize",onGalleryResized,g_temp.resizeDelay)}),setTimeout(function(){setInterval(onGalleryResized,2e3)},1e4),g_functions.addFullScreenChangeEvent(onFullScreenChange),g_objSlider){if(jQuery(g_objSlider).on(g_objSlider.events.ITEM_CHANGED,function(){var e=g_objSlider.getCurrentItemIndex();e!=-1&&t.selectItem(e)}),1==g_options.gallery_pause_on_mouseover){var e=g_objSlider.getElement();e.hover(onSliderMouseEnter,onSliderMouseLeave),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){onSliderMouseLeave()})}retriggerEvent(g_objSlider,g_objSlider.events.ACTION_START,t.events.SLIDER_ACTION_START),retriggerEvent(g_objSlider,g_objSlider.events.ACTION_END,t.events.SLIDER_ACTION_END),jQuery(g_objSlider).on(g_objSlider.events.CURRENTSLIDE_LOAD_END,onCurrentSlideImageLoadEnd)}1==g_options.gallery_control_keyboard&&jQuery(document).keydown(onKeyPress)}function __________GENERAL_______(){}function cacheItems(e,t){if(t){var n=t;"noitems"!=n&&(n=jQuery(t).clone())}else var n=g_objWrapper.children().clone();g_objCache[e]=n}function removeAllSizeClasses(e){e||(e=g_objWrapper),e.removeClass("ug-under-480"),e.removeClass("ug-under-780"),e.removeClass("ug-under-960")}function retriggerEvent(e,t,n){jQuery(e).on(t,function(e){g_objGallery.trigger(n,[this])})}function advanceNextStep(){var e=jQuery.now(),n=e-g_temp.playTimeLastStep;if(g_temp.playTimePassed+=n,g_temp.playTimeLastStep=e,g_temp.objProgress){var i=g_temp.playTimePassed/g_options.gallery_play_interval;g_temp.objProgress.setProgress(i)}g_temp.playTimePassed>=g_options.gallery_play_interval&&(t.nextItem(),g_temp.playTimePassed=0)}function unselectSeletedItem(){return null==g_selectedItem||(g_objThumbs&&g_objThumbs.setThumbUnselected(g_selectedItem.objThumbWrapper),g_selectedItem=null,void(g_selectedItemIndex=-1))}function toFakeFullScreen(){jQuery("body").addClass("ug-body-fullscreen"),g_objWrapper.addClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!0,g_objGallery.trigger(t.events.ENTER_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}function exitFakeFullscreen(){jQuery("body").removeClass("ug-body-fullscreen"),g_objWrapper.removeClass("ug-fake-fullscreen"),g_temp.isFakeFullscreen=!1,g_objGallery.trigger(t.events.EXIT_FULLSCREEN),g_objGallery.trigger(t.events.SIZE_CHANGE)}var t=this,g_galleryID,g_objGallery=jQuery(t),g_objWrapper,g_objParent,g_objThumbs,g_objSlider,g_functions=new UGFunctions,g_objTabs,g_arrItems=[],g_numItems,g_selectedItem=null,g_selectedItemIndex=-1,g_objTheme,g_objCache={};this.events={ITEM_CHANGE:"item_change",SIZE_CHANGE:"size_change",ENTER_FULLSCREEN:"enter_fullscreen",EXIT_FULLSCREEN:"exit_fullscreen",START_PLAY:"start_play",STOP_PLAY:"stop_play",PAUSE_PLAYING:"pause_playing",CONTINUE_PLAYING:"continue_playing",SLIDER_ACTION_START:"slider_action_start",SLIDER_ACTION_END:"slider_action_end",ITEM_IMAGE_UPDATED:"item_image_updated",GALLERY_KEYPRESS:"gallery_keypress",GALLERY_BEFORE_REQUEST_ITEMS:"gallery_before_request_items",OPEN_LIGHTBOX:"open_lightbox",CLOSE_LIGHTBOX:"close_lightbox",LOAD:"load"};var g_options={gallery_width:900,gallery_height:500,gallery_min_width:150,gallery_min_height:100,gallery_theme:"default",gallery_skin:"default",gallery_images_preload_type:"minimal",gallery_autoplay:!1,gallery_play_interval:3e3,gallery_pause_on_mouseover:!0,gallery_mousewheel_role:"zoom",gallery_control_keyboard:!0,gallery_carousel:!0,gallery_preserve_ratio:!0,gallery_background_color:"",gallery_debug_errors:!1,gallery_shuffle:!1,gallery_urlajax:null,gallery_enable_tabs:!1,gallery_enable_cache:!0,gallery_initial_catid:""},g_temp={objCustomOptions:{},isAllItemsPreloaded:!1,isFreestyleMode:!1,lastWidth:0,lastHeigh:0,handleResize:null,isInited:!1,isPlayMode:!1,isPlayModePaused:!1,playTimePassed:0,playTimeLastStep:0,playHandle:"",playStepInterval:33,objProgress:null,isFakeFullscreen:!1,thumbsType:null,isYoutubePresent:!1,isVimeoPresent:!1,isHtml5VideoPresent:!1,isSoundCloudPresent:!1,isWistiaPresent:!1,resizeDelay:100,isRunFirstTime:!0,originalOptions:{},funcCustomHeight:null};this.onItemBigImageLoaded=function(e,t){if(!t)var t=jQuery(this);var n=t.data("itemIndex"),i=g_arrItems[n];i.isBigImageLoaded=!0;var r=g_functions.getImageOriginalSize(t);i.imageWidth=r.width,i.imageHeight=r.height},this.checkFillImageSize=function(e,t){if(!t){var n=e.data("itemIndex");if(void 0===n)throw new Error("Wrong image given to gallery.checkFillImageSize");var t=g_arrItems[n]}var i=g_functions.getImageOriginalSize(e);t.imageWidth=i.width,t.imageHeight=i.height},this.setFreestyleMode=function(){g_temp.isFreestyleMode=!0},this.attachThumbsPanel=function(e,t){g_temp.thumbsType=e,g_objThumbs=t},this.initSlider=function(e,n){if(!e)var e={};e=jQuery.extend(g_temp.objCustomOptions,e),g_objSlider=new UGSlider,g_objSlider.init(t,e,n)},this.onGalleryMouseWheel=function(e,n,i,r){e.preventDefault(),n>0?t.prevItem():t.nextItem()},this.destroy=function(){if(g_objWrapper.off("dragstart"),g_objGallery.off(t.events.ITEM_IMAGE_UPDATED),g_objThumbs)switch(g_temp.thumbsType){case"strip":jQuery(g_objThumbs).off(g_objThumbs.events.STRIP_MOVE);break;case"grid":jQuery(g_objThumbs).off(g_objThumbs.events.PANE_CHANGE)}if(g_objWrapper.off("mousewheel"),jQuery(window).off("resize"),g_functions.destroyFullScreenChangeEvent(),g_objSlider){jQuery(g_objSlider).off(g_objSlider.events.ITEM_CHANGED);var e=g_objSlider.getElement();e.off("mouseenter"),e.off("mouseleave"),g_objGallery.off(t.events.ENTER_FULLSCREEN),jQuery(g_objSlider).off(g_objSlider.events.ACTION_START),jQuery(g_objSlider).off(g_objSlider.events.ACTION_END),jQuery(g_objSlider).off(g_objSlider.events.CURRENTSLIDE_LOAD_END)}1==g_options.gallery_control_keyboard&&jQuery(document).off("keydown"),g_objTheme&&"function"==typeof g_objTheme.destroy&&g_objTheme.destroy(),g_objWrapper.html("")},this.getArrItems=function(){return g_arrItems},this.getObjects=function(){var e={g_galleryID:g_galleryID,g_objWrapper:g_objWrapper,g_objThumbs:g_objThumbs,g_objSlider:g_objSlider,g_options:g_options,g_arrItems:g_arrItems,g_numItems:g_numItems};return e},this.getObjSlider=function(){return g_objSlider},this.getItem=function(e){if(e<0)throw new Error("item with index: "+e+" not found");if(e>=g_numItems)throw new Error("item with index: "+e+" not found");return g_arrItems[e]},this.getWidth=function(){var e=t.getSize();return e.width},this.getHeight=function(){var e=t.getSize();return e.height},this.getSize=function(){var e=g_functions.getElementSize(g_objWrapper);return e.orig_width=g_options.gallery_width,e.orig_height=g_options.gallery_height,e.orig_ratio=e.orig_width/e.orig_height,e},this.getGalleryID=function(){var e=g_galleryID.replace("#","");return e},this.getNextItem=function(e,t){"object"==typeof e&&(e=e.index);var n=e+1;if(t!==!0&&1==g_numItems)return null;if(n>=g_numItems){if(1!=g_options.gallery_carousel&&t!==!0)return null;n=0}var i=g_arrItems[n];return i},this.getPrevItem=function(e){"object"==typeof e&&(e=e.index);var t=e-1;if(t<0){if(1!=g_options.gallery_carousel&&forceCarousel!==!0)return null;t=g_numItems-1}var n=g_arrItems[t];return n},this.getSelectedItem=function(){return g_selectedItem},this.getSelectedItemIndex=function(){return g_selectedItemIndex},this.getNumItems=function(){return g_numItems},this.isLastItem=function(){return g_selectedItemIndex==g_numItems-1},this.isFirstItem=function(){return 0==g_selectedItemIndex},this.getOptions=function(){return g_options},this.getElement=function(){return g_objWrapper},this.___________SET_CONTROLS___________=function(){},this.setNextButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.nextItem)},this.setPrevButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.prevItem)},this.setFullScreenToggleButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.toggleFullscreen),g_objGallery.on(t.events.ENTER_FULLSCREEN,function(){e.addClass("ug-fullscreenmode")}),g_objGallery.on(t.events.EXIT_FULLSCREEN,function(){e.removeClass("ug-fullscreenmode")})},this.destroyFullscreenButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.ENTER_FULLSCREEN),g_objGallery.off(t.events.EXIT_FULLSCREEN)},this.setPlayButton=function(e){e.data("ug-button",!0),g_functions.setButtonOnClick(e,t.togglePlayMode),g_objGallery.on(t.events.START_PLAY,function(){e.addClass("ug-stop-mode")}),g_objGallery.on(t.events.STOP_PLAY,function(){e.removeClass("ug-stop-mode")})},this.destroyPlayButton=function(e){g_functions.destroyButton(e),g_objGallery.off(t.events.START_PLAY),g_objGallery.off(t.events.STOP_PLAY)},this.setProgressIndicator=function(e){g_temp.objProgress=e},this.setTextContainers=function(e,n){g_objGallery.on(t.events.ITEM_CHANGE,function(){var i=t.getSelectedItem();e.html(i.title),n.html(i.description)})},this.showDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").show()},this.hideDisabledOverlay=function(){g_objWrapper.children(".ug-overlay-disabled").hide()},this.___________END_SET_CONTROLS___________=function(){},this.___________PLAY_MODE___________=function(){},this.startPlayMode=function(){if(g_temp.isPlayMode=!0,g_temp.isPlayModePaused=!1,g_temp.playTimePassed=0,g_temp.playTimeLastStep=jQuery.now(),g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval),g_temp.objProgress){var e=g_temp.objProgress.getElement();g_temp.objProgress.setProgress(0),e.show()}g_objGallery.trigger(t.events.START_PLAY),g_objSlider&&1==g_objSlider.isCurrentSlideLoadingImage()&&t.pausePlaying()},this.resetPlaying=function(){return 0==g_temp.isPlayMode||(g_temp.playTimePassed=0,void(g_temp.playTimeLastStep=jQuery.now()))},this.pausePlaying=function(){return 1==g_temp.isPlayModePaused||(g_temp.isPlayModePaused=!0,clearInterval(g_temp.playHandle),void g_objGallery.trigger(t.events.PAUSE_PLAYING))},this.continuePlaying=function(){return 0==g_temp.isPlayModePaused||(g_temp.isPlayModePaused=!1,g_temp.playTimeLastStep=jQuery.now(),void(g_temp.playHandle=setInterval(advanceNextStep,g_temp.playStepInterval)))},this.stopPlayMode=function(){if(g_temp.isPlayMode=!1,clearInterval(g_temp.playHandle),g_temp.playTimePassed=0,g_temp.objProgress){var e=g_temp.objProgress.getElement();e.hide()}g_objGallery.trigger(t.events.STOP_PLAY)},this.isPlayMode=function(){return g_temp.isPlayMode},this.togglePlayMode=function(){0==t.isPlayMode()?t.startPlayMode():t.stopPlayMode()},this.___________GENERAL_EXTERNAL___________=function(){},this.shuffleItems=function(){g_arrItems=g_functions.arrayShuffle(g_arrItems);for(var e in g_arrItems)g_arrItems[e].index=parseInt(e)},this.setOptions=function(e){g_options=jQuery.extend(g_options,e)},this.selectItem=function(e,n){"number"==typeof e&&(e=t.getItem(e));var i=e.index;if(i==g_selectedItemIndex)return!0;if(unselectSeletedItem(),g_selectedItem=e,g_selectedItemIndex=i,g_objGallery.trigger(t.events.ITEM_CHANGE,[e,n]),1==g_temp.isPlayMode){t.resetPlaying();var r=g_objSlider.isCurrentSlideLoadingImage();1==r&&t.pausePlaying()}},this.nextItem=function(){var e=g_selectedItemIndex+1;return 0==g_numItems||(0==g_options.gallery_carousel&&e>=g_numItems||(e>=g_numItems&&(e=0),void t.selectItem(e,"next")))},this.prevItem=function(){var e=g_selectedItemIndex-1;return g_selectedItemIndex==-1&&(e=0),0==g_numItems||(0==g_options.gallery_carousel&&e<0||(e<0&&(e=g_numItems-1),void t.selectItem(e,"prev")))},this.isFullScreen=function(){return 1==g_temp.isFakeFullscreen||1==g_functions.isFullScreen()},this.isFakeFullscreen=function(){return g_temp.isFakeFullscreen},this.toFullScreen=function(){g_functions.setGlobalData("fullscreenID",g_galleryID);var e=g_objWrapper.get(0),t=g_functions.toFullscreen(e);0==t&&toFakeFullScreen()},this.exitFullScreen=function(){1==g_temp.isFakeFullscreen?exitFakeFullscreen():g_functions.exitFullscreen()},this.toggleFullscreen=function(){0==t.isFullScreen()?t.toFullScreen():t.exitFullScreen()},this.resize=function(e,t,n){g_objWrapper.css("width","auto"),g_objWrapper.css("max-width",e+"px"),t&&g_objWrapper.height(t),n||n===!0||onGalleryResized()},this.setSizeClass=function(e,n){if(!e)var e=g_objWrapper;if(!n)var i=t.getSize(),n=i.width;if(0==n)var n=jQuery(window).width();var r="";return n<=480?r="ug-under-480":n<=780?r="ug-under-780":n<960&&(r="ug-under-960"),1==e.hasClass(r)||(removeAllSizeClasses(e),void(""!=r&&e.addClass(r)))},this.isMobileMode=function(){return!!g_objWrapper.hasClass("ug-under-480")},this.isSmallWindow=function(){var e=jQuery(window).width();return!e||e<=480},this.changeItems=function(e,t){if(!e)var e="noitems";runGallery(g_galleryID,"nochange",e,t)},this.showErrorMessageReplaceGallery=function(e){showErrorMessage(e)},this.setFuncCustomHeight=function(e){g_temp.funcCustomHeight=e},this.__________AJAX_REQUEST_______=function(){},this.ajaxRequest=function(e,t,n,i){var r="html";if(1==n&&(r="json"),!i||"function"!=typeof i)throw new Error("ajaxRequest error: success function should be passed");var o=g_options.gallery_urlajax;if(""==o)throw new Error("ajaxRequest error: Ajax url don't passed");if("undefined"==typeof t)var t={};var a={action:"unitegallery_ajax_action",client_action:e,galleryID:g_galleryID,data:t};jQuery.ajax({type:"post",url:g_options.gallery_urlajax,dataType:"json",data:a,success:function(e){return e?e==-1||0===e?(showErrorMessage("ajax error!!!"),!1):"undefined"==typeof e.success?(showErrorMessage("The 'success' param is a must!"),!1):0==e.success?(showErrorMessage(e.message),!1):void i(e):(showErrorMessage("Empty ajax response!","Ajax Error"),!1)},error:function(e,t,n){console.log("Ajax Error!!! "+t)}})},this.requestNewItems=function(e,n,i){var r=g_options.gallery_enable_cache;if(i||(i=e),1==n&&(r=!1),1==r&&g_objCache.hasOwnProperty(i)){var o=g_objCache[i];t.changeItems(o,i)}else g_objGallery.trigger(t.events.GALLERY_BEFORE_REQUEST_ITEMS),t.ajaxRequest("front_get_cat_items",{catid:e},!0,function(e){var n=e.html;t.changeItems(n,i)})},this.run=function(e,t){g_options.gallery_debug_errors;if(t&&t.hasOwnProperty("gallery_debug_errors")&&(g_options.gallery_debug_errors=t.gallery_debug_errors),1==g_options.gallery_debug_errors)try{runGallery(e,t)}catch(e){if("object"==typeof e){var n=e.message,i=e.lineNumber,r=e.fileName;e.stack;n+=" <br><br> in file: "+r,n+=" <b> line "+i+"</b>",trace(e)}else var n=e;n=n.replace("Error:",""),showErrorMessage(n)}else runGallery(e,t)}}function UG_API(e){function t(e){var t={index:e.index,title:e.title,description:e.description,urlImage:e.urlImage,urlThumb:e.urlThumb},n=e.objThumbImage.data();for(var i in n){switch(i){case"image":case"description":continue}t[i]=n[i]}return t}var n,i=this,r=(jQuery(i),new UniteGalleryMain),o=[];r=e,n=jQuery(e),this.events={API_INIT_FUNCTIONS:"api_init",API_ON_EVENT:"api_on_event"},this.on=function(e,a,s){switch(s!==!0&&o.push({event:e,func:a}),e){case"item_change":n.on(r.events.ITEM_CHANGE,function(){var e=r.getSelectedItem(),n=t(e);a(n.index,n)});break;case"resize":n.on(r.events.SIZE_CHANGE,a);break;case"enter_fullscreen":n.on(r.events.ENTER_FULLSCREEN,a);break;case"exit_fullscreen":n.on(r.events.EXIT_FULLSCREEN,a);break;case"play":n.on(r.events.START_PLAY,a);break;case"stop":n.on(r.events.STOP_PLAY,a);break;case"pause":n.on(r.events.PAUSE_PLAYING,a);break;case"continue":n.on(r.events.CONTINUE_PLAYING,a);break;case"open_lightbox":n.on(r.events.OPEN_LIGHTBOX,a);break;case"close_lightbox":n.on(r.events.CLOSE_LIGHTBOX,a);break;case"load":n.on(r.events.LOAD,a);break;default:console&&console.log("wrong api event: "+e)}n.trigger(i.events.API_ON_EVENT,[e,a])},this.play=function(){r.startPlayMode()},this.stop=function(){r.stopPlayMode()},this.togglePlay=function(){r.togglePlayMode()},this.enterFullscreen=function(){r.toFullScreen()},this.exitFullscreen=function(){r.exitFullScreen()},this.toggleFullscreen=function(){r.toggleFullscreen()},this.resetZoom=function(){var e=r.getObjSlider();return!!e&&void e.zoomBack()},this.zoomIn=function(){var e=r.getObjSlider();return!!e&&void e.zoomIn()},this.zoomOut=function(){var e=r.getObjSlider();return!!e&&void e.zoomOut()},this.nextItem=function(){r.nextItem()},this.prevItem=function(){r.prevItem()},this.selectItem=function(e){r.selectItem(e)},this.resize=function(e,t){t?r.resize(e,t):r.resize(e)},this.getItem=function(e){var n=r.getItem(e),i=t(n);return i},this.getNumItems=function(){var e=r.getNumItems();return e},this.reloadGallery=function(e){if(!e)var e={};r.run(null,e),o.map(function(e){i.on(e.event,e.func,!0)})},this.destroy=function(){r.destroy()},n.trigger(i.events.API_INIT_FUNCTIONS,i)}function UGTheme_tiles(){function e(e,n){f=e,g=jQuery.extend(g,b),g=jQuery.extend(g,n),t(),f.setOptions(g),f.setFreestyleMode(),u=e.getObjects(),l=jQuery(e),c=u.g_objWrapper,h.init(e,g),v=h.getObjTileDesign()}function t(){switch(1==g.theme_enable_preloader&&(y.showPreloader=!0),g.theme_appearance_order){default:case"normal":break;case"shuffle":f.shuffleItems();break;case"keep":g.tiles_keep_order=!0}}function n(){c.addClass("ug-theme-tiles"),c.append("<div class='ug-tiles-wrapper' style='position:relative'></div>"),1==y.showPreloader&&(c.append("<div class='ug-tiles-preloader ug-preloader-trans'></div>"),
d=c.children(".ug-tiles-preloader"),d.fadeTo(0,0)),p=c.children(".ug-tiles-wrapper"),g.theme_gallery_padding&&c.css({"padding-left":g.theme_gallery_padding+"px","padding-right":g.theme_gallery_padding+"px"}),h.setHtml(p)}function i(){d&&(d.fadeTo(0,1),c.height(g.theme_preloading_height),m.placeElement(d,"center",g.theme_preloader_vertpos)),s(),h.run()}function r(){n(),i()}function o(e,t){t=jQuery(t);var n=v.getItemByTile(t);n.index}function a(){if(p.hide(),d){d.show();var e=m.getElementSize(d),t=e.bottom+30;c.height(t)}}function s(){d&&jQuery(h).on(h.events.TILES_FIRST_PLACED,function(){c.height("auto"),d.hide()}),jQuery(v).on(v.events.TILE_CLICK,o),l.on(f.events.GALLERY_BEFORE_REQUEST_ITEMS,a)}var l,u,c,d,p,f=new UniteGalleryMain,h=new UGTiles,m=new UGFunctions,v=new UGTileDesign,g={theme_enable_preloader:!0,theme_preloading_height:200,theme_preloader_vertpos:100,theme_gallery_padding:0,theme_appearance_order:"normal",theme_auto_open:null},b={gallery_width:"100%"},y={showPreloader:!1};this.destroy=function(){jQuery(v).off(v.events.TILE_CLICK),jQuery(h).off(h.events.TILES_FIRST_PLACED),l.off(f.events.GALLERY_BEFORE_REQUEST_ITEMS),h.destroy()},this.run=function(){r()},this.init=function(t,n){e(t,n)}}function _typeof(e){return e&&"undefined"!=typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function resample_hermite(e,t,n,i,r){var o=Date.now();i=Math.round(i),r=Math.round(r);for(var a=e.getContext("2d").getImageData(0,0,t,n),s=e.getContext("2d").getImageData(0,0,i,r),l=a.data,u=s.data,c=t/i,d=n/r,p=Math.ceil(c/2),f=Math.ceil(d/2),h=0;h<r;h++)for(var m=0;m<i;m++){for(var v=4*(m+h*i),g=0,b=0,y=0,_=gx_g=gx_b=gx_a=0,w=(h+.5)*d,C=Math.floor(h*d);C<(h+1)*d;C++)for(var E=Math.abs(w-(C+.5))/f,k=(m+.5)*c,T=E*E,x=Math.floor(m*c);x<(m+1)*c;x++){var S=Math.abs(k-(x+.5))/p,P=Math.sqrt(T+S*S);P>=-1&&P<=1&&(g=2*P*P*P-3*P*P+1,g>0&&(S=4*(x+C*t),gx_a+=g*l[S+3],y+=g,l[S+3]<255&&(g=g*l[S+3]/250),_+=g*l[S],gx_g+=g*l[S+1],gx_b+=g*l[S+2],b+=g))}u[v]=_/b,u[v+1]=gx_g/b,u[v+2]=gx_b/b,u[v+3]=gx_a/y}console.log("hermite = "+Math.round(Date.now()-o)/1e3+" s"),e.getContext("2d").clearRect(0,0,Math.max(t,i),Math.max(n,r)),e.width=i,e.height=r,e.getContext("2d").putImageData(s,0,0)}define("lib-build/css",[],function(){if("undefined"==typeof window)return{load:function(e,t,n){n()}};var e=document.getElementsByTagName("head")[0],t=window.navigator.userAgent.match(/Trident\/([^ ;]*)|AppleWebKit\/([^ ;]*)|Opera\/([^ ;]*)|rv\:([^ ;]*)(.*?)Gecko\/([^ ;]*)|MSIE\s([^ ;]*)/)||0,n=!1,i=!0;t[1]||t[7]?n=parseInt(t[1])<6||parseInt(t[7])<=9:t[2]?i=!1:t[4]&&(n=parseInt(t[4])<18);var r={};r.pluginBuilder="./css-builder";var o,a=function(){o=document.createElement("style"),e.appendChild(o)},s=function(e,t){a();var n=o.styleSheet||o.sheet;if(n&&n.addImport)n.addImport(e),o.onload=t;else{o.textContent='@import "'+e+'";';var i=setInterval(function(){try{o.sheet.cssRules,clearInterval(i),t()}catch(e){}},10)}},l=function(t,n){var r=document.createElement("link");if(r.type="text/css",r.rel="stylesheet",i)r.onload=function(){r.onload=function(){},setTimeout(n,7)};else var o=setInterval(function(){for(var e=0;e<document.styleSheets.length;e++){var t=document.styleSheets[e];if(t.href==r.href)return clearInterval(o),n()}},10);r.href=t,e.appendChild(r)};return r.normalize=function(e,t){return".css"==e.substr(e.length-4,4)&&(e=e.substr(0,e.length-4)),t(e)},r.load=function(e,t,i,r){(n?s:l)(t.toUrl(e+".css"),i)},r}),define("lib-build/css!lib/calcite-bootstrap/css/calcite-bootstrap-open.min",[],function(){}),define("lib-build/less",["require"],function(e){var t={};if(t.pluginBuilder="./less-builder","undefined"==typeof window)return t.load=function(e,t,n){n()},t;t.normalize=function(e,t){return".less"==e.substr(e.length-5,5)&&(e=e.substr(0,e.length-5)),e=t(e)};var n=document.getElementsByTagName("head")[0],i=document.getElementsByTagName("base");i=i&&i[0]&&i[0]&&i[0].href;var r=(i||window.location.href.split("#")[0].split("?")[0]).split("/");r[r.length-1]="",r=r.join("/");var o,a=0;return t.inject=function(e){a<31&&(o=document.createElement("style"),o.type="text/css",n.appendChild(o),a++),o.styleSheet?o.styleSheet.cssText+=e:o.appendChild(document.createTextNode(e))},t.load=function(n,i,o,a){var s={},l=a?a.less||a:s;"env"in l||(l.env="development");var u=window.less;u?u.Parser||(l===s&&(l=u),u=null):window.less=l,e(u?["./normalize"]:["./normalize","./lessc"],function(e,a){a||(a=u),"fileExt"in l||(l.fileExt=".less");var s=n;".css"!==s.substring(s.length-4)&&l.fileExt&&(s+=l.fileExt),s=e.absoluteURI(i.toUrl(s),r),a.render("@import ("+(l.importOption||"multiple")+') "'+s+'";',l,function(e,n){return e?o.error(e):(n.css=n.css.replace(/..\/..\/(..\/)*resources/g,"resources"),t.inject(n.css),void setTimeout(o,7))},l)})},t}),define("lib-build/less!storymaps/common/ui/bootstrap-override",[],function(){}),define("lib-build/css!lib/font-awesome/css/font-awesome",[],function(){}),define("lib-build/css!storymaps/common/Core",[],function(){}),define("lib-build/less!storymaps/common/Core",[],function(){}),define("storymaps/common/utils/SocialSharing",["dojo/Deferred","esri/urlUtils"],function(e,t){return{shareFacebook:function(e,t,n,i){var r="u="+this.cleanURL(i||document.location.href);window.open("https://www.facebook.com/sharer/sharer.php?"+r,"","toolbar=0,status=0,width=626,height=436")},shareTwitter:function(e,t){var n="text="+encodeURIComponent(e||"")+"&url="+this.cleanURL(t||document.location.href)+"&related=EsriStoryMaps&hashtags=storymap";window.open("https://twitter.com/intent/tweet?"+n,"","toolbar=0,status=0,width=626,height=436")},requestBitly:function(t){var n=["http://api.bitly.com/v3/shorten?callback=?","https://api-ssl.bitly.com/v3/shorten?callback=?"],i="http:"==location.protocol?n[0]:n[1],r=t||document.location.href,o=new e;return $.getJSON(i,{format:"json",apiKey:app.cfg.HEADER_SOCIAL.bitly.key,login:app.cfg.HEADER_SOCIAL.bitly.login,longUrl:r},function(e){e&&e&&e.data.url?o.resolve(e.data.url):o.reject()}),o},cleanURL:function(e,n){var i=t.urlToObject(e),r=i.path;return i.query&&(delete i.query.edit,delete i.query.locale,delete i.query.folderId,delete i.query.webmap,delete i.query.autoplay,$.each(Object.keys(i.query),function(e,t){r+=0===e?"?":"&",r+=void 0!==i.query[t]&&""!==i.query[t]?t+"="+i.query[t]:t})),n?r:encodeURIComponent(r)}}}),define("storymaps/common/utils/CommonHelper",["esri/urlUtils","dojo/cookie","./SocialSharing"],function(e,t,n){return{switchToBuilder:function(){document.location.search.match(/appid/)?document.location=n.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname+document.location.search,!0)+"&edit"+document.location.hash:"?"==document.location.search.slice(-1)?document.location=n.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname,!0)+"?edit"+document.location.hash:document.location=n.cleanURL(document.location.protocol+"//"+document.location.host+document.location.pathname,!0)+"?edit"+document.location.hash},getMyStoriesURL:function(){return app.isPortal?this.getPortalURL()+"/apps/MyStories/":"//storymaps.arcgis.com/en/my-stories/"},getUrlParams:function(){var t=e.urlToObject(document.location.search).query;return t?t:this.browserSupportHistory()||t?{}:e.urlToObject(document.location.hash).query||{}},browserSupportHistory:function(){return!(!window.history||!history.pushState)},isArcGISHosted:function(){return/(\/)([a-zA-Z0-9]+(\/))*(apps\/|home\/)([a-zA-Z0-9\-\_]+\/)/.test(document.location.pathname)},isDefaultLogoLink:function(e){return/\/\/www\.esri\.com$/i.test(e)},getAppID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.appid?app.indexCfg.appid:this.isArcGISHosted()||!e?t.appid:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.appid:void 0},getWebmapID:function(e){var t=this.getUrlParams();return app.indexCfg&&app.indexCfg.webmap?app.indexCfg.webmap:this.isArcGISHosted()||!e?t.webmap:app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]?t.webmap:void 0},getPortalUser:function(){var e=t("esri_auth");if(e&&(e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),!e.urlKey||!e.customBaseUrl||(e.urlKey+"."+e.customBaseUrl).toLowerCase()==document.location.hostname.toLowerCase()))return e?e.email:null},getCookieToken:function(){var e=t("esri_auth");if(e&&(e=JSON.parse(e.replace('"ssl":undefined','"ssl":""')),!e.urlKey||!e.customBaseUrl||(e.urlKey+"."+e.customBaseUrl).toLowerCase()==document.location.hostname.toLowerCase()))return e?e.token:null},userIsAppOwner:function(){var e=app.portal?app.portal.getPortalUser():null,t=app.data.appItem?app.data.appItem.item:null;return e&&t&&e.username==t.owner||null!=this.getPortalUser()&&t&&this.getPortalUser()==t.owner||e&&e.privileges&&$.inArray("portal:admin:updateItems",e.privileges)>-1||t&&"admin"==t.itemControl||t&&"update"==t.itemControl},checkUserItemPrivileges:function(){var e=app.portal?app.portal.getPortalUser():null;return e&&!e.orgId&&!e.privileges||e&&e.privileges&&$.inArray("portal:user:createItem",e.privileges)>-1},prependURLHTTP:function(e){return!e||""===e||e.match(/^mailto:/)?e:/^(https?:\/\/)|^(\/\/)/i.test(e)?e:"http://"+e},uploadedImageNeedsFixing:function(e){if(!e||!app.portal||!app.portal.url)return!1;const t=app.data&&app.data.appItem;if(!t)return!1;const n=t.item.id;if(!n)return!1;const i=t.data.values.template.createdWith,r=t.data.values.template.editedWith,o=i.match(/^1.[0|1]/)&&r.match(/^1.[0|1]/);return!(!o||!e.match(n+"/resources"))},fixUploadedImageUrl:function(e){const t=e.replace(/^(https?:\/\/)|^(\/\/)/,"").split(/\//)[0],n=app.portal.portalHostname;return t&&n?e.replace(t,n):e},throttle:function(e,t,n){t||(t=250);var i,r;return function(){var o=n||this,a=+new Date,s=arguments;i&&a<i+t?(clearTimeout(r),r=setTimeout(function(){i=a,e.apply(o,s)},t)):(i=a,e.apply(o,s))}}}}),function(){"use strict";function e(t,i){function r(e,t){return function(){return e.apply(t,arguments)}}var o;if(i=i||{},this.trackingClick=!1,this.trackingClickStart=0,this.targetElement=null,this.touchStartX=0,this.touchStartY=0,this.lastTouchIdentifier=0,this.touchBoundary=i.touchBoundary||10,this.layer=t,this.tapDelay=i.tapDelay||200,this.tapTimeout=i.tapTimeout||700,!e.notNeeded(t)){for(var a=["onMouse","onClick","onTouchStart","onTouchMove","onTouchEnd","onTouchCancel"],s=this,l=0,u=a.length;l<u;l++)s[a[l]]=r(s[a[l]],s);n&&(t.addEventListener("mouseover",this.onMouse,!0),t.addEventListener("mousedown",this.onMouse,!0),t.addEventListener("mouseup",this.onMouse,!0)),t.addEventListener("click",this.onClick,!0),t.addEventListener("touchstart",this.onTouchStart,!1),t.addEventListener("touchmove",this.onTouchMove,!1),t.addEventListener("touchend",this.onTouchEnd,!1),t.addEventListener("touchcancel",this.onTouchCancel,!1),Event.prototype.stopImmediatePropagation||(t.removeEventListener=function(e,n,i){var r=Node.prototype.removeEventListener;"click"===e?r.call(t,e,n.hijacked||n,i):r.call(t,e,n,i)},t.addEventListener=function(e,n,i){var r=Node.prototype.addEventListener;"click"===e?r.call(t,e,n.hijacked||(n.hijacked=function(e){e.propagationStopped||n(e)}),i):r.call(t,e,n,i)}),"function"==typeof t.onclick&&(o=t.onclick,t.addEventListener("click",function(e){o(e)},!1),t.onclick=null)}}var t=navigator.userAgent.indexOf("Windows Phone")>=0,n=navigator.userAgent.indexOf("Android")>0&&!t,i=/iP(ad|hone|od)/.test(navigator.userAgent)&&!t,r=i&&/OS 4_\d(_\d)?/.test(navigator.userAgent),o=i&&/OS [6-7]_\d/.test(navigator.userAgent),a=navigator.userAgent.indexOf("BB10")>0;e.prototype.needsClick=function(e){switch(e.nodeName.toLowerCase()){case"button":case"select":case"textarea":if(e.disabled)return!0;break;case"input":if(i&&"file"===e.type||e.disabled)return!0;break;case"label":case"iframe":case"video":return!0}return/\bneedsclick\b/.test(e.className)},e.prototype.needsFocus=function(e){switch(e.nodeName.toLowerCase()){case"textarea":return!0;case"select":return!n;case"input":switch(e.type){case"button":case"checkbox":case"file":case"image":case"radio":case"submit":return!1}return!e.disabled&&!e.readOnly;default:return/\bneedsfocus\b/.test(e.className)}},e.prototype.sendClick=function(e,t){var n,i;document.activeElement&&document.activeElement!==e&&document.activeElement.blur(),i=t.changedTouches[0],n=document.createEvent("MouseEvents"),n.initMouseEvent(this.determineEventType(e),!0,!0,window,1,i.screenX,i.screenY,i.clientX,i.clientY,!1,!1,!1,!1,0,null),n.forwardedTouchEvent=!0,e.dispatchEvent(n)},e.prototype.determineEventType=function(e){return n&&"select"===e.tagName.toLowerCase()?"mousedown":"click"},e.prototype.focus=function(e){var t;i&&e.setSelectionRange&&0!==e.type.indexOf("date")&&"time"!==e.type&&"month"!==e.type?(t=e.value.length,e.setSelectionRange(t,t)):e.focus()},e.prototype.updateScrollParent=function(e){var t,n;if(t=e.fastClickScrollParent,!t||!t.contains(e)){n=e;do{if(n.scrollHeight>n.offsetHeight){t=n,e.fastClickScrollParent=n;break}n=n.parentElement}while(n)}t&&(t.fastClickLastScrollTop=t.scrollTop)},e.prototype.getTargetElementFromEventTarget=function(e){return e.nodeType===Node.TEXT_NODE?e.parentNode:e},e.prototype.onTouchStart=function(e){var t,n,o;if(e.targetTouches.length>1)return!0;if(t=this.getTargetElementFromEventTarget(e.target),n=e.targetTouches[0],i){if(o=window.getSelection(),o.rangeCount&&!o.isCollapsed)return!0;if(!r){if(n.identifier&&n.identifier===this.lastTouchIdentifier)return e.preventDefault(),!1;this.lastTouchIdentifier=n.identifier,this.updateScrollParent(t)}}return this.trackingClick=!0,this.trackingClickStart=e.timeStamp,this.targetElement=t,this.touchStartX=n.pageX,this.touchStartY=n.pageY,e.timeStamp-this.lastClickTime<this.tapDelay&&e.preventDefault(),!0},e.prototype.touchHasMoved=function(e){var t=e.changedTouches[0],n=this.touchBoundary;return Math.abs(t.pageX-this.touchStartX)>n||Math.abs(t.pageY-this.touchStartY)>n},e.prototype.onTouchMove=function(e){return!this.trackingClick||((this.targetElement!==this.getTargetElementFromEventTarget(e.target)||this.touchHasMoved(e))&&(this.trackingClick=!1,this.targetElement=null),!0)},e.prototype.findControl=function(e){return void 0!==e.control?e.control:e.htmlFor?document.getElementById(e.htmlFor):e.querySelector("button, input:not([type=hidden]), keygen, meter, output, progress, select, textarea")},e.prototype.onTouchEnd=function(e){var t,a,s,l,u,c=this.targetElement;if(!this.trackingClick)return!0;if(e.timeStamp-this.lastClickTime<this.tapDelay)return this.cancelNextClick=!0,!0;if(e.timeStamp-this.trackingClickStart>this.tapTimeout)return!0;if(this.cancelNextClick=!1,this.lastClickTime=e.timeStamp,a=this.trackingClickStart,this.trackingClick=!1,this.trackingClickStart=0,o&&(u=e.changedTouches[0],c=document.elementFromPoint(u.pageX-window.pageXOffset,u.pageY-window.pageYOffset)||c,c.fastClickScrollParent=this.targetElement.fastClickScrollParent),s=c.tagName.toLowerCase(),"label"===s){if(t=this.findControl(c)){if(this.focus(c),n)return!1;c=t}}else if(this.needsFocus(c))return e.timeStamp-a>100||i&&window.top!==window&&"input"===s?(this.targetElement=null,!1):(this.focus(c),this.sendClick(c,e),i&&"select"===s||(this.targetElement=null,e.preventDefault()),!1);return!(!i||r||(l=c.fastClickScrollParent,!l||l.fastClickLastScrollTop===l.scrollTop))||(this.needsClick(c)||(e.preventDefault(),this.sendClick(c,e)),!1)},e.prototype.onTouchCancel=function(){this.trackingClick=!1,this.targetElement=null},e.prototype.onMouse=function(e){return!this.targetElement||(!!e.forwardedTouchEvent||(!e.cancelable||(!(!this.needsClick(this.targetElement)||this.cancelNextClick)||(e.stopImmediatePropagation?e.stopImmediatePropagation():e.propagationStopped=!0,e.stopPropagation(),e.preventDefault(),!1))))},e.prototype.onClick=function(e){var t;return this.trackingClick?(this.targetElement=null,this.trackingClick=!1,!0):"submit"===e.target.type&&0===e.detail||(t=this.onMouse(e),t||(this.targetElement=null),t)},e.prototype.destroy=function(){var e=this.layer;n&&(e.removeEventListener("mouseover",this.onMouse,!0),e.removeEventListener("mousedown",this.onMouse,!0),e.removeEventListener("mouseup",this.onMouse,!0)),e.removeEventListener("click",this.onClick,!0),e.removeEventListener("touchstart",this.onTouchStart,!1),e.removeEventListener("touchmove",this.onTouchMove,!1),e.removeEventListener("touchend",this.onTouchEnd,!1),e.removeEventListener("touchcancel",this.onTouchCancel,!1)},e.notNeeded=function(e){var t,i,r,o;if("undefined"==typeof window.ontouchstart)return!0;if(i=+(/Chrome\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1]){if(!n)return!0;if(t=document.querySelector("meta[name=viewport]")){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(i>31&&document.documentElement.scrollWidth<=window.outerWidth)return!0}}if(a&&(r=navigator.userAgent.match(/Version\/([0-9]*)\.([0-9]*)/),r[1]>=10&&r[2]>=3&&(t=document.querySelector("meta[name=viewport]")))){if(t.content.indexOf("user-scalable=no")!==-1)return!0;if(document.documentElement.scrollWidth<=window.outerWidth)return!0}return"none"===e.style.msTouchAction||"manipulation"===e.style.touchAction||(o=+(/Firefox\/([0-9]+)/.exec(navigator.userAgent)||[,0])[1],!!(o>=27&&(t=document.querySelector("meta[name=viewport]"),t&&(t.content.indexOf("user-scalable=no")!==-1||document.documentElement.scrollWidth<=window.outerWidth)))||("none"===e.style.touchAction||"manipulation"===e.style.touchAction))},e.attach=function(t,n){return new e(t,n)},"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("lib/fastclick/lib/fastclick",[],function(){return e}):"undefined"!=typeof module&&module.exports?(module.exports=e.attach,module.exports.FastClick=e):window.FastClick=e}(),define("storymaps/common/Core",["lib-build/css!lib/calcite-bootstrap/css/calcite-bootstrap-open.min","lib-build/less!./ui/bootstrap-override","lib-build/css!../../lib/font-awesome/css/font-awesome","lib-build/css!./Core","lib-build/less!./Core","esri/map","esri/arcgis/Portal","esri/arcgis/utils","./utils/CommonHelper","esri/urlUtils","dojo/has","esri/IdentityManager","esri/arcgis/OAuthInfo","esri/config","esri/tasks/GeometryService","esri/request","dojo/topic","dojo/on","dojo/_base/lang","dojo/_base/array","dojo/_base/kernel","dojo/Deferred","dojo/DeferredList","dojo/query","lib/fastclick/lib/fastclick"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f,h,m,v,g,b,y,_,w,C,E,k){function T(e,t){if(Y=e,Q=t,app.userCanEdit=!1,V(),l.isArcGISHosted()?app.indexCfg={}:G()||(app.indexCfg={proxyurl:app.indexCfg.proxyurl,sharingurl:app.indexCfg.sharingurl,username:app.indexCfg.username,password:app.indexCfg.password,oAuthAppId:app.indexCfg.oAuthAppId,story:app.indexCfg.story}),document.title=app.cfg.TPL_NAME,c("touch")&&$("body").addClass("hasTouch"),k.prototype._needsClick=k.prototype.needsClick,k.prototype.needsClick=function(e){return!!$(e).parents(".esriPopup").length||k.prototype._needsClick.call(this,e)},k.attach(document.body),window!=window.top&&$("body").addClass("isEmbed"),b.mixin(app,{data:{},appCfg:{supportWebmapPreviewAGOL:!1,useWebmapInApp:!1,useStandardHeader:!1,useAppTitleAsPageTitle:!1},portal:null,builder:t,isLoading:!0,loadingTimeout:null}),app.isInBuilder&&(c("ie")||c("trident")||c("ff")||c("edge")))return $("#fatalError .error-title").html(i18n.viewer.errors.sorry),$("#fatalError .error-msg").html(i18n.viewer.errors.builderSupport4.replace("${CHROME}",'<a href="https://www.google.com/chrome/" target="_blank">Chrome</a>').replace("${SAFARI}",'<a href="https://www.apple.com/safari/" target="_blank">Safari</a>').replace("${ESRI-SUPPORT}",'<a href="https://support.esri.com" target="_blank">Esri Support</a>').replace("${FIREFOX-BUILDER}",'<a href="http://links.esri.com/storymaps/vote-for-cascade-builder-on-firefox" target="_blank">Firefox</a>').replace("${IE-BUILDER}",'<a href="http://links.esri.com/storymaps/vote-for-cascade-builder-on-ie" target="_blank">IE</a>')),void $("#fatalError").show();if(app.isInBuilder&&c("ipad"))return $("#fatalError .error-title").html(i18n.viewer.errors.sorry),$("#fatalError .error-msg").html(i18n.viewer.errors.builderSupport2),void $("#fatalError").show();if(c("ie")<11)return $("#fatalError .error-title").html(i18n.viewer.errors.sorry),$("#fatalError .error-msg").html(i18n.viewer.errors.noViewerIE.replace("${VERSION}",11).replace("${UPGRADE}",'<a href="http://browsehappy.com/" target="_blank">'+i18n.viewer.errors.upgradeBrowser+"</a>")),void $("#fatalError").show();if(g(d,"dialog-create",function(){app.isLoading&&L("invalidConfignoOAuth")}),v.subscribe("tpl-ready",function(){var e=document.location.search;e&&(e=e.replace("&preview","")),window.history.replaceState({},"","index.html"+e+document.location.hash)}),app.isInBuilder){var n="notConfiguredMobile";c("touch")&&(window.innerHeight>window.innerWidth?window.innerHeight>768&&(n="notConfiguredMobile2"):window.innerWidth>768&&(n="notConfiguredMobile2")),L(n,null,!0)}if(Y.init(this)){H();var i=l.getUrlParams();if(i.sharinghost&&(app.indexCfg.sharingurl=i.sharinghost,app.indexCfg.proxyurl=i.sharinghost.split("/content/")[0]+"/proxy"),!app.indexCfg.sharingurl){var r=document.location.pathname.indexOf("/apps/");if(r==-1&&(r=document.location.pathname.indexOf("/home/")),r!=-1){var o=location.pathname.substr(0,r);app.indexCfg.sharingurl="//"+location.host+o+"/sharing/content/items",app.indexCfg.proxyurl="//"+location.host+o+"/sharing/proxy"}else app.indexCfg.sharingurl=app.cfg.DEFAULT_SHARING_URL}app.indexCfg.sharingurl.match(/^http/)?s.arcgisUrl=app.indexCfg.sharingurl:s.arcgisUrl=location.protocol+app.indexCfg.sharingurl,app.indexCfg.proxyurl||(app.indexCfg.proxyurl=app.cfg.DEFAULT_PROXY_URL),f.defaults.io.proxyUrl=location.protocol+app.indexCfg.proxyurl,d&&d.setProtocolErrorHandler(function(){return!0}),app.isInBuilder&&app.cfg.CORS_SERVER&&$.each(app.cfg.CORS_SERVER,function(e,t){f.defaults.io.corsEnabledServers.push(t)}),app.cfg.PROXY_RULES&&app.cfg.PROXY_RULES.length&&$.each(app.cfg.PROXY_RULES,function(e,t){t&&t.urlPrefix&&t.proxyUrl&&u.addProxyRule(t)}),f.defaults.io.timeout=app.isInBuilder?app.cfg.TIMEOUT_BUILDER_REQUEST:app.cfg.TIMEOUT_VIEWER_REQUEST,$.fn.modal.Constructor.prototype.enforceFocus=function(){},$("form").bind("keydown",function(e){if(13==e.keyCode)return!1}),v.subscribe("CORE_UPDATE_EXTENT",R),app.portal=new a.Portal(app.indexCfg.sharingurl.split("/sharing/")[0]),app.portal.on("load",function(e){if(app.isPortal=!!e.isPortal,q(),app.indexCfg.oAuthAppId){var n=new p({appId:app.indexCfg.oAuthAppId,popup:!1,portalUrl:"https:"+app.indexCfg.sharingurl.split("/sharing/")[0]});d.registerOAuthInfos([n]),d.checkSignInStatus(n.portalUrl).then(function(){t?O().then(x):O().then(x)},function(){t?O().then(x):x()})}else x()})}}function x(){var e=l.getAppID(G()),t=l.getWebmapID(G()),n=!(app.appCfg&&!app.appCfg.supportWebmapPreviewAGOL),i=app.indexCfg.story||l.getUrlParams().story;return i?G()?void Y.getConfig(i):void setTimeout(function(){Y.getConfig(i)},1e3):e?void S(e):t&&!n?void(l.isArcGISHosted()?A():I(t)):app.isInBuilder&&Q.isDirectCreation&&G()&&l.isArcGISHosted()&&!l.getPortalUser()&&!app.portal.getPortalUser()?void U():app.isInBuilder&&Q.isDirectCreation?void O().then(function(){N(),j()}):void(l.isArcGISHosted()?A():L(!X.appid||app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners[0]?app.isProduction?"invalidConfigNoApp":"invalidConfigNoAppDev":"unspecifiedConfigOwner"))}function S(e){var t=void 0!==X.forceLogin;t||app.isInBuilder?O().then(function(){P(e)},function(){L("notAuthorized")}):P(e)}function P(e){s.getItem(e).then(function(e){if(!e)return void L("appLoadingFail");var t=e.item,n=e.itemData;if(app.data.appItem={item:t,data:n},app.userCanEdit=l.userIsAppOwner(),app.isInBuilder||app.userCanEdit||(document.__defineGetter__?(document.__defineGetter__("cookie",function(){return""}),document.__defineSetter__("cookie",function(){})):Object.defineProperty(document,"cookie",{get:function(){return""},set:function(){return!0}})),app.indexCfg.authorizedOwners&&app.indexCfg.authorizedOwners.length>0&&app.indexCfg.authorizedOwners[0]){var i=t.owner,r=!1;if(i&&(r=$.inArray(i,app.indexCfg.authorizedOwners)!=-1),r||"*"!=app.indexCfg.authorizedOwners[0]||(r=!0),r||$.each(app.indexCfg.authorizedOwners,function(e,n){var i=n.match(/^\[(.*)\]$/);i&&t.orgId==i[1]&&(r=!0)}),!r)return void L("invalidConfigOwner")}if(t&&t.appProxies){var o=y.map(t.appProxies,function(e){return{url:e.sourceUrl,mixin:{url:e.proxyUrl}}});app.data.appProxies=o}if(app.isInBuilder&&G()&&!app.userCanEdit)return void L("notAuthorized");var a=Y.isStoryBlank();a?app.isInBuilder?j():l.getAppID(G())?app.userCanEdit?l.switchToBuilder():L("notConfiguredDesktop"):L("noLayer"):j()},function(e){L(e&&400==e.httpCode?"invalidApp":e&&403==e.httpCode?"notAuthorized":"appLoadingFail")})}function O(){var e=new w;return app.portal.signIn().then(function(){return app.isInBuilder&&!l.checkUserItemPrivileges()?void L("notAuthorizedBuilder"):(app.userCanEdit=l.userIsAppOwner(),q(),void e.resolve())},function(){e.reject()}),e}function I(e){Y.loadFirstWebmap(e).then(b.hitch(this,function(e){M(e)}),b.hitch(this,function(){L("createMap")}))}function M(){console.error("FATAL ERROR")}function A(){window.location=app.isPortal&&app.cfg.HELP_URL_PORTAL?app.cfg.HELP_URL_PORTAL:app.cfg.HELP_URL}function N(){var e=app.data.title;app.appCfg.useAppTitleAsPageTitle&&(document.title=e?$("<div>"+e+"</div>").text():app.cfg.TPL_NAME)}function j(){Y.isStoryBlank()&&app.isInBuilder?(app.builder.appInitComplete(),Y.appInitComplete()):app.isInBuilder?(Y.appInitComplete(),app.builder.appInitComplete()):Y.appInitComplete(),!app.isInBuilder&&!app.userCanEdit||9==c("ie")||X.preview||(c("ff")&&$(".builderShare #my-stories-frame").remove(),c("ff")||!app.isInBuilder),document.location.pathname.match(/\/apps\/[a-zA-Z]+\/$/)&&document.location.search.match(/^\?appid=/)&&(!c("ie")||c("ie")>=10)&&window.history.replaceState({},"","index.html"+document.location.search+document.location.hash)}function L(e,t,n){var i=i18n.viewer.errors[e];i=i.replace(/{TPL_NAME}/g,app.cfg.TPL_NAME),"notAuthorized"==e&&app.indexCfg.oAuthAppId&&(i+='<div><button class="btn btn-sm btn-default" onclick="esri.id.destroyCredentials(); window.location.reload();">'+i18n.viewer.errors.signOut+"</button></div>"),"appLoadingFail"==e?$("#loadingMessage").html('<div id="loadingRetry"> <button type="button" class="btn btn-naked btn-sm" onclick="document.location.reload()">'+i18n.viewer.loading.failButton+" </button></div>").hide().fadeIn(1200,function(){$("#loadingMessage").addClass("loaded")}):$("#loadingMessage").hide(),$("#fatalError .error-msg").html(i),n||(z(),$("#loadingIndicator").hide(),$("#fatalError").show())}function D(e){$("#fatalError .error-msg").html(i18n.viewer.errors[e])}function R(e){if(!(e&&e.spatialReference&&app.map&&app.map.extent.spatialReference&&app.map.spatialReference)){var t=new w;return t.resolve(),t}if(app.map.spatialReference.wkid==e.spatialReference.wkid)return app.map.setExtent(e);var n=new w;return f.defaults.geometryService.project([e],app.map.spatialReference,function(e){e&&e[0]&&(app.map.setExtent(e[0]),n.resolve())}),n}function F(e,t){e&&(102100!=app.map.spatialReference.wkid&&4326!=app.map.spatialReference.wkid?f.defaults.geometryService.project([t],app.map.spatialReference,function(e){e&&e[0]&&(app.map.extent.contains(e[0])||app.map.centerAt(e[0]))}):app.map.extent.contains(t)||app.map.centerAt(t))}function B(){return!app.isInBuilder&&(!G()&&!!l.getAppID(G())||G()&&app.userCanEdit)&&(void 0===X.preview||"false"==X.preview)}function U(){window.location=s.arcgisUrl.split("/sharing/")[0]+"/home/signin.html?returnUrl="+encodeURIComponent(document.location.href)}function H(){app.loadingTimeout=setTimeout(W,app.cfg.TIMEOUT_VIEWER_LOAD)}function z(){"undefined"!=typeof app&&app.loadingTimeout&&(clearTimeout(app.loadingTimeout),app.loadingTimeout=null)}function W(){if(d&&d.dialog&&d.dialog._alreadyInitialized&&!d.loadingTimeoutAlreadyFired)return clearTimeout(app.loadingTimeout),H(),void(d._busy||(d.loadingTimeoutAlreadyFired=!0))}function V(){document.documentElement.lang=_.locale,E("#fatalError .error-title")[0].innerHTML=i18n.viewer.errors.boxTitle}function G(){return K.environment!=["TPL","ENV","DEV"].join("_")}function q(){if(app.portal){!app.cfg.HELPER_SERVICES.geocode.length&&app.portal.helperServices&&app.portal.helperServices.geocode&&app.portal.helperServices.geocode.length&&app.portal.helperServices.geocode[0].url&&$.each(app.portal.helperServices.geocode,function(e,t){app.cfg.HELPER_SERVICES.geocode.push(t)});var e;if(app.cfg.HELPER_SERVICES.geometry&&app.cfg.HELPER_SERVICES.geometry.url?e=app.cfg.HELPER_SERVICES.geometry.url:app.portal.helperServices.geometry&&app.portal.helperServices.geometry.url&&(e=app.portal.helperServices.geometry.url),f.defaults.geometryService=new h(e),!app.cfg.BING_MAPS_KEY&&app.portal.bingKey&&(app.cfg.BING_MAPS_KEY=app.portal.bingKey),app.portal.isPortal&&app.cfg&&app.cfg.AUTHORIZED_IMPORT_SOURCE&&(app.cfg.AUTHORIZED_IMPORT_SOURCE.featureService=!1),app.isPortal=!!app.portal.isPortal,app.isPortal&&app.portal.helpBase&&app.portal.portalHostname&&!app.cfg.HELP_URL_PORTAL.match("^//")){var t=app.portal.portalHostname.split("/")[0];app.cfg.HELP_URL_PORTAL="//"+t+app.portal.helpBase+app.cfg.HELP_URL_PORTAL}}}var K={environment:"TPL_ENV_PRODUCTION"},Y=null,Q=null,X=l.getUrlParams();return{init:T,isProd:G,appInitComplete:j,loadWebMap:I,hasSwitchBuilderButton:B,zoomToDeviceLocation:F,cleanLoadingTimeout:z,initError:L,replaceInitErrorMessage:D,portalLogin:O}}),define("lib-build/less!storymaps-react/tpl/view/media/Text",[],function(){}),define("storymaps-react/tpl/view/media/Text",["module","exports","lib-build/less!./Text"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.type="text",this._text=t}return i(e,[{key:"check",value:function(e){return this._text&&e?"block"==e.placement||(console.log("Could not render text block in section"),!1):(console.log("Could not render text block in section"),!1)}},{key:"render",value:function(e){return this.check(e)?this._text.value:null}},{key:"postCreate",value:function(){}},{key:"update",value:function(){}},{key:"load",value:function(){}},{key:"performAction",value:function(){}},{key:"getArcGISContent",value:function(){return[]}},{key:"getPreviewText",value:function(){return $(this._text.value).html()}}]),e}();t.default=r,e.exports=t.default}),define("storymaps/tpl/utils/UI",[],function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return{isMobileBrowser:function(){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|Opera Mini|IEMobile/i.test(navigator.userAgent)},hasWebGL:function(e){if(window.WebGLRenderingContext){for(var t=document.createElement("canvas"),n=["webgl","experimental-webgl","moz-webgl","webkit-3d"],i=!1,r=0;r<4;r++)try{if(i=t.getContext(n[r]),i&&"function"==typeof i.getParameter)return!e||{name:n[r],gl:i}}catch(e){}return!1}return!1},addCSSRule:function(e,t,n){var i="head";if(n&&(i=n.contents().find("head")),t){var r=$(i).find("#"+t).eq(0);if(r.length)return void r.html(e)}$("<style>").prop("type","text/css").attr("id",t).html(e).appendTo(i)},getUID:function(){return Date.now()+"-"+e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}),define("text",{}),define("handlebars/safe-string",["exports"],function(e){function t(e){this.string=e}t.prototype.toString=function(){return""+this.string},e.default=t}),define("handlebars/utils",["./safe-string","exports"],function(e,t){function n(e){return l[e]}function i(e){for(var t=1;t<arguments.length;t++)for(var n in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],n)&&(e[n]=arguments[t][n]);
return e}function r(e){return e instanceof s?e.toString():null==e?"":e?(e=""+e,c.test(e)?e.replace(u,n):e):e+""}function o(e){return!e&&0!==e||!(!f(e)||0!==e.length)}function a(e,t){return(e?e+".":"")+t}var s=e.default,l={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},u=/[&<>"'`]/g,c=/[&<>"'`]/;t.extend=i;var d=Object.prototype.toString;t.toString=d;var p=function(e){return"function"==typeof e};p(/x/)&&(p=function(e){return"function"==typeof e&&"[object Function]"===d.call(e)});var p;t.isFunction=p;var f=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===d.call(e)};t.isArray=f,t.escapeExpression=r,t.isEmpty=o,t.appendContextPath=a}),define("handlebars/exception",["exports"],function(e){function t(e,t){var i;t&&t.firstLine&&(i=t.firstLine,e+=" - "+i+":"+t.firstColumn);for(var r=Error.prototype.constructor.call(this,e),o=0;o<n.length;o++)this[n[o]]=r[n[o]];i&&(this.lineNumber=i,this.column=t.firstColumn)}var n=["description","fileName","lineNumber","message","name","number","stack"];t.prototype=new Error,e.default=t}),define("handlebars/base",["./utils","./exception","exports"],function(e,t,n){function i(e,t){this.helpers=e||{},this.partials=t||{},r(this)}function r(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new a("Missing helper: '"+arguments[arguments.length-1].name+"'")}),e.registerHelper("blockHelperMissing",function(t,n){var i=n.inverse,r=n.fn;if(t===!0)return r(this);if(t===!1||null==t)return i(this);if(c(t))return t.length>0?(n.ids&&(n.ids=[n.name]),e.helpers.each(t,n)):i(this);if(n.data&&n.ids){var a=v(n.data);a.contextPath=o.appendContextPath(n.data.contextPath,n.name),n={data:a}}return r(t,n)}),e.registerHelper("each",function(e,t){if(!t)throw new a("Must pass iterator to #each");var n,i,r=t.fn,s=t.inverse,l=0,u="";if(t.data&&t.ids&&(i=o.appendContextPath(t.data.contextPath,t.ids[0])+"."),d(e)&&(e=e.call(this)),t.data&&(n=v(t.data)),e&&"object"==typeof e)if(c(e))for(var p=e.length;l<p;l++)n&&(n.index=l,n.first=0===l,n.last=l===e.length-1,i&&(n.contextPath=i+l)),u+=r(e[l],{data:n});else for(var f in e)e.hasOwnProperty(f)&&(n&&(n.key=f,n.index=l,n.first=0===l,i&&(n.contextPath=i+f)),u+=r(e[f],{data:n}),l++);return 0===l&&(u=s(this)),u}),e.registerHelper("if",function(e,t){return d(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||o.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,n){return e.helpers.if.call(this,t,{fn:n.inverse,inverse:n.fn,hash:n.hash})}),e.registerHelper("with",function(e,t){d(e)&&(e=e.call(this));var n=t.fn;if(o.isEmpty(e))return t.inverse(this);if(t.data&&t.ids){var i=v(t.data);i.contextPath=o.appendContextPath(t.data.contextPath,t.ids[0]),t={data:i}}return n(e,t)}),e.registerHelper("log",function(t,n){var i=n.data&&null!=n.data.level?parseInt(n.data.level,10):1;e.log(i,t)}),e.registerHelper("lookup",function(e,t){return e&&e[t]})}var o=e,a=t.default,s="2.0.0";n.VERSION=s;var l=6;n.COMPILER_REVISION=l;var u={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};n.REVISION_CHANGES=u;var c=o.isArray,d=o.isFunction,p=o.toString,f="[object Object]";n.HandlebarsEnvironment=i,i.prototype={constructor:i,logger:h,log:m,registerHelper:function(e,t){if(p.call(e)===f){if(t)throw new a("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){p.call(e)===f?o.extend(this.partials,e):this.partials[e]=t},unregisterPartial:function(e){delete this.partials[e]}};var h={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(e,t){if(h.level<=e){var n=h.methodMap[e];"undefined"!=typeof console&&console[n]&&console[n].call(console,t)}}};n.logger=h;var m=h.log;n.log=m;var v=function(e){var t=o.extend({},e);return t._parent=e,t};n.createFrame=v}),define("handlebars/runtime",["./utils","./exception","./base","exports"],function(e,t,n,i){function r(e){var t=e&&e[0]||1,n=p;if(t!==n){if(t<n){var i=f[n],r=f[t];throw new d("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+i+") or downgrade your runtime to an older version ("+r+").")}throw new d("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function o(e,t){if(!t)throw new d("No environment passed to template");if(!e||!e.main)throw new d("Unknown template object: "+typeof e);t.VM.checkRevision(e.compiler);var n=function(n,i,r,o,a,s,l,u,p){a&&(o=c.extend({},o,a));var f=t.VM.invokePartial.call(this,n,r,o,s,l,u,p);if(null==f&&t.compile){var h={helpers:s,partials:l,data:u,depths:p};l[r]=t.compile(n,{data:void 0!==u,compat:e.compat},t),f=l[r](o,h)}if(null!=f){if(i){for(var m=f.split("\n"),v=0,g=m.length;v<g&&(m[v]||v+1!==g);v++)m[v]=i+m[v];f=m.join("\n")}return f}throw new d("The partial "+r+" could not be compiled when running in runtime-only mode")},i={lookup:function(e,t){for(var n=e.length,i=0;i<n;i++)if(e[i]&&null!=e[i][t])return e[i][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:c.escapeExpression,invokePartial:n,fn:function(t){return e[t]},programs:[],program:function(e,t,n){var i=this.programs[e],r=this.fn(e);return t||n?i=a(this,e,r,t,n):i||(i=this.programs[e]=a(this,e,r)),i},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var n=e||t;return e&&t&&e!==t&&(n=c.extend({},t,e)),n},noop:t.VM.noop,compilerInfo:e.compiler},r=function(t,n){n=n||{};var o=n.data;r._setup(n),!n.partial&&e.useData&&(o=u(t,o));var a;return e.useDepths&&(a=n.depths?[t].concat(n.depths):[t]),e.main.call(i,t,i.helpers,i.partials,o,a)};return r.isTop=!0,r._setup=function(n){n.partial?(i.helpers=n.helpers,i.partials=n.partials):(i.helpers=i.merge(n.helpers,t.helpers),e.usePartial&&(i.partials=i.merge(n.partials,t.partials)))},r._child=function(t,n,r){if(e.useDepths&&!r)throw new d("must pass parent depths");return a(i,t,e[t],n,r)},r}function a(e,t,n,i,r){var o=function(t,o){return o=o||{},n.call(e,t,e.helpers,e.partials,o.data||i,r&&[t].concat(r))};return o.program=t,o.depth=r?r.length:0,o}function s(e,t,n,i,r,o,a){var s={partial:!0,helpers:i,partials:r,data:o,depths:a};if(void 0===e)throw new d("The partial "+t+" could not be found");if(e instanceof Function)return e(n,s)}function l(){return""}function u(e,t){return t&&"root"in t||(t=t?h(t):{},t.root=e),t}var c=e,d=t.default,p=n.COMPILER_REVISION,f=n.REVISION_CHANGES,h=n.createFrame;i.checkRevision=r,i.template=o,i.program=a,i.invokePartial=s,i.noop=l}),define("handlebars.runtime",["./handlebars/base","./handlebars/safe-string","./handlebars/exception","./handlebars/utils","./handlebars/runtime","exports"],function(e,t,n,i,r,o){var a=e,s=t.default,l=n.default,u=i,c=r,d=function(){var e=new a.HandlebarsEnvironment;return u.extend(e,a),e.SafeString=s,e.Exception=l,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=c,e.template=function(t){return c.template(t,e)},e},p=d();return p.create=d,p.default=p,o=p.default}),define("lib-build/hbars",["text","Handlebars"],function(e,t){"use strict";var n={},i="define('{pluginName}!{moduleName}', ['Handlebars'], function (Handlebars) { return Handlebars.template({content}); });\n";return{version:"0.0.2",load:function(i,r,o,a){if(a=a||{},n[i])o(n[i]);else{var s=a.hbars&&a.hbars.extension||".hbs",l=a.hbars&&a.hbars.path||"",u=a.hbars&&a.hbars.compileOptions||{},c=function(e){a.isBuild?(n[i]=t.precompile(e,u),o()):(n[i]=t.compile(e),o(n[i]))};c.error=o.error,e.load(l+i+s,r,c,a)}},write:function(e,t,r,o){var a=n[t];a&&r.asModule(e+"!"+t,i.replace("{pluginName}",e).replace("{moduleName}",t).replace("{content}",a))}}}),define("lib-build/hbars!storymaps-react/tpl/view/media/MediaError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="loading-error">\r\n    <i class="fa fa-exclamation-triangle" aria-hidden="true"></i>\r\n    <span>'+s((r=null!=(r=t.message||(null!=e?e.message:e))?r:a,typeof r===o?r.call(e,{name:"message",hash:{},data:i}):r))+"</span>\r\n</div>\r\n"},useData:!0})}),define("resources/tpl/viewer/nls/app",{root:{viewer:{common:{save:"Save",close:"Close"},errors:{noConfigName:"No configuration specified in index.html > configOptions.story",configFormatError:"The specified configuration couldn't be loaded because of a JSON syntax error.",configNotFound:"The specified configuration hasn't been found or couldn't be loaded because of a JSON syntax error.",boxTitle:"An error has occurred",servedFromFile:"The application has to be accessed through a web server. See ${USER_GUIDE} for details.",userGuide:"user guide",invalidConfig:"Invalid configuration",invalidConfigNoApp:"Web Mapping Application identifier not specified in index.html.",invalidConfigNoAppDev:"No Web Mapping Application identifier is specified in URL parameters (?appid=). In development mode, the appid configuration in index.html is ignored.",unspecifiedConfigOwner:"Authorized owner hasn't been configured.",invalidConfigOwner:"Story owner is not authorized.",invalidConfignoOAuth:"This story requires authentication, please configure an ArcGIS OAuth ID in index.html or make the story public.",invalidApp:"This story cannot be loaded.",appLoadingFail:"Something went wrong, the {TPL_NAME} did not load correctly.",notConfiguredDesktop:"The story is not configured yet.",notConfiguredMobile:"The {TPL_NAME} builder is not supported at this display size. If possible, resize your browser to access the builder or please build your story on a device with a larger screen.",notConfiguredMobile2:"Please rotate your device to landscape orientation to use the {TPL_NAME} builder.",notAuthorized:"You are not authorized to access this story",notAuthorizedBuilder:"You are not authorized to use {TPL_NAME} builder.",noViewerIE:"This story is not supported in Internet Explorer before version ${VERSION}. ${UPGRADE}.",noViewerIE2:"You are attempting to view this story using an older, unsupported browser. There may be features that do not work or other unexpected issues. We suggest you upgrade to Internet Explorer 11 or use another browser, such as Chrome.",noViewerIE3:"In late 2017, this story will no longer load on this browser. At that time, you must use a supported browser to view this story.",upgradeBrowser:"Please update your browser",mapLoadingFail:"Something went wrong, the map did not load correctly.",signOut:"Sign Out",builderSupport1:"Story Map Cascade builder is supported only in ${CHROME} and ${SAFARI}. However, Cascade stories that you create with builder can be viewed those browsers, Internet Explorer 11+, and Firefox.",builderSupport2:"Story Map Cascade builder is not supported on iPad. Cascade stories that you create and share will work on iPad.",builderSupport3:"Cascade stories can be viewed in Chrome, Safari, Firefox, and Internet Explorer 11+, but Story Map Cascade builder is supported only in ${CHROME} and ${SAFARI}.",builderSupport4:"Cascade stories can be viewed in Chrome, Safari, Firefox, and Internet Explorer 11+, but Story Map Cascade builder is supported only in ${CHROME} and ${SAFARI}.<br><br>If you need Cascade builder to support a different browser, please contact ${ESRI-SUPPORT} or click to vote: ${FIREFOX-BUILDER} | ${IE-BUILDER}.",sorry:"Attention:"},mobileWarning:{message1:"You've read the mobile version of this story. For the full version, with richer media elements try it out on a desktop computer.",email:"Email a link to this story"},media:{captionPlaceholder:"Your caption here...",loadingError:"Sorry, this content is not accessible",explore:"Explore",exploreMap:"Explore Map",exploreStop:"Stop Exploring",sceneNotSupported:"Sorry, this 3D map is not supported on your device.",loading1:"Loading...",loading2:"Loading map...",videoPlayPause:"play/pause",videoMuteUnmute:"mute/unmute"},headerFromCommon:{defaultTagline:"A ${STORY_MAP}",share:"Share",tooltipAutoplayDisabled:"This isn't available in autoplay mode"},shareFromCommon:{copy:"Copy",copied:"Copied",open:"Open",embed:"Embed in web page",embedExplain:"Use the following HTML code to embed the story in a web page.",size:"Size (width/height):",autoplayLabel:"Autoplay mode",autoplayExplain1:"Autoplay mode will advance through your story at a regular interval. This is ideal on a kiosk or public display monitor, but be aware that in other situations it may make the story harder to read. This feature isn't supported on small displays.",autoplayExplain2:"When this mode is active there are controls to play/pause the story and adjust the navigation speed.",linksupdated:"Links updated!"}}},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("lib-build/less!storymaps-react/tpl/view/media/MediaError",[],function(){}),define("storymaps-react/tpl/view/media/Media",["module","exports","storymaps/tpl/utils/UI","storymaps/common/utils/CommonHelper","dojo/topic","esri/IdentityManager","lib-build/hbars!./MediaError","lib-build/i18n!resources/tpl/viewer/nls/app","lib-build/less!./MediaError"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=l(n),d=l(i),p=l(r),f=l(o),h=l(a),m=l(s),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};u(this,e),this.type=t.type,this.id=t.id,this.previewThumb=t.previewThumb,this.previewIcon=t.previewIcon,this.scanResults={hasErrors:!1,hasWarnings:!1},this._cache={},this._isLoaded=!1,this._alternateMedia=null,this._node=null,this._domID=c.default.getUID(),this._isUploadPending=!1,this._builderConfigurationTabs=[],this._onConfigAction=null}return v(e,[{key:"postCreate",value:function(e){this._builderConfigurationTabs=e.builderConfigurationTabs||[],this._onConfigAction=e.onConfigAction,this._onConfigChangeCallback=e.onConfigChange}},{key:"setCache",value:function(e){this._cache=e}},{key:"setAlternate",value:function(e){this._alternateMedia=e}},{key:"getAlternate",value:function(){return this._alternateMedia}},{key:"getPreviewThumbnail",value:function(){return e.addToken(this.previewThumb)}},{key:"getPreviewIcon",value:function(){return this.previewIcon}},{key:"isSameMedia",value:function(e){return this.id==e.id}},{key:"_applyConfig",value:function(e){if("block"==this._placement){e.size=e.size||"medium";var t=$.map(this._node.attr("class").split(" "),function(e){return e.match(/block-size-/)?e:null}).join(" ");this._node.removeClass(t).addClass("block-size-"+e.size)}}},{key:"_onEnableButtonClick",value:function(e){var t=$(e.currentTarget);t.toggleClass("enabled"),this._node.toggleClass("interaction-enabled")}},{key:"mapErrors",value:function(e){return!!(e&&e.errors&&e.errors.length)&&e.errors.map(function(e){return e.id})}},{key:"setError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.scanResults,e.scanResult,{hasErrors:!0},{unfixable:e.unfixable||!1}),e.msg?this.errorMessage=e.msg:e.msg=this.errorMessage,this.updateErrorUI(e)}},{key:"removeError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Object.assign(this.scanResults,e.scanResult,{hasErrors:!1}),this.errorMessage=null,this.updateErrorUI()}},{key:"updateErrorUI",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this.scanResults.hasErrors,n=e.minimizeInViewer||!1,i=e.showLoadingError||!1,r=void 0,o=void 0;if(e.galleryIndex||0===e.galleryIndex){var a=this._node.find(".ug-thumb-wrapper").eq(e.galleryIndex);r=a,o=a}else r=this._node.find(".block-media,.background").addBack(".block-media,.background"),o=r;r.toggleClass("error",t).toggleClass("minimize-on-viewer",n).toggleClass("show-loading-error",i),o.find(".loading-error").remove(),t&&(this.errorMessage=e.msg||this.errorMessage||m.default.viewer.media.loadingError,o.append((0,h.default)({message:this.errorMessage})))}},{key:"getArcGISContent",value:function(){var t=[];if("webmap"==this.type||"webscene"==this.type)t=[{type:this.type,id:this.id}];else if("image"==this.type){var n=e.getArcGISItemResourceURL(this._url);n&&(t=[{type:"item-resource",mediaType:this.type,url:n.url,file:n.file}])}else if("image-gallery"==this.type){var i=!0,r=!1,o=void 0;try{for(var a,s=this._images.images[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=e.getArcGISItemResourceURL(l.url);u&&t.push({type:"item-resource",mediaType:this.type,url:u.url,file:u.file})}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}return t}},{key:"resize",value:function(){}},{key:"postLoad",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"getAuthorizedTransitionsWith",value:function(){return[]}},{key:"initBuilderUI",value:function(){"block"==this._placement&&(this._node.find(".media-delete").html('<div class="media-delete-background"></div><i class="media-delete-icon config-icon fa fa-trash-o"></i>'),this._node.find(".media-delete-icon").click(function(){this._onAction("remove")}.bind(this)))}},{key:"isConfigActive",value:function(){return this._node.hasClass("config-panel-active")}},{key:"closeConfigPanel",value:function(){this._node.removeClass("config-panel-active")}},{key:"destroy",value:function(){this._node.remove()}},{key:"remove",value:function(){this._node.remove()}},{key:"isPlaceholder",value:function(){return!1}},{key:"_onAction",value:function(e,t){"remove"!=e&&"swap"!=e&&"image-to-image-gallery"!=e&&"image-gallery-to-image"!=e||this._onConfigAction({action:e,media:this,newMedia:t}),"arcgis-edit"==e&&this._openEditor(),"remove"===e&&p.default.publish("builder-should-check-story"),this._onConfigChange()}},{key:"_onConfigChange",value:function(){p.default.publish("builder-media-update"),this._onConfigChangeCallback&&this._onConfigChangeCallback()}}],[{key:"getArcGISItemResourceURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=decodeURIComponent(e),n=t.match(new RegExp("/sharing/rest/content/items/"+app.data.appItem.item.id+"/resources/(.*)$"));return n&&2==n.length?{url:t,file:n[1]}:null}},{key:"addToken",value:function(e){var t=app.data.appItem&&"public"!=app.data.appItem.item.access&&app.data.appItem.item.id&&e;if(!t)return e;var n="";return n=app.portal&&app.portal.getPortalUser()?app.portal.getPortalUser().credential.token:f.default.findCredential(document.location.origin)?f.default.findCredential(document.location.origin).token:d.default.getCookieToken(),e.match(new RegExp("/sharing/rest/content/items/"+app.data.appItem.item.id+"/resources/"))?e+"?token="+n:e}},{key:"findCropDistance",value:function(e,t,n){var i=t.width(),r=t.height(),o=i/r,a=e.width/e.height,s={x:0,y:0},l=0,u=a>o,c=a<o;if(c){var d=i/a;l=this.getDimensionAmount(d,r,n.y),s.x=0,s.y=l}else if(u){var p=r*a;l=this.getDimensionAmount(p,i,n.x),s.x=l,s.y=0}else s.x=0,s.y=0;return s}},{key:"getDimensionAmount",value:function(e,t,n){var i=e*n,r=(i-t/2)*-1;return r>0?r=0:e-r*-1<t&&(r=(e-t)*-1),r}},{key:"getTargetDimensions",value:function(e,t){var n={width:0,height:0},i=e.width/e.height,r=t.width/t.height;return i>r?(n.height=t.height,n.width=t.height*i):(n.width=t.width,n.height=t.width/i),n}}]),e}();t.default=g,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" contenteditable="false">\r\n  <figure class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="image-container" style="padding-top: '+l((o=null!=(o=t.padding||(null!=e?e.padding:e))?o:s,typeof o===a?o.call(e,{name:"padding",hash:{},data:i}):o))+'%"></div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n    <div class="builder-ui img-gallery-invite">\r\n      <div class="img-gallery-invite-background"></div>\r\n      <i class="img-gallery-add fa fa-plus" aria-hidden="true" data-toggle="tooltip"></i>\r\n    </div>\r\n    <div class="builder-ui media-delete"></div>\r\n  </figure>\r\n  <figcaption class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</figcaption>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,typeof r===o?r.call(e,{name:"classes",hash:{},data:i}):r))+'"></div>\r\n<!--<div class="caption">'+s((r=null!=(r=t.caption||(null!=e?e.caption:e))?r:a,typeof r===o?r.call(e,{name:"caption",hash:{},data:i}):r))+'</div>-->\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Image",[],function(){}),define("storymaps-react/tpl/view/media/Image",["module","exports","./Media","storymaps/common/utils/CommonHelper","lib-build/hbars!./ImageBlock","lib-build/hbars!./ImageBackground","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/utils/UI","dojo/Deferred","lib-build/less!./Image"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},C="resources/tpl/builder/icons/media-placeholder/image.jpg",E="resources/tpl/builder/icons/immersive-panel/image.png",k=.4,T=.8,x=200,S=function(e){function t(e){c(this,t);var n=h.default.uploadedImageNeedsFixing(e.url);if(n&&(e.url=h.default.fixUploadedImageUrl(e.url),e.thumbUrl&&(e.thumbUrl=h.default.fixUploadedImageUrl(e.thumbUrl))),e.sizes&&e.sizes.length){var i=$("body").width()||window.screen.width;e.sizes.forEach(function(e){e.longestSide=Math.max(e.width,e.height),n&&(e.url=h.default.fixUploadedImageUrl(e.url))}),e.sizes.sort(function(e,t){return t.longestSide===e.longestSide?Math.min(t.width,t.height)-Math.min(e.width,e.height):t.longestSide-e.longestSide});var r=void 0,o=e.sizes[0];e.sizes.every(function(e){return e.longestSide>i-50&&(o=e,!0)}),e.sizes.every(function(e){return e.longestSide>=250&&(r=e,!0)}),o.url&&o.width&&o.height&&(e.url=o.url,e.width=o.width,e.height=o.height),r&&(e.thumbUrl=r.url)}var a=e.url;e.dataUrl&&e.uploadDeferred&&(a=b.default.getUID());var s=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"image",id:a,previewThumb:e.thumbUrl||e.dataUrl||e.url||C,previewIcon:E}));return s._image=e,s._url=e.url,s._placement=null,s._image.options||(s._image.options={}),e.dataUrl&&e.uploadDeferred&&(s._isUploadPending=!0,s._url=e.dataUrl,delete s._image.dataUrl,e.uploadDeferred.then(s._onUploadSuccess.bind(s),s._onUploadFail.bind(s))),s}return p(t,e),_(t,[{key:"render",value:function(e){var t="",n=[];if(!this._image||!e)return console.log("Could not render image in section"),t;if(this._placement=e.placement,"block"==this._placement){var i=this._computeBlockStyle();n.push("block-size-"+i.size),i.fitHeight&&n.push("fit-height"),t+=(0,m.default)({id:this._domID,classes:["block","image"].concat(n).join(" "),padding:i.padding,caption:this._image.caption,placeholder:g.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder})}else"background"==e.placement&&(b.default.isMobileBrowser()&&this._image.alternate&&(this._image.url=this._image.alternate,this._url=this._image.url),t+=(0,v.default)({id:this._domID,classes:["image","image-background"].join(" "),caption:this._image.caption}));return t}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find("#"+this._domID).parent(),this._isUploadPending&&this._onUploadStart(),this._applyConfig())}},{key:"_applyConfig",value:function(){var e=this._image.options;this._applyPlacement(),e.size=e.size||"small",w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e)}},{key:"_applyPlacement",value:function(){if(this._image.options&&this._image.options.placement){var e=this._node.find(".image-background"),t=this._image.options.placement;if("fill"===t.type)if(e.css("background-size","cover"),t.fill){var n={width:e.width(),height:e.height()},i={width:this._image.width,height:this._image.height},r=f.default.getTargetDimensions(i,n),o=f.default.findCropDistance(r,e,t.fill);e.css("background-position",o.x+"px "+o.y+"px")}else e.css("background-position","50% 50%");else"fit"===t.type&&(e.css("background-color",t.fit.color),e.css("background-size","contain"),e.css("background-position","50% 50%"))}}},{key:"preload",value:function(){var e=new y.default,t=new window.Image;return t.onload=function(t){var n=t.currentTarget.naturalWidth,i=t.currentTarget.naturalHeight;e.resolve({width:n,height:i}),app.builder||this.removeError()}.bind(this),t.onerror=function(){app.builder?this.setError({showLoadingError:!0}):this.setError({minimizeInViewer:!0})}.bind(this),t.src=f.default.addToken(this._url),e}},{key:"load",value:function(){var e=new y.default;return this._isLoaded||!this._node?e:(this._isLoaded=!0,this.preload().then(function(e){e&&e.width&&e.height&&(this._image.width=e.width,this._image.height=e.height,this._node.find(".image-container").css("padding-top",this._computeBlockStyle().padding+"%")),this._node.find(".media-loading").hide()}.bind(this)),"block"==this._placement?this._node.find(".image-container").css("backgroundImage",'url("'+f.default.addToken(this._url)+'")'):(this._node.find(".image-background").css("backgroundImage",'url("'+f.default.addToken(this._url)+'")'),this._image["mobile-pos"]&&b.default.isMobileBrowser()&&this._node.find(".image-background").css("backgroundPositionX",this._image["mobile-pos"])),e.resolve(),e)}},{key:"performAction",value:function(){this._isLoaded||this.load()}},{key:"resize",value:function(){this._applyPlacement()}},{key:"isLoaded",value:function(){return!0}},{key:"getNode",value:function(){return this._node}},{key:"update",value:function(){}},{key:"isPlaceholder",value:function(){return!!this._image.isPlaceholder}},{key:"_computeBlockStyle",value:function(){var e="small",t=!0;this._image.options&&(this._image.options.size&&(e=this._image.options.size),void 0!==this._image.options.fitHeight&&(t=this._image.options.fitHeight));var n=this._image.height,i=this._image.width,r=null;if("small"==e||"medium"==e){var o=this._image.width/n;i="small"==e?app.display.windowWidth*k:app.display.windowWidth*T,n=Math.round(i/o),n=Math.min(n,app.display.windowHeight-x)}return r=this._image.width<i&&(!t||this._image.height<app.display.windowHeight-x)?this._image.height/this._image.width*(this._image.width/i)*100:n/Math.min(this._image.width,i)*100,r=Math.round(10*r)/10,{size:e,fitHeight:t,padding:r}}}]),t}(f.default);t.default=S,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageGallery",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression,l=this.lambda;return'    <img alt="" src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" data-index="'+s(l(i&&i.index,e))+'" data-image="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" data-description="" data-width="'+s((r=null!=(r=t.width||(null!=e?e.width:e))?r:a,typeof r===o?r.call(e,{name:"width",hash:{},data:i}):r))+'" data-height="'+s((r=null!=(r=t.height||(null!=e?e.height:e))?r:a,typeof r===o?r.call(e,{name:"height",hash:{},data:i}):r))+'"/>\r\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.imageGalleryID||(null!=e?e.imageGalleryID:e))?o:s,typeof o===a?o.call(e,{name:"imageGalleryID",hash:{},data:i}):o))+'" class="image-gallery-wrapper" contenteditable="false">\r\n';return r=t.each.call(e,null!=e?e.images:e,{name:"each",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='</div>\r\n<div class="builder-ui ig-add" data-toggle="tooltip">\r\n  <span class="ig-action-icon ig-add-icon glyphicon glyphicon-plus"></span>\r\n</div>\r\n<div class="builder-ui ig-temp-placeholder"></div>\r\n<div class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">',o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+"</div>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/ImageGalleryActionOverlays",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return'<div class="builder-ui hidden ig-item ig-move ig-direction-backward" data-toggle="tooltip">\r\n  <div class="ig-background">\r\n    <i class="ig-action-icon ig-move-backward fa fa-arrow-left"></i>\r\n  </div>\r\n</div>\r\n';
},3:function(e,t,n,i){return'<div class="builder-ui hidden ig-item ig-move ig-direction-forward" data-toggle="tooltip">\r\n  <div class="ig-background">\r\n    <i class="ig-action-icon ig-move-forward fa fa-arrow-right"></i>\r\n  </div>\r\n</div>\r\n'},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o='<div class="builder-ui hidden ig-item ig-media-swap">\r\n  <div class="ig-background"></div>\r\n  <i class="ig-action-icon ig-settings fa fa-pencil"></i>\r\n</div>\r\n';return r=t.unless.call(e,null!=(r=null!=e?e.itemProperties:e)?r.isFirst:r,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(o+=r),r=t.unless.call(e,null!=(r=null!=e?e.itemProperties:e)?r.isLast:r,{name:"unless",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=r&&(o+=r),o+'<div class="builder-ui hidden ig-item ig-media-delete">\r\n  <div class="ig-background"></div>\r\n  <i class="ig-action-icon ig-remove fa fa-trash-o"></i>\r\n</div>\r\n'},useData:!0})}),define("resources/tpl/builder/nls/app",{root:{builder:{dialog:{apply:"Apply",close:"Close"},header:{sharingNotAvailable:"This is not available until you share the story",edit:"Edit"},headerConfig:{toggles:{bookmarks:"Bookmarks",logoSharing:"Logo & Sharing"},bookmarks:{title:"Section",bookmark:"Bookmark",intro:"Bookmarks are links to story sections that are shown in the header. Creating concise bookmarks for the main sections of your story helps readers get oriented.",sequentialDefault:"Sequential section (no text found)",immersiveDefault:"Immersive section (no text found)",titleDefault:"Title section (no text found)",coverDefault:"Cover section (no text found)",coverAppendage:"(Cover)"},logoSharing:{logo:"Logo",logoButton:"Use ${ESRI} Logo",useOrgLogo:"Use my organization's logo",useOrgLogoHelp:"Use the logo provided by your administrator",logoLink:"Logo link",logoUploadProgress:"Logo upload in progress",logoUploadSuccess:"Logo uploaded successfully",logoUploadError:"Logo upload failed, switching back to ${ESRI} logo",customHeaderText:"Tagline",taglineLinkDisabledTooltip:"Enter a tagline to enable the link",link:"Tagline link",enableSocialSharing:"Display sharing button"}},builderPanel:{coverLabel:"Cover",creditsLabel:"Credits",betaFeedback:"Feedback",betaNote:"Please let us know what you think about ${APP_NAME} or if something is not working as you expected.",notSharedNote:"Your story isn't shared, only you can see it",organizationWarning:"To ensure this story can be viewed by others you must also share its scenes, scene layers, and embedded apps with your organization. Maps and map layers are shared automatically.",publicWarning:"To ensure this story can be viewed by others you must also share its scenes, scene layers, and embedded apps publicly. Maps and map layers are shared automatically.",addTitleNote:"Add a title on the cover to save",saveError:"There was an error saving your story.",duplicate:"Duplicate",organize:"Organize",done:"Done",invite:"As you build your story, the sections will appear here...",mystoriestooltip:"Cascade Builder alerts you to issues in your story and helps you fix them. Scenes and embedded apps are not checked, so please check those manually."},immersiveViewPanel:{transition:"Transition",fade:"Fade",fadeSlow:"Fade Slow",swipeVertical:"Swipe Vertical",swipeHorizontal:"Swipe Horizontal",none:"None",disabledConsecutiveSameMedia:"Not available when consecutive views use the same media",disabledTooltipMap:"To use this transition the visible layers in both views must be different and the other map properties must be the same",disabledConsecutiveSameMap:"Not available when consecutive views use the same map",disabledNotInBeta:"Not available when consecutive views use the same map",disabledNonConsecutive:"Not available as there is another occurence of this media that is non consecutive",addMedia:"Add media",invite:"As you build your immersive section, the views will appear here..."},mediaConfig:{tabs:{appearance:"Appearance",manage:"Manage",size:"Size",background:"Background",issues:"Issues",fixIssues:"Fix Issues"},manage:{changeMedia:"Change media",edit:"Edit",editAside:"Opens in a new browser tab. After saving your edits, save and reload this story to see your changes.",remove:"Remove"},appearance:{homeView:"Initial view",audio:"Audio",on:"On",muted:"Muted",volumeAside:"The video will autoplay when a reader arrives at this view. If you mute the sound, the reader will not be able to enable it.",view:"View",resetLocation:"Reset Location",resetLayers:"Reset Layers",clearPopup:"Clear Pop-Up",interaction:"Interaction",interactionDisabled:"Interaction Disabled",buttonToEnable:"Button to Enable",interactionEnabled:"Interaction Enabled",interactionAside:"*Touch devices will show an interaction button.",slide:"Slide",noSlides:"No slides available.",mapExtentPrompt:"Update the map to tell your story, click the checkmark to save the changes"},sectionAppearance:{layout:"Layout",theme:"Theme"},size:{small:"Small",medium:"Medium",large:"Large"},background:{noCrop:"Do not crop image",mostImportantPart:"Choose the most important point",cropExplanationImmersive:"Select a point on the image to choose how your image will be cropped at different screen sizes. The point you select will always be visible. Check the box below if your media needs to be fully visible.",cropExplanation:"Select a point on the image to choose how your image will be cropped at different screen sizes. The point you select will always be visible.",color:"Color",previews:"Previews"}},imageGallery:{addImage:"Add another image",moveBackward:"Move backward",moveForward:"Move forward"},cover:{titlePrompt:"Enter your story title...",subtitlePrompt:"Scroll down to get started or enter an optional subtitle",mediaPlaceholder:"Add your image or video",saveError:"Save failed, you already have an item with this title"},credits:{sectionInvite:"Add a credits section",warning:"Both fields must be filled out",content:"Content...",source:"Source...",linkPrompt:"Optional link...",introductionPlaceholder:"Enter an optional introduction to your credits section..."},immersive:{titleConfig:{theme:"Theme"},panelConfig:{position:"Position",theme:"Theme",size:"Size",background:"Background",layout:"Scrolling (for all panels)"}},title:{placeholder:"Enter a title..."},media:{imageUpload:"Image upload in progress...",imageUploadSuccess:"Image uploaded successfully",imageUploadFail:"Image upload failed"},controller:{sectionOrganize:"You organized the sections",immersiveOrganize:"You organized the views",sectionDelete:"You deleted a section",viewDelete:"You deleted a view"},notification:{cancel:"Cancel",close:"Close",undo:"Undo"},sections:{sequence:"Narrative Section",immersive:"Immersive Section",title:"Title Section"},mediaErrors:{mediaTypes:{image:"image",webmap:"map",webscene:"scene",video:"video",content:"content",webpage:"web page"},placeholders:{generic:"This content is not accessible.",deleted:"This ${media-type} has been deleted.",inaccessible:"This ${media-type} is not accessible.",unauthorized:"You are not authorized to view this ${media-type}.",unshared:"This ${media-type} is not shared the same as your story.",othersUnshared:"This ${media-type} is not shared the same as your story.",subscriptionContent:"This ${media-type} contains a subscriber layer.",premiumContent:"This ${media-type} contains a premium layer.",secureService:"This ${media-type} contains a secure layer."},mapIssues:{fixButton:"Fix Issues",nofixButton:"Issues",mapLabel:"Map:",summaries:{unshared:"Unshared Content",othersUnshared:"Someone Else's Unshared Content",subscriptionContent:"Subscriber Content",premiumContent:"Premium Content",secureContent:"Secure Content",deleted:"Deleted Content",inaccessible:"Inaccessible Content",unauthorized:"Unauthorized Content"},descriptions:{unshared:"This content is not shared the same as your story.",othersUnshared:"This content is owned by someone else and not shared the same as your story.",othersUnsharedAuthorized:"This content is owned by someone else, but you are authorized to share it.",inaccessible:"This content is not accessible.",deleted:"This content has been deleted.",unauthorized:"You are not authorized to view this content.",popupFeatureLayer:"A tiled layer's pop-ups come from a feature layer that is not shared the same as your story.",subscriptionContent:"You must authorize subscriber content for public use.",premiumContent:"You must authorize premium content for public use.",secureService:"Secure content is not accessible to your readers.",missingItemWarning:"The item associated with this layer has been deleted."},tooltips:{unshared:"Click to learn more about sharing.",othersUnshared:"You do not have permissions to share content owned by others. Ask the owner to share it, remove the map from your story, or edit the map to remove the layers that aren't yours. Click to learn more about edting maps.",inaccessible:"Remove this map from your story or edit it to remove the inaccessible layers. Click to learn more about editing maps.",deleted:"Remove this map from your story or edit it to remove the missing layers. Click to learn more about editing maps.",unauthorized:"Remove this map from your story or edit it to remove the unauthorized layers. Click to learn more about editing maps.",popupFeatureLayer:"A tiled layer's pop-ups come from a feature layer that is not shared the same as your story.",subscriptionContent:"Subscriber content does not consume credits. Click to learn more.",premiumContent:"Credits will be charged to your organization each time someone views a premium layer in your story. Click to learn more.",secureService:"Remove the secure content from your story, or click to learn how to authorize secure content for use by others.",missingItemWarning:"This layer still works, but its symbols, pop-ups, or name may have changed. Confirm the layer appears as expected, or remove it from your story."},fixButtons:{share:"Share",hide:"Hide",authorize:"Authorize",remove:"Remove",help:"Get Help",ignore:"Ignore",confirm:"Confirm",edit:"Edit Map"},shareNotifications:{alsoSharedMapsAndLayers:"Some maps and layers were also shared.",alsoSharedMaps:"Some maps were also shared.",alsoSharedLayers:"Some layers were also shared.",sharedOthersContent:"You've used your administrative privileges to share someone else's content."}},storyHealth:{healthy:"No issues",notHealthy:"Fix issues",warnings:"See warnings"}}}},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("lib-build/less!storymaps-react/tpl/view/media/ImageGallery",[],function(){}),!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=!!e&&"length"in e&&e.length,n=oe.type(e);return"function"!==n&&!oe.isWindow(e)&&("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e)}function i(e,t,n){if(oe.isFunction(t))return oe.grep(e,function(e,i){return!!t.call(e,i,e)!==n});if(t.nodeType)return oe.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(me.test(t))return oe.filter(t,e,n);t=oe.filter(t,e)}return oe.grep(e,function(e){return Z.call(t,e)>-1!==n})}function r(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t={};return oe.each(e.match(we)||[],function(e,n){t[n]=!0}),t}function a(){Y.removeEventListener("DOMContentLoaded",a),e.removeEventListener("load",a),oe.ready()}function s(){this.expando=oe.expando+s.uid++}function l(e,t,n){var i;if(void 0===n&&1===e.nodeType)if(i="data-"+t.replace(Pe,"-$&").toLowerCase(),n=e.getAttribute(i),"string"==typeof n){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Se.test(n)?oe.parseJSON(n):n)}catch(e){}xe.set(e,t,n)}else n=void 0;return n}function u(e,t,n,i){var r,o=1,a=20,s=i?function(){return i.cur()}:function(){return oe.css(e,t,"")},l=s(),u=n&&n[3]||(oe.cssNumber[t]?"":"px"),c=(oe.cssNumber[t]||"px"!==u&&+l)&&Ie.exec(oe.css(e,t));if(c&&c[3]!==u){u=u||c[3],n=n||[],c=+l||1;do o=o||".5",c/=o,oe.style(e,t,c+u);while(o!==(o=s()/l)&&1!==o&&--a)}return n&&(c=+c||+l||0,r=n[1]?c+(n[1]+1)*n[2]:+n[2],i&&(i.unit=u,i.start=c,i.end=r)),r}function c(e,t){var n="undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t||"*"):"undefined"!=typeof e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&oe.nodeName(e,t)?oe.merge([e],n):n}function d(e,t){for(var n=0,i=e.length;i>n;n++)Te.set(e[n],"globalEval",!t||Te.get(t[n],"globalEval"))}function p(e,t,n,i,r){for(var o,a,s,l,u,p,f=t.createDocumentFragment(),h=[],m=0,v=e.length;v>m;m++)if(o=e[m],o||0===o)if("object"===oe.type(o))oe.merge(h,o.nodeType?[o]:o);else if(Re.test(o)){for(a=a||f.appendChild(t.createElement("div")),s=(je.exec(o)||["",""])[1].toLowerCase(),l=De[s]||De._default,a.innerHTML=l[1]+oe.htmlPrefilter(o)+l[2],p=l[0];p--;)a=a.lastChild;oe.merge(h,a.childNodes),a=f.firstChild,a.textContent=""}else h.push(t.createTextNode(o));for(f.textContent="",m=0;o=h[m++];)if(i&&oe.inArray(o,i)>-1)r&&r.push(o);else if(u=oe.contains(o.ownerDocument,o),a=c(f.appendChild(o),"script"),u&&d(a),n)for(p=0;o=a[p++];)Le.test(o.type||"")&&n.push(o);return f}function f(){return!0}function h(){return!1}function m(){try{return Y.activeElement}catch(e){}}function v(e,t,n,i,r,o){var a,s;if("object"==typeof t){"string"!=typeof n&&(i=i||n,n=void 0);for(s in t)v(e,s,n,i,t[s],o);return e}if(null==i&&null==r?(r=n,i=n=void 0):null==r&&("string"==typeof n?(r=i,i=void 0):(r=i,i=n,n=void 0)),r===!1)r=h;else if(!r)return e;return 1===o&&(a=r,r=function(e){return oe().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=oe.guid++)),e.each(function(){oe.event.add(this,t,r,i,n)})}function g(e,t){return oe.nodeName(e,"table")&&oe.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function y(e){var t=We.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function _(e,t){var n,i,r,o,a,s,l,u;if(1===t.nodeType){if(Te.hasData(e)&&(o=Te.access(e),a=Te.set(t,o),u=o.events)){delete a.handle,a.events={};for(r in u)for(n=0,i=u[r].length;i>n;n++)oe.event.add(t,r,u[r][n])}xe.hasData(e)&&(s=xe.access(e),l=oe.extend({},s),xe.set(t,l))}}function w(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ne.test(e.type)?t.checked=e.checked:"input"!==n&&"textarea"!==n||(t.defaultValue=e.defaultValue)}function C(e,t,n,i){t=X.apply([],t);var r,o,a,s,l,u,d=0,f=e.length,h=f-1,m=t[0],v=oe.isFunction(m);if(v||f>1&&"string"==typeof m&&!ie.checkClone&&ze.test(m))return e.each(function(r){var o=e.eq(r);v&&(t[0]=m.call(this,r,o.html())),C(o,t,n,i)});if(f&&(r=p(t,e[0].ownerDocument,!1,e,i),o=r.firstChild,1===r.childNodes.length&&(r=o),o||i)){for(a=oe.map(c(r,"script"),b),s=a.length;f>d;d++)l=r,d!==h&&(l=oe.clone(l,!0,!0),s&&oe.merge(a,c(l,"script"))),n.call(e[d],l,d);if(s)for(u=a[a.length-1].ownerDocument,oe.map(a,y),d=0;s>d;d++)l=a[d],Le.test(l.type||"")&&!Te.access(l,"globalEval")&&oe.contains(u,l)&&(l.src?oe._evalUrl&&oe._evalUrl(l.src):oe.globalEval(l.textContent.replace(Ve,"")))}return e}function E(e,t,n){for(var i,r=t?oe.filter(t,e):e,o=0;null!=(i=r[o]);o++)n||1!==i.nodeType||oe.cleanData(c(i)),i.parentNode&&(n&&oe.contains(i.ownerDocument,i)&&d(c(i,"script")),i.parentNode.removeChild(i));return e}function k(e,t){var n=oe(t.createElement(e)).appendTo(t.body),i=oe.css(n[0],"display");return n.detach(),i}function T(e){var t=Y,n=qe[e];return n||(n=k(e,t),"none"!==n&&n||(Ge=(Ge||oe("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=Ge[0].contentDocument,t.write(),t.close(),n=k(e,t),Ge.detach()),qe[e]=n),n}function x(e,t,n){var i,r,o,a,s=e.style;return n=n||Qe(e),a=n?n.getPropertyValue(t)||n[t]:void 0,""!==a&&void 0!==a||oe.contains(e.ownerDocument,e)||(a=oe.style(e,t)),n&&!ie.pixelMarginRight()&&Ye.test(a)&&Ke.test(t)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o),void 0!==a?a+"":a}function S(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function P(e){if(e in it)return e;for(var t=e[0].toUpperCase()+e.slice(1),n=nt.length;n--;)if(e=nt[n]+t,e in it)return e}function O(e,t,n){var i=Ie.exec(t);return i?Math.max(0,i[2]-(n||0))+(i[3]||"px"):t}function I(e,t,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=oe.css(e,n+Me[o],!0,r)),i?("content"===n&&(a-=oe.css(e,"padding"+Me[o],!0,r)),"margin"!==n&&(a-=oe.css(e,"border"+Me[o]+"Width",!0,r))):(a+=oe.css(e,"padding"+Me[o],!0,r),"padding"!==n&&(a+=oe.css(e,"border"+Me[o]+"Width",!0,r)));return a}function M(e,t,n){var i=!0,r="width"===t?e.offsetWidth:e.offsetHeight,o=Qe(e),a="border-box"===oe.css(e,"boxSizing",!1,o);if(0>=r||null==r){if(r=x(e,t,o),(0>r||null==r)&&(r=e.style[t]),Ye.test(r))return r;i=a&&(ie.boxSizingReliable()||r===e.style[t]),r=parseFloat(r)||0}return r+I(e,t,n||(a?"border":"content"),i,o)+"px"}function A(e,t){for(var n,i,r,o=[],a=0,s=e.length;s>a;a++)i=e[a],i.style&&(o[a]=Te.get(i,"olddisplay"),n=i.style.display,t?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&Ae(i)&&(o[a]=Te.access(i,"olddisplay",T(i.nodeName)))):(r=Ae(i),"none"===n&&r||Te.set(i,"olddisplay",r?n:oe.css(i,"display"))));for(a=0;s>a;a++)i=e[a],i.style&&(t&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=t?o[a]||"":"none"));return e}function N(e,t,n,i,r){return new N.prototype.init(e,t,n,i,r)}function j(){return e.setTimeout(function(){rt=void 0}),rt=oe.now()}function L(e,t){var n,i=0,r={height:e};for(t=t?1:0;4>i;i+=2-t)n=Me[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function D(e,t,n){for(var i,r=(B.tweeners[t]||[]).concat(B.tweeners["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,t,e))return i}function R(e,t,n){var i,r,o,a,s,l,u,c,d=this,p={},f=e.style,h=e.nodeType&&Ae(e),m=Te.get(e,"fxshow");n.queue||(s=oe._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,d.always(function(){d.always(function(){s.unqueued--,oe.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=oe.css(e,"display"),c="none"===u?Te.get(e,"olddisplay")||T(e.nodeName):u,"inline"===c&&"none"===oe.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",d.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in t)if(r=t[i],at.exec(r)){if(delete t[i],o=o||"toggle"===r,r===(h?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;h=!0}p[i]=m&&m[i]||oe.style(e,i)}else u=void 0;if(oe.isEmptyObject(p))"inline"===("none"===u?T(e.nodeName):u)&&(f.display=u);else{m?"hidden"in m&&(h=m.hidden):m=Te.access(e,"fxshow",{}),o&&(m.hidden=!h),h?oe(e).show():d.done(function(){oe(e).hide()}),d.done(function(){var t;Te.remove(e,"fxshow");for(t in p)oe.style(e,t,p[t])});for(i in p)a=D(h?m[i]:0,i,d),i in m||(m[i]=a.start,h&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function F(e,t){var n,i,r,o,a;for(n in e)if(i=oe.camelCase(n),r=t[i],o=e[n],oe.isArray(o)&&(r=o[1],o=e[n]=o[0]),n!==i&&(e[i]=o,delete e[n]),a=oe.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete e[i];for(n in o)n in e||(e[n]=o[n],t[n]=r)}else t[i]=r}function B(e,t,n){var i,r,o=0,a=B.prefilters.length,s=oe.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var t=rt||j(),n=Math.max(0,u.startTime+u.duration-t),i=n/u.duration||0,o=1-i,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:oe.extend({},t),opts:oe.extend(!0,{specialEasing:{},easing:oe.easing._default},n),originalProperties:t,originalOptions:n,startTime:rt||j(),duration:n.duration,tweens:[],createTween:function(t,n){var i=oe.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(i),i},stop:function(t){var n=0,i=t?u.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)u.tweens[n].run(1);return t?(s.notifyWith(e,[u,1,0]),s.resolveWith(e,[u,t])):s.rejectWith(e,[u,t]),this}}),c=u.props;for(F(c,u.opts.specialEasing);a>o;o++)if(i=B.prefilters[o].call(u,e,c,u.opts))return oe.isFunction(i.stop)&&(oe._queueHooks(u.elem,u.opts.queue).stop=oe.proxy(i.stop,i)),i;return oe.map(c,D,u),oe.isFunction(u.opts.start)&&u.opts.start.call(e,u),oe.fx.timer(oe.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function U(e){return e.getAttribute&&e.getAttribute("class")||""}function $(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var i,r=0,o=t.toLowerCase().match(we)||[];if(oe.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(e[i]=e[i]||[]).unshift(n)):(e[i]=e[i]||[]).push(n)}}function H(e,t,n,i){function r(s){var l;return o[s]=!0,oe.each(e[s]||[],function(e,s){var u=s(t,n,i);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),r(u),!1)}),l}var o={},a=e===xt;return r(t.dataTypes[0])||!o["*"]&&r("*")}function z(e,t){var n,i,r=oe.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((r[n]?e:i||(i={}))[n]=t[n]);return i&&oe.extend(!0,e,i),e}function W(e,t,n){for(var i,r,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||e.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function V(e,t,n,i){var r,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&i&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=u[l+" "+o]||u["* "+o],!a)for(r in u)if(s=r.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){a===!0?a=u[r]:u[r]!==!0&&(o=s[0],c.unshift(s[1]));break}if(a!==!0)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function G(e,t,n,i){var r;if(oe.isArray(t))oe.each(t,function(t,r){n||It.test(e)?i(e,r):G(e+"["+("object"==typeof r&&null!=r?t:"")+"]",r,n,i)});else if(n||"object"!==oe.type(t))i(e,t);else for(r in t)G(e+"["+r+"]",t[r],n,i)}function q(e){return oe.isWindow(e)?e:9===e.nodeType&&e.defaultView}var K=[],Y=e.document,Q=K.slice,X=K.concat,J=K.push,Z=K.indexOf,ee={},te=ee.toString,ne=ee.hasOwnProperty,ie={},re="2.2.4",oe=function(e,t){return new oe.fn.init(e,t)},ae=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,se=/^-ms-/,le=/-([\da-z])/gi,ue=function(e,t){return t.toUpperCase()};oe.fn=oe.prototype={jquery:re,constructor:oe,selector:"",length:0,toArray:function(){return Q.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Q.call(this)},pushStack:function(e){var t=oe.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e){return oe.each(this,e)},map:function(e){return this.pushStack(oe.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Q.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor()},push:J,sort:K.sort,splice:K.splice},oe.extend=oe.fn.extend=function(){var e,t,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||oe.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],i=e[t],a!==i&&(u&&i&&(oe.isPlainObject(i)||(r=oe.isArray(i)))?(r?(r=!1,o=n&&oe.isArray(n)?n:[]):o=n&&oe.isPlainObject(n)?n:{},a[t]=oe.extend(u,o,i)):void 0!==i&&(a[t]=i));return a},oe.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===oe.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){var t=e&&e.toString();return!oe.isArray(e)&&t-parseFloat(t)+1>=0},isPlainObject:function(e){var t;if("object"!==oe.type(e)||e.nodeType||oe.isWindow(e))return!1;if(e.constructor&&!ne.call(e,"constructor")&&!ne.call(e.constructor.prototype||{},"isPrototypeOf"))return!1;for(t in e);return void 0===t||ne.call(e,t)},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?ee[te.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;e=oe.trim(e),e&&(1===e.indexOf("use strict")?(t=Y.createElement("script"),t.text=e,Y.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(se,"ms-").replace(le,ue)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t){var i,r=0;if(n(e))for(i=e.length;i>r&&t.call(e[r],r,e[r])!==!1;r++);else for(r in e)if(t.call(e[r],r,e[r])===!1)break;return e},trim:function(e){return null==e?"":(e+"").replace(ae,"")},makeArray:function(e,t){var i=t||[];return null!=e&&(n(Object(e))?oe.merge(i,"string"==typeof e?[e]:e):J.call(i,e)),i},inArray:function(e,t,n){return null==t?-1:Z.call(t,e,n)},merge:function(e,t){for(var n=+t.length,i=0,r=e.length;n>i;i++)e[r++]=t[i];return e.length=r,e},grep:function(e,t,n){for(var i,r=[],o=0,a=e.length,s=!n;a>o;o++)i=!t(e[o],o),i!==s&&r.push(e[o]);return r},map:function(e,t,i){var r,o,a=0,s=[];if(n(e))for(r=e.length;r>a;a++)o=t(e[a],a,i),null!=o&&s.push(o);else for(a in e)o=t(e[a],a,i),null!=o&&s.push(o);return X.apply([],s)},guid:1,proxy:function(e,t){var n,i,r;return"string"==typeof t&&(n=e[t],t=e,e=n),oe.isFunction(e)?(i=Q.call(arguments,2),r=function(){return e.apply(t||this,i.concat(Q.call(arguments)))},r.guid=e.guid=e.guid||oe.guid++,r):void 0},now:Date.now,support:ie}),"function"==typeof Symbol&&(oe.fn[Symbol.iterator]=K[Symbol.iterator]),oe.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(e,t){ee["[object "+t+"]"]=t.toLowerCase()});var ce=function(e){function t(e,t,n,i){var r,o,a,s,l,u,d,f,h=t&&t.ownerDocument,m=t?t.nodeType:9;if(n=n||[],"string"!=typeof e||!e||1!==m&&9!==m&&11!==m)return n;if(!i&&((t?t.ownerDocument||t:U)!==A&&M(t),t=t||A,j)){if(11!==m&&(u=ge.exec(e)))if(r=u[1]){if(9===m){if(!(a=t.getElementById(r)))return n;if(a.id===r)return n.push(a),n}else if(h&&(a=h.getElementById(r))&&F(t,a)&&a.id===r)return n.push(a),n}else{if(u[2])return J.apply(n,t.getElementsByTagName(e)),n;if((r=u[3])&&w.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(r)),n}if(w.qsa&&!V[e+" "]&&(!L||!L.test(e))){if(1!==m)h=t,f=e;else if("object"!==t.nodeName.toLowerCase()){for((s=t.getAttribute("id"))?s=s.replace(ye,"\\$&"):t.setAttribute("id",s=B),d=T(e),o=d.length,l=pe.test(s)?"#"+s:"[id='"+s+"']";o--;)d[o]=l+" "+p(d[o]);f=d.join(","),h=be.test(e)&&c(t.parentNode)||t}if(f)try{return J.apply(n,h.querySelectorAll(f)),n}catch(e){}finally{s===B&&t.removeAttribute("id")}}}return S(e.replace(se,"$1"),t,n,i)}function n(){function e(n,i){return t.push(n+" ")>C.cacheLength&&delete e[t.shift()],e[n+" "]=i}var t=[];return e}function i(e){return e[B]=!0,e}function r(e){var t=A.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),i=n.length;i--;)C.attrHandle[n[i]]=t}function a(e,t){var n=t&&e,i=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||q)-(~e.sourceIndex||q);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){var n=t.nodeName.toLowerCase();return"input"===n&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return i(function(t){return t=+t,i(function(n,i){for(var r,o=e([],n.length,t),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function p(e){for(var t=0,n=e.length,i="";n>t;t++)i+=e[t].value;return i}function f(e,t,n){var i=t.dir,r=n&&"parentNode"===i,o=H++;return t.first?function(t,n,o){for(;t=t[i];)if(1===t.nodeType||r)return e(t,n,o)}:function(t,n,a){var s,l,u,c=[$,o];if(a){for(;t=t[i];)if((1===t.nodeType||r)&&e(t,n,a))return!0}else for(;t=t[i];)if(1===t.nodeType||r){if(u=t[B]||(t[B]={}),l=u[t.uniqueID]||(u[t.uniqueID]={}),(s=l[i])&&s[0]===$&&s[1]===o)return c[2]=s[2];if(l[i]=c,c[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,i){for(var r=e.length;r--;)if(!e[r](t,n,i))return!1;return!0}:e[0]}function m(e,n,i){for(var r=0,o=n.length;o>r;r++)t(e,n[r],i);return i}function v(e,t,n,i,r){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(n&&!n(o,i,r)||(a.push(o),u&&t.push(s)));return a}function g(e,t,n,r,o,a){return r&&!r[B]&&(r=g(r)),o&&!o[B]&&(o=g(o,a)),i(function(i,a,s,l){var u,c,d,p=[],f=[],h=a.length,g=i||m(t||"*",s.nodeType?[s]:s,[]),b=!e||!i&&t?g:v(g,p,e,s,l),y=n?o||(i?e:h||r)?[]:a:b;if(n&&n(b,y,s,l),r)for(u=v(y,f),r(u,[],s,l),c=u.length;c--;)(d=u[c])&&(y[f[c]]=!(b[f[c]]=d));if(i){if(o||e){if(o){for(u=[],c=y.length;c--;)(d=y[c])&&u.push(b[c]=d);o(null,y=[],u,l)}for(c=y.length;c--;)(d=y[c])&&(u=o?ee(i,d):p[c])>-1&&(i[u]=!(a[u]=d))}}else y=v(y===a?y.splice(h,y.length):y),o?o(null,a,y,l):J.apply(a,y)})}function b(e){for(var t,n,i,r=e.length,o=C.relative[e[0].type],a=o||C.relative[" "],s=o?1:0,l=f(function(e){return e===t},a,!0),u=f(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,i){var r=!o&&(i||n!==P)||((t=n).nodeType?l(e,n,i):u(e,n,i));return t=null,r}];r>s;s++)if(n=C.relative[e[s].type])c=[f(h(c),n)];else{if(n=C.filter[e[s].type].apply(null,e[s].matches),n[B]){for(i=++s;r>i&&!C.relative[e[i].type];i++);return g(s>1&&h(c),s>1&&p(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(se,"$1"),n,i>s&&b(e.slice(s,i)),r>i&&b(e=e.slice(i)),r>i&&p(e))}c.push(n)}return h(c)}function y(e,n){var r=n.length>0,o=e.length>0,a=function(i,a,s,l,u){var c,d,p,f=0,h="0",m=i&&[],g=[],b=P,y=i||o&&C.find.TAG("*",u),_=$+=null==b?1:Math.random()||.1,w=y.length;for(u&&(P=a===A||a||u);h!==w&&null!=(c=y[h]);h++){if(o&&c){for(d=0,a||c.ownerDocument===A||(M(c),s=!j);p=e[d++];)if(p(c,a||A,s)){l.push(c);break}u&&($=_)}r&&((c=!p&&c)&&f--,i&&m.push(c))}if(f+=h,r&&h!==f){for(d=0;p=n[d++];)p(m,g,a,s);if(i){if(f>0)for(;h--;)m[h]||g[h]||(g[h]=Q.call(l));g=v(g)}J.apply(l,g),u&&!i&&g.length>0&&f+n.length>1&&t.uniqueSort(l)}return u&&($=_,P=b),m};return r?i(a):a}var _,w,C,E,k,T,x,S,P,O,I,M,A,N,j,L,D,R,F,B="sizzle"+1*new Date,U=e.document,$=0,H=0,z=n(),W=n(),V=n(),G=function(e,t){return e===t&&(I=!0),0},q=1<<31,K={}.hasOwnProperty,Y=[],Q=Y.pop,X=Y.push,J=Y.push,Z=Y.slice,ee=function(e,t){for(var n=0,i=e.length;i>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",ie="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re="\\["+ne+"*("+ie+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",oe=":("+ie+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+re+")*)|.*)\\)|)",ae=new RegExp(ne+"+","g"),se=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),le=new RegExp("^"+ne+"*,"+ne+"*"),ue=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),ce=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),de=new RegExp(oe),pe=new RegExp("^"+ie+"$"),fe={
ID:new RegExp("^#("+ie+")"),CLASS:new RegExp("^\\.("+ie+")"),TAG:new RegExp("^("+ie+"|[*])"),ATTR:new RegExp("^"+re),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},he=/^(?:input|select|textarea|button)$/i,me=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ge=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,ye=/'|\\/g,_e=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),we=function(e,t,n){var i="0x"+t-65536;return i!==i||n?t:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},Ce=function(){M()};try{J.apply(Y=Z.call(U.childNodes),U.childNodes),Y[U.childNodes.length].nodeType}catch(e){J={apply:Y.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,i=0;e[n++]=t[i++];);e.length=n-1}}}w=t.support={},k=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},M=t.setDocument=function(e){var t,n,i=e?e.ownerDocument||e:U;return i!==A&&9===i.nodeType&&i.documentElement?(A=i,N=A.documentElement,j=!k(A),(n=A.defaultView)&&n.top!==n&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),w.attributes=r(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=r(function(e){return e.appendChild(A.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(A.getElementsByClassName),w.getById=r(function(e){return N.appendChild(e).id=B,!A.getElementsByName||!A.getElementsByName(B).length}),w.getById?(C.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&j){var n=t.getElementById(e);return n?[n]:[]}},C.filter.ID=function(e){var t=e.replace(_e,we);return function(e){return e.getAttribute("id")===t}}):(delete C.find.ID,C.filter.ID=function(e){var t=e.replace(_e,we);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),C.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,i=[],r=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=w.getElementsByClassName&&function(e,t){return"undefined"!=typeof t.getElementsByClassName&&j?t.getElementsByClassName(e):void 0},D=[],L=[],(w.qsa=ve.test(A.querySelectorAll))&&(r(function(e){N.appendChild(e).innerHTML="<a id='"+B+"'></a><select id='"+B+"-\r\\' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&L.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||L.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+B+"-]").length||L.push("~="),e.querySelectorAll(":checked").length||L.push(":checked"),e.querySelectorAll("a#"+B+"+*").length||L.push(".#.+[+~]")}),r(function(e){var t=A.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&L.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||L.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),L.push(",.*:")})),(w.matchesSelector=ve.test(R=N.matches||N.webkitMatchesSelector||N.mozMatchesSelector||N.oMatchesSelector||N.msMatchesSelector))&&r(function(e){w.disconnectedMatch=R.call(e,"div"),R.call(e,"[s!='']:x"),D.push("!=",oe)}),L=L.length&&new RegExp(L.join("|")),D=D.length&&new RegExp(D.join("|")),t=ve.test(N.compareDocumentPosition),F=t||ve.test(N.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,i=t&&t.parentNode;return e===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):e.compareDocumentPosition&&16&e.compareDocumentPosition(i)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},G=t?function(e,t){if(e===t)return I=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n?n:(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===A||e.ownerDocument===U&&F(U,e)?-1:t===A||t.ownerDocument===U&&F(U,t)?1:O?ee(O,e)-ee(O,t):0:4&n?-1:1)}:function(e,t){if(e===t)return I=!0,0;var n,i=0,r=e.parentNode,o=t.parentNode,s=[e],l=[t];if(!r||!o)return e===A?-1:t===A?1:r?-1:o?1:O?ee(O,e)-ee(O,t):0;if(r===o)return a(e,t);for(n=e;n=n.parentNode;)s.unshift(n);for(n=t;n=n.parentNode;)l.unshift(n);for(;s[i]===l[i];)i++;return i?a(s[i],l[i]):s[i]===U?-1:l[i]===U?1:0},A):A},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==A&&M(e),n=n.replace(ce,"='$1']"),w.matchesSelector&&j&&!V[n+" "]&&(!D||!D.test(n))&&(!L||!L.test(n)))try{var i=R.call(e,n);if(i||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return i}catch(e){}return t(n,A,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==A&&M(e),F(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==A&&M(e);var n=C.attrHandle[t.toLowerCase()],i=n&&K.call(C.attrHandle,t.toLowerCase())?n(e,t,!j):void 0;return void 0!==i?i:w.attributes||!j?e.getAttribute(t):(i=e.getAttributeNode(t))&&i.specified?i.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],i=0,r=0;if(I=!w.detectDuplicates,O=!w.sortStable&&e.slice(0),e.sort(G),I){for(;t=e[r++];)t===e[r]&&(i=n.push(r));for(;i--;)e.splice(n[i],1)}return O=null,e},E=t.getText=function(e){var t,n="",i=0,r=e.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=E(e)}else if(3===r||4===r)return e.nodeValue}else for(;t=e[i++];)n+=E(t);return n},C=t.selectors={cacheLength:50,createPseudo:i,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(_e,we),e[3]=(e[3]||e[4]||e[5]||"").replace(_e,we),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&de.test(n)&&(t=T(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(_e,we).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,i){return function(r){var o=t.attr(r,e);return null==o?"!="===n:!n||(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(ae," ")+" ").indexOf(i)>-1:"|="===n&&(o===i||o.slice(0,i.length+1)===i+"-"))}},CHILD:function(e,t,n,i,r){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===i&&0===r?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,p,f,h,m=o!==a?"nextSibling":"previousSibling",v=t.parentNode,g=s&&t.nodeName.toLowerCase(),b=!l&&!s,y=!1;if(v){if(o){for(;m;){for(p=t;p=p[m];)if(s?p.nodeName.toLowerCase()===g:1===p.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?v.firstChild:v.lastChild],a&&b){for(p=v,d=p[B]||(p[B]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===$&&u[1],y=f&&u[2],p=f&&v.childNodes[f];p=++f&&p&&p[m]||(y=f=0)||h.pop();)if(1===p.nodeType&&++y&&p===t){c[e]=[$,f,y];break}}else if(b&&(p=t,d=p[B]||(p[B]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),u=c[e]||[],f=u[0]===$&&u[1],y=f),y===!1)for(;(p=++f&&p&&p[m]||(y=f=0)||h.pop())&&((s?p.nodeName.toLowerCase()!==g:1!==p.nodeType)||!++y||(b&&(d=p[B]||(p[B]={}),c=d[p.uniqueID]||(d[p.uniqueID]={}),c[e]=[$,y]),p!==t)););return y-=r,y===i||y%i===0&&y/i>=0}}},PSEUDO:function(e,n){var r,o=C.pseudos[e]||C.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[B]?o(n):o.length>1?(r=[e,e,"",n],C.setFilters.hasOwnProperty(e.toLowerCase())?i(function(e,t){for(var i,r=o(e,n),a=r.length;a--;)i=ee(e,r[a]),e[i]=!(t[i]=r[a])}):function(e){return o(e,0,r)}):o}},pseudos:{not:i(function(e){var t=[],n=[],r=x(e.replace(se,"$1"));return r[B]?i(function(e,t,n,i){for(var o,a=r(e,null,i,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,i,o){return t[0]=e,r(t,null,o,n),t[0]=null,!n.pop()}}),has:i(function(e){return function(n){return t(e,n).length>0}}),contains:i(function(e){return e=e.replace(_e,we),function(t){return(t.textContent||t.innerText||E(t)).indexOf(e)>-1}}),lang:i(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(_e,we).toLowerCase(),function(t){var n;do if(n=j?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return n=n.toLowerCase(),n===e||0===n.indexOf(e+"-");while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===N},focus:function(e){return e===A.activeElement&&(!A.hasFocus||A.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return e.disabled===!1},disabled:function(e){return e.disabled===!0},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,e.selected===!0},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!C.pseudos.empty(e)},header:function(e){return me.test(e.nodeName)},input:function(e){return he.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var i=0>n?n+t:n;--i>=0;)e.push(i);return e}),gt:u(function(e,t,n){for(var i=0>n?n+t:n;++i<t;)e.push(i);return e})}},C.pseudos.nth=C.pseudos.eq;for(_ in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[_]=s(_);for(_ in{submit:!0,reset:!0})C.pseudos[_]=l(_);return d.prototype=C.filters=C.pseudos,C.setFilters=new d,T=t.tokenize=function(e,n){var i,r,o,a,s,l,u,c=W[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=C.preFilter;s;){i&&!(r=le.exec(s))||(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ue.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(se," ")}),s=s.slice(i.length));for(a in C.filter)!(r=fe[a].exec(s))||u[a]&&!(r=u[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?t.error(e):W(e,l).slice(0)},x=t.compile=function(e,t){var n,i=[],r=[],o=V[e+" "];if(!o){for(t||(t=T(e)),n=t.length;n--;)o=b(t[n]),o[B]?i.push(o):r.push(o);o=V(e,y(r,i)),o.selector=e}return o},S=t.select=function(e,t,n,i){var r,o,a,s,l,u="function"==typeof e&&e,d=!i&&T(e=u.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&j&&C.relative[o[1].type]){if(t=(C.find.ID(a.matches[0].replace(_e,we),t)||[])[0],!t)return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(r=fe.needsContext.test(e)?0:o.length;r--&&(a=o[r],!C.relative[s=a.type]);)if((l=C.find[s])&&(i=l(a.matches[0].replace(_e,we),be.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(r,1),e=i.length&&p(o),!e)return J.apply(n,i),n;break}}return(u||x(e,d))(i,t,!j,n,!t||be.test(e)&&c(t.parentNode)||t),n},w.sortStable=B.split("").sort(G).join("")===B,w.detectDuplicates=!!I,M(),w.sortDetached=r(function(e){return 1&e.compareDocumentPosition(A.createElement("div"))}),r(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&r(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),r(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var i;return n?void 0:e[t]===!0?t.toLowerCase():(i=e.getAttributeNode(t))&&i.specified?i.value:null}),t}(e);oe.find=ce,oe.expr=ce.selectors,oe.expr[":"]=oe.expr.pseudos,oe.uniqueSort=oe.unique=ce.uniqueSort,oe.text=ce.getText,oe.isXMLDoc=ce.isXML,oe.contains=ce.contains;var de=function(e,t,n){for(var i=[],r=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(r&&oe(e).is(n))break;i.push(e)}return i},pe=function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n},fe=oe.expr.match.needsContext,he=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,me=/^.[^:#\[\.,]*$/;oe.filter=function(e,t,n){var i=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===i.nodeType?oe.find.matchesSelector(i,e)?[i]:[]:oe.find.matches(e,oe.grep(t,function(e){return 1===e.nodeType}))},oe.fn.extend({find:function(e){var t,n=this.length,i=[],r=this;if("string"!=typeof e)return this.pushStack(oe(e).filter(function(){for(t=0;n>t;t++)if(oe.contains(r[t],this))return!0}));for(t=0;n>t;t++)oe.find(e,r[t],i);return i=this.pushStack(n>1?oe.unique(i):i),i.selector=this.selector?this.selector+" "+e:e,i},filter:function(e){return this.pushStack(i(this,e||[],!1))},not:function(e){return this.pushStack(i(this,e||[],!0))},is:function(e){return!!i(this,"string"==typeof e&&fe.test(e)?oe(e):e||[],!1).length}});var ve,ge=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,be=oe.fn.init=function(e,t,n){var i,r;if(!e)return this;if(n=n||ve,"string"==typeof e){if(i="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ge.exec(e),!i||!i[1]&&t)return!t||t.jquery?(t||n).find(e):this.constructor(t).find(e);if(i[1]){if(t=t instanceof oe?t[0]:t,oe.merge(this,oe.parseHTML(i[1],t&&t.nodeType?t.ownerDocument||t:Y,!0)),he.test(i[1])&&oe.isPlainObject(t))for(i in t)oe.isFunction(this[i])?this[i](t[i]):this.attr(i,t[i]);return this}return r=Y.getElementById(i[2]),r&&r.parentNode&&(this.length=1,this[0]=r),this.context=Y,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):oe.isFunction(e)?void 0!==n.ready?n.ready(e):e(oe):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),oe.makeArray(e,this))};be.prototype=oe.fn,ve=oe(Y);var ye=/^(?:parents|prev(?:Until|All))/,_e={children:!0,contents:!0,next:!0,prev:!0};oe.fn.extend({has:function(e){var t=oe(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(oe.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,i=0,r=this.length,o=[],a=fe.test(e)||"string"!=typeof e?oe(e,t||this.context):0;r>i;i++)for(n=this[i];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&oe.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?oe.uniqueSort(o):o)},index:function(e){return e?"string"==typeof e?Z.call(oe(e),this[0]):Z.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(oe.uniqueSort(oe.merge(this.get(),oe(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),oe.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return de(e,"parentNode")},parentsUntil:function(e,t,n){return de(e,"parentNode",n)},next:function(e){return r(e,"nextSibling")},prev:function(e){return r(e,"previousSibling")},nextAll:function(e){return de(e,"nextSibling")},prevAll:function(e){return de(e,"previousSibling")},nextUntil:function(e,t,n){return de(e,"nextSibling",n)},prevUntil:function(e,t,n){return de(e,"previousSibling",n)},siblings:function(e){return pe((e.parentNode||{}).firstChild,e)},children:function(e){return pe(e.firstChild)},contents:function(e){return e.contentDocument||oe.merge([],e.childNodes)}},function(e,t){oe.fn[e]=function(n,i){var r=oe.map(this,t,n);return"Until"!==e.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=oe.filter(i,r)),this.length>1&&(_e[e]||oe.uniqueSort(r),ye.test(e)&&r.reverse()),this.pushStack(r)}});var we=/\S+/g;oe.Callbacks=function(e){e="string"==typeof e?o(e):oe.extend({},e);var t,n,i,r,a=[],s=[],l=-1,u=function(){for(r=e.once,i=t=!0;s.length;l=-1)for(n=s.shift();++l<a.length;)a[l].apply(n[0],n[1])===!1&&e.stopOnFalse&&(l=a.length,n=!1);e.memory||(n=!1),t=!1,r&&(a=n?[]:"")},c={add:function(){return a&&(n&&!t&&(l=a.length-1,s.push(n)),function t(n){oe.each(n,function(n,i){oe.isFunction(i)?e.unique&&c.has(i)||a.push(i):i&&i.length&&"string"!==oe.type(i)&&t(i)})}(arguments),n&&!t&&u()),this},remove:function(){return oe.each(arguments,function(e,t){for(var n;(n=oe.inArray(t,a,n))>-1;)a.splice(n,1),l>=n&&l--}),this},has:function(e){return e?oe.inArray(e,a)>-1:a.length>0},empty:function(){return a&&(a=[]),this},disable:function(){return r=s=[],a=n="",this},disabled:function(){return!a},lock:function(){return r=s=[],n||(a=n=""),this},locked:function(){return!!r},fireWith:function(e,n){return r||(n=n||[],n=[e,n.slice?n.slice():n],s.push(n),t||u()),this},fire:function(){return c.fireWith(this,arguments),this},fired:function(){return!!i}};return c},oe.extend({Deferred:function(e){var t=[["resolve","done",oe.Callbacks("once memory"),"resolved"],["reject","fail",oe.Callbacks("once memory"),"rejected"],["notify","progress",oe.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var e=arguments;return oe.Deferred(function(n){oe.each(t,function(t,o){var a=oe.isFunction(e[t])&&e[t];r[o[1]](function(){var e=a&&a.apply(this,arguments);e&&oe.isFunction(e.promise)?e.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[o[0]+"With"](this===i?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?oe.extend(e,i):i}},r={};return i.pipe=i.then,oe.each(t,function(e,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),e&&e.call(r,r),r},when:function(e){var t,n,i,r=0,o=Q.call(arguments),a=o.length,s=1!==a||e&&oe.isFunction(e.promise)?a:0,l=1===s?e:oe.Deferred(),u=function(e,n,i){return function(r){n[e]=this,i[e]=arguments.length>1?Q.call(arguments):r,i===t?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(t=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&oe.isFunction(o[r].promise)?o[r].promise().progress(u(r,n,t)).done(u(r,i,o)).fail(l.reject):--s;return s||l.resolveWith(i,o),l.promise()}});var Ce;oe.fn.ready=function(e){return oe.ready.promise().done(e),this},oe.extend({isReady:!1,readyWait:1,holdReady:function(e){e?oe.readyWait++:oe.ready(!0)},ready:function(e){(e===!0?--oe.readyWait:oe.isReady)||(oe.isReady=!0,e!==!0&&--oe.readyWait>0||(Ce.resolveWith(Y,[oe]),oe.fn.triggerHandler&&(oe(Y).triggerHandler("ready"),oe(Y).off("ready"))))}}),oe.ready.promise=function(t){return Ce||(Ce=oe.Deferred(),"complete"===Y.readyState||"loading"!==Y.readyState&&!Y.documentElement.doScroll?e.setTimeout(oe.ready):(Y.addEventListener("DOMContentLoaded",a),e.addEventListener("load",a))),Ce.promise(t)},oe.ready.promise();var Ee=function(e,t,n,i,r,o,a){var s=0,l=e.length,u=null==n;if("object"===oe.type(n)){r=!0;for(s in n)Ee(e,t,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,oe.isFunction(i)||(a=!0),u&&(a?(t.call(e,i),t=null):(u=t,t=function(e,t,n){return u.call(oe(e),n)})),t))for(;l>s;s++)t(e[s],n,a?i:i.call(e[s],s,t(e[s],n)));return r?e:u?t.call(e):l?t(e[0],n):o},ke=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType};s.uid=1,s.prototype={register:function(e,t){var n=t||{};return e.nodeType?e[this.expando]=n:Object.defineProperty(e,this.expando,{value:n,writable:!0,configurable:!0}),e[this.expando]},cache:function(e){if(!ke(e))return{};var t=e[this.expando];return t||(t={},ke(e)&&(e.nodeType?e[this.expando]=t:Object.defineProperty(e,this.expando,{value:t,configurable:!0}))),t},set:function(e,t,n){var i,r=this.cache(e);if("string"==typeof t)r[t]=n;else for(i in t)r[i]=t[i];return r},get:function(e,t){return void 0===t?this.cache(e):e[this.expando]&&e[this.expando][t]},access:function(e,t,n){var i;return void 0===t||t&&"string"==typeof t&&void 0===n?(i=this.get(e,t),void 0!==i?i:this.get(e,oe.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,i,r,o=e[this.expando];if(void 0!==o){if(void 0===t)this.register(e);else{oe.isArray(t)?i=t.concat(t.map(oe.camelCase)):(r=oe.camelCase(t),t in o?i=[t,r]:(i=r,i=i in o?[i]:i.match(we)||[])),n=i.length;for(;n--;)delete o[i[n]]}(void 0===t||oe.isEmptyObject(o))&&(e.nodeType?e[this.expando]=void 0:delete e[this.expando])}},hasData:function(e){var t=e[this.expando];return void 0!==t&&!oe.isEmptyObject(t)}};var Te=new s,xe=new s,Se=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Pe=/[A-Z]/g;oe.extend({hasData:function(e){return xe.hasData(e)||Te.hasData(e)},data:function(e,t,n){return xe.access(e,t,n)},removeData:function(e,t){xe.remove(e,t)},_data:function(e,t,n){return Te.access(e,t,n)},_removeData:function(e,t){Te.remove(e,t)}}),oe.fn.extend({data:function(e,t){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(r=xe.get(o),1===o.nodeType&&!Te.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=oe.camelCase(i.slice(5)),l(o,i,r[i])));Te.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof e?this.each(function(){xe.set(this,e)}):Ee(this,function(t){var n,i;if(o&&void 0===t){if(n=xe.get(o,e)||xe.get(o,e.replace(Pe,"-$&").toLowerCase()),void 0!==n)return n;if(i=oe.camelCase(e),n=xe.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else i=oe.camelCase(e),this.each(function(){var n=xe.get(this,i);xe.set(this,i,t),e.indexOf("-")>-1&&void 0!==n&&xe.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){xe.remove(this,e)})}}),oe.extend({queue:function(e,t,n){var i;return e?(t=(t||"fx")+"queue",i=Te.get(e,t),n&&(!i||oe.isArray(n)?i=Te.access(e,t,oe.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=oe.queue(e,t),i=n.length,r=n.shift(),o=oe._queueHooks(e,t),a=function(){oe.dequeue(e,t)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===t&&n.unshift("inprogress"),delete o.stop,r.call(e,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return Te.get(e,n)||Te.access(e,n,{empty:oe.Callbacks("once memory").add(function(){Te.remove(e,[t+"queue",n])})})}}),oe.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?oe.queue(this[0],e):void 0===t?this:this.each(function(){var n=oe.queue(this,e,t);oe._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&oe.dequeue(this,e)})},dequeue:function(e){return this.each(function(){oe.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,i=1,r=oe.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)n=Te.get(o[a],e+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(t)}});var Oe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ie=new RegExp("^(?:([+-])=|)("+Oe+")([a-z%]*)$","i"),Me=["Top","Right","Bottom","Left"],Ae=function(e,t){return e=t||e,"none"===oe.css(e,"display")||!oe.contains(e.ownerDocument,e)},Ne=/^(?:checkbox|radio)$/i,je=/<([\w:-]+)/,Le=/^$|\/(?:java|ecma)script/i,De={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};De.optgroup=De.option,De.tbody=De.tfoot=De.colgroup=De.caption=De.thead,De.th=De.td;var Re=/<|&#?\w+;/;!function(){var e=Y.createDocumentFragment(),t=e.appendChild(Y.createElement("div")),n=Y.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),t.appendChild(n),ie.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,t.innerHTML="<textarea>x</textarea>",ie.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue}();var Fe=/^key/,Be=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ue=/^([^.]*)(?:\.(.+)|)/;oe.event={global:{},add:function(e,t,n,i,r){var o,a,s,l,u,c,d,p,f,h,m,v=Te.get(e);if(v)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=oe.guid++),(l=v.events)||(l=v.events={}),(a=v.handle)||(a=v.handle=function(t){return"undefined"!=typeof oe&&oe.event.triggered!==t.type?oe.event.dispatch.apply(e,arguments):void 0}),t=(t||"").match(we)||[""],u=t.length;u--;)s=Ue.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f&&(d=oe.event.special[f]||{},f=(r?d.delegateType:d.bindType)||f,d=oe.event.special[f]||{},c=oe.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&oe.expr.match.needsContext.test(r),namespace:h.join(".")},o),(p=l[f])||(p=l[f]=[],p.delegateCount=0,d.setup&&d.setup.call(e,i,h,a)!==!1||e.addEventListener&&e.addEventListener(f,a)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),r?p.splice(p.delegateCount++,0,c):p.push(c),oe.event.global[f]=!0)},remove:function(e,t,n,i,r){var o,a,s,l,u,c,d,p,f,h,m,v=Te.hasData(e)&&Te.get(e);if(v&&(l=v.events)){for(t=(t||"").match(we)||[""],u=t.length;u--;)if(s=Ue.exec(t[u])||[],f=m=s[1],h=(s[2]||"").split(".").sort(),f){for(d=oe.event.special[f]||{},f=(i?d.delegateType:d.bindType)||f,p=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=p.length;o--;)c=p[o],!r&&m!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||i&&i!==c.selector&&("**"!==i||!c.selector)||(p.splice(o,1),c.selector&&p.delegateCount--,d.remove&&d.remove.call(e,c));a&&!p.length&&(d.teardown&&d.teardown.call(e,h,v.handle)!==!1||oe.removeEvent(e,f,v.handle),delete l[f])}else for(f in l)oe.event.remove(e,f+t[u],n,i,!0);oe.isEmptyObject(l)&&Te.remove(e,"handle events")}},dispatch:function(e){e=oe.event.fix(e);var t,n,i,r,o,a=[],s=Q.call(arguments),l=(Te.get(this,"events")||{})[e.type]||[],u=oe.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||u.preDispatch.call(this,e)!==!1){for(a=oe.event.handlers.call(this,e,l),t=0;(r=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(o.namespace)||(e.handleObj=o,e.data=o.data,i=((oe.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s),void 0!==i&&(e.result=i)===!1&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,i,r,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&("click"!==e.type||isNaN(e.button)||e.button<1))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&(l.disabled!==!0||"click"!==e.type)){for(i=[],n=0;s>n;n++)o=t[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?oe(r,this).index(l)>-1:oe.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget detail eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,i,r,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||Y,i=n.documentElement,r=n.body,e.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[oe.expando])return e;var t,n,i,r=e.type,o=e,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Be.test(r)?this.mouseHooks:Fe.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,e=new oe.Event(o),t=i.length;t--;)n=i[t],e[n]=o[n];return e.target||(e.target=Y),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==m()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===m()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&oe.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return oe.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}}},oe.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n)},oe.Event=function(e,t){return this instanceof oe.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&e.returnValue===!1?f:h):this.type=e,t&&oe.extend(this,t),this.timeStamp=e&&e.timeStamp||oe.now(),void(this[oe.expando]=!0)):new oe.Event(e,t)},oe.Event.prototype={constructor:oe.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&!this.isSimulated&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&!this.isSimulated&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&!this.isSimulated&&e.stopImmediatePropagation(),this.stopPropagation()}},oe.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){oe.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,i=this,r=e.relatedTarget,o=e.handleObj;return r&&(r===i||oe.contains(i,r))||(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),oe.fn.extend({on:function(e,t,n,i){return v(this,e,t,n,i)},one:function(e,t,n,i){return v(this,e,t,n,i,1)},off:function(e,t,n){var i,r;if(e&&e.preventDefault&&e.handleObj)return i=e.handleObj,oe(e.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof e){for(r in e)this.off(r,t,e[r]);return this}return t!==!1&&"function"!=typeof t||(n=t,t=void 0),n===!1&&(n=h),this.each(function(){oe.event.remove(this,e,n,t)})}});var $e=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,He=/<script|<style|<link/i,ze=/checked\s*(?:[^=]|=\s*.checked.)/i,We=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;oe.extend({htmlPrefilter:function(e){return e.replace($e,"<$1></$2>")},clone:function(e,t,n){var i,r,o,a,s=e.cloneNode(!0),l=oe.contains(e.ownerDocument,e);if(!(ie.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||oe.isXMLDoc(e)))for(a=c(s),o=c(e),i=0,r=o.length;r>i;i++)w(o[i],a[i]);if(t)if(n)for(o=o||c(e),
a=a||c(s),i=0,r=o.length;r>i;i++)_(o[i],a[i]);else _(e,s);return a=c(s,"script"),a.length>0&&d(a,!l&&c(e,"script")),s},cleanData:function(e){for(var t,n,i,r=oe.event.special,o=0;void 0!==(n=e[o]);o++)if(ke(n)){if(t=n[Te.expando]){if(t.events)for(i in t.events)r[i]?oe.event.remove(n,i):oe.removeEvent(n,i,t.handle);n[Te.expando]=void 0}n[xe.expando]&&(n[xe.expando]=void 0)}}}),oe.fn.extend({domManip:C,detach:function(e){return E(this,e,!0)},remove:function(e){return E(this,e)},text:function(e){return Ee(this,function(e){return void 0===e?oe.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=e)})},null,e,arguments.length)},append:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.appendChild(e)}})},prepend:function(){return C(this,arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=g(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return C(this,arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(oe.cleanData(c(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return oe.clone(this,e,t)})},html:function(e){return Ee(this,function(e){var t=this[0]||{},n=0,i=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!He.test(e)&&!De[(je.exec(e)||["",""])[1].toLowerCase()]){e=oe.htmlPrefilter(e);try{for(;i>n;n++)t=this[n]||{},1===t.nodeType&&(oe.cleanData(c(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=[];return C(this,arguments,function(t){var n=this.parentNode;oe.inArray(this,e)<0&&(oe.cleanData(c(this)),n&&n.replaceChild(t,this))},e)}}),oe.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){oe.fn[e]=function(e){for(var n,i=[],r=oe(e),o=r.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),oe(r[a])[t](n),J.apply(i,n.get());return this.pushStack(i)}});var Ge,qe={HTML:"block",BODY:"block"},Ke=/^margin/,Ye=new RegExp("^("+Oe+")(?!px)[a-z%]+$","i"),Qe=function(t){var n=t.ownerDocument.defaultView;return n&&n.opener||(n=e),n.getComputedStyle(t)},Xe=function(e,t,n,i){var r,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];r=n.apply(e,i||[]);for(o in t)e.style[o]=a[o];return r},Je=Y.documentElement;!function(){function t(){s.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Je.appendChild(a);var t=e.getComputedStyle(s);n="1%"!==t.top,o="2px"===t.marginLeft,i="4px"===t.width,s.style.marginRight="50%",r="4px"===t.marginRight,Je.removeChild(a)}var n,i,r,o,a=Y.createElement("div"),s=Y.createElement("div");s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",ie.clearCloneStyle="content-box"===s.style.backgroundClip,a.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",a.appendChild(s),oe.extend(ie,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==i&&t(),i},pixelMarginRight:function(){return null==i&&t(),r},reliableMarginLeft:function(){return null==i&&t(),o},reliableMarginRight:function(){var t,n=s.appendChild(Y.createElement("div"));return n.style.cssText=s.style.cssText="-webkit-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",s.style.width="1px",Je.appendChild(a),t=!parseFloat(e.getComputedStyle(n).marginRight),Je.removeChild(a),s.removeChild(n),t}}))}();var Ze=/^(none|table(?!-c[ea]).+)/,et={position:"absolute",visibility:"hidden",display:"block"},tt={letterSpacing:"0",fontWeight:"400"},nt=["Webkit","O","Moz","ms"],it=Y.createElement("div").style;oe.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=x(e,"opacity");return""===n?"1":n}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,i){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var r,o,a,s=oe.camelCase(t),l=e.style;return t=oe.cssProps[s]||(oe.cssProps[s]=P(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(e,!1,i))?r:l[t]:(o=typeof n,"string"===o&&(r=Ie.exec(n))&&r[1]&&(n=u(e,t,r),o="number"),void(null!=n&&n===n&&("number"===o&&(n+=r&&r[3]||(oe.cssNumber[s]?"":"px")),ie.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,i))||(l[t]=n))))}},css:function(e,t,n,i){var r,o,a,s=oe.camelCase(t);return t=oe.cssProps[s]||(oe.cssProps[s]=P(s)||s),a=oe.cssHooks[t]||oe.cssHooks[s],a&&"get"in a&&(r=a.get(e,!0,n)),void 0===r&&(r=x(e,t,i)),"normal"===r&&t in tt&&(r=tt[t]),""===n||n?(o=parseFloat(r),n===!0||isFinite(o)?o||0:r):r}}),oe.each(["height","width"],function(e,t){oe.cssHooks[t]={get:function(e,n,i){return n?Ze.test(oe.css(e,"display"))&&0===e.offsetWidth?Xe(e,et,function(){return M(e,t,i)}):M(e,t,i):void 0},set:function(e,n,i){var r,o=i&&Qe(e),a=i&&I(e,t,i,"border-box"===oe.css(e,"boxSizing",!1,o),o);return a&&(r=Ie.exec(n))&&"px"!==(r[3]||"px")&&(e.style[t]=n,n=oe.css(e,t)),O(e,n,a)}}}),oe.cssHooks.marginLeft=S(ie.reliableMarginLeft,function(e,t){return t?(parseFloat(x(e,"marginLeft"))||e.getBoundingClientRect().left-Xe(e,{marginLeft:0},function(){return e.getBoundingClientRect().left}))+"px":void 0}),oe.cssHooks.marginRight=S(ie.reliableMarginRight,function(e,t){return t?Xe(e,{display:"inline-block"},x,[e,"marginRight"]):void 0}),oe.each({margin:"",padding:"",border:"Width"},function(e,t){oe.cssHooks[e+t]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[e+Me[i]+t]=o[i]||o[i-2]||o[0];return r}},Ke.test(e)||(oe.cssHooks[e+t].set=O)}),oe.fn.extend({css:function(e,t){return Ee(this,function(e,t,n){var i,r,o={},a=0;if(oe.isArray(t)){for(i=Qe(e),r=t.length;r>a;a++)o[t[a]]=oe.css(e,t[a],!1,i);return o}return void 0!==n?oe.style(e,t,n):oe.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Ae(this)?oe(this).show():oe(this).hide()})}}),oe.Tween=N,N.prototype={constructor:N,init:function(e,t,n,i,r,o){this.elem=e,this.prop=n,this.easing=r||oe.easing._default,this.options=t,this.start=this.now=this.cur(),this.end=i,this.unit=o||(oe.cssNumber[n]?"":"px")},cur:function(){var e=N.propHooks[this.prop];return e&&e.get?e.get(this):N.propHooks._default.get(this)},run:function(e){var t,n=N.propHooks[this.prop];return this.options.duration?this.pos=t=oe.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):this.pos=t=e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):N.propHooks._default.set(this),this}},N.prototype.init.prototype=N.prototype,N.propHooks={_default:{get:function(e){var t;return 1!==e.elem.nodeType||null!=e.elem[e.prop]&&null==e.elem.style[e.prop]?e.elem[e.prop]:(t=oe.css(e.elem,e.prop,""),t&&"auto"!==t?t:0)},set:function(e){oe.fx.step[e.prop]?oe.fx.step[e.prop](e):1!==e.elem.nodeType||null==e.elem.style[oe.cssProps[e.prop]]&&!oe.cssHooks[e.prop]?e.elem[e.prop]=e.now:oe.style(e.elem,e.prop,e.now+e.unit)}}},N.propHooks.scrollTop=N.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},oe.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2},_default:"swing"},oe.fx=N.prototype.init,oe.fx.step={};var rt,ot,at=/^(?:toggle|show|hide)$/,st=/queueHooks$/;oe.Animation=oe.extend(B,{tweeners:{"*":[function(e,t){var n=this.createTween(e,t);return u(n.elem,e,Ie.exec(t),n),n}]},tweener:function(e,t){oe.isFunction(e)?(t=e,e=["*"]):e=e.match(we);for(var n,i=0,r=e.length;r>i;i++)n=e[i],B.tweeners[n]=B.tweeners[n]||[],B.tweeners[n].unshift(t)},prefilters:[R],prefilter:function(e,t){t?B.prefilters.unshift(e):B.prefilters.push(e)}}),oe.speed=function(e,t,n){var i=e&&"object"==typeof e?oe.extend({},e):{complete:n||!n&&t||oe.isFunction(e)&&e,duration:e,easing:n&&t||t&&!oe.isFunction(t)&&t};return i.duration=oe.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in oe.fx.speeds?oe.fx.speeds[i.duration]:oe.fx.speeds._default,null!=i.queue&&i.queue!==!0||(i.queue="fx"),i.old=i.complete,i.complete=function(){oe.isFunction(i.old)&&i.old.call(this),i.queue&&oe.dequeue(this,i.queue)},i},oe.fn.extend({fadeTo:function(e,t,n,i){return this.filter(Ae).css("opacity",0).show().end().animate({opacity:t},e,n,i)},animate:function(e,t,n,i){var r=oe.isEmptyObject(e),o=oe.speed(t,n,i),a=function(){var t=B(this,oe.extend({},e),o);(r||Te.get(this,"finish"))&&t.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var i=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&e!==!1&&this.queue(e||"fx",[]),this.each(function(){var t=!0,r=null!=e&&e+"queueHooks",o=oe.timers,a=Te.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&st.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=e&&o[r].queue!==e||(o[r].anim.stop(n),t=!1,o.splice(r,1));!t&&n||oe.dequeue(this,e)})},finish:function(e){return e!==!1&&(e=e||"fx"),this.each(function(){var t,n=Te.get(this),i=n[e+"queue"],r=n[e+"queueHooks"],o=oe.timers,a=i?i.length:0;for(n.finish=!0,oe.queue(this,e,[]),r&&r.stop&&r.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)i[t]&&i[t].finish&&i[t].finish.call(this);delete n.finish})}}),oe.each(["toggle","show","hide"],function(e,t){var n=oe.fn[t];oe.fn[t]=function(e,i,r){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(L(t,!0),e,i,r)}}),oe.each({slideDown:L("show"),slideUp:L("hide"),slideToggle:L("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){oe.fn[e]=function(e,n,i){return this.animate(t,e,n,i)}}),oe.timers=[],oe.fx.tick=function(){var e,t=0,n=oe.timers;for(rt=oe.now();t<n.length;t++)e=n[t],e()||n[t]!==e||n.splice(t--,1);n.length||oe.fx.stop(),rt=void 0},oe.fx.timer=function(e){oe.timers.push(e),e()?oe.fx.start():oe.timers.pop()},oe.fx.interval=13,oe.fx.start=function(){ot||(ot=e.setInterval(oe.fx.tick,oe.fx.interval))},oe.fx.stop=function(){e.clearInterval(ot),ot=null},oe.fx.speeds={slow:600,fast:200,_default:400},oe.fn.delay=function(t,n){return t=oe.fx?oe.fx.speeds[t]||t:t,n=n||"fx",this.queue(n,function(n,i){var r=e.setTimeout(n,t);i.stop=function(){e.clearTimeout(r)}})},function(){var e=Y.createElement("input"),t=Y.createElement("select"),n=t.appendChild(Y.createElement("option"));e.type="checkbox",ie.checkOn=""!==e.value,ie.optSelected=n.selected,t.disabled=!0,ie.optDisabled=!n.disabled,e=Y.createElement("input"),e.value="t",e.type="radio",ie.radioValue="t"===e.value}();var lt,ut=oe.expr.attrHandle;oe.fn.extend({attr:function(e,t){return Ee(this,oe.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){oe.removeAttr(this,e)})}}),oe.extend({attr:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return"undefined"==typeof e.getAttribute?oe.prop(e,t,n):(1===o&&oe.isXMLDoc(e)||(t=t.toLowerCase(),r=oe.attrHooks[t]||(oe.expr.match.bool.test(t)?lt:void 0)),void 0!==n?null===n?void oe.removeAttr(e,t):r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=oe.find.attr(e,t),null==i?void 0:i))},attrHooks:{type:{set:function(e,t){if(!ie.radioValue&&"radio"===t&&oe.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}},removeAttr:function(e,t){var n,i,r=0,o=t&&t.match(we);if(o&&1===e.nodeType)for(;n=o[r++];)i=oe.propFix[n]||n,oe.expr.match.bool.test(n)&&(e[i]=!1),e.removeAttribute(n)}}),lt={set:function(e,t,n){return t===!1?oe.removeAttr(e,n):e.setAttribute(n,n),n}},oe.each(oe.expr.match.bool.source.match(/\w+/g),function(e,t){var n=ut[t]||oe.find.attr;ut[t]=function(e,t,i){var r,o;return i||(o=ut[t],ut[t]=r,r=null!=n(e,t,i)?t.toLowerCase():null,ut[t]=o),r}});var ct=/^(?:input|select|textarea|button)$/i,dt=/^(?:a|area)$/i;oe.fn.extend({prop:function(e,t){return Ee(this,oe.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[oe.propFix[e]||e]})}}),oe.extend({prop:function(e,t,n){var i,r,o=e.nodeType;if(3!==o&&8!==o&&2!==o)return 1===o&&oe.isXMLDoc(e)||(t=oe.propFix[t]||t,r=oe.propHooks[t]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:e[t]=n:r&&"get"in r&&null!==(i=r.get(e,t))?i:e[t]},propHooks:{tabIndex:{get:function(e){var t=oe.find.attr(e,"tabindex");return t?parseInt(t,10):ct.test(e.nodeName)||dt.test(e.nodeName)&&e.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),ie.optSelected||(oe.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null},set:function(e){var t=e.parentNode;t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex)}}),oe.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){oe.propFix[this.toLowerCase()]=this});var pt=/[\t\r\n\f]/g;oe.fn.extend({addClass:function(e){var t,n,i,r,o,a,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).addClass(e.call(this,t,U(this)))});if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(r=U(n),i=1===n.nodeType&&(" "+r+" ").replace(pt," ")){for(a=0;o=t[a++];)i.indexOf(" "+o+" ")<0&&(i+=o+" ");s=oe.trim(i),r!==s&&n.setAttribute("class",s)}return this},removeClass:function(e){var t,n,i,r,o,a,s,l=0;if(oe.isFunction(e))return this.each(function(t){oe(this).removeClass(e.call(this,t,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof e&&e)for(t=e.match(we)||[];n=this[l++];)if(r=U(n),i=1===n.nodeType&&(" "+r+" ").replace(pt," ")){for(a=0;o=t[a++];)for(;i.indexOf(" "+o+" ")>-1;)i=i.replace(" "+o+" "," ");s=oe.trim(i),r!==s&&n.setAttribute("class",s)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):oe.isFunction(e)?this.each(function(n){oe(this).toggleClass(e.call(this,n,U(this),t),t)}):this.each(function(){var t,i,r,o;if("string"===n)for(i=0,r=oe(this),o=e.match(we)||[];t=o[i++];)r.hasClass(t)?r.removeClass(t):r.addClass(t);else void 0!==e&&"boolean"!==n||(t=U(this),t&&Te.set(this,"__className__",t),this.setAttribute&&this.setAttribute("class",t||e===!1?"":Te.get(this,"__className__")||""))})},hasClass:function(e){var t,n,i=0;for(t=" "+e+" ";n=this[i++];)if(1===n.nodeType&&(" "+U(n)+" ").replace(pt," ").indexOf(t)>-1)return!0;return!1}});var ft=/\r/g,ht=/[\x20\t\r\n\f]+/g;oe.fn.extend({val:function(e){var t,n,i,r=this[0];return arguments.length?(i=oe.isFunction(e),this.each(function(n){var r;1===this.nodeType&&(r=i?e.call(this,n,oe(this).val()):e,null==r?r="":"number"==typeof r?r+="":oe.isArray(r)&&(r=oe.map(r,function(e){return null==e?"":e+""})),t=oe.valHooks[this.type]||oe.valHooks[this.nodeName.toLowerCase()],t&&"set"in t&&void 0!==t.set(this,r,"value")||(this.value=r))})):r?(t=oe.valHooks[r.type]||oe.valHooks[r.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(ft,""):null==n?"":n)):void 0}}),oe.extend({valHooks:{option:{get:function(e){var t=oe.find.attr(e,"value");return null!=t?t:oe.trim(oe.text(e)).replace(ht," ")}},select:{get:function(e){for(var t,n,i=e.options,r=e.selectedIndex,o="select-one"===e.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(n=i[l],(n.selected||l===r)&&(ie.optDisabled?!n.disabled:null===n.getAttribute("disabled"))&&(!n.parentNode.disabled||!oe.nodeName(n.parentNode,"optgroup"))){if(t=oe(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,i,r=e.options,o=oe.makeArray(t),a=r.length;a--;)i=r[a],(i.selected=oe.inArray(oe.valHooks.option.get(i),o)>-1)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),oe.each(["radio","checkbox"],function(){oe.valHooks[this]={set:function(e,t){return oe.isArray(t)?e.checked=oe.inArray(oe(e).val(),t)>-1:void 0}},ie.checkOn||(oe.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var mt=/^(?:focusinfocus|focusoutblur)$/;oe.extend(oe.event,{trigger:function(t,n,i,r){var o,a,s,l,u,c,d,p=[i||Y],f=ne.call(t,"type")?t.type:t,h=ne.call(t,"namespace")?t.namespace.split("."):[];if(a=s=i=i||Y,3!==i.nodeType&&8!==i.nodeType&&!mt.test(f+oe.event.triggered)&&(f.indexOf(".")>-1&&(h=f.split("."),f=h.shift(),h.sort()),u=f.indexOf(":")<0&&"on"+f,t=t[oe.expando]?t:new oe.Event(f,"object"==typeof t&&t),t.isTrigger=r?2:3,t.namespace=h.join("."),t.rnamespace=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=i),n=null==n?[t]:oe.makeArray(n,[t]),d=oe.event.special[f]||{},r||!d.trigger||d.trigger.apply(i,n)!==!1)){if(!r&&!d.noBubble&&!oe.isWindow(i)){for(l=d.delegateType||f,mt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)p.push(a),s=a;s===(i.ownerDocument||Y)&&p.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=p[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||f,c=(Te.get(a,"events")||{})[t.type]&&Te.get(a,"handle"),c&&c.apply(a,n),c=u&&a[u],c&&c.apply&&ke(a)&&(t.result=c.apply(a,n),t.result===!1&&t.preventDefault());return t.type=f,r||t.isDefaultPrevented()||d._default&&d._default.apply(p.pop(),n)!==!1||!ke(i)||u&&oe.isFunction(i[f])&&!oe.isWindow(i)&&(s=i[u],s&&(i[u]=null),oe.event.triggered=f,i[f](),oe.event.triggered=void 0,s&&(i[u]=s)),t.result}},simulate:function(e,t,n){var i=oe.extend(new oe.Event,n,{type:e,isSimulated:!0});oe.event.trigger(i,null,t)}}),oe.fn.extend({trigger:function(e,t){return this.each(function(){oe.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?oe.event.trigger(e,t,n,!0):void 0}}),oe.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){oe.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),oe.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)}}),ie.focusin="onfocusin"in e,ie.focusin||oe.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){oe.event.simulate(t,e.target,oe.event.fix(e))};oe.event.special[t]={setup:function(){var i=this.ownerDocument||this,r=Te.access(i,t);r||i.addEventListener(e,n,!0),Te.access(i,t,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=Te.access(i,t)-1;r?Te.access(i,t,r):(i.removeEventListener(e,n,!0),Te.remove(i,t))}}});var vt=e.location,gt=oe.now(),bt=/\?/;oe.parseJSON=function(e){return JSON.parse(e+"")},oe.parseXML=function(t){var n;if(!t||"string"!=typeof t)return null;try{n=(new e.DOMParser).parseFromString(t,"text/xml")}catch(e){n=void 0}return n&&!n.getElementsByTagName("parsererror").length||oe.error("Invalid XML: "+t),n};var yt=/#.*$/,_t=/([?&])_=[^&]*/,wt=/^(.*?):[ \t]*([^\r\n]*)$/gm,Ct=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Et=/^(?:GET|HEAD)$/,kt=/^\/\//,Tt={},xt={},St="*/".concat("*"),Pt=Y.createElement("a");Pt.href=vt.href,oe.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:vt.href,type:"GET",isLocal:Ct.test(vt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":St,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":oe.parseJSON,"text xml":oe.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?z(z(e,oe.ajaxSettings),t):z(oe.ajaxSettings,e)},ajaxPrefilter:$(Tt),ajaxTransport:$(xt),ajax:function(t,n){function i(t,n,i,s){var u,d,b,y,w,E=n;2!==_&&(_=2,l&&e.clearTimeout(l),r=void 0,a=s||"",C.readyState=t>0?4:0,u=t>=200&&300>t||304===t,i&&(y=W(p,C,i)),y=V(p,y,C,u),u?(p.ifModified&&(w=C.getResponseHeader("Last-Modified"),w&&(oe.lastModified[o]=w),w=C.getResponseHeader("etag"),w&&(oe.etag[o]=w)),204===t||"HEAD"===p.type?E="nocontent":304===t?E="notmodified":(E=y.state,d=y.data,b=y.error,u=!b)):(b=E,!t&&E||(E="error",0>t&&(t=0))),C.status=t,C.statusText=(n||E)+"",u?m.resolveWith(f,[d,E,C]):m.rejectWith(f,[C,E,b]),C.statusCode(g),g=void 0,c&&h.trigger(u?"ajaxSuccess":"ajaxError",[C,p,u?d:b]),v.fireWith(f,[C,E]),c&&(h.trigger("ajaxComplete",[C,p]),--oe.active||oe.event.trigger("ajaxStop")))}"object"==typeof t&&(n=t,t=void 0),n=n||{};var r,o,a,s,l,u,c,d,p=oe.ajaxSetup({},n),f=p.context||p,h=p.context&&(f.nodeType||f.jquery)?oe(f):oe.event,m=oe.Deferred(),v=oe.Callbacks("once memory"),g=p.statusCode||{},b={},y={},_=0,w="canceled",C={readyState:0,getResponseHeader:function(e){var t;if(2===_){if(!s)for(s={};t=wt.exec(a);)s[t[1].toLowerCase()]=t[2];t=s[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===_?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return _||(e=y[n]=y[n]||e,b[e]=t),this},overrideMimeType:function(e){return _||(p.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>_)for(t in e)g[t]=[g[t],e[t]];else C.always(e[C.status]);return this},abort:function(e){var t=e||w;return r&&r.abort(t),i(0,t),this}};if(m.promise(C).complete=v.add,C.success=C.done,C.error=C.fail,p.url=((t||p.url||vt.href)+"").replace(yt,"").replace(kt,vt.protocol+"//"),p.type=n.method||n.type||p.method||p.type,p.dataTypes=oe.trim(p.dataType||"*").toLowerCase().match(we)||[""],null==p.crossDomain){u=Y.createElement("a");try{u.href=p.url,u.href=u.href,p.crossDomain=Pt.protocol+"//"+Pt.host!=u.protocol+"//"+u.host}catch(e){p.crossDomain=!0}}if(p.data&&p.processData&&"string"!=typeof p.data&&(p.data=oe.param(p.data,p.traditional)),H(Tt,p,n,C),2===_)return C;c=oe.event&&p.global,c&&0===oe.active++&&oe.event.trigger("ajaxStart"),p.type=p.type.toUpperCase(),p.hasContent=!Et.test(p.type),o=p.url,p.hasContent||(p.data&&(o=p.url+=(bt.test(o)?"&":"?")+p.data,delete p.data),p.cache===!1&&(p.url=_t.test(o)?o.replace(_t,"$1_="+gt++):o+(bt.test(o)?"&":"?")+"_="+gt++)),p.ifModified&&(oe.lastModified[o]&&C.setRequestHeader("If-Modified-Since",oe.lastModified[o]),oe.etag[o]&&C.setRequestHeader("If-None-Match",oe.etag[o])),(p.data&&p.hasContent&&p.contentType!==!1||n.contentType)&&C.setRequestHeader("Content-Type",p.contentType),C.setRequestHeader("Accept",p.dataTypes[0]&&p.accepts[p.dataTypes[0]]?p.accepts[p.dataTypes[0]]+("*"!==p.dataTypes[0]?", "+St+"; q=0.01":""):p.accepts["*"]);for(d in p.headers)C.setRequestHeader(d,p.headers[d]);if(p.beforeSend&&(p.beforeSend.call(f,C,p)===!1||2===_))return C.abort();w="abort";for(d in{success:1,error:1,complete:1})C[d](p[d]);if(r=H(xt,p,n,C)){if(C.readyState=1,c&&h.trigger("ajaxSend",[C,p]),2===_)return C;p.async&&p.timeout>0&&(l=e.setTimeout(function(){C.abort("timeout")},p.timeout));try{_=1,r.send(b,i)}catch(e){if(!(2>_))throw e;i(-1,e)}}else i(-1,"No Transport");return C},getJSON:function(e,t,n){return oe.get(e,t,n,"json")},getScript:function(e,t){return oe.get(e,void 0,t,"script")}}),oe.each(["get","post"],function(e,t){oe[t]=function(e,n,i,r){return oe.isFunction(n)&&(r=r||i,i=n,n=void 0),oe.ajax(oe.extend({url:e,type:t,dataType:r,data:n,success:i},oe.isPlainObject(e)&&e))}}),oe._evalUrl=function(e){return oe.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},oe.fn.extend({wrapAll:function(e){var t;return oe.isFunction(e)?this.each(function(t){oe(this).wrapAll(e.call(this,t))}):(this[0]&&(t=oe(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return oe.isFunction(e)?this.each(function(t){oe(this).wrapInner(e.call(this,t))}):this.each(function(){var t=oe(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=oe.isFunction(e);return this.each(function(n){oe(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){oe.nodeName(this,"body")||oe(this).replaceWith(this.childNodes)}).end()}}),oe.expr.filters.hidden=function(e){return!oe.expr.filters.visible(e)},oe.expr.filters.visible=function(e){return e.offsetWidth>0||e.offsetHeight>0||e.getClientRects().length>0};var Ot=/%20/g,It=/\[\]$/,Mt=/\r?\n/g,At=/^(?:submit|button|image|reset|file)$/i,Nt=/^(?:input|select|textarea|keygen)/i;oe.param=function(e,t){var n,i=[],r=function(e,t){t=oe.isFunction(t)?t():null==t?"":t,i[i.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=oe.ajaxSettings&&oe.ajaxSettings.traditional),oe.isArray(e)||e.jquery&&!oe.isPlainObject(e))oe.each(e,function(){r(this.name,this.value)});else for(n in e)G(n,e[n],t,r);return i.join("&").replace(Ot,"+")},oe.fn.extend({serialize:function(){return oe.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=oe.prop(this,"elements");return e?oe.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!oe(this).is(":disabled")&&Nt.test(this.nodeName)&&!At.test(e)&&(this.checked||!Ne.test(e))}).map(function(e,t){var n=oe(this).val();return null==n?null:oe.isArray(n)?oe.map(n,function(e){return{name:t.name,value:e.replace(Mt,"\r\n")}}):{name:t.name,value:n.replace(Mt,"\r\n")}}).get()}}),oe.ajaxSettings.xhr=function(){try{return new e.XMLHttpRequest}catch(e){}};var jt={0:200,1223:204},Lt=oe.ajaxSettings.xhr();ie.cors=!!Lt&&"withCredentials"in Lt,ie.ajax=Lt=!!Lt,oe.ajaxTransport(function(t){var n,i;return ie.cors||Lt&&!t.crossDomain?{send:function(r,o){var a,s=t.xhr();if(s.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(a in t.xhrFields)s[a]=t.xhrFields[a];t.mimeType&&s.overrideMimeType&&s.overrideMimeType(t.mimeType),t.crossDomain||r["X-Requested-With"]||(r["X-Requested-With"]="XMLHttpRequest");for(a in r)s.setRequestHeader(a,r[a]);n=function(e){return function(){n&&(n=i=s.onload=s.onerror=s.onabort=s.onreadystatechange=null,"abort"===e?s.abort():"error"===e?"number"!=typeof s.status?o(0,"error"):o(s.status,s.statusText):o(jt[s.status]||s.status,s.statusText,"text"!==(s.responseType||"text")||"string"!=typeof s.responseText?{binary:s.response}:{text:s.responseText},s.getAllResponseHeaders()))}},s.onload=n(),i=s.onerror=n("error"),void 0!==s.onabort?s.onabort=i:s.onreadystatechange=function(){4===s.readyState&&e.setTimeout(function(){n&&i()})},n=n("abort");try{s.send(t.hasContent&&t.data||null)}catch(e){if(n)throw e}},abort:function(){n&&n()}}:void 0}),oe.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(e){return oe.globalEval(e),e}}}),oe.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),oe.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(i,r){t=oe("<script>").prop({charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&r("error"===e.type?404:200,e.type)}),Y.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Dt=[],Rt=/(=)\?(?=&|$)|\?\?/;oe.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Dt.pop()||oe.expando+"_"+gt++;return this[e]=!0,e}}),oe.ajaxPrefilter("json jsonp",function(t,n,i){var r,o,a,s=t.jsonp!==!1&&(Rt.test(t.url)?"url":"string"==typeof t.data&&0===(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Rt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(r=t.jsonpCallback=oe.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Rt,"$1"+r):t.jsonp!==!1&&(t.url+=(bt.test(t.url)?"&":"?")+t.jsonp+"="+r),t.converters["script json"]=function(){return a||oe.error(r+" was not called"),a[0]},t.dataTypes[0]="json",o=e[r],e[r]=function(){a=arguments},i.always(function(){void 0===o?oe(e).removeProp(r):e[r]=o,t[r]&&(t.jsonpCallback=n.jsonpCallback,Dt.push(r)),a&&oe.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),oe.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||Y;var i=he.exec(e),r=!n&&[];return i?[t.createElement(i[1])]:(i=p([e],t,r),r&&r.length&&oe(r).remove(),oe.merge([],i.childNodes))};var Ft=oe.fn.load;oe.fn.load=function(e,t,n){if("string"!=typeof e&&Ft)return Ft.apply(this,arguments);var i,r,o,a=this,s=e.indexOf(" ");return s>-1&&(i=oe.trim(e.slice(s)),e=e.slice(0,s)),oe.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(r="POST"),a.length>0&&oe.ajax({url:e,type:r||"GET",dataType:"html",data:t}).done(function(e){o=arguments,a.html(i?oe("<div>").append(oe.parseHTML(e)).find(i):e)}).always(n&&function(e,t){a.each(function(){n.apply(this,o||[e.responseText,t,e])})}),this},oe.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){oe.fn[t]=function(e){return this.on(t,e)}}),oe.expr.filters.animated=function(e){return oe.grep(oe.timers,function(t){return e===t.elem}).length},oe.offset={setOffset:function(e,t,n){var i,r,o,a,s,l,u,c=oe.css(e,"position"),d=oe(e),p={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=oe.css(e,"top"),l=oe.css(e,"left"),u=("absolute"===c||"fixed"===c)&&(o+l).indexOf("auto")>-1,u?(i=d.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),oe.isFunction(t)&&(t=t.call(e,n,oe.extend({},s))),null!=t.top&&(p.top=t.top-s.top+a),null!=t.left&&(p.left=t.left-s.left+r),"using"in t?t.using.call(e,p):d.css(p)}},oe.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){oe.offset.setOffset(this,e,t)});var t,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(t=o.documentElement,oe.contains(t,i)?(r=i.getBoundingClientRect(),n=q(o),{top:r.top+n.pageYOffset-t.clientTop,left:r.left+n.pageXOffset-t.clientLeft}):r):void 0},position:function(){if(this[0]){var e,t,n=this[0],i={top:0,left:0};return"fixed"===oe.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),oe.nodeName(e[0],"html")||(i=e.offset()),i.top+=oe.css(e[0],"borderTopWidth",!0),i.left+=oe.css(e[0],"borderLeftWidth",!0)),{top:t.top-i.top-oe.css(n,"marginTop",!0),left:t.left-i.left-oe.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent;e&&"static"===oe.css(e,"position");)e=e.offsetParent;return e||Je})}}),oe.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n="pageYOffset"===t;oe.fn[e]=function(i){return Ee(this,function(e,i,r){var o=q(e);return void 0===r?o?o[t]:e[i]:void(o?o.scrollTo(n?o.pageXOffset:r,n?r:o.pageYOffset):e[i]=r)},e,i,arguments.length)}}),oe.each(["top","left"],function(e,t){oe.cssHooks[t]=S(ie.pixelPosition,function(e,n){return n?(n=x(e,t),Ye.test(n)?oe(e).position()[t]+"px":n):void 0})}),oe.each({Height:"height",Width:"width"},function(e,t){oe.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,i){oe.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return Ee(this,function(t,n,i){var r;return oe.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(r=t.documentElement,Math.max(t.body["scroll"+e],r["scroll"+e],t.body["offset"+e],r["offset"+e],r["client"+e])):void 0===i?oe.css(t,n,a):oe.style(t,n,i,a);
},t,o?i:void 0,o,null)}})}),oe.fn.extend({bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,i){return this.on(t,e,n,i)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)},size:function(){return this.length}}),oe.fn.andSelf=oe.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return oe});var Bt=e.jQuery,Ut=e.$;return oe.noConflict=function(t){return e.$===oe&&(e.$=Ut),t&&e.jQuery===oe&&(e.jQuery=Bt),oe},t||(e.jQuery=e.$=oe),oe}),define("lib/jquery/dist/jquery.min",function(){});var g_ugFunctions=new UGFunctions;jQuery.fn.unitegallery=function(e){var t=jQuery(this),n="#"+t.attr("id");if(!e)var e={};var i=new UniteGalleryMain;i.run(n,e);var r=new UG_API(i);return r},"undefined"!=typeof g_ugFunctions?g_ugFunctions.registerTheme("tiles"):jQuery(document).ready(function(){g_ugFunctions.registerTheme("tiles")}),define("storymaps/common/utils/UniteGallery",function(){}),define("storymaps-react/tpl/view/media/ImageGallery",["module","exports","./Media","storymaps/common/utils/CommonHelper","lib-build/hbars!./ImageGallery","lib-build/hbars!./ImageGalleryActionOverlays","lib-build/i18n!resources/tpl/viewer/nls/app","lib-build/i18n!resources/tpl/builder/nls/app","dojo/_base/lang","dojo/topic","lib-build/less!./ImageGallery","lib/jquery/dist/jquery.min","storymaps/common/utils/UniteGallery"],function(e,t,n,i,r,o,a,s,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=c(i),v=c(r),g=c(o),b=c(a),y=c(s),_=c(l),w=c(u),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},k=function(e){function t(e){d(this,t),e.images.forEach(function(e){var t=m.default.uploadedImageNeedsFixing(e.url);t&&(e.url=m.default.fixUploadedImageUrl(e.url),e.thumbUrl&&(e.thumbUrl=m.default.fixUploadedImageUrl(e.thumbUrl)))});var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"image-gallery",id:null,previewThumb:null,previewIcon:null}));return n._images=e,n._placement=null,n._gallery=null,n._isLoaded=!1,n}return f(t,e),C(t,[{key:"render",value:function(e){return this._images&&e&&"block"==e.placement?(this._placement=e.placement,this._render(!0)):(console.log("Could not render image gallery in section"),"")}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container){this._node=e.container.find("#"+this._domID);var n=this._initGallery();return{isAsync:!0,promise:n}}}},{key:"_initGallery",value:function(){var e=this,t=200,n=5;return app.display.windowWidth<768?t=110:this._images.images.length<=4&&(n=15),this._gallery=this._node.find(".image-gallery-wrapper").unitegallery({gallery_theme:"tiles",gallery_control_keyboard:!1,tiles_type:"justified",theme_preloading_height:0,tile_enable_action:!1,tile_enable_overlay:!1,tiles_justified_row_height:t,tiles_justified_space_between:n}),this._isLoaded=!0,new Promise(function(t){e._gallery.on("load",function(){e._onGalleryLoaded(),t()}),e._gallery.on("resize",function(){w.default.publish("media-dynamic-resize")})})}},{key:"_onGalleryLoaded",value:function(){var e=this,t=this._node.find(".ug-thumb-wrapper"),n=this;if(t.each(function(e){var t={isFirst:!1,isLast:!1};0===e?t.isFirst=!0:e===n._images.images.length-1&&(t.isLast=!0),$(this).append((0,g.default)({itemProperties:t}))}),!app.isInBuilder)for(var i=function(t){var n=e._images.images[t],i=new window.Image;i.onerror=function(){var n=y.default.builder.mediaErrors;e.setError({msg:n.placeholders.inaccessible.replace("${media-type}",n.mediaTypes.image),unfixable:!0,minimizeInViewer:!0,galleryIndex:t})},i.src=h.default.addToken(n.url)},r=0;r<this._images.images.length;r++)i(r)}},{key:"load",value:function(){if(!this._isLoaded)return this._initGallery()}},{key:"performAction",value:function(){}},{key:"resize",value:function(){}},{key:"_render",value:function(e){var t=(0,v.default)({images:this._addTokens(this._images.images),caption:this._images.caption,placeholder:b.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,imageGalleryID:"image-gallery"+this._domID});return e?'<div id="'+this._domID+'" class="block image-gallery" contenteditable="false">'+t+"</div>":t}},{key:"_addTokens",value:function(e){var t=_.default.clone(e),n=!0,i=!1,r=void 0;try{for(var o,a=t[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.url=h.default.addToken(s.url)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t}}]),t}(h.default);t.default=k,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.domId||(null!=e?e.domId:e))?o:s,typeof o===a?o.call(e,{name:"domId",hash:{},data:i}):o))+'" class="block block-type-video" contenteditable="false">\r\n  <figure class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="media-media video video-fg video-player" data-id="'+l((o=null!=(o=t.videoId||(null!=e?e.videoId:e))?o:s,typeof o===a?o.call(e,{name:"videoId",hash:{},data:i}):o))+'"></div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n    <div class="builder-ui media-delete"></div>\r\n  </figure>\r\n  <figcaption class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</figcaption>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.domId||(null!=e?e.domId:e))?r:a,typeof r===o?r.call(e,{name:"domId",hash:{},data:i}):r))+'" class="video-viewport">\r\n  <div class="media-media video video-player" data-id="'+s((r=null!=(r=t.videoId||(null!=e?e.videoId:e))?r:a,typeof r===o?r.call(e,{name:"videoId",hash:{},data:i}):r))+'"></div>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBackgroundError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.domId||(null!=e?e.domId:e))?r:a,typeof r===o?r.call(e,{name:"domId",hash:{},data:i}):r))+'" class="media-media video media-error"></div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoBackgroundErrorDetailed",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.domId||(null!=e?e.domId:e))?r:a,typeof r===o?r.call(e,{name:"domId",hash:{},data:i}):r))+'" class="media-media video media-error">\r\n  <div class="media-error-text">'+s((r=null!=(r=t.message||(null!=e?e.message:e))?r:a,typeof r===o?r.call(e,{name:"message",hash:{},data:i}):r))+"</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/VideoVimeo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<iframe id="'+s((r=null!=(r=t.domId||(null!=e?e.domId:e))?r:a,typeof r===o?r.call(e,{name:"domId",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,typeof r===o?r.call(e,{name:"classes",hash:{},data:i}):r))+'" src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" style="'+s((r=null!=(r=t.options||(null!=e?e.options:e))?r:a,typeof r===o?r.call(e,{name:"options",hash:{},data:i}):r))+'"></iframe>\r\n'+s((r=null!=(r=t.playerControls||(null!=e?e.playerControls:e))?r:a,typeof r===o?r.call(e,{name:"playerControls",hash:{},data:i}):r))+"\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Video",[],function(){});var Froogaloop=function(){function e(t){return new e.fn.init(t)}function t(e,t,n){if(!n.contentWindow.postMessage)return!1;var i=JSON.stringify({method:e,value:t});n.contentWindow.postMessage(i,u)}function n(e){var t,n;try{t=JSON.parse(e.data),n=t.event||t.method}catch(e){}if("ready"!=n||l||(l=!0),!/^https?:\/\/player.vimeo.com/.test(e.origin))return!1;"*"===u&&(u=e.origin);var i=t.value,o=t.data,a=""===a?null:t.player_id,s=r(n,a),c=[];return!!s&&(void 0!==i&&c.push(i),o&&c.push(o),a&&c.push(a),c.length>0?s.apply(null,c):s.call())}function i(e,t,n){n?(s[n]||(s[n]={}),s[n][e]=t):s[e]=t}function r(e,t){return t?s[t][e]:s[e]}function o(e,t){if(t&&s[t]){if(!s[t][e])return!1;s[t][e]=null}else{if(!s[e])return!1;s[e]=null}return!0}function a(e){return!!(e&&e.constructor&&e.call&&e.apply)}var s={},l=!1,u=(Array.prototype.slice,"*");return e.fn=e.prototype={element:null,init:function(e){return"string"==typeof e&&(e=document.getElementById(e)),this.element=e,this},api:function(e,n){if(!this.element||!e)return!1;var r=this,o=r.element,s=""!==o.id?o.id:null,l=a(n)?null:n,u=a(n)?n:null;return u&&i(e,u,s),t(e,l,o),r},addEvent:function(e,n){if(!this.element)return!1;var r=this,o=r.element,a=""!==o.id?o.id:null;return i(e,n,a),"ready"!=e?t("addEventListener",e,o):"ready"==e&&l&&n.call(null,a),r},removeEvent:function(e){if(!this.element)return!1;var n=this,i=n.element,r=""!==i.id?i.id:null,a=o(e,r);"ready"!=e&&a&&t("removeEventListener",e,i)}},e.fn.init.prototype=e.fn,window.addEventListener?window.addEventListener("message",n,!1):window.attachEvent("onmessage",n),window.Froogaloop=window.$f=e}();if(define("lib/froogaloop/froogaloop",function(){}),!window.YT)var YT={loading:0,loaded:0};if(!window.YTConfig)var YTConfig={host:"http://www.youtube.com"};YT.loading||(YT.loading=1,function(){var e=[];YT.ready=function(t){YT.loaded?t():e.push(t)},window.onYTReady=function(){YT.loaded=1;for(var t=0;t<e.length;t++)try{e[t]()}catch(e){}},YT.setConfig=function(e){for(var t in e)e.hasOwnProperty(t)&&(YTConfig[t]=e[t])};var t=document.createElement("script");t.type="text/javascript",t.id="www-widgetapi-script",t.src="https://s.ytimg.com/yts/jsbin/www-widgetapi-vflVl0AED/www-widgetapi.js",t.async=!0;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}()),define("lib/youtube-api/index",function(){}),define("storymaps-react/tpl/view/media/Video",["module","exports","./Media","lib-build/hbars!./VideoBlock","lib-build/hbars!./VideoBackground","lib-build/hbars!./VideoBackgroundError","lib-build/hbars!./VideoBackgroundErrorDetailed","lib-build/hbars!./VideoVimeo","storymaps/tpl/utils/UI","lib-build/i18n!resources/tpl/viewer/nls/app","dojo/Deferred","lib-build/less!./Video","lib/froogaloop/froogaloop","lib/youtube-api/index"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),v=d(i),g=d(r),b=d(o),y=d(a),_=d(s),w=d(l),C=d(u),E=d(c),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},x={ratio:16/9},S="resources/tpl/builder/icons/media-placeholder/video.png",P="resources/tpl/builder/icons/immersive-panel/video.png",O=function(e){function t(e){p(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"video",id:e.source+"-"+e.id,previewThumb:S,previewIcon:P}));return n._video=e,n._source=e.source,n._videoid=e.id,n._soundLevelPreImmersive=null,n._placement=null,n._videoPlayer=null,n._loadDeferred=null,n._isVideoLoaded=!1,n._pendingAction=null,n._isSupported=!0,n._sectionType="sequence",n._isBuilderAdd=!1,n._video.options||(n._video.options={}),n}return h(t,e),k(t,[{key:"render",value:function(e){var t="";return this._video&&e?(this._placement=e.placement,"block"==this._placement?t+=(0,v.default)({domId:this._domID,videoId:this.id,caption:this._video.caption,placeholder:C.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder}):"background"==this._placement&&(w.default.isMobileBrowser()?(this._isSupported=!1,app.data.errorVideoMobile=!0,t+="immersive"===e.sectionType?(0,y.default)({domId:this._domID,message:C.default.viewer.media.loadingError}):(0,b.default)({domId:this._domID})):t+=(0,g.default)({domId:this._domID,videoId:this.id})),t):(console.log("Could not render video in section"),t)}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._sectionType=e.sectionType,e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._isSupported?this._node=e.container.find('.video[data-id="'+this.id+'"]').parent().parent():this._node=e.container.find("#"+this._domID).parent(),this._nodeMedia=this._node.find(".video-player"),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"_applyConfig",value:function(){var e=this._video.options;if(this._isSupported){if("string"==typeof e&&(e={}),e.size=e.size||"small",this._isVideoLoaded&&e.audio){var n="muted"==this._video.options.audio,i=n?0:1;try{"vimeo"==this._video.source?this._videoPlayer.api("setVolume",i):this._videoPlayer.setVolume(100*i)}catch(e){console.error(e)}}T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e)}}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._loadDeferred=new E.default,this._isLoaded||!this._isSupported)return this._loadDeferred.resolve(),this._loadDeferred;if(this._isLoaded=!0,this._isBuilderAdd=e.isBuilderAdd,this._cache[this.id])return this._videoPlayer=this._cache[this.id].videoPlayer,this._isVideoLoaded=!0,this._loadDeferred;var t="0",n="";if("background"==this._placement?t="1":this._video.options&&"simple"==this._video.options.ui&&(t="1",n='<div class="player-controls"><button class="play">'+C.default.viewer.media.videoPlayPause+'</button>&nbsp;&nbsp;&nbsp;<button class="mute">'+C.default.viewer.media.videoMuteUnmute+"</button></div>"),"vimeo"==this._source){var i="foreground"==this._placement?"video-fg video-player":"video",r=$((0,_.default)({domId:"player-"+this._domID,classes:i+" initialized",url:"https://player.vimeo.com/video/"+this._videoid+"?api=1&background="+t+"&player_id=player-"+this._domID,options:this._video.options,playerControls:n}));this._nodeMedia.replaceWith(r),this._nodeMedia=r,this._videoPlayer=$f(r[0]);try{this._videoPlayer.addEvent("ready",this._onVimeoPlayerReady.bind(this))}catch(e){console.error(e)}}else"youtube"==this._video.source&&(this._videoPlayer=new window.YT.Player(this._node.find(".video-player[data-id="+this.id+"]")[0],{height:"",width:"",loop:1,videoId:this._videoid,playerVars:{rel:0,modestbranding:1},events:{onReady:function(e){try{this._onYoutubePlayerReady(e,this._video.id)}catch(e){console.error(e)}}.bind(this),onError:function(){app.builder?this.setError({showLoadingError:!0}):this.setError()}.bind(this)}}));return this._cache[this.id]={videoPlayer:this._videoPlayer},this._loadDeferred}},{key:"resize",value:function(e){"background"==this._placement&&this._resizeVideoBackground(e)}},{key:"performAction",value:function(e){if(this._videoPlayer&&this._isSupported){if(!this._isVideoLoaded)return void(this._pendingAction=e);var t=void 0!==e.viewIndex,n="muted"==this._video.options.audio;try{if("vimeo"==this._video.source)e.isActive?("background"==this._placement&&t&&!n&&(this._videoPlayer.api("getVolume",function(e){1!=e&&(this._soundLevelPreImmersive=e)}.bind(this)),e.visibilityProgress&&this._videoPlayer.api("setVolume",e.visibilityProgress)),this._videoPlayer.api("play")):"background"==this._placement?(null!=this._soundLevelPreImmersive&&this._videoPlayer.api("setVolume",this._soundLevelPreImmersive),this._videoPlayer.api("pause")):this._videoPlayer.api("pause");else if("youtube"==this._video.source)if(e.isActive){if("background"==this._placement&&t&&!n){var i=this._videoPlayer.getVolume();100!=i&&(this._soundLevelPreImmersive=i),this._videoPlayer.setVolume(100)}this._videoPlayer.playVideo()}else"background"==this._placement?(null!=this._soundLevelPreImmersive&&this._videoPlayer.setVolume(100*e.visibilityProgress),this._videoPlayer.pauseVideo()):this._videoPlayer.pauseVideo()}catch(e){console.error(e)}}}},{key:"_onVimeoPlayerReady",value:function(){if(this._isVideoLoaded=!0,this._node.find(".media-loading").hide(),"block"==this._placement)this._videoPlayer.api("pause");else{var e="muted"==this._video.options.audio;this._isBuilderAdd?("immersive"!=this._sectionType||e?this._videoPlayer.api("setVolume",0):this._videoPlayer.api("setVolume",1),this._videoPlayer.api("play")):(this._videoPlayer.api("setVolume",0),"immersive"==this._sectionType&&this._videoPlayer.api("pause")),this._videoPlayer.api("setLoop",!0)}this._loadDeferred.resolve(),this.resize(),this._applyConfig(),this._pendingAction&&(this.performAction(this._pendingAction),this._pendingAction=null)}},{key:"_onYoutubePlayerReady",value:function(){this._isVideoLoaded=!0,this._node.find(".media-loading").hide(),"background"==this._placement&&(this._videoPlayer.setLoop(!0),this._isBuilderAdd?("immersive"==this._sectionType?this._videoPlayer.setVolume(100):this._videoPlayer.setVolume(0),this._videoPlayer.playVideo()):this._videoPlayer.setVolume(0)),this._nodeMedia=this._node.find(".video-player"),this._loadDeferred.resolve(),this.resize(),this._applyConfig(),this._pendingAction&&(this.performAction(this._pendingAction),this._pendingAction=null)}},{key:"_resizeVideoBackground",value:function(e){if(e=e||{windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight},this._nodeMedia&&this._isSupported){var t=-1,n=-1,i=app.display.windowWidth,r=app.display.windowHeight+60,o=i/r;o<x.ratio?(t=r*x.ratio,n=r):(t=i,n=t/x.ratio),this._nodeMedia.css({width:t,height:n}),this._nodeMedia.parent().css({width:i,height:r}),this._nodeMedia.parent().scrollLeft((t-i)/2),this._nodeMedia.parent().scrollTop((n-r)/2)}}}]),t}(m.default);t.default=O,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebMapBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" contenteditable="false">\r\n  <figure class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="media-media map" data-builder-invite="" data-id="'+l((o=null!=(o=t.webmapId||(null!=e?e.webmapId:e))?o:s,typeof o===a?o.call(e,{name:"webmapId",hash:{},data:i}):o))+'" data-options="'+l((o=null!=(o=t.options||(null!=e?e.options:e))?o:s,typeof o===a?o.call(e,{name:"options",hash:{},data:i}):o))+'"></div>\r\n    <div class="interaction-container">\r\n      <button class="btn btn-default btn-sm">\r\n        <span class="int-container-disabled">\r\n          <span class="glyphicon glyphicon-fullscreen"></span>\r\n          '+l((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:s,typeof o===a?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\r\n        </span>\r\n        <span class="int-container-enabled">\r\n          '+l((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:s,typeof o===a?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+'\r\n        </span>\r\n      </button>\r\n    </div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n    <div class="builder-ui media-delete"></div>\r\n    <div class="layer-list-container"></div>\r\n  </figure>\r\n  <figcaption class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</figcaption>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebMapBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div class="media-media map" data-id="'+s((r=null!=(r=t.webmapId||(null!=e?e.webmapId:e))?r:a,typeof r===o?r.call(e,{name:"webmapId",hash:{},data:i}):r))+'"></div>\r\n<div class="interaction-container">\r\n  <button class="btn btn-default btn-sm">\r\n    <span class="int-container-disabled">\r\n      <span class="glyphicon glyphicon-fullscreen"></span>\r\n      '+s((r=null!=(r=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?r:a,typeof r===o?r.call(e,{name:"labelExploreStart",hash:{},data:i}):r))+'\r\n    </span>\r\n    <span class="int-container-enabled">\r\n      '+s((r=null!=(r=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?r:a,typeof r===o?r.call(e,{name:"labelExploreStop",hash:{},data:i}):r))+'\r\n    </span>\r\n  </button>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n<div class="layer-list-container"></div>\r\n'},useData:!0})}),define("lib-build/css!storymaps/tpl/view/media/arcgis/WebMapCommand",[],function(){}),define("storymaps/tpl/view/media/arcgis/WebMapCommand",["lib-build/css!./WebMapCommand","dojo/has","esri/geometry/Point","dojo/on","esri/symbols/PictureMarkerSymbol","esri/layers/GraphicsLayer","esri/graphic","esri/config"],function(e,t,n,i,r,o,a,s){return function(e,i,l,u){function c(t){if(t)$(e.container).find(".mapCommandHomeBtn").addClass("loading"),h=Date.now();else{var n=Date.now()-h,i=0;n<450&&(i=450-n),setTimeout(function(){$(e.container).find(".mapCommandHomeBtn").removeClass("loading"),h=0},i)}}function d(){navigator.geolocation.getCurrentPosition(function(t){var i=new n(t.coords.longitude,t.coords.latitude);return l&&"function"==typeof l&&l(!0,i,t),102100!=e.spatialReference.wkid&&4326!=e.spatialReference.wkid?void s.defaults.geometryService.project([i],e.spatialReference,function(e){e&&e[0]&&p(e[0])}):void p(i)},f,{timeout:2e3})}function p(e){g.clear(),g.add(new a(e,v)),setTimeout(function(){$("#locateLayer_layer image").fadeOut({duration:800})},1e4)}function f(e){l(!1,e)}var h=0,m=$('<div class="esriSimpleSliderIncrementButton"><div class="mapCommandHomeBtn"><i class="fa fa-home" aria-hidden="true"></i></div></div>'),v=new r("resources/common/icons/mapcommand-location-marker.png",21,21),g=new o({id:"locateLayer"});m.click(function(){0!==h&&$("body").hasClass("mobile-view")||(i&&"function"==typeof i?i(e._params.extent):e.setExtent(e._params.extent))}),$(e.container).find(".esriSimpleSlider div:nth-child(1)").after(m),this.setMobile=function(t){$(".esriSimpleSlider, .mapCommandHomeBtn",e.container).toggleClass("touch",t)},this.destroy=function(){$(e.container).find(".esriSimpleSliderIncrementButton").remove(),$(e.container).find(".mapCommandLocation").remove()},this.startLoading=function(){c(!0)},this.stopLoading=function(){c(!1)},this.toggleLocationButton=function(t){$(".mapCommandLocation",e.container).toggleClass("hidden",!t)},this.hideHomeButton=function(){m.toggleClass("hidden",!0)},this.showHomeButton=function(){m.toggleClass("hidden",!1)},navigator&&navigator.geolocation&&($(".esriSimpleSlider",e.container).after('<div class="esriSimpleSlider esriSimpleSliderVertical mapCommandLocation"><i class="fa fa-crosshairs" aria-hidden="true"></i></div>'),$(".mapCommandLocation",e.container).click(d),this.toggleLocationButton(u),e.addLayer(g)),this.setMobile(!!t("touch"))}}),define("lib-build/less!storymaps-react/tpl/view/media/WebMap",[],function(){}),define("storymaps-react/tpl/view/media/WebMap",["module","exports","./Media","lib-build/hbars!./WebMapBlock","lib-build/hbars!./WebMapBackground","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/view/media/arcgis/WebMapCommand","esri/arcgis/utils","esri/geometry/Extent","esri/symbols/SimpleMarkerSymbol","esri/geometry/webMercatorUtils","esri/geometry/Point","esri/tasks/query","esri/tasks/QueryTask","esri/config","dojo/_base/lang","dojo/Deferred","storymaps/tpl/utils/UI","lib-build/less!./WebMap"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f,h,m,v,g){"use strict";function b(e){return e&&e.__esModule?e:{default:e}}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var C=b(n),E=b(i),k=b(r),T=b(o),x=b(a),S=b(s),P=b(l),O=b(u),I=b(c),M=b(d),A=b(p),N=b(f),j=b(h),L=b(m),D=b(v),R=b(g),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),B=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},U="resources/tpl/builder/icons/media-placeholder/map.png",H="resources/tpl/builder/icons/immersive-panel/map.png",z=function(e){function t(e){y(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"webmap",id:e.id,previewThumb:U,previewIcon:H}));return n._webmap=e,n._bookmarks=null,n._placement=null,n._transition=null,n._swipeLayersNodes=[],n._swipePreviousWebMapLayers=null,n._lastScrollPosition=null,n._webmap.options||(n._webmap.options={interaction:"enabled"}),n._webmap.extras||(n._webmap.extras={locate:{enabled:!1},search:{enabled:!1},legend:{enabled:!1}}),n}return w(t,e),F(t,[{key:"render",value:function(e){var t="";if(!this._webmap||!e)return t;if(this._placement=e.placement,"block"==this._placement){var n=JSON.stringify({extent:this._webmap.extent,layers:this._webmap.layers,legend:this._webmap.legend,layers2:this._webmap.layers2}),i=["block","block-type-webmap"];t+=(0,E.default)({id:this._domID,webmapId:this.id,classes:i.join(" "),options:n,caption:this._webmap.caption,placeholder:T.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,labelExploreStart:T.default.viewer.media.exploreMap,labelExploreStop:T.default.viewer.media.exploreStop})}else t+=(0,k.default)({webmapId:this.id,labelExploreStart:T.default.viewer.media.exploreMap,labelExploreStop:T.default.viewer.media.exploreStop});return t}},{key:"_applyConfig",value:function(){var e=this._webmap.options;B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e),this._applyInteraction();var n=!(!this._webmap.extent&&!app.isInBuilder);this.performAction({allowExtentUpdate:n}).then(function(){app.isInBuilder&&this._configTabWebMap&&this._configTabWebMap.attachEvents()}.bind(this),function(){})}},{key:"_applyInteraction",value:function(){var e=this._webmap.options.interaction;if((app.isMobileView||R.default.isMobileBrowser())&&(e="button"),this._webmap.options.interaction){var t=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(t).addClass("interaction-"+e),this._node.find(".interaction-container").removeClass("enabled")}}},{key:"load",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new D.default;if(this._node&&!this._isLoaded)return this._isLoaded=!0,this.loadMap(this._node.find(".map")[0],t,e),t}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};B(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._node=e.container.find('.map[data-id="'+this.id+'"]').parent(),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"resize",value:function(){}},{key:"performAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new D.default,n=this._cache[this.id]?this._cache[this.id].map:null;if(e.isActive!==!1||e.isNewView){if(!n)return t.reject(),t;e.scrollPositionView&&(this._lastScrollPosition=e.scrollPositionView),
e.transition&&(this._transition=e.transition),n.infoWindow&&n.infoWindow.hide();var i=this._webmap,r=!1;if(e.allowExtentUpdate===!0||void 0===e.allowExtentUpdate){var o=null;if(o=i.extent?new P.default(i.extent):this._getWebMapExtentFromItemExtent(this._cache[this.id].itemInfo.item.extent),JSON.stringify(o.toJson())!=this._cache[this.id].lastExtentApplied||e.forceSetExtent){this._cache[this.id].lastExtentApplied=JSON.stringify(o.toJson()),r=!0;var a=function(e){n.setExtent(e,!1).then(function(){i.popup&&this._applyPopupConfiguration(n,i.popup),t.resolve()}.bind(this),function(){t.resolve()})}.bind(this);n.spatialReference.wkid==o.spatialReference.wkid?a(o):j.default.defaults.geometryService.project([o],n.spatialReference,function(e){e&&e[0]&&a(e[0])}.bind(this))}}else t.resolve();if(i.popup&&!r&&this._applyPopupConfiguration(n,i.popup),JSON.stringify(i.layers)!=this._cache[this.id].lastLayersApplied){this._cache[this.id].lastLayersApplied=JSON.stringify(i.layers);var s=i.layers||[],l=this._cache[i.id].itemInfo.itemData.operationalLayers;$.each(l,function(e,t){var n;t.layerObject?(n=$(s).filter(function(e,n){return n.id==t.layerObject.id}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)):t.featureCollection&&t.featureCollection.layers&&$.each(t.featureCollection.layers,function(e,t){n=$(s).filter(function(e,n){return n.id.split("_").slice(0,-1).join("_")==t.layerObject.id.split("_").slice(0,-1).join("_")}),t.layerObject.setVisibility(n.length?n[0].visibility:t.visibility)})})}if("swipe-vertical"==this._transition||"swipe-horizontal"==this._transition){if(this._swipeLayersNodes&&this._swipeLayersNodes.length){var u=app.display.windowHeight-this._lastScrollPosition,c=125;app.isInBuilder&&(u-=c);var d=!0,p=!1,f=void 0;try{for(var h,m=this._swipeLayersNodes[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value,g=v.node,b=u,y=app.display.windowWidth,_=app.display.windowHeight,w=0;if(!v.isSVGLayer){var C=g.position();b+=-C.top,y+=-C.left,_+=-C.top,w+=-C.left}g.css("clip","rect("+b+"px,"+y+"px,"+_+"px,"+w+"px)"),g.data("sm-swipe-pos",u)}}catch(e){p=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(p)throw f}}}}else this.resetSwipe();e.doNotApplyInteraction||this._applyInteraction();var E=!1;return this._webmap.extras&&this._webmap.extras.locate&&this._webmap.extras.locate.enabled&&(E=!0),this._cache[this.id].mapCommand.toggleLocationButton(E),t}}},{key:"resetSwipe",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._swipeLayersNodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,a=o.node;a.css("clip",""),a.data("sm-swipe-pos","")}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"loadMap",value:function(e,t,n){var i=this,r={mapOptions:{smartNavigation:!1},usePopupManager:!0,editable:!1,bingMapsKey:app.cfg.BING_MAPS_KEY,layerMixins:app.data.appProxies||null};this._webmap.extent&&(r.mapOptions.extent=new P.default(this._webmap.extent)),this._node.addClass("media-is-loading"),$(e).css("pointer-events","none"),S.default.createMap(this.id,e,r).then(L.default.hitch(this,function(i){var r=i.map;this._node.removeClass("media-is-loading").find(".media-loading").hide(),$(e).css("pointer-events",""),r.disableScrollWheelZoom(),r.disableKeyboardNavigation(),r.reposition(),r.resize(),$(e).find(".esriAttribution ~ div, .esriSimpleSlider div").attr("tabindex","-1"),this._cache[this.id]=i,app.isInBuilder&&this._onWebMapLoaded(),this._bookmarks=i.itemInfo.itemData.bookmarks,r.infoWindow&&(r.infoWindow.markerSymbol=(new O.default).setSize(0)),t.resolve(this.id),this._node.find(".interaction-container").click(this._onEnableButtonClick.bind(this)),this._cache[this.id].mapCommand=new x.default(r,this._onMapCommandHomeClick.bind(this),this._zoomToBrowserLocation.bind(this),!1),n&&n.isUniqueInSection===!1&&this.hideHomeButton(),this._cache[this.id].lastExtentApplied=null,this._cache[this.id].lastLayersApplied=null,this._applyConfig()}),function(e){console.warn("on loading webmap "+i.id+", err",e),i._node.removeClass("media-is-loading").find(".media-loading").hide(),app.builder?i.setError({showLoadingError:!0}):i.setError({minimizeInViewer:!0})})}},{key:"postLoad",value:function(){var e=this._cache[this.id].map;this.computeSwipeLayers(this._swipePreviousWebMapLayers),e.on("pan",function(){if(this._swipeLayersNodes&&this._isActive){var e=!0,t=!1,n=void 0;try{for(var i,r=this._swipeLayersNodes[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value,a=o.node,s=a.data("sm-swipe-pos"),l=s,u=app.display.windowWidth,c=app.display.windowHeight,d=0;if(!o.isSVGLayer){var p=a.position();l+=-p.top,u+=-p.left,c+=-p.top,d+=-p.left}a.css("clip","rect("+l+"px,"+u+"px,"+c+"px,"+d+"px)")}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}})}},{key:"_zoomToBrowserLocation",value:function(e,t){var n=this._cache[this.id]?this._cache[this.id].map:null;e&&(102100!=n.spatialReference.wkid&&4326!=n.spatialReference.wkid?j.default.defaults.geometryService.project([t],n.spatialReference,function(e){e&&e[0]&&(n.extent.contains(e[0])||n.centerAt(e[0]))}):n.extent.contains(t)||n.centerAt(t))}},{key:"_onMapCommandHomeClick",value:function(){this.performAction({doNotApplyInteraction:!0,forceSetExtent:!0})}},{key:"computeSwipeLayers",value:function(e){if(this._swipeLayersNodes=[],this._swipePreviousWebMapLayers=[],e=e||[],this._webmap.layers=this._webmap.layers||[],!this._cache[this.id])return void(this._swipePreviousWebMapLayers=L.default.clone(e));var t=[],n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;t.push(JSON.stringify(l))}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}var u=!0,c=!1,d=void 0;try{for(var p,f=this._webmap.layers[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var h=p.value;n.push(JSON.stringify(h))}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}var m=!0,v=!1,g=void 0;try{for(var b,y=t[Symbol.iterator]();!(m=(b=y.next()).done);m=!0){var _=b.value;if(n.indexOf(_)==-1){var w=JSON.parse(_);w.visibility===!1&&n.push(JSON.stringify({id:w.id,visibility:!0}))}}}catch(e){v=!0,g=e}finally{try{!m&&y.return&&y.return()}finally{if(v)throw g}}var C=new Set(t),E=n.filter(function(e){return!C.has(e)}),k=!0,T=!0,x=!1,S=void 0;try{for(var P,O=E[Symbol.iterator]();!(T=(P=O.next()).done);T=!0){var I=P.value,M=JSON.parse(I).id,A=this._cache[this.id].map.getLayer(M);if(A){var N=A._div,j=!1;if(N&&N.rawNode){if(!k)continue;N=$(N.rawNode).parent()[0],j=!0,k=!1}this._swipeLayersNodes.push({node:$(N),isSVGLayer:j})}}}catch(e){x=!0,S=e}finally{try{!T&&O.return&&O.return()}finally{if(x)throw S}}}},{key:"serialize",value:function(){return L.default.clone({type:"webmap",webmap:this._webmap})}},{key:"getAuthorizedTransitionsWith",value:function(e){if(!e||e.id!=this.id)return[];var t=this.serialize().webmap,n=JSON.stringify(t.extent)||"null",i=JSON.stringify(t.layers)||"[]",r=JSON.stringify(t.popup)||"null",o=e.serialize().webmap,a=JSON.stringify(o.extent)||"null",s=JSON.stringify(o.layers)||"[]",l=JSON.stringify(o.popup)||"null";return r!=l||n!=a?[]:i==s?[]:["swipe-vertical"]}},{key:"getLayersConfiguration",value:function(){return this._webmap.layers}},{key:"_getWebMapExtentFromItemExtent",value:function(e){if(!e||2!=e.length)return null;var t=I.default.geographicToWebMercator(new M.default(e[0][0],e[0][1])),n=I.default.geographicToWebMercator(new M.default(e[1][0],e[1][1]));return new P.default({xmax:n.x,xmin:t.x,ymax:n.y,ymin:t.y,spatialReference:{wkid:102100}})}},{key:"_applyPopupConfiguration",value:function(e,t){var n=this;if(e.infoWindow.hide(),t){var i=e.getLayer(t.layerId),r=t.layerId?t.layerId.split("_").slice(0,-1).join("_"):"",o=e.getLayer(r);if(e.infoWindow.clearFeatures(),i)i.updating?i.on("update-end",function(){n._applyPopupConfigurationStep2(e,t)}):this._applyPopupConfigurationStep2(e,t);else if(o){var a=t.layerId.split("_").slice(-1).join("_"),s=o.url+"/"+a;this._applyPopupConfigurationStep2Alt(e,t,r,a,s)}else var l=e.on("update-end",function(){this._applyPopupConfiguration(e,t),l.remove()})}}},{key:"_applyPopupConfigurationStep2",value:function(e,t){var n=new A.default,i=e.getLayer(t.layerId);i&&(n.objectIds=[t.fieldValue],i._collection||(n.returnGeometry=!0,n.outFields=["*"],n.outSpatialReference=e.spatialReference),i.queryFeatures&&i.queryFeatures(n).then(function(n){this._applyPopupConfigurationStep3(e,t,n.features)}.bind(this)))}},{key:"_applyPopupConfigurationStep2Alt",value:function(e,t,n,i,r){var o=new N.default(r),a=new A.default,s=e.getLayer(n);s&&(a.objectIds=[t.fieldValue],a.returnGeometry=!0,a.outFields=["*"],a.outSpatialReference=e.spatialReference,o.execute(a,function(r){this._applyPopupConfigurationStep3(e,t,r.features,n,i)}.bind(this)))}},{key:"_applyPopupConfigurationStep3",value:function(e,t,n,i,r){if(e&&t&&n&&n.length){var o=n[0].geometry,a=null;a=t.anchorPoint?new M.default(t.anchorPoint):o.getExtent()?o.getExtent().getCenter():o,i?(n[0].infoTemplate=e.getLayer(i).infoTemplates[r].infoTemplate,e.infoWindow.setContent(n[0].getContent())):e.infoWindow.setFeatures(n),e.infoWindow.show(a),e.extent.contains(a)||e.centerAt(a)}}},{key:"hideHomeButton",value:function(){this._cache[this.id]&&this._cache[this.id].mapCommand&&this._cache[this.id].mapCommand.hideHomeButton()}},{key:"showHomeButton",value:function(){this._cache[this.id]&&this._cache[this.id].mapCommand&&this._cache[this.id].mapCommand.showHomeButton()}}]),t}(C.default);t.default=z,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="block block-type-webscene" contenteditable="false">\r\n  <figure class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <div class="media-media scene" data-id="'+l((o=null!=(o=t.websceneId||(null!=e?e.websceneId:e))?o:s,typeof o===a?o.call(e,{name:"websceneId",hash:{},data:i}):o))+'"></div>\r\n    <div class="interaction-container">\r\n      <button class="btn btn-default btn-sm">\r\n        <span class="int-container-disabled">\r\n          <span class="glyphicon glyphicon-fullscreen"></span>\r\n          '+l((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:s,typeof o===a?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\r\n        </span>\r\n        <span class="int-container-enabled">\r\n          '+l((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:s,typeof o===a?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+'\r\n        </span>\r\n      </button>\r\n    </div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n    <div class="builder-ui media-delete"></div>\r\n  </figure>\r\n  <figcaption class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</figcaption>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="media-media scene" data-id="'+s((r=null!=(r=t.websceneId||(null!=e?e.websceneId:e))?r:a,typeof r===o?r.call(e,{name:"websceneId",hash:{},data:i}):r))+'"></div>\r\n<div class="interaction-container">\r\n  <button class="btn btn-default btn-sm">\r\n    <span class="int-container-disabled">\r\n      <span class="glyphicon glyphicon-fullscreen"></span>\r\n      '+s((r=null!=(r=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?r:a,typeof r===o?r.call(e,{name:"labelExploreStart",hash:{},data:i}):r))+'\r\n    </span>\r\n    <span class="int-container-enabled">\r\n      '+s((r=null!=(r=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?r:a,typeof r===o?r.call(e,{name:"labelExploreStop",hash:{},data:i}):r))+'\r\n    </span>\r\n  </button>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBlockError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="block block-type-webscene media-error" contenteditable="false">\r\n  <div class="media-error-text">'+s((r=null!=(r=t.message||(null!=e?e.message:e))?r:a,typeof r===o?r.call(e,{name:"message",hash:{},data:i}):r))+"</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebSceneBackgroundError",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="media-media scene media-error">\r\n  <div class="media-error-text">'+s((r=null!=(r=t.message||(null!=e?e.message:e))?r:a,typeof r===o?r.call(e,{name:"message",hash:{},data:i}):r))+"</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/WebScene",[],function(){}),define("storymaps-react/tpl/view/media/WebScene",["module","exports","./Media","lib-build/hbars!./WebSceneBlock","lib-build/hbars!./WebSceneBackground","lib-build/hbars!./WebSceneBlockError","lib-build/hbars!./WebSceneBackgroundError","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps/tpl/utils/UI","esri/IdentityManager","lib-build/less!./WebScene"],function(e,t,n,i,r,o,a,s,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=c(i),v=c(r),g=c(o),b=c(a),y=c(s),_=c(l),w=c(u),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},k="resources/tpl/builder/icons/media-placeholder/scene.png",T="resources/tpl/builder/icons/immersive-panel/scene.png",x=!0,S=function(e){function t(e){d(this,t);var n=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"webscene",id:e.id,previewThumb:k,previewIcon:T}));return n._webscene=e,n._placement=null,n._isLoaded=!1,n._isSupported=_.default.hasWebGL()&&!_.default.isMobileBrowser(),n._stopMousewheel=function(e){e.stopImmediatePropagation()},n._isSupported||(app.data.errorWebGL=!0),n._webscene.options||(n._webscene.options={interaction:"enabled"}),void 0===n._webscene.slide&&(n._webscene.slide=-1),n._fourApiLoaded=n._loadFourApi(),n}return f(t,e),C(t,[{key:"render",value:function(e){var t="";return this._webscene&&e?(this._placement=e.placement,t+="background"==e.placement?this._isSupported?(0,v.default)({id:this._domID,websceneId:this.id,labelExploreStart:y.default.viewer.media.exploreMap,labelExploreStop:y.default.viewer.media.exploreStop}):(0,b.default)({id:this._domID,message:y.default.viewer.media.sceneNotSupported}):this._isSupported?(0,m.default)({id:this._domID,websceneId:this.id,caption:this._webscene.caption,placeholder:y.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,labelExploreStart:y.default.viewer.media.exploreMap,labelExploreStop:y.default.viewer.media.exploreStop}):(0,g.default)({id:this._domID,message:y.default.viewer.media.sceneNotSupported})):(console.log("Could not render webscene in section"),t)}},{key:"setLoaded",value:function(e){this._isLoaded=e}},{key:"_applyConfig",value:function(){var e=this._webscene.options;this._isSupported&&(E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e),this._applyInteraction(),this.performAction({}),app.isInBuilder&&this._configTabWebScene&&this._configTabWebScene.attachEvents())}},{key:"_applyInteraction",value:function(){if(this._webscene.options.interaction){var e=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(e).addClass("interaction-"+this._webscene.options.interaction),this._node.find(".interaction-container").removeClass("enabled")}}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};E(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?this._node=e.container.find("#"+this._domID):this._isSupported?this._node=e.container.find('.scene[data-id="'+this.id+'"]').parent():this._node=e.container.find("#"+this._domID).parent(),this._applyConfig())}},{key:"getNode",value:function(){return this._node}},{key:"_loadFourApi",value:function(){var e=this;return new Promise(function(t){require(["esri4/config","esri4/core/urlUtils","esri4/identity/IdentityManager","esri4/identity/OAuthInfo","esri4/views/SceneView","esri4/portal/PortalItem","esri4/WebScene","esri4/core/watchUtils","lib-build/css!esri4/css/main.css"],function(e,n,i,r,o,a,s,l){this._esriConfig=e,this._urlUtils=n,this._esriId=i,this._OAuthInfo=r,this._SceneView=o,this._PortalItem=a,this._AGOLWebScene=s,this._watchUtils=l,t()}.bind(e))})}},{key:"load",value:function(){var e=this;if(this._node&&!this._isLoaded&&this._isSupported){this.setLoaded(!0),this._node.addClass("media-is-loading");var t=w.default.toJson();this._fourApiLoaded.then(function(){var n=app.indexCfg.sharingurl.split("/sharing/")[0];if(e._esriConfig.portalUrl=n,e._esriConfig.workers.loaderConfig={packages:[{name:"esri4",location:"https://js.arcgis.com/4.3/esri"}]},e._esriConfig.request.proxyUrl=location.protocol+app.indexCfg.proxyurl,app.cfg.PROXY_RULES&&app.cfg.PROXY_RULES.length&&$.each(app.cfg.PROXY_RULES,function(e,t){t&&t.urlPrefix&&t.proxyUrl&&this._urlUtils.addProxyRule(t)}),x){if(app.indexCfg.oAuthAppId){var i=new e._OAuthInfo({appId:app.indexCfg.oAuthAppId,popup:!1,portalUrl:"https:"+n});e._esriId.registerOAuthInfos([i]),e._esriId.checkSignInStatus("https:"+app.indexCfg.sharingurl.split("/sharing/")[0]+"/sharing").then(e._loadStep2.bind(e),function(){console.error("Error during oAuth process for web scene"),this._loadStep2.bind(this)()}.bind(e))}else{var r=!0,o=!1,a=void 0;try{for(var s,l=t.credentials[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;e._esriId.registerToken(u)}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}e._loadStep2.bind(e)()}x=!1}else e._loadStep2.bind(e)()})}}},{key:"_loadStep2",value:function(){var e=new this._AGOLWebScene({portalItem:new this._PortalItem({id:this.id})});e.otherwise(function(){app.builder?this.setError({unfixable:!0,showLoadingError:!0}):this.setError({minimizeInViewer:!0})}.bind(this));var t=new this._SceneView({map:e,container:this._node.find(".scene")[0]});this._cache[this.id]={scene:e,view:t},t.then(function(){this._cache[this.id].initialViewpoint=t.viewpoint,t.ui.move("zoom","bottom-right"),t.ui.move("compass","bottom-right"),t.ui.remove("navigation-toggle"),this._node.find(".media-loading").hide()}.bind(this)),t.surface.addEventListener("wheel",this._stopMousewheel,!0),void 0!==this._webscene.slide&&this._webscene.slide!==-1?this._watchUtils.init(e,"presentation.slides",function(e){var n=this;e&&e.items&&e.items.length&&t.then(function(){e.items[n._webscene.slide].applyTo(t,{animate:!1})}),app.isInBuilder&&this._onWebSceneLoaded()}.bind(this)):app.isInBuilder&&this._onWebSceneLoaded(),this._node.removeClass("media-is-loading").find(".interaction-container").click(this._onEnableButtonClick.bind(this))}},{key:"performAction",value:function(e){var t=this._cache[this.id],n=t?t.scene:null,i=t?t.view:null;n&&i&&i.ready&&this._isSupported&&(this._webscene.slide===-1?this._cache[this.id].initialViewpoint&&i.goTo(this._cache[this.id].initialViewpoint):void 0!==this._webscene.slide&&this._webscene.slide<=n.presentation.slides.items.length&&n.presentation.slides.items[this._webscene.slide].applyTo(i,{animate:e.animate!==!1}),this._applyInteraction())}},{key:"unload",value:function(){this._cache[this.id]&&this._cache[this.id].view&&(this._cache[this.id].view.surface.removeEventListener("wheel",this._stopMousewheel,!0),this._cache[this.id].view.destroy(),this._cache[this.id]=null),this.setLoaded(!1),this._node.find(".media-loading").show()}},{key:"resize",value:function(){}}]),t}(h.default);t.default=S,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebPageBlock",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="block block-webpage scroll-off" contenteditable="false">\r\n  <figure class="block-media">\r\n    <div class="media-loading">\r\n      <span class="large-loader"></span>\r\n    </div>\r\n    <iframe class="media-media webpage" data-src="'+l((o=null!=(o=t.url||(null!=e?e.url:e))?o:s,typeof o===a?o.call(e,{name:"url",hash:{},data:i}):o))+'"></iframe>\r\n    <div class="interaction-container">\r\n      <button class="btn btn-default btn-sm">\r\n        <span class="int-container-disabled">\r\n          <span class="glyphicon glyphicon-fullscreen"></span>\r\n          '+l((o=null!=(o=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?o:s,typeof o===a?o.call(e,{name:"labelExploreStart",hash:{},data:i}):o))+'\r\n        </span>\r\n        <span class="int-container-enabled">\r\n          '+l((o=null!=(o=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?o:s,typeof o===a?o.call(e,{name:"labelExploreStop",hash:{},data:i}):o))+'\r\n        </span>\r\n      </button>\r\n    </div>\r\n    <div class="builder-ui media-cfg-invite"></div>\r\n    <div class="builder-ui media-delete"></div>\r\n  </figure>\r\n  <figcaption class="block-caption" data-placeholder="'+l((o=null!=(o=t.placeholder||(null!=e?e.placeholder:e))?o:s,typeof o===a?o.call(e,{name:"placeholder",hash:{},data:i}):o))+'" contenteditable="'+l((o=null!=(o=t.captionEditable||(null!=e?e.captionEditable:e))?o:s,typeof o===a?o.call(e,{name:"captionEditable",hash:{},data:i}):o))+'">';return o=null!=(o=t.caption||(null!=e?e.caption:e))?o:s,r=typeof o===a?o.call(e,{name:"caption",hash:{},data:i}):o,null!=r&&(u+=r),u+'</figcaption>\r\n  <div class="builder-ui media-cfg-panel"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebPageBackground",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="media-loading">\r\n  <span class="large-loader"></span>\r\n</div>\r\n<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="'+s((r=null!=(r=t.classes||(null!=e?e.classes:e))?r:a,typeof r===o?r.call(e,{name:"classes",hash:{},data:i}):r))+'">\r\n  <iframe class="media-media webpage" data-src="'+s((r=null!=(r=t.url||(null!=e?e.url:e))?r:a,typeof r===o?r.call(e,{name:"url",hash:{},data:i}):r))+'" style="width: 100%; height: 100%;"></iframe>\r\n  <div class="interaction-container">\r\n    <button class="btn btn-default btn-sm">\r\n      <span class="int-container-disabled">\r\n        <span class="glyphicon glyphicon-fullscreen"></span>\r\n        '+s((r=null!=(r=t.labelExploreStart||(null!=e?e.labelExploreStart:e))?r:a,typeof r===o?r.call(e,{name:"labelExploreStart",hash:{},data:i}):r))+'\r\n      </span>\r\n      <span class="int-container-enabled">\r\n        '+s((r=null!=(r=t.labelExploreStop||(null!=e?e.labelExploreStop:e))?r:a,typeof r===o?r.call(e,{name:"labelExploreStop",hash:{},data:i}):r))+'\r\n      </span>\r\n    </button>\r\n  </div>\r\n</div>\r\n<div class="builder-ui media-cfg-invite"></div>\r\n<div class="builder-ui media-cfg-panel"></div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/WebPage",[],function(){}),define("storymaps-react/tpl/view/media/WebPage",["module","exports","./Media","lib-build/hbars!./WebPageBlock","lib-build/hbars!./WebPageBackground","lib-build/i18n!resources/tpl/viewer/nls/app","dojo/Deferred","storymaps/tpl/utils/UI","lib-build/less!./WebPage"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},_="resources/tpl/builder/icons/media-placeholder/webpage.png",w="resources/tpl/builder/icons/immersive-panel/webpage.png",C=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"webpage",id:e.url,previewThumb:_,previewIcon:w}));return n._webpage=e,n._url=e.url,n._nodeMedia=null,n._placement=null,n._webpage.options||(n._webpage.options={interaction:"enabled"}),n}return d(t,e),b(t,[{key:"getNode",value:function(){return this._node}},{key:"render",value:function(e){var t="";if(!this._webpage||!e)return console.log("Could not render webpage in section"),t;if(this._placement=e.placement,"block"==this._placement)t+=(0,f.default)({id:this._domID,url:this._url,caption:this._webpage.caption,placeholder:m.default.viewer.media.captionPlaceholder,captionEditable:app.isInBuilder,labelExploreStart:m.default.viewer.media.explore,labelExploreStop:m.default.viewer.media.exploreStop});else if("background"==e.placement){var n="";t+=(0,h.default)({id:this._domID,url:this._url,classes:"webpage-container"+n,labelExploreStart:m.default.viewer.media.explore,labelExploreStop:m.default.viewer.media.exploreStop})}return t}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&("block"==this._placement?(this._node=e.container.find("#"+this._domID),this._nodeMedia=this._node.find("iframe")):(this._nodeMedia=e.container.find('.webpage[data-src="'+this._url+'"]'),this._node=this._nodeMedia.parents(".background").eq(0)),this._applyConfig())}},{key:"_applyConfig",value:function(){var e=this._webpage.options;y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_applyConfig",this).call(this,e);var n=this._webpage.options.interaction;if((app.isMobileView||g.default.isMobileBrowser())&&(n="button"),this._webpage.options.interaction){var i=$.map(this._node.attr("class").split(" "),function(e){return e.match(/interaction-/)?e:null}).join(" ");this._node.removeClass(i).addClass("interaction-"+n)}}},{key:"load",value:function(){var e=new v.default;return!this._nodeMedia||this._isLoaded?e:(this._isLoaded=!0,this._nodeMedia.parent(".webpage-container").addClass("initialized"),console.log("webpage: "+this._nodeMedia.data("src")),this._nodeMedia.attr("src",this._nodeMedia.data("src")).load(function(){this._node.find(".media-loading").hide()}.bind(this)),this._node.find(".interaction-container").click(this._onEnableButtonClick.bind(this)),this._node.on("mouseup touchstart",function(){this._node.addClass("scroll-off")}.bind(this)),this._node.on("mousedown touchend",function(){this._node.removeClass("scroll-off")}.bind(this)),this._node.mouseleave(function(){this._node.addClass("scroll-off")}.bind(this)),this._nodeMedia.mouseleave(function(){this._node.addClass("scroll-off")}.bind(this)),e.resolve(),e)}},{key:"performAction",value:function(e){if(e&&e.viewIndex&&e.isActive)try{this._nodeMedia[0].contentWindow.performCascadeAction(e)}catch(e){}}},{key:"resize",value:function(){}}]),t}(p.default);t.default=C,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/Empty",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'" class="media-empty">\r\n  <div class="me-placeholder"></div>\r\n  <div class="media-empty-add">\r\n    <img class="media-empty-icon-all" src="resources/tpl/builder/icons/text-editor/Media.png" />\r\n    <div class="media-empty-icon-image">\r\n      <i class="fa fa-picture-o" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="media-empty-label">'+s((r=null!=(r=t.label||(null!=e?e.label:e))?r:a,typeof r===o?r.call(e,{name:"label",hash:{},data:i}):r))+"</div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Empty",[],function(){}),define("storymaps-react/tpl/view/media/Empty",["module","exports","./Media","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./Empty","dojo/_base/lang","lib-build/less!./Empty"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);
e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v="resources/tpl/builder/icons/media-placeholder/image.jpg",g="resources/tpl/builder/icons/immersive-panel/image.png",b=function(e){function t(){s(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"empty",id:null,previewThumb:v,previewIcon:g}));return e._onEdit=null,e}return u(t,e),h(t,[{key:"render",value:function(e){return e?"block"==e.placement?"":(0,p.default)({id:this._domID,label:d.default.builder.immersiveViewPanel.addMedia}):(console.log("Could not render webmap in section"),"")}},{key:"load",value:function(){}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&(this._node=e.container.find("#"+this._domID).parent(),this._node.find(".me-placeholder").css("backgroundImage",'url("resources/tpl/builder/icons/immersive/background-placeholder.jpg")'),this._node.find(".media-empty-add").addClass("authorized-"+(e.mediaIcon||"all")).click(this.onPickMedia.bind(this)))}},{key:"resize",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"performAction",value:function(){}},{key:"serialize",value:function(){return f.default.clone({type:"empty",empty:"empty"})}},{key:"onPickMedia",value:function(){this._onAction("swap")}}]),t}(c.default);t.default=b,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/Color",[],function(){}),define("storymaps-react/tpl/view/media/Color",["module","exports","./Media","dojo/_base/lang","lib-build/less!./Color"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"color",id:null,previewThumb:"",previewIcon:""}));return n._color=e,n}return s(t,e),c(t,[{key:"render",value:function(e){return this._color&&e?'<div class="media-color" style="background-color: '+this._color.value+'"></div>':(console.log("Could not render color in section"),"")}},{key:"load",value:function(){}},{key:"serialize",value:function(){return u.default.clone({type:"color",color:this._color})}}]),t}(l.default);t.default=d,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/CreditsItemViewer",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'        <a href="'+s((r=null!=(r=t.link||(null!=e?e.link:e))?r:a,typeof r===o?r.call(e,{name:"link",hash:{},data:i}):r))+'" class="cr-item-input cr-source cr-link" target="_blank">'+s((r=null!=(r=t.source||(null!=e?e.source:e))?r:a,typeof r===o?r.call(e,{name:"source",hash:{},data:i}):r))+"</a>\r\n"},3:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'        <div class="cr-item-input cr-source">'+s((r=null!=(r=t.source||(null!=e?e.source:e))?r:a,typeof r===o?r.call(e,{name:"source",hash:{},data:i}):r))+"</div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<li class="cr-item viewer">\r\n  <div class="cr-item-main">\r\n    <div class="cr-input-container first">\r\n      <div class="cr-item-input cr-content">'+l((o=null!=(o=t.label||(null!=e?e.label:e))?o:s,typeof o===a?o.call(e,{name:"label",hash:{},data:i}):o))+'</div>\r\n    </div>\r\n    <span class="cr-pipe"></span>\r\n    <div class="cr-input-container">\r\n';return r=t.if.call(e,null!=e?e.link:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=r&&(u+=r),u+"  </div>\r\n</li>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/Credits",[],function(){}),define("storymaps-react/tpl/view/media/Credits",["module","exports","./Media","lib-build/hbars!./CreditsItemViewer","lib-build/less!./Credits"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{type:"credits",id:null,previewThumb:"",previewIcon:""}));return n._credits=e,n}return s(t,e),c(t,[{key:"render",value:function(e){if(!this._credits||!e)return console.log("Could not render credits block in section"),"";var t='<div id="'+this._domID+'" class="block block-type-credits"><ul class="cr-list">';if(this._credits.length){var n=!0,i=!1,r=void 0;try{for(var o,a=this._credits[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t+=(0,u.default)({label:s.label,link:s.link,source:s.source,empty:!1,incomplete:!1})}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}return t+="</ul></div>"}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),e.container&&(this._node=e.container.find("#"+this._domID))}},{key:"load",value:function(){}},{key:"resize",value:function(){}},{key:"getNode",value:function(){return this._node}},{key:"performAction",value:function(){}}]),t}(l.default);t.default=p,e.exports=t.default}),define("lib-build/css!storymaps/tpl/view/media/Discover",[],function(){}),define("storymaps/tpl/view/media/Discover",["lib-build/css!./Discover"],function(){return function(e){this.render=function(t){var n="";return e&&t?(n+='<div class="discover">',n+=" <strong>"+e.title+"</strong>",n+=" <table><tr>",$.each(e.items,function(e,t){n+='<td><div class="discover-item"><a href="'+t.url+'" target="_blank"><img src="'+t.thumbnail+'" /><div>'+t.title+"</div></a></div></td>"}),n+=" </tr></table>",n+="</div>"):(console.log("Could not render Discover block in section"),n)}}}),define("storymaps-react/tpl/view/media/FactoryViewer",["module","exports","./Text","./Image","./ImageGallery","./Video","./WebMap","./WebScene","./WebPage","./Empty","./Color","./Credits","storymaps/tpl/view/media/Discover"],function(e,t,n,i,r,o,a,s,l,u,c,d,p){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var m=f(n),v=f(i),g=f(r),b=f(o),y=f(a),_=f(s),w=f(l),C=f(u),E=f(c),k=f(d),T=f(p),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function(){function e(){h(this,e)}return x(e,null,[{key:"getClasses",value:function(){return{Text:m.default,Image:v.default,ImageGallery:g.default,Video:b.default,WebMap:y.default,WebScene:_.default,WebPage:w.default,Empty:C.default,Color:E.default,Credits:k.default,Discover:T.default}}},{key:"createInstance",value:function(e,t){var n=this._parseMedia(e.type,e,t);if(n.setCache&&t&&n.setCache(t),e.alternate){var i=this._parseMedia(e.alternate,e,t);i.setCache&&t&&i.setCache(t),n.setAlternate(i)}return n}},{key:"_parseMedia",value:function(e,t){var n=null;if(e&&!t[e])return console.error("Invalid json for: ",t),n;var i=this.getClasses();return"text"==e?n=new i.Text(t.text):"image"==e?n=new i.Image(t.image):"image-gallery"==e?n=new i.ImageGallery(t["image-gallery"]):"video"==e?n=new i.Video(t.video):"webmap"==e?n=new i.WebMap(t.webmap):"webscene"==e?n=new i.WebScene(t.webscene):"webpage"==e?n=new i.WebPage(t.webpage):"color"==e?n=new i.Color(t.color):"credits"==e?n=new i.Credits(t.credits):"discover"==e?n=new i.Discover(t.discover):"empty"==e?n=new i.Empty(t.empty):console.error("Could not find corresponding media for: ",t),n}}]),e}();t.default=S,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/PanelInvite",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-invite-background"></div>\r\n<i class="builder-invite-open fa fa-pencil" aria-hidden="true"></i>\r\n<i class="builder-invite-close fa fa-check" aria-hidden="true"></i>\r\n'},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/PanelConfig",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="builder-config">\r\n  <div class="config-main">\r\n    <ul class="builder-tabs"></ul>\r\n    <div class="config-content">\r\n      <div class="builder-active-tab"></div>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/Panel",[],function(){}),define("storymaps-react/tpl/view/media/builder/Panel",["module","exports","lib-build/hbars!./PanelInvite","lib-build/hbars!./PanelConfig","lib-build/less!./Panel"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u="config-panel-active",c=function(){function e(t){o(this,e),t=t||{},t.containerMedia&&t.tabs&&t.media&&t.onChange&&t.onAction&&(this._nodeMedia=t.containerMedia,this._nodeInvite=this._nodeMedia.find(".media-cfg-invite"),this._nodePanel=this._nodeMedia.find(".media-cfg-panel"),this._tabs=t.tabs,this._media=t.media,this._onChange=t.onChange,this._onToggle=t.onToggle,this._onAction=t.onAction,this._closeBtnStyle=t.closeBtnStyle,this.selectedClass="selected",this._init())}return l(e,[{key:"_init",value:function(){var e=this;this._nodeMedia.removeClass(u),this._nodeInvite.html((0,a.default)({})),this._nodePanel.html((0,s.default)({})),this._nodeInvite.off("click").click(this._toggleConfigPanel.bind(this));var t=this._nodePanel.find(".builder-tabs"),n=this._tabs.some(function(e){return e.type.indexOf("issues")>=0});this._tabs.forEach(function(e,i){var r="";(e.type.indexOf("issues")>=0||"manage"===e.type&&!n)&&(r='<span class="border-error"></span>'),t.append('<li class="tab btn-clear lighter'+(0===i?" selected":"")+'" data-tab="'+e.type+'">'+r+('<span class="config-tab-icon fa '+e.icon+'"></span>')+(""+e.title)+"</li>")});var i=t.find(".tab"),r=this;i.on("click",function(n){var o=$(n.currentTarget),a=o.data("tab"),s=t.find(".tab."+e.selectedClass).data("tab"),l=r._tabs.find(function(e){return a===e.type}),u=r._tabs.find(function(e){return s===e.type});i.removeClass(e.selectedClass),o.addClass(e.selectedClass),u&&r.destroyTab(u),l&&r.renderTab(l)})}},{key:"destroyTab",value:function(e){e.destroy()}},{key:"renderTab",value:function(e){var t=this._nodePanel.find(".builder-active-tab");t.html(e.render()),e.postCreate({container:t,media:this._media,onChange:this._onChange,onAction:this._onAction,rootNode:this._nodePanel})}},{key:"_toggleConfigPanel",value:function(e){if(this._nodeMedia.hasClass(u)){if("light"==this._closeBtnStyle&&$(e.target).hasClass("builder-invite-background"))return;var t=this._nodePanel.find(".builder-tabs .tab."+this.selectedClass),n=t.data("tab"),i=this._tabs.find(function(e){return n===e.type});i&&i.beforePanelDestroy(),i&&this.destroyTab(i)}else{var r=this._nodePanel.find(".builder-tabs .tab."+this.selectedClass);if(this._nodeMedia.hasClass("error")||this._nodeMedia.find(".error").length){var o=this._nodePanel.find('[data-tab="issues"]');o.length||(o=this._nodePanel.find('[data-tab="manage"]')),o.length&&(r.removeClass(this.selectedClass),r=o.addClass(this.selectedClass))}var a=r.data("tab"),s=this._tabs.find(function(e){return a===e.type});s&&this.renderTab(s)}this._nodeMedia.toggleClass(u),this._onToggle&&this._onToggle()}}]),e}();t.default=c,e.exports=t.default}),define("storymaps-react/tpl/view/media/builder/Tab",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};n(this,e),this.title="",this.selectedClass="selected",this._isActive=!1,this._options=t,this._sectionOptions=t.sectionOptions,this._onSectionChange=t.onSectionChange,this._onOpen=t.onOpen}return i(e,[{key:"onChange",value:function(){this._onChange()}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.container&&e.media&&e.onChange&&e.rootNode&&(this._onOpen&&this._onOpen(),this._isActive=!0,this._node=e.container,this._media=e.media,this._onChange=e.onChange,this._onAction=e.onAction,this._rootNode=e.rootNode)}},{key:"beforePanelDestroy",value:function(){}},{key:"destroy",value:function(){this._isActive=!1}},{key:"setConfig",value:function(e,t){this._media.options[e]=t,this.onChange()}},{key:"setMedia",value:function(e,t){this._media[e]=t,this.onChange()}},{key:"setSectionConfig",value:function(e,t){this._sectionOptions[e]=t,this._onSectionChange()}}]),e}();t.default=r,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSize",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section">\r\n  <ul class="section-content horizontal">\r\n    <li class="config-item" data-type="size" data-value="small">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/small.png">\r\n      <span class="config-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.small:r,e))+'</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="medium">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/medium.png">\r\n      <span class="config-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.medium:r,e))+'</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="large">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/large.png">\r\n      <span class="config-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.large:r,e))+'</span>\r\n    </li>\r\n    <!--<li class="config-item" data-type="size" data-value="immersive">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/immersive.png">\r\n      <span class="config-label">Immersive...</span>\r\n    </li>-->\r\n  </ul>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/Common",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabSize",["module","exports","./Tab","lib-build/hbars!./TabSize","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.title=d.default.builder.mediaConfig.tabs.size,e.type="size",e.icon="fa-arrows-alt",e}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.size})}},{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var i=this._media.options.size||"large",r=this._node.find('.config-item[data-type="size"]');this._node.find('.config-item[data-value="'+i+'"]').addClass(this.selectedClass),r.on("click",function(e){var t=$(e.currentTarget);n.setConfig("size",t.data("value")),r.removeClass(n.selectedClass),t.addClass(n.selectedClass)})}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this);var e=this._node.find('.config-item[data-type="size"]');e.off("click")}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSizeImage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section">\r\n  <ul class="section-content horizontal">\r\n    <li class="config-item" data-type="size" data-value="small">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/small.png">\r\n      <span class="config-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.small:r,e))+'</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="medium">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/medium.png">\r\n      <span class="config-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.medium:r,e))+'</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="large">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/large.png">\r\n      <span class="config-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.large:r,e))+'</span>\r\n    </li>\r\n    <!--<li class="config-item" data-type="size" data-value="title">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/title.png">\r\n      <span class="config-label">Title</span>\r\n    </li>\r\n    <li class="config-item" data-type="size" data-value="immersive">\r\n      <img class="config-image" src="resources/tpl/builder/icons/media-config/immersive.png">\r\n      <span class="config-label">Immersive...</span>\r\n    </li>-->\r\n  </ul>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabSizeImage",["module","exports","./TabSize","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./TabSizeImage","lib-build/less!./Common"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return l(t,e),p(t,[{key:"render",value:function(){return(0,d.default)({strings:c.default.builder.mediaConfig.size})}}]),t}(u.default);t.default=f,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabBackground",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return a(o(null!=(r=null!=e?e.strings:e)?r.cropExplanationImmersive:r,e))},3:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return a(o(null!=(r=null!=e?e.strings:e)?r.cropExplanation:r,e))},5:function(e,t,n,i){return" safari-specific"},7:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'    <div class="section-content crop-check">\r\n      <label class="check"><input class="fit-fill" type="checkbox" value="fit"> '+a(o(null!=(r=null!=e?e.strings:e)?r.noCrop:r,e))+"</label>\r\n    </div>\r\n"},9:function(e,t,n,i){return" preview-title"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression,s='<div class="builder-config-section">\r\n  <div class="section-content vertical-list fit-fill">\r\n    <div class="section-content two-pane" data-mode="fill">\r\n      <div class="content-pane">\r\n        <p class="config-label overview-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.mostImportantPart:r,e))+'</p>\r\n        <span class="crop-info fa fa-info-circle" data-toggle="tooltip" data-placement="top" title="';return r=t.if.call(e,null!=e?e.isImmersive:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.program(3,i),data:i}),null!=r&&(s+=r),s+='"></span>\r\n      </div>\r\n      <div class="content-pane overview-thumbnail-pane',r=t.if.call(e,null!=e?e.isSafari:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=r&&(s+=r),s+='">\r\n        <img class="overview-thumbnail" src=""/>\r\n        <div class="overview-dot"></div>\r\n      </div>\r\n    </div>\r\n    <div class="section-content vertical-list" data-mode="fit">\r\n      <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.color:r,e))+'</h4>\r\n      <div class="section-content fit-content-container">\r\n        <div class="content-pane fit-content">\r\n          <ul class="fit-palette"></ul>\r\n        </div>\r\n        <div class="content-pane fit-content">\r\n          <div class="fit-color-picker not-alone">\r\n            <div class="color-picker-icons">\r\n              <i class="fit-brush fa fa-paint-brush"></i>\r\n              <i class="fit-down-arrow fa fa-chevron-down"></i>\r\n            </div>\r\n            <span class="fit-color-picker-color"></span>\r\n          </div>\r\n          <div class="fit-color-picker-color"></div>\r\n        </div>\r\n        <div class="content-pane fit-loading">\r\n          <span class="fit-loading-icon large-loader"></span>\r\n        </div>\r\n      </div>\r\n    </div>\r\n',r=t.if.call(e,null!=e?e.isImmersive:e,{name:"if",hash:{},fn:this.program(7,i),inverse:this.noop,data:i}),null!=r&&(s+=r),s+='  </div>\r\n</div>\r\n<div class="builder-config-section larger preview-config-section">\r\n  <ul class="section-content horizontal preview-section">\r\n    <li class="config-item preview-item horizontal">\r\n      <h4 class="responsive-preview-title">'+a(o(null!=(r=null!=e?e.strings:e)?r.previews:r,e))+'</h4>\r\n      <div class="responsive-frame-container">\r\n        <div class="responsive-backing backing-horizontal"></div>\r\n        <div class="responsive-preview preview-horizontal',r=t.if.call(e,null!=e?e.isTitle:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=r&&(s+=r),s+='"></div>\r\n        <img class="responsive-frame frame-horizontal" src="resources/tpl/builder/icons/media-config/previewLandscape.png" />\r\n      </div>\r\n    </li>\r\n    <li class="config-item preview-item">\r\n      <div class="responsive-frame-container">\r\n        <div class="responsive-backing backing-vertical"></div>\r\n        <div class="responsive-preview preview-vertical',r=t.if.call(e,null!=e?e.isTitle:e,{name:"if",hash:{},fn:this.program(9,i),inverse:this.noop,data:i}),null!=r&&(s+=r),s+'"></div>\r\n        <img class="responsive-frame frame-vertical" src="resources/tpl/builder/icons/media-config/previewPortrait.png" />\r\n      </div>\r\n    </li>\r\n  </ul>\r\n</div>\r\n'},useData:!0})}),define("commonResources/nls/texteditor",{root:{textEditor:{placeholder:{continueStory:"Continue your story here..."},blockAdd:{text:"Text",media:"Media",title:"Title Section",immersive:"Immersive Section"},link:{invite:"Paste or type a link..."},color:{choose:"choose",cancel:"cancel",clear:"Clear color"}}},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),function(e){"use strict";"function"==typeof define&&define.amd?define("lib/spectrum/spectrum",["jquery"],e):"object"==typeof exports&&"object"==typeof module?module.exports=e(require("jquery")):e(jQuery)}(function(e,t){"use strict";function n(t,n,i,r){for(var o=[],a=0;a<t.length;a++){var s=t[a];if(s){var l=tinycolor(s),u=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";u+=tinycolor.equals(n,s)?" sp-thumb-active":"";var c=l.toString(r.preferredFormat||"rgb"),d=v?"background-color:"+l.toRgbString():"filter:"+l.toFilter();o.push('<span title="'+c+'" data-color="'+l.toRgbString()+'" class="'+u+'"><span class="sp-thumb-inner" style="'+d+';" /></span>')}else{var p="sp-clear-display";o.push(e("<div />").append(e('<span data-color="" style="background-color:transparent;" class="'+p+'"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+o.join("")+"</div>"}function i(){for(var e=0;e<h.length;e++)h[e]&&h[e].hide()}function r(t,n){var i=e.extend({},f,t);return i.callbacks={move:u(i.move,n),change:u(i.change,n),show:u(i.show,n),hide:u(i.hide,n),beforeShow:u(i.beforeShow,n)},i}function o(o,s){function u(){if(G.showPaletteOnly&&(G.showPalette=!0),Fe.text(G.showPaletteOnly?G.togglePaletteMoreText:G.togglePaletteLessText),G.palette){fe=G.palette.slice(0),he=e.isArray(fe[0])?fe:[fe],me={};for(var t=0;t<he.length;t++)for(var n=0;n<he[t].length;n++){var i=tinycolor(he[t][n]).toRgbString();me[i]=!0}}Ee.toggleClass("sp-flat",q),Ee.toggleClass("sp-input-disabled",!G.showInput),Ee.toggleClass("sp-alpha-enabled",G.showAlpha),Ee.toggleClass("sp-clear-enabled",Qe),Ee.toggleClass("sp-buttons-disabled",!G.showButtons),Ee.toggleClass("sp-palette-buttons-disabled",!G.togglePaletteOnly),Ee.toggleClass("sp-palette-disabled",!G.showPalette),Ee.toggleClass("sp-palette-only",G.showPaletteOnly),Ee.toggleClass("sp-initial-disabled",!G.showInitial),Ee.addClass(G.className).addClass(G.containerClassName),U()}function f(){function t(t){return t.data&&t.data.ignore?(N(e(t.target).closest(".sp-thumb-el").data("color")),D()):(N(e(t.target).closest(".sp-thumb-el").data("color")),D(),G.hideAfterPaletteSelect?(B(!0),M()):B()),!1}if(m&&Ee.find("*:not(input)").attr("unselectable","on"),u(),$e&&we.after(He).hide(),Qe||De.hide(),q)we.after(Ee).hide();else{var n="parent"===G.appendTo?we.parent():e(G.appendTo);1!==n.length&&(n=e("body")),n.append(Ee)}y(),ze.on("click.spectrum touchstart.spectrum",function(t){Ce||S(),t.stopPropagation(),e(t.target).is("input")||t.preventDefault()}),(we.is(":disabled")||G.disabled===!0)&&W(),Ee.click(l),Ae.change(x),Ae.on("paste",function(){setTimeout(x,1)}),Ae.keydown(function(e){13==e.keyCode&&x()}),Le.text(G.cancelText),Le.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),A(),M()}),De.attr("title",G.clearText),De.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),Ye=!0,D(),q&&B(!0)}),Re.text(G.chooseText),Re.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),m&&Ae.is(":focus")&&Ae.trigger("change"),L()&&(B(!0),M())}),Fe.text(G.showPaletteOnly?G.togglePaletteMoreText:G.togglePaletteLessText),Fe.on("click.spectrum",function(e){e.stopPropagation(),e.preventDefault(),G.showPaletteOnly=!G.showPaletteOnly,G.showPaletteOnly||q||Ee.css("left","-="+(ke.outerWidth(!0)+5)),u()}),c(Ie,function(e,t,n){pe=e/ae,Ye=!1,n.shiftKey&&(pe=Math.round(10*pe)/10),D()},k,T),c(Se,function(e,t){ue=parseFloat(t/re),Ye=!1,G.showAlpha||(pe=1),D()},k,T),c(Te,function(e,t,n){if(n.shiftKey){if(!ye){var i=ce*te,r=ne-de*ne,o=Math.abs(e-i)>Math.abs(t-r);ye=o?"x":"y"}}else ye=null;var a=!ye||"x"===ye,s=!ye||"y"===ye;a&&(ce=parseFloat(e/te)),s&&(de=parseFloat((ne-t)/ne)),Ye=!1,G.showAlpha||(pe=1),D()},k,T),Ve?(N(Ve),R(),qe=G.preferredFormat||tinycolor(Ve).format,_(Ve)):R(),q&&P();var i=m?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ne.on(i,".sp-thumb-el",t),je.on(i,".sp-thumb-el:nth-child(1)",{ignore:!0},t)}function y(){if(Y&&window.localStorage){try{var t=window.localStorage[Y].split(",#");t.length>1&&(delete window.localStorage[Y],e.each(t,function(e,t){_(t)}))}catch(e){}try{ve=window.localStorage[Y].split(";");
}catch(e){}}}function _(t){if(K){var n=tinycolor(t).toRgbString();if(!me[n]&&e.inArray(n,ve)===-1)for(ve.push(n);ve.length>ge;)ve.shift();if(Y&&window.localStorage)try{window.localStorage[Y]=ve.join(";")}catch(e){}}}function w(){var e=[];if(G.showPalette)for(var t=0;t<ve.length;t++){var n=tinycolor(ve[t]).toRgbString();me[n]||e.push(ve[t])}return e.reverse().slice(0,G.maxSelectionSize)}function C(){var t=j(),i=e.map(he,function(e,i){return n(e,t,"sp-palette-row sp-palette-row-"+i,G)});y(),ve&&i.push(n(w(),t,"sp-palette-row sp-palette-row-selection",G)),Ne.html(i.join(""))}function E(){if(G.showInitial){var e=Ge,t=j();je.html(n([e,t],t,"sp-palette-row-initial",G))}}function k(){(ne<=0||te<=0||re<=0)&&U(),ee=!0,Ee.addClass(be),ye=null,we.trigger("dragstart.spectrum",[j()])}function T(){ee=!1,Ee.removeClass(be),we.trigger("dragstop.spectrum",[j()])}function x(){var e=Ae.val();if(null!==e&&""!==e||!Qe){var t=tinycolor(e);t.isValid()?(N(t),D(),B()):Ae.addClass("sp-validation-error")}else N(null),D(),B()}function S(){Z?M():P()}function P(){var t=e.Event("beforeShow.spectrum");return Z?void U():(we.trigger(t,[j()]),void(X.beforeShow(j())===!1||t.isDefaultPrevented()||(i(),Z=!0,e(_e).on("keydown.spectrum",O),e(_e).on("click.spectrum",I),e(window).on("resize.spectrum",J),He.addClass("sp-active"),Ee.removeClass("sp-hidden"),U(),R(),Ge=j(),E(),X.show(Ge),we.trigger("show.spectrum",[Ge]))))}function O(e){27===e.keyCode&&M()}function I(e){2!=e.button&&(ee||(Ke?B(!0):A(),M()))}function M(){Z&&!q&&(Z=!1,e(_e).off("keydown.spectrum",O),e(_e).off("click.spectrum",I),e(window).off("resize.spectrum",J),He.removeClass("sp-active"),Ee.addClass("sp-hidden"),X.hide(j()),we.trigger("hide.spectrum",[j()]))}function A(){N(Ge,!0),B(!0)}function N(e,t){if(tinycolor.equals(e,j()))return void R();var n,i;!e&&Qe?Ye=!0:(Ye=!1,n=tinycolor(e),i=n.toHsv(),ue=i.h%360/360,ce=i.s,de=i.v,pe=i.a),R(),n&&n.isValid()&&!t&&(qe=G.preferredFormat||n.getFormat())}function j(e){return e=e||{},Qe&&Ye?null:tinycolor.fromRatio({h:ue,s:ce,v:de,a:Math.round(1e3*pe)/1e3},{format:e.format||qe})}function L(){return!Ae.hasClass("sp-validation-error")}function D(){R(),X.move(j()),we.trigger("move.spectrum",[j()])}function R(){Ae.removeClass("sp-validation-error"),F();var e=tinycolor.fromRatio({h:ue,s:1,v:1});Te.css("background-color",e.toHexString());var t=qe;pe<1&&(0!==pe||"name"!==t)&&("hex"!==t&&"hex3"!==t&&"hex6"!==t&&"name"!==t||(t="rgb"));var n=j({format:t}),i="";if(We.removeClass("sp-clear-display"),We.css("background-color","transparent"),!n&&Qe)We.addClass("sp-clear-display");else{var r=n.toHexString(),o=n.toRgbString();if(v||1===n.alpha?We.css("background-color",o):(We.css("background-color","transparent"),We.css("filter",n.toFilter())),G.showAlpha){var a=n.toRgb();a.a=0;var s=tinycolor(a).toRgbString(),l="linear-gradient(left, "+s+", "+r+")";m?Oe.css("filter",tinycolor(s).toFilter({gradientType:1},r)):(Oe.css("background","-webkit-"+l),Oe.css("background","-moz-"+l),Oe.css("background","-ms-"+l),Oe.css("background","linear-gradient(to right, "+s+", "+r+")"))}i=n.toString(t)}G.showInput&&Ae.val(i),G.showPalette&&C(),E()}function F(){var e=ce,t=de;if(Qe&&Ye)Me.hide(),Pe.hide(),xe.hide();else{Me.show(),Pe.show(),xe.show();var n=e*te,i=ne-t*ne;n=Math.max(-ie,Math.min(te-ie,n-ie)),i=Math.max(-ie,Math.min(ne-ie,i-ie)),xe.css({top:i+"px",left:n+"px"});var r=pe*ae;Me.css({left:r-se/2+"px"});var o=ue*re;Pe.css({top:o-le+"px"})}}function B(e){var t=j(),n="",i=!tinycolor.equals(t,Ge);t&&(n=t.toString(qe),_(t)),Be&&we.val(n),e&&i&&(X.change(t),we.trigger("change",[t]))}function U(){Z&&(te=Te.width(),ne=Te.height(),ie=xe.height(),oe=Se.width(),re=Se.height(),le=Pe.height(),ae=Ie.width(),se=Me.width(),q||(Ee.css("position","absolute"),G.offset?Ee.offset(G.offset):Ee.offset(a(Ee,ze))),F(),G.showPalette&&C(),we.trigger("reflow.spectrum"))}function $(){we.show(),ze.off("click.spectrum touchstart.spectrum"),Ee.remove(),He.remove(),h[Xe.id]=null}function H(n,i){return n===t?e.extend({},G):i===t?G[n]:(G[n]=i,"preferredFormat"===n&&(qe=G.preferredFormat),void u())}function z(){Ce=!1,we.attr("disabled",!1),ze.removeClass("sp-disabled")}function W(){M(),Ce=!0,we.attr("disabled",!0),ze.addClass("sp-disabled")}function V(e){G.offset=e,U()}var G=r(s,o),q=G.flat,K=G.showSelectionPalette,Y=G.localStorageKey,Q=G.theme,X=G.callbacks,J=d(U,10),Z=!1,ee=!1,te=0,ne=0,ie=0,re=0,oe=0,ae=0,se=0,le=0,ue=0,ce=0,de=0,pe=1,fe=[],he=[],me={},ve=G.selectionPalette.slice(0),ge=G.maxSelectionSize,be="sp-dragging",ye=null,_e=o.ownerDocument,we=(_e.body,e(o)),Ce=!1,Ee=e(b,_e).addClass(Q),ke=Ee.find(".sp-picker-container"),Te=Ee.find(".sp-color"),xe=Ee.find(".sp-dragger"),Se=Ee.find(".sp-hue"),Pe=Ee.find(".sp-slider"),Oe=Ee.find(".sp-alpha-inner"),Ie=Ee.find(".sp-alpha"),Me=Ee.find(".sp-alpha-handle"),Ae=Ee.find(".sp-input"),Ne=Ee.find(".sp-palette"),je=Ee.find(".sp-initial"),Le=Ee.find(".sp-cancel"),De=Ee.find(".sp-clear"),Re=Ee.find(".sp-choose"),Fe=Ee.find(".sp-palette-toggle"),Be=we.is("input"),Ue=Be&&"color"===we.attr("type")&&p(),$e=Be&&!q,He=$e?e(g).addClass(Q).addClass(G.className).addClass(G.replacerClassName):e([]),ze=$e?He:we,We=He.find(".sp-preview-inner"),Ve=G.color||Be&&we.val(),Ge=!1,qe=G.preferredFormat,Ke=!G.showButtons||G.clickoutFiresChange,Ye=!Ve,Qe=G.allowEmpty&&!Ue;f();var Xe={show:P,hide:M,toggle:S,reflow:U,option:H,enable:z,disable:W,offset:V,set:function(e){N(e),B()},get:j,destroy:$,container:Ee};return Xe.id=h.push(Xe)-1,Xe}function a(t,n){var i=0,r=t.outerWidth(),o=t.outerHeight(),a=n.outerHeight(),s=t[0].ownerDocument,l=s.documentElement,u=l.clientWidth+e(s).scrollLeft(),c=l.clientHeight+e(s).scrollTop(),d=n.offset(),p=d.left,f=d.top;return f+=a,p-=Math.min(p,p+r>u&&u>r?Math.abs(p+r-u):0),f-=Math.min(f,f+o>c&&c>o?Math.abs(o+a-i):i),{top:f,bottom:d.bottom,left:p,right:d.right,width:d.width,height:d.height}}function s(){}function l(e){e.stopPropagation()}function u(e,t){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return e.apply(t,i.concat(n.call(arguments)))}}function c(t,n,i,r){function o(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.returnValue=!1}function a(e){if(c){if(m&&u.documentMode<9&&!e.button)return l();var i=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0],r=i&&i.pageX||e.pageX,a=i&&i.pageY||e.pageY,s=Math.max(0,Math.min(r-d.left,f)),v=Math.max(0,Math.min(a-d.top,p));h&&o(e),n.apply(t,[s,v,e])}}function s(n){var r=n.which?3==n.which:2==n.button;r||c||i.apply(t,arguments)!==!1&&(c=!0,p=e(t).height(),f=e(t).width(),d=e(t).offset(),e(u).on(v),e(u.body).addClass("sp-dragging"),a(n),o(n))}function l(){c&&(e(u).off(v),e(u.body).removeClass("sp-dragging"),setTimeout(function(){r.apply(t,arguments)},0)),c=!1}n=n||function(){},i=i||function(){},r=r||function(){};var u=document,c=!1,d={},p=0,f=0,h="ontouchstart"in window,v={};v.selectstart=o,v.dragstart=o,v["touchmove mousemove"]=a,v["touchend mouseup"]=l,e(t).on("touchstart mousedown",s)}function d(e,t,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,e.apply(r,o)};n&&clearTimeout(i),!n&&i||(i=setTimeout(a,t))}}function p(){return e.fn.spectrum.inputTypeColorSupport()}var f={beforeShow:s,move:s,change:s,show:s,hide:s,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!0,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},h=[],m=!!/msie/i.exec(window.navigator.userAgent),v=function(){function e(e,t){return!!~(""+e).indexOf(t)}var t=document.createElement("div"),n=t.style;return n.cssText="background-color:rgba(0,0,0,.5)",e(n.backgroundColor,"rgba")||e(n.backgroundColor,"hsla")}(),g=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var e="";if(m)for(var t=1;t<=6;t++)e+="<div class='sp-"+t+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",e,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),y="spectrum.id";e.fn.spectrum=function(t,n){if("string"==typeof t){var i=this,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=h[e(this).data(y)];if(n){var o=n[t];if(!o)throw new Error("Spectrum: no such method: '"+t+"'");"get"==t?i=n.get():"container"==t?i=n.container:"option"==t?i=n.option.apply(n,r):"destroy"==t?(n.destroy(),e(this).removeData(y)):o.apply(n,r)}}),i}return this.spectrum("destroy").each(function(){var n=e.extend({},e(this).data(),t),i=o(this,n);e(this).data(y,i.id)})},e.fn.spectrum.load=!0,e.fn.spectrum.loadOpts={},e.fn.spectrum.draggable=c,e.fn.spectrum.defaults=f,e.fn.spectrum.inputTypeColorSupport=function t(){if("undefined"==typeof t._cachedResult){var n=e("<input type='color'/>")[0];t._cachedResult="color"===n.type&&""!==n.value}return t._cachedResult},e.spectrum={},e.spectrum.localization={},e.spectrum.palettes={},e.fn.spectrum.processNativeColorInputs=function(){var t=e("input[type=color]");t.length&&!p()&&t.spectrum({preferredFormat:"hex6"})},function(){function e(e){var n={r:0,g:0,b:0},r=1,a=!1,s=!1;return"string"==typeof e&&(e=A(e)),"object"==typeof e&&(e.hasOwnProperty("r")&&e.hasOwnProperty("g")&&e.hasOwnProperty("b")?(n=t(e.r,e.g,e.b),a=!0,s="%"===String(e.r).substr(-1)?"prgb":"rgb"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("v")?(e.s=O(e.s),e.v=O(e.v),n=o(e.h,e.s,e.v),a=!0,s="hsv"):e.hasOwnProperty("h")&&e.hasOwnProperty("s")&&e.hasOwnProperty("l")&&(e.s=O(e.s),e.l=O(e.l),n=i(e.h,e.s,e.l),a=!0,s="hsl"),e.hasOwnProperty("a")&&(r=e.a)),r=C(r),{ok:a,format:e.format||s,r:F(255,B(n.r,0)),g:F(255,B(n.g,0)),b:F(255,B(n.b,0)),a:r}}function t(e,t,n){return{r:255*E(e,255),g:255*E(t,255),b:255*E(n,255)}}function n(e,t,n){e=E(e,255),t=E(t,255),n=E(n,255);var i,r,o=B(e,t,n),a=F(e,t,n),s=(o+a)/2;if(o==a)i=r=0;else{var l=o-a;switch(r=s>.5?l/(2-o-a):l/(o+a),o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,l:s}}function i(e,t,n){function i(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+6*(t-e)*n:n<.5?t:n<2/3?e+(t-e)*(2/3-n)*6:e}var r,o,a;if(e=E(e,360),t=E(t,100),n=E(n,100),0===t)r=o=a=n;else{var s=n<.5?n*(1+t):n+t-n*t,l=2*n-s;r=i(l,s,e+1/3),o=i(l,s,e),a=i(l,s,e-1/3)}return{r:255*r,g:255*o,b:255*a}}function r(e,t,n){e=E(e,255),t=E(t,255),n=E(n,255);var i,r,o=B(e,t,n),a=F(e,t,n),s=o,l=o-a;if(r=0===o?0:l/o,o==a)i=0;else{switch(o){case e:i=(t-n)/l+(t<n?6:0);break;case t:i=(n-e)/l+2;break;case n:i=(e-t)/l+4}i/=6}return{h:i,s:r,v:s}}function o(e,t,n){e=6*E(e,360),t=E(t,100),n=E(n,100);var i=D.floor(e),r=e-i,o=n*(1-t),a=n*(1-r*t),s=n*(1-(1-r)*t),l=i%6,u=[n,a,o,o,s,n][l],c=[s,n,n,a,o,o][l],d=[o,o,s,n,n,a][l];return{r:255*u,g:255*c,b:255*d}}function a(e,t,n,i){var r=[P(R(e).toString(16)),P(R(t).toString(16)),P(R(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function s(e,t,n,i){var r=[P(I(i)),P(R(e).toString(16)),P(R(t).toString(16)),P(R(n).toString(16))];return r.join("")}function l(e,t){t=0===t?0:t||10;var n=$(e).toHsl();return n.s-=t/100,n.s=k(n.s),$(n)}function u(e,t){t=0===t?0:t||10;var n=$(e).toHsl();return n.s+=t/100,n.s=k(n.s),$(n)}function c(e){return $(e).desaturate(100)}function d(e,t){t=0===t?0:t||10;var n=$(e).toHsl();return n.l+=t/100,n.l=k(n.l),$(n)}function p(e,t){t=0===t?0:t||10;var n=$(e).toRgb();return n.r=B(0,F(255,n.r-R(255*-(t/100)))),n.g=B(0,F(255,n.g-R(255*-(t/100)))),n.b=B(0,F(255,n.b-R(255*-(t/100)))),$(n)}function f(e,t){t=0===t?0:t||10;var n=$(e).toHsl();return n.l-=t/100,n.l=k(n.l),$(n)}function h(e,t){var n=$(e).toHsl(),i=(R(n.h)+t)%360;return n.h=i<0?360+i:i,$(n)}function m(e){var t=$(e).toHsl();return t.h=(t.h+180)%360,$(t)}function v(e){var t=$(e).toHsl(),n=t.h;return[$(e),$({h:(n+120)%360,s:t.s,l:t.l}),$({h:(n+240)%360,s:t.s,l:t.l})]}function g(e){var t=$(e).toHsl(),n=t.h;return[$(e),$({h:(n+90)%360,s:t.s,l:t.l}),$({h:(n+180)%360,s:t.s,l:t.l}),$({h:(n+270)%360,s:t.s,l:t.l})]}function b(e){var t=$(e).toHsl(),n=t.h;return[$(e),$({h:(n+72)%360,s:t.s,l:t.l}),$({h:(n+216)%360,s:t.s,l:t.l})]}function y(e,t,n){t=t||6,n=n||30;var i=$(e).toHsl(),r=360/n,o=[$(e)];for(i.h=(i.h-(r*t>>1)+720)%360;--t;)i.h=(i.h+r)%360,o.push($(i));return o}function _(e,t){t=t||6;for(var n=$(e).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/t;t--;)a.push($({h:i,s:r,v:o})),o=(o+s)%1;return a}function w(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[e[n]]=n);return t}function C(e){return e=parseFloat(e),(isNaN(e)||e<0||e>1)&&(e=1),e}function E(e,t){x(e)&&(e="100%");var n=S(e);return e=F(t,B(0,parseFloat(e))),n&&(e=parseInt(e*t,10)/100),D.abs(e-t)<1e-6?1:e%t/parseFloat(t)}function k(e){return F(1,B(0,e))}function T(e){return parseInt(e,16)}function x(e){return"string"==typeof e&&e.indexOf(".")!=-1&&1===parseFloat(e)}function S(e){return"string"==typeof e&&e.indexOf("%")!=-1}function P(e){return 1==e.length?"0"+e:""+e}function O(e){return e<=1&&(e=100*e+"%"),e}function I(e){return Math.round(255*parseFloat(e)).toString(16)}function M(e){return T(e)/255}function A(e){e=e.replace(N,"").replace(j,"").toLowerCase();var t=!1;if(H[e])e=H[e],t=!0;else if("transparent"==e)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=W.rgb.exec(e))?{r:n[1],g:n[2],b:n[3]}:(n=W.rgba.exec(e))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=W.hsl.exec(e))?{h:n[1],s:n[2],l:n[3]}:(n=W.hsla.exec(e))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=W.hsv.exec(e))?{h:n[1],s:n[2],v:n[3]}:(n=W.hsva.exec(e))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=W.hex8.exec(e))?{a:M(n[1]),r:T(n[2]),g:T(n[3]),b:T(n[4]),format:t?"name":"hex8"}:(n=W.hex6.exec(e))?{r:T(n[1]),g:T(n[2]),b:T(n[3]),format:t?"name":"hex"}:!!(n=W.hex3.exec(e))&&{r:T(n[1]+""+n[1]),g:T(n[2]+""+n[2]),b:T(n[3]+""+n[3]),format:t?"name":"hex"}}var N=/^[\s,#]+/,j=/\s+$/,L=0,D=Math,R=D.round,F=D.min,B=D.max,U=D.random,$=function(t,n){if(t=t?t:"",n=n||{},t instanceof $)return t;if(!(this instanceof $))return new $(t,n);var i=e(t);this._originalInput=t,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=R(1e3*this._a)/1e3,this._format=n.format||i.format,this._gradientType=n.gradientType,this._r<1&&(this._r=R(this._r)),this._g<1&&(this._g=R(this._g)),this._b<1&&(this._b=R(this._b)),this._ok=i.ok,this._tc_id=L++};$.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(299*e.r+587*e.g+114*e.b)/1e3},setAlpha:function(e){return this._a=C(e),this._roundA=R(1e3*this._a)/1e3,this},toHsv:function(){var e=r(this._r,this._g,this._b);return{h:360*e.h,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=r(this._r,this._g,this._b),t=R(360*e.h),n=R(100*e.s),i=R(100*e.v);return 1==this._a?"hsv("+t+", "+n+"%, "+i+"%)":"hsva("+t+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var e=n(this._r,this._g,this._b);return{h:360*e.h,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=n(this._r,this._g,this._b),t=R(360*e.h),i=R(100*e.s),r=R(100*e.l);return 1==this._a?"hsl("+t+", "+i+"%, "+r+"%)":"hsla("+t+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return a(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(){return s(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:R(this._r),g:R(this._g),b:R(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+R(this._r)+", "+R(this._g)+", "+R(this._b)+")":"rgba("+R(this._r)+", "+R(this._g)+", "+R(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:R(100*E(this._r,255))+"%",g:R(100*E(this._g,255))+"%",b:R(100*E(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+R(100*E(this._r,255))+"%, "+R(100*E(this._g,255))+"%, "+R(100*E(this._b,255))+"%)":"rgba("+R(100*E(this._r,255))+"%, "+R(100*E(this._g,255))+"%, "+R(100*E(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":!(this._a<1)&&(z[a(this._r,this._g,this._b,!0)]||!1)},toFilter:function(e){var t="#"+s(this._r,this._g,this._b,this._a),n=t,i=this._gradientType?"GradientType = 1, ":"";if(e){var r=$(e);n=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!t&&i&&("hex"===e||"hex6"===e||"hex3"===e||"name"===e);return r?"name"===e&&0===this._a?this.toName():this.toRgbString():("rgb"===e&&(n=this.toRgbString()),"prgb"===e&&(n=this.toPercentageRgbString()),"hex"!==e&&"hex6"!==e||(n=this.toHexString()),"hex3"===e&&(n=this.toHexString(!0)),"hex8"===e&&(n=this.toHex8String()),"name"===e&&(n=this.toName()),"hsl"===e&&(n=this.toHslString()),"hsv"===e&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(d,arguments)},brighten:function(){return this._applyModification(p,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(u,arguments)},greyscale:function(){return this._applyModification(c,arguments)},spin:function(){return this._applyModification(h,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(_,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(v,arguments)},tetrad:function(){return this._applyCombination(g,arguments)}},$.fromRatio=function(e,t){if("object"==typeof e){var n={};for(var i in e)e.hasOwnProperty(i)&&("a"===i?n[i]=e[i]:n[i]=O(e[i]));e=n}return $(e,t)},$.equals=function(e,t){return!(!e||!t)&&$(e).toRgbString()==$(t).toRgbString()},$.random=function(){return $.fromRatio({r:U(),g:U(),b:U()})},$.mix=function(e,t,n){n=0===n?0:n||50;var i,r=$(e).toRgb(),o=$(t).toRgb(),a=n/100,s=2*a-1,l=o.a-r.a;i=s*l==-1?s:(s+l)/(1+s*l),i=(i+1)/2;var u=1-i,c={r:o.r*i+r.r*u,g:o.g*i+r.g*u,b:o.b*i+r.b*u,a:o.a*a+r.a*(1-a)};return $(c)},$.readability=function(e,t){var n=$(e),i=$(t),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),l=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:l}},$.isReadable=function(e,t){var n=$.readability(e,t);return n.brightness>125&&n.color>500},$.mostReadable=function(e,t){for(var n=null,i=0,r=!1,o=0;o<t.length;o++){var a=$.readability(e,t[o]),s=a.brightness>125&&a.color>500,l=3*(a.brightness/125)+a.color/500;(s&&!r||s&&r&&l>i||!s&&!r&&l>i)&&(r=s,i=l,n=$(t[o]))}return n};var H=$.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=$.hexNames=w(H),W=function(){var e="[-\\+]?\\d+%?",t="[-\\+]?\\d*\\.\\d+%?",n="(?:"+t+")|(?:"+e+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=$}(),e(function(){e.fn.spectrum.load&&e.fn.spectrum.processNativeColorInputs()})}),define("lib-build/css!lib/spectrum/spectrum",[],function(){}),define("lib-build/less!storymaps-react/common/builder/ColorPicker",[],function(){}),define("storymaps-react/common/builder/ColorPicker",["module","exports","lib-build/i18n!commonResources/nls/texteditor","lib/spectrum/spectrum","lib-build/css!lib/spectrum/spectrum","lib-build/less!./ColorPicker"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){r(this,e)}return a(e,null,[{key:"initPicker",value:function(e){var t=[["#000","#444","#666","#999","#ccc","#eee","#f3f3f3","#fff"],["#f00","#f90","#ff0","#0f0","#0ff","#00f","#90f","#f0f"],["#f4cccc","#fce5cd","#fff2cc","#d9ead3","#d0e0e3","#cfe2f3","#d9d2e9","#ead1dc"],["#ea9999","#f9cb9c","#ffe599","#b6d7a8","#a2c4c9","#9fc5e8","#b4a7d6","#d5a6bd"],["#e06666","#f6b26b","#ffd966","#93c47d","#76a5af","#6fa8dc","#8e7cc3","#c27ba0"],["#c00","#e69138","#f1c232","#6aa84f","#45818e","#3d85c6","#674ea7","#a64d79"],["#900","#b45f06","#bf9000","#38761d","#134f5c","#0b5394","#351c75","#741b47"],["#600","#783f04","#7f6000","#274e13","#0c343d","#073763","#20124d","#4c1130"]];$(e.element).spectrum({allowEmpty:e.showClear||!1,color:e.color||"#000",showInput:!0,showAlpha:e.showAlpha||!1,showPalette:e.showPalette||!1,showInitial:!1,showSelectionPalette:!1,hideAfterPaletteSelect:!1,clickoutFiresChange:!1,preferredFormat:"hex3",appendTo:e.appendTo||"body",palette:e.palette||t,chooseText:o.default.textEditor.color.choose,cancelText:o.default.textEditor.color.cancel,clearText:o.default.textEditor.color.clear,show:function(t){e.onShowCallback&&e.onShowCallback(t?t.toRgbString():null)},move:function(t){e.onMoveCallback&&e.onMoveCallback(t?t.toRgbString():null)},change:function(t){e.onChangeCallback&&e.onChangeCallback(t?t.toRgbString():null)},hide:function(t){e.onHideCallback&&e.onHideCallback(t?t.toRgbString():null)},beforeShow:function(){$(e.element).spectrum("container").find(".sp-clear").html('<i class="fa fa-undo" aria-hidden="true"></i>').css("background-image","none"),e.beforeShowCallback&&e.beforeShowCallback()}})}}]),e}();t.default=s,e.exports=t.default});var CanvasImage=function(e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),document.body.appendChild(this.canvas),this.width=this.canvas.width=e.width,this.height=this.canvas.height=e.height,this.context.drawImage(e,0,0,this.width,this.height)};CanvasImage.prototype.clear=function(){this.context.clearRect(0,0,this.width,this.height)},CanvasImage.prototype.update=function(e){this.context.putImageData(e,0,0)},CanvasImage.prototype.getPixelCount=function(){return this.width*this.height},CanvasImage.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,this.height)},CanvasImage.prototype.removeCanvas=function(){this.canvas.parentNode.removeChild(this.canvas)};var ColorThief=function(){};if(ColorThief.prototype.getColor=function(e,t){var n=this.getPalette(e,5,t),i=n[0];return i},ColorThief.prototype.getPalette=function(e,t,n){"undefined"==typeof t&&(t=10),("undefined"==typeof n||1>n)&&(n=10);for(var i,r,o,a,s,l=new CanvasImage(e),u=l.getImageData(),c=u.data,d=l.getPixelCount(),p=[],f=0;d>f;f+=n)i=4*f,r=c[i+0],o=c[i+1],a=c[i+2],s=c[i+3],s>=125&&(r>250&&o>250&&a>250||p.push([r,o,a]));var h=MMCQ.quantize(p,t),m=h?h.palette():null;return l.removeCanvas(),m},!pv)var pv={map:function(e,t){var n={};return t?e.map(function(e,i){return n.index=i,t.call(n,e)}):e.slice()},naturalOrder:function(e,t){return t>e?-1:e>t?1:0},sum:function(e,t){var n={};return e.reduce(t?function(e,i,r){return n.index=r,e+t.call(n,i)}:function(e,t){return e+t},0)},max:function(e,t){return Math.max.apply(null,t?pv.map(e,t):e)}};var MMCQ=function(){function e(e,t,n){return(e<<2*l)+(t<<l)+n}function t(e){function t(){n.sort(e),i=!0}var n=[],i=!1;return{push:function(e){n.push(e),i=!1},peek:function(e){return i||t(),void 0===e&&(e=n.length-1),n[e]},pop:function(){return i||t(),n.pop()},size:function(){return n.length},map:function(e){return n.map(e)},debug:function(){return i||t(),n}}}function n(e,t,n,i,r,o,a){var s=this;s.r1=e,s.r2=t,s.g1=n,s.g2=i,s.b1=r,s.b2=o,s.histo=a}function i(){this.vboxes=new t(function(e,t){return pv.naturalOrder(e.vbox.count()*e.vbox.volume(),t.vbox.count()*t.vbox.volume())})}function r(t){var n,i,r,o,a=1<<3*l,s=new Array(a);return t.forEach(function(t){i=t[0]>>u,r=t[1]>>u,o=t[2]>>u,n=e(i,r,o),s[n]=(s[n]||0)+1}),s}function o(e,t){var i,r,o,a=1e6,s=0,l=1e6,c=0,d=1e6,p=0;return e.forEach(function(e){i=e[0]>>u,r=e[1]>>u,o=e[2]>>u,a>i?a=i:i>s&&(s=i),l>r?l=r:r>c&&(c=r),d>o?d=o:o>p&&(p=o)}),new n(a,s,l,c,d,p,t)}function a(t,n){function i(e){var t,i,r,o,a,s=e+"1",u=e+"2",c=0;for(l=n[s];l<=n[u];l++)if(h[l]>f/2){for(r=n.copy(),o=n.copy(),t=l-n[s],i=n[u]-l,a=i>=t?Math.min(n[u]-1,~~(l+i/2)):Math.max(n[s],~~(l-1-t/2));!h[a];)a++;for(c=m[a];!c&&h[a-1];)c=m[--a];return r[u]=a,o[s]=r[u]+1,[r,o]}}if(n.count()){var r=n.r2-n.r1+1,o=n.g2-n.g1+1,a=n.b2-n.b1+1,s=pv.max([r,o,a]);if(1==n.count())return[n.copy()];var l,u,c,d,p,f=0,h=[],m=[];if(s==r)for(l=n.r1;l<=n.r2;l++){for(d=0,u=n.g1;u<=n.g2;u++)for(c=n.b1;c<=n.b2;c++)p=e(l,u,c),d+=t[p]||0;f+=d,h[l]=f}else if(s==o)for(l=n.g1;l<=n.g2;l++){for(d=0,u=n.r1;u<=n.r2;u++)for(c=n.b1;c<=n.b2;c++)p=e(u,l,c),d+=t[p]||0;f+=d,h[l]=f}else for(l=n.b1;l<=n.b2;l++){for(d=0,u=n.r1;u<=n.r2;u++)for(c=n.g1;c<=n.g2;c++)p=e(u,c,l),d+=t[p]||0;f+=d,h[l]=f}return h.forEach(function(e,t){m[t]=f-e}),i(s==r?"r":s==o?"g":"b")}}function s(e,n){function s(e,t){for(var n,i=1,r=0;c>r;)if(n=e.pop(),n.count()){var o=a(l,n),s=o[0],u=o[1];if(!s)return;if(e.push(s),u&&(e.push(u),i++),i>=t)return;if(r++>c)return}else e.push(n),r++}if(!e.length||2>n||n>256)return!1;var l=r(e),u=0;l.forEach(function(){u++});var p=o(e,l),f=new t(function(e,t){return pv.naturalOrder(e.count(),t.count())});f.push(p),s(f,d*n);for(var h=new t(function(e,t){return pv.naturalOrder(e.count()*e.volume(),t.count()*t.volume())});f.size();)h.push(f.pop());s(h,n-h.size());for(var m=new i;h.size();)m.push(h.pop());return m}var l=5,u=8-l,c=1e3,d=.75;return n.prototype={volume:function(e){var t=this;return(!t._volume||e)&&(t._volume=(t.r2-t.r1+1)*(t.g2-t.g1+1)*(t.b2-t.b1+1)),t._volume},count:function(t){var n=this,i=n.histo;if(!n._count_set||t){var r,o,a,s=0;for(r=n.r1;r<=n.r2;r++)for(o=n.g1;o<=n.g2;o++)for(a=n.b1;a<=n.b2;a++)index=e(r,o,a),s+=i[index]||0;n._count=s,n._count_set=!0}return n._count},copy:function(){var e=this;return new n(e.r1,e.r2,e.g1,e.g2,e.b1,e.b2,e.histo)},avg:function(t){var n=this,i=n.histo;if(!n._avg||t){var r,o,a,s,u,c=0,d=1<<8-l,p=0,f=0,h=0;for(o=n.r1;o<=n.r2;o++)for(a=n.g1;a<=n.g2;a++)for(s=n.b1;s<=n.b2;s++)u=e(o,a,s),r=i[u]||0,c+=r,p+=r*(o+.5)*d,f+=r*(a+.5)*d,h+=r*(s+.5)*d;c?n._avg=[~~(p/c),~~(f/c),~~(h/c)]:n._avg=[~~(d*(n.r1+n.r2+1)/2),~~(d*(n.g1+n.g2+1)/2),~~(d*(n.b1+n.b2+1)/2)]}return n._avg},contains:function(e){var t=this,n=e[0]>>u;return gval=e[1]>>u,bval=e[2]>>u,n>=t.r1&&n<=t.r2&&gval>=t.g1&&gval<=t.g2&&bval>=t.b1&&bval<=t.b2}},i.prototype={push:function(e){this.vboxes.push({vbox:e,color:e.avg()})},palette:function(){return this.vboxes.map(function(e){return e.color})},size:function(){return this.vboxes.size()},map:function(e){for(var t=this.vboxes,n=0;n<t.size();n++)if(t.peek(n).vbox.contains(e))return t.peek(n).color;return this.nearest(e)},nearest:function(e){for(var t,n,i,r=this.vboxes,o=0;o<r.size();o++)n=Math.sqrt(Math.pow(e[0]-r.peek(o).color[0],2)+Math.pow(e[1]-r.peek(o).color[1],2)+Math.pow(e[2]-r.peek(o).color[2],2)),
(t>n||void 0===t)&&(t=n,i=r.peek(o).color);return i},forcebw:function(){var e=this.vboxes;e.sort(function(e,t){return pv.naturalOrder(pv.sum(e.color),pv.sum(t.color))});var t=e[0].color;t[0]<5&&t[1]<5&&t[2]<5&&(e[0].color=[0,0,0]);var n=e.length-1,i=e[n].color;i[0]>251&&i[1]>251&&i[2]>251&&(e[n].color=[255,255,255])}},{quantize:s}}();define("lib/color-thief/dist/color-thief.min",function(){}),ColorThief.prototype.getPalette=function(e,t,n){"undefined"==typeof t&&(t=10),("undefined"==typeof n||n<1)&&(n=10);var i=new CanvasImage(e),r=i.getImageData();if(!r)return null;for(var o,a,s,l,u,c=r.data,d=i.getPixelCount(),p=[],f=0;f<d;f+=n)o=4*f,a=c[o+0],s=c[o+1],l=c[o+2],u=c[o+3],u>=125&&(a>255&&s>255&&l>255||p.push([a,s,l]));var h=MMCQ.quantize(p,t),m=h?h.palette():null;return i.removeCanvas(),m},CanvasImage.prototype.getImageData=function(){var e=null;try{e=this.context.getImageData(0,0,this.width,this.height)}catch(t){e=null}return e},define("storymaps/common/utils/ColorThiefOverrides",function(){}),define("storymaps-react/tpl/view/media/builder/TabBackground",["module","exports","./Tab","./../Media","lib-build/hbars!./TabBackground","dojo/sniff","storymaps-react/common/builder/ColorPicker","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common","lib/color-thief/dist/color-thief.min","storymaps/common/utils/ColorThiefOverrides"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},_=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=g.default.builder.mediaConfig.tabs.background,n.type="background",n.icon="fa-arrows-alt",n.placement=null,n.focusDot=null,n.previewThumbnail=null,n.checkbox=null,n.responsivePreview=null,n.colorPickerTrigger=null,n.colorPickerThumbnail=null,n.sectionType=e.sectionType,n.imageUrl="",n.colors=null,n}return d(t,e),b(t,[{key:"render",value:function(){var e=(0,m.default)("safari");return(0,h.default)({isTitle:"title"===this.sectionType,isImmersive:"immersive"===this.sectionType,strings:g.default.builder.mediaConfig.background,isSafari:e})}},{key:"postCreate",value:function(e){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.imageUrl=e.media.url?f.default.addToken(e.media.url):"",this.placement=e.media.options.placement||{type:"fill",fit:{color:""},fill:{x:.5,y:.5}},this.placement.fit||(this.placement.fit={color:""}),this.placement.fill||(this.placement.fill={x:.5,y:.5}),this.setConfig("placement",this.placement),this.focusDot=this._node.find(".overview-dot"),this.previewThumbnail=this._node.find(".overview-thumbnail"),this.checkbox=this._node.find("input.fit-fill"),this.responsivePreview=this._node.find(".responsive-preview"),this.colorPickerTrigger=this._node.find(".color-picker-icons"),this.colorPickerThumbnail=this._node.find(".fit-color-picker-color"),this._applyInitialUI(),this._node.find('[data-toggle="tooltip"]').tooltip(),this._node.closest(".config-content").addClass("placement-config"),this._initColorPicker(),this.addEvents()}},{key:"_applyInitialUI",value:function(){var e="content-hidden";this.responsivePreview.css("background-image","url('"+this.imageUrl+"')"),this.previewThumbnail.attr("src",this.imageUrl),this.focusDot.css("left",100*this.placement.fill.x+"%"),this.focusDot.css("top",100*this.placement.fill.y+"%"),this._getColorPalette(),"fill"===this.placement.type?(this.checkbox.prop("checked",!1),this._node.find('.section-content[data-mode="fit"]').addClass(e),this._node.find('.section-content[data-mode="fill"]').removeClass(e)):(this.checkbox.prop("checked",!0),this._node.find('.section-content[data-mode="fill"]').addClass(e),this._node.find('.section-content[data-mode="fit"]').removeClass(e)),this._loadPreviewFrames()}},{key:"_loadPreviewFrames",value:function(){var e=this,t="resources/tpl/builder/icons/media-config/previewLandscape.png",n=new Image,i=!1,r=!1;n.onload=function(){i=!0,i&&r&&e._applyResponsivePreview()},n.onerror=function(){},n.src=t;var o="resources/tpl/builder/icons/media-config/previewPortrait.png",a=new Image;a.onload=function(){r=!0,i&&r&&e._applyResponsivePreview()},a.onerror=function(){},a.src=o}},{key:"_showFitLoading",value:function(){this._node.find(".content-pane.fit-content").hide(),this._node.find(".content-pane.fit-loading").show()}},{key:"_hideFitLoading",value:function(){this._node.find(".content-pane.fit-loading").hide(),this._node.find(".content-pane.fit-content").show()}},{key:"_getColorPalette",value:function(){var e=this;if(!this.colors){this._showFitLoading();var t=new Image;t.onload=function(){e._onImageLoaded(t)},t.onerror=this._onImageError.bind(this),t.crossOrigin="anonymous";var n=this.imageUrl;if(this.imageUrl.indexOf(".unsplash.com")!==-1){var i="?";this.imageUrl.indexOf("?")!==-1&&(i="&"),n=this.imageUrl+i+"storymapsCacheBust="+Date.now()}t.src=n}}},{key:"_onImageLoaded",value:function(e){var t=10,n=10,i=new window.ColorThief;if(this.colors=i.getPalette(e,t,n),!this.colors)return void this._onImageError();if(this._hideFitLoading(),this._renderPalette(this._node.find(".fit-palette")),this._addPaletteEvents(),this.placement.fit&&!this.placement.fit.color){var r=this._node.find(".fit-palette-item:first-child");this._applyColor(r.css("background-color")),r.addClass("palette-selected")}}},{key:"_onImageError",value:function(){this._node.find(".fit-color-picker").removeClass("not-alone"),this._applyColorPickerColor("rgb(0,0,0)"),this._hideFitLoading()}},{key:"_initColorPicker",value:function(){var e=null,t=null;v.default.initPicker({element:this.colorPickerTrigger,color:this.placement.fit.color,appendTo:this._node.find(".fit-color-picker"),onShowCallback:function(){e=!1,t=this.placement.fit.color}.bind(this),onChangeCallback:function(){e=!0}.bind(this),onHideCallback:function(n){e?this._applyColorPickerColor(n):this._applyColorPickerColor(t)}.bind(this),onMoveCallback:function(e){this._applyColorPickerColor(e)}.bind(this)}),this.colorPickerThumbnail.css("background-color",this.placement.fit.color)}},{key:"_applyColorPickerColor",value:function(e){this._applyColor(e),this.colorPickerThumbnail.css("background-color",e),this.colorPickerThumbnail.css("visibility","visible")}},{key:"_renderPalette",value:function(e){var t="";this.placement.fit&&this.placement.fit.color&&(t=this.placement.fit.color.replace(/ |;/g,"")),e.empty();for(var n=0;n<this.colors.length;n++){var i=this.colors[n],r="",o="rgb("+i.join(",")+")";o===t&&(r="palette-selected",this.colorPickerThumbnail.css("visibility","hidden")),e.append('<li class="fit-palette-item '+r+'" style="background-color:'+o+';"></li>')}}},{key:"_addPaletteEvents",value:function(){var e=this,t=this._node.find(".fit-palette-item");t.on("click",function(t){var n=$(t.currentTarget).css("background-color");e._applyColor(n),$(t.currentTarget).addClass("palette-selected")})}},{key:"_applyColor",value:function(e){var t=this._node.find(".fit-palette-item");t.removeClass("palette-selected"),this.colorPickerThumbnail.css("visibility","hidden"),this.colorPickerTrigger.spectrum("set",e),this.placement.fit={color:e},this.setConfig("placement",this.placement),this._applyResponsivePreview()}},{key:"addEvents",value:function(){var e=this,t=this._node.find(".overview-thumbnail-pane");this.checkbox.on("click",function(){e._onCheckboxClicked()}),this.previewThumbnail.on("click",function(t){e._onThumbnailClicked(t)}),this.focusDot.on("mousedown",function(){t.on("mousemove",function(t){e._onDotDragged(t)})}),t.on("mouseup mouseleave",function(){t.off("mousemove")})}},{key:"_onCheckboxClicked",value:function(){var e="content-hidden";"fill"===this.placement.type?(this._node.find('.section-content[data-mode="fill"]').addClass(e),this._node.find('.section-content[data-mode="fit"]').removeClass(e),this.placement.type="fit"):(this._node.find('.section-content[data-mode="fit"]').addClass(e),this._node.find('.section-content[data-mode="fill"]').removeClass(e),this.placement.type="fill"),this.setConfig("placement",this.placement),this._applyResponsivePreview()}},{key:"_applyResponsivePreview",value:function(){var e=this;if("fill"===this.placement.type){var t={width:this._media.width,height:this._media.height};this.responsivePreview.each(function(n,i){var r=$(i),o={width:r.width(),height:r.height()},a=f.default.getTargetDimensions(t,o),s=f.default.findCropDistance(a,r,e.placement.fill);r.css("background-position",s.x+"px "+s.y+"px")}),this.responsivePreview.css("background-size","cover")}else this.responsivePreview.css("background-color",this.placement.fit.color),this.responsivePreview.css("background-size","contain"),this.responsivePreview.css("background-position","50% 50%")}},{key:"_onThumbnailClicked",value:function(e){var t=e.pageX-this.previewThumbnail.offset().left,n=e.pageY-this.previewThumbnail.offset().top,i=t/this.previewThumbnail.width(),r=n/this.previewThumbnail.height();this._applyCrop(i,r)}},{key:"_onDotDragged",value:function(e){var t=e.pageX-this.previewThumbnail.offset().left,n=e.pageY-this.previewThumbnail.offset().top,i=this.previewThumbnail.offset().left+this.previewThumbnail.width(),r=this.previewThumbnail.offset().top+this.previewThumbnail.height();t<0&&(t=0),n<0&&(n=0),e.pageX>i&&(t=this.previewThumbnail.width()),e.pageY>r&&(n=this.previewThumbnail.height());var o=t/this.previewThumbnail.width(),a=n/this.previewThumbnail.height();this._applyCrop(o,a)}},{key:"_applyCrop",value:function(e,t){var n=100*e,i=100*t;this.focusDot.css("left",n+"%"),this.focusDot.css("top",i+"%");var r={x:e,y:t};this.placement.fill=r,this.setConfig("placement",this.placement),this._applyResponsivePreview()}},{key:"beforePanelDestroy",value:function(){"fill"===this.placement.type?delete this.placement.fit:delete this.placement.fill,this.setConfig("placement",this.placement)}},{key:"destroy",value:function(){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.checkbox.off("click"),this.previewThumbnail.off("click"),this.focusDot.off("mousedown"),this.focusDot.off("mouseup mouseleave"),this._node.find(".fit-palette-item").off("click"),this._node.find('[data-toggle="tooltip"]').tooltip("destroy"),this.colorPickerTrigger.spectrum("destroy"),this._node.closest(".config-content").removeClass("placement-config"),this.colors=null}}]),t}(p.default);t.default=_,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageImage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="swap">\r\n      <img class="edit-media-icon" src="resources/tpl/builder/icons/media-config/edit-media.png" />\r\n      '+a(o(null!=(r=null!=e?e.strings:e)?r.changeMedia:r,e))+'\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section centered">\r\n  <div class="section-content button centered">\r\n    <div class="config-item button btn btn-bw" data-action="remove">\r\n      <i class="config-icon fa fa-trash-o"></i>\r\n      '+a(o(null!=(r=null!=e?e.strings:e)?r.remove:r,e))+"\r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageImage",["module","exports","./Tab","lib-build/hbars!./TabManageImage","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=d.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n}return l(t,e),p(t,[{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){this._onAction("remove")}.bind(this)),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}},{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.manage})}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabSectionAppearance",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section section-appearance no-spread larger">\r\n  <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.theme:r,e))+'</h4>\r\n  <ul class="section-content horizontal section-appearance-container">\r\n    <li class="config-item" data-type="style" data-value="shadow-light" data-shadow="true" data-text="light">\r\n      <div class="config-item">\r\n        <i class="check-mark fa fa-check active"></i>\r\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/shadowTextLight.png"/>\r\n      </div>\r\n    </li>\r\n    <li class="config-item" data-type="style" data-value="shadow-dark" data-shadow="true" data-text="dark">\r\n      <div class="config-item">\r\n        <i class="check-mark fa fa-check active"></i>\r\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/shadowTextDark.png"/>\r\n      </div>\r\n    </li>\r\n    <li class="config-item" data-type="style" data-value="background-dark" data-background="dark" data-text="light">\r\n      <div class="config-item">\r\n        <i class="check-mark fa fa-check active"></i>\r\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/backgroundDark.png"/>\r\n      </div>\r\n    </li>\r\n    <li class="config-item" data-type="style" data-value="background-light" data-background="light" data-text="dark">\r\n      <div class="config-item">\r\n        <i class="check-mark fa fa-check active"></i>\r\n        <img class="config-image" src="resources/tpl/builder/icons/media-config/backgroundLight.png"/>\r\n      </div>\r\n    </li>\r\n  </ul>\r\n</div>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabSectionAppearance",["module","exports","./Tab","lib-build/hbars!./TabSectionAppearance","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=d.default.builder.mediaConfig.tabs.appearance,n.type="section-appearance",n.icon="fa-magic",n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.sectionAppearance})}},{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var i=this._node.find('.config-item[data-type="style"]'),r=this._getTitleStyle();this._node.find('.config-item[data-value="'+r+'"]').addClass(this.selectedClass),i.on("click",function(e){var t=$(e.currentTarget),r={shadow:!!t.data("shadow"),text:t.data("text"),background:t.data("background")||null};n.setSectionConfig("titleStyle",r),i.removeClass(n.selectedClass),t.addClass(n.selectedClass)})}},{key:"_getTitleStyle",value:function(){var e=this._sectionOptions.titleStyle;return e?e.background?"dark"===e.background?"background-dark":"background-light":e.shadow&&"dark"===e.text?"shadow-dark":"shadow-light":"background-light"}},{key:"beforePanelDestroy",value:function(){}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/notification/Notification",[],function(){}),define("storymaps-react/tpl/builder/notification/Notification",["module","exports","storymaps/tpl/utils/UI","dojo/Deferred","lib-build/less!./Notification"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){o(this,e),this._id=a.default.getUID(),this._container=$(".notification-container"),this._label=t.label,this._positionTop=t.positionTop,this._resultDeferred=null,this._node=null}return l(e,[{key:"display",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this._resultDeferred=new s.default,this._container&&this._label?(e.clearPreviousUndo&&this._container.empty(),this._container.append(this.render()),this._node=$("#"+this._id),this._node.fadeIn(),this.postCreate(),this._resultDeferred):(this._resultDeferred.reject(),this._resultDeferred)}},{key:"update",value:function(e){this._label=e.label,this._node&&(this._node.replaceWith(this.render()),this._node=$("#"+this._id),this._node.show(),this.postCreate())}}]),e}();t.default=u,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/builder/notification/Cancel",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return"has-notification-btn"},3:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'      <button class="btn btn-primary btn-sm btn-cancel">'+s((r=null!=(r=t.labelCancel||(null!=e?e.labelCancel:e))?r:a,typeof r===o?r.call(e,{name:"labelCancel",hash:{},data:i}):r))+"</button>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="builder-notification notification-cancel ';return r=t.if.call(e,null!=e?e.displayCancel:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='">\r\n  <div class="alert alert-dismissible" role="alert">\r\n    '+l((o=null!=(o=t.label||(null!=e?e.label:e))?o:s,typeof o===a?o.call(e,{name:"label",hash:{},data:i}):o))+"\r\n",r=t.if.call(e,null!=e?e.displayCancel:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=r&&(u+=r),u+'    <button type="button" class="close" data-dismiss="alert" aria-label="'+l((o=null!=(o=t.labelClose||(null!=e?e.labelClose:e))?o:s,typeof o===a?o.call(e,{name:"labelClose",hash:{},data:i}):o))+'">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n    <div class="info-icon">\r\n      <i class="fa fa-info-circle" aria-hidden="true"></i>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/builder/notification/Cancel",[],function(){}),define("storymaps-react/tpl/builder/notification/Cancel",["module","exports","./Notification","lib-build/hbars!./Cancel","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Cancel"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=5e3,m=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._type="start",n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({id:this._id,label:this._label,displayCancel:"start"==this._type,labelCancel:d.default.builder.notification.cancel,labelClose:d.default.builder.notification.close})}},{key:"update",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._type=e.type,f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this,e)}},{key:"postCreate",value:function(){this._initEvents()}},{key:"_initEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delay||h;"start"!=this._type&&setTimeout(function(){this._node.fadeOut({complete:function(){this._node.remove()}.bind(this)}),this._resultDeferred.reject()}.bind(this),t),this._node.find(".btn-cancel").click(function(){this._node.remove(),this._resultDeferred.resolve()}.bind(this))}}]),t}(u.default);t.default=m,e.exports=t.default}),define("storymaps-react/tpl/builder/Issues",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={maps:{deleted:"maps/deleted",inaccessible:"maps/inaccessible",unauthorized:"maps/unauthorized",unshared:"maps/unshared",othersUnshared:"maps/othersUnshared"},content:{unshared:"content/unshared",othersUnshared:"content/othersUnshared"},layers:{deleted:"layers/deleted",inaccessible:"layers/inaccessible",unauthorized:"layers/unauthorized",unshared:"layers/unshared",othersUnshared:"layers/othersUnshared",premiumContent:"layers/premiumContent",subscriptionContent:"layers/subscriptionContent",secureService:"layers/secureService"},images:{inaccessible:"images/inaccessible"},videos:{inaccessible:"videos/inaccessible"}},e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/ImageBuilder",[],function(){}),define("storymaps-react/tpl/view/media/ImageBuilder",["module","exports","./Image","lib-build/i18n!resources/tpl/builder/nls/app","./builder/Panel","./builder/TabSizeImage","./builder/TabBackground","./builder/TabManageImage","./builder/TabSectionAppearance","../../builder/notification/Cancel","dojo/_base/lang","dojo/topic","../../builder/Issues","lib-build/less!./ImageBuilder"],function(e,t,n,i,r,o,a,s,l,u,c,d,p){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=f(n),b=f(i),y=f(r),_=f(o),w=f(a),C=f(s),E=f(l),k=f(u),T=f(c),x=f(d),S=f(p),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},I=b.default.builder,M=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._uploadNotification=null,n}return v(t,e),P(t,[{key:"postCreate",value:function(e){if(O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._image.isPlaceholder)this._node.find(".media-cfg-invite").hide();else{var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._builderConfigurationTabs[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"size"==l?n.push(new _.default):"section-appearance"==l?n.push(new E.default({sectionOptions:e.foregroundOptions,onSectionChange:e.applySectionConfig})):"background"==l?n.push(new w.default({sectionType:e.sectionType})):"manage"==l&&n.push(new C.default({hideRemove:"background"==this._placement}))}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}new y.default({containerMedia:this._node,tabs:n,media:this._image,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){e.onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"}),this._node.find(".img-gallery-invite").click(this._onCreateImageGallery.bind(this)),this._node.find(".img-gallery-add").tooltip({container:"body",title:I.imageGallery.addImage})}x.default.subscribe("scan/images/"+this._image.url,T.default.hitch(this,this.checkErrors)),this.initBuilderUI()}},{key:"checkErrors",value:function(e){var t=this.mapErrors(e);if(!t)return void this.removeError();var n=this.isUnfixableError(t);return n?void this.setError(n):void this.setError({errors:e.errors})}},{key:"isUnfixableError",value:function(e){var t=I.mediaErrors;return e.indexOf(S.default.images.inaccessible)>=0&&{msg:t.placeholders.inaccessible.replace("${media-type}",t.mediaTypes.image),unfixable:!0,showLoadingError:!0}}},{key:"serialize",value:function(){return this._image.uploadDeferred&&delete this._image.uploadDeferred,this._node&&(this._image.caption=this._node.find(".block-caption").html()),T.default.clone({type:"image",image:this._image})}},{key:"_onConfigChange",value:function(){this._applyConfig(),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}},{key:"_onUploadStart",value:function(){this._uploadNotification=new k.default({container:this._node.parents(".section").eq(0),label:I.media.imageUpload}),this._node.find(".img-gallery-invite").addClass("disabled"),this._uploadNotification.display().then(function(){this._onAction("remove")}.bind(this),function(){})}},{key:"_onUploadSuccess",value:function(e){this._image.url=e.url,this._url=e.url,e.thumbUrl&&(this._image.thumbUrl=e.thumbUrl,this.previewThumb=e.thumbUrl),this._image.dataUrl&&(this._image.dataUrl=null),this._uploadNotification&&this._uploadNotification.update({type:"success",label:I.media.imageUploadSuccess}),this._isLoaded=!1,this.preload().then(this.load.bind(this)),x.default.publish("builder-media-update"),this._node.find(".img-gallery-invite").removeClass("disabled")}},{key:"_onUploadFail",value:function(){this._uploadNotification&&this._uploadNotification.update({type:"error",label:I.media.imageUploadFail}),"block"==this._placement?this._onAction("remove"):this._onAction("swap",{type:"empty",empty:"empty"})}},{key:"_onCreateImageGallery",value:function(){this._onAction("image-to-image-gallery")}}]),t}(g.default);t.default=M,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/ImageGalleryBuilder",[],function(){}),define("storymaps-react/tpl/view/media/ImageGalleryBuilder",["module","exports","./Media","./ImageGallery","lib-build/i18n!resources/tpl/builder/nls/app","../../builder/notification/Cancel","dojo/_base/lang","dojo/topic","../../builder/Issues","lib-build/less!./ImageGalleryBuilder"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},C=function(e){function t(e){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return p(t,e),_(t,[{key:"postCreate",value:function(e){var n=this,i=w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);return i.promise.then(function(){if(2==n._images.images.length){var e=n._images.images[1];if(e.dataUrl&&e.uploadDeferred)n._addImageAtIndex(e,1);else{var t=app.data.appItem.item.id;t&&e.url&&e.url.match(t+"/resources")&&n._addImageAtIndex(e,1)}}}),i}},{key:"getPreviewThumbnail",value:function(){if(this._images.images&&this._images.images.length){var e=this._images.images[0];return e.previewThumb?f.default.addToken(e.previewThumb):f.default.addToken(e.url)}return null}},{key:"addEditEvent",value:function(){var e=this;this._node.find(".ig-settings").off("click").on("click",function(t){var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index();e._openMediaPickerForIndex(i)})}},{key:"addAddEvent",value:function(){var e=this;this._node.find(".ig-add").off("click").on("click",function(t){var n=e._images.images.length,i=$(t.currentTarget);i.hasClass("disabled")||e._openMediaPickerForIndex(n)})}},{key:"_openMediaPickerForIndex",value:function(e){var t=this;app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(n){"image"===n.type&&t._addImageAtIndex(n.image,e)},function(){})}},{key:"_addImageAtIndex",value:function(e,t){var n=e.url;e.dataUrl&&e.uploadDeferred?(e.uploadDeferred.then(function(e){this._onUploadSuccess(e.url,t)}.bind(this),function(){this._onUploadFail(t)}.bind(this)),this._images.images[t]={url:n,dataUrl:e.dataUrl},this._onUploadStart(t)):this._loadImage(n,t)}},{key:"_loadImage",value:function(e,t){var n=this,i=new window.Image;i.onload=function(i){var r=i.currentTarget.naturalWidth,o=i.currentTarget.naturalHeight;r&&o&&(n._images.images[t]={height:o,width:r,url:e},n._update())},i.src=f.default.addToken(e)}},{key:"_onUploadStart",value:function(e){this._uploadNotification=new v.default({label:m.default.builder.media.imageUpload}),this._uploadNotification.display().then(function(){this._images.images.splice(e,1),this._update()}.bind(this),function(){})}},{key:"_onUploadSuccess",value:function(e,t){this._uploadNotification&&this._uploadNotification.update({type:"success",label:m.default.builder.media.imageUploadSuccess}),b.default.publish("builder-media-update"),this._loadImage(e,t)}},{key:"_onUploadFail",value:function(e){this._uploadNotification&&this._uploadNotification.update({type:"error",label:m.default.builder.media.imageUploadFail}),this._images.images.splice(e,1),this._update()}},{key:"addRemoveEvent",value:function(){var e=this;this._node.find(".ig-remove").off("click").on("click",function(t){var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index();return e._images.images.splice(i,1),1==e._images.images.length?void e._onAction("image-gallery-to-image"):void e._update()})}},{key:"addReorderEvent",value:function(){var e=this;this._node.find(".ig-move-backward").on("click",function(t){$(t.currentTarget).closest(".ig-move").tooltip("hide");var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index(),r=e._images.images[i];e._images.images[i]=e._images.images[i-1],e._images.images[i-1]=r,e._update()}),this._node.find(".ig-move-forward").on("click",function(t){$(t.currentTarget).closest(".ig-move").tooltip("hide");var n=$(t.currentTarget).closest(".ug-thumb-wrapper"),i=n.index(),r=e._images.images[i];e._images.images[i]=e._images.images[i+1],e._images.images[i+1]=r,e._update()})}},{key:"_update",value:function(){var e=this;b.default.publish("builder-media-update");var t=400,n=this._node.find(".image-gallery-wrapper");this._fadeOutGallery(n),window.setTimeout(function(){var t=n.outerHeight();e._destroyGallery(),e._injectNewGallery(t);var i=e._node.find(".image-gallery-wrapper"),r=e._node.find(".ig-temp-placeholder");e._isLoaded=!1;var o=e.load();o&&o.then(function(){e._fadeInGallery(i,r)})},t)}},{key:"_fadeOutGallery",value:function(e){e.removeClass("show-me"),e.addClass("hide-me")}},{key:"_injectNewGallery",value:function(e){this._node.html(this._render(!1));var t=this._node.find(".image-gallery-wrapper");t.css("display","none"),t.css("opacity",0);var n=this._node.find(".ig-temp-placeholder");n.height(e),n.css("display","block")}},{key:"_fadeInGallery",value:function(e,t){b.default.publish("builder-should-check-story"),e.css("display","block"),t.css("display","none"),e.removeClass("hide-me"),e.addClass("show-me")}},{key:"_destroyGallery",value:function(){this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-backward").tooltip("destroy"),this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-forward").tooltip("destroy"),this._node.find(".ig-add").tooltip("destroy"),this._gallery&&this._gallery.destroy()}},{key:"_addBuilderEvents",value:function(){this.addRemoveEvent(),this.addEditEvent(),this.addAddEvent(),this.addReorderEvent(),this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-backward").tooltip({container:"body",title:m.default.builder.imageGallery.moveBackward}),this._node.find(".ug-thumb-wrapper .ig-move.ig-direction-forward").tooltip({container:"body",title:m.default.builder.imageGallery.moveForward}),this._node.find(".ug-thumb-wrapper").hover(function(e){$(e.currentTarget).find(".builder-ui.ig-item").removeClass("hidden")},function(e){$(e.currentTarget).find(".builder-ui.ig-item").addClass("hidden")})}},{key:"load",value:function(){return w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"load",this).call(this)}},{key:"_onGalleryLoaded",value:function(){var e=this;w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onGalleryLoaded",this).call(this);var n=this._node.find(".ig-add");n.removeClass("disabled"),n.tooltip({container:"body",title:m.default.builder.imageGallery.addImage}),this._addBuilderEvents();var i=!0,r=!1,o=void 0;try{for(var a,s=function(){var t=a.value;b.default.subscribe("scan/images/"+t.url,function(n){var i=e._images.images.findIndex(function(e){return e.url===t.url});e.checkErrors(n,i)})},l=this._images.images[Symbol.iterator]();!(i=(a=l.next()).done);i=!0)s()}catch(e){r=!0,o=e}finally{try{!i&&l.return&&l.return()}finally{if(r)throw o}}}},{key:"checkErrors",value:function(e,t){var n=this.mapErrors(e);if(!n)return void this.removeError();var i=this.isUnfixableError(n,t);return i?void this.setError(i):void this.setError({errors:e.errors})}},{key:"isUnfixableError",value:function(e,t){var n=m.default.builder.mediaErrors;return e.indexOf(y.default.images.inaccessible)>=0&&{msg:n.placeholders.inaccessible.replace("${media-type}",n.mediaTypes.image),unfixable:!0,showLoadingError:!0,galleryIndex:t}}},{key:"serialize",value:function(){this._node&&(this._images.caption=this._node.find(".block-caption").html());var e=!0,t=!1,n=void 0;try{for(var i,r=this._images.images[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;delete o.dataUrl,delete o.adjustedHeight}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}return g.default.clone({type:"image-gallery","image-gallery":this._images})}}]),t}(h.default);t.default=C,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabVideo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<!--\r\n<div class="builder-config-section larger">\r\n  <h4 class="title">Play</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray" data-type="play" data-value="automatic">Play Automatically</li>\r\n    <li class="config-item btn btn-gray" data-type="play" data-value="click">Play on Click</li>\r\n  </ul>\r\n</div>\r\n-->\r\n<div class="builder-config-section">\r\n  <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.audio:r,e))+'</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray" data-type="audio" data-value="on">'+a(o(null!=(r=null!=e?e.strings:e)?r.on:r,e))+'</li>\r\n    <li class="config-item btn btn-gray" data-type="audio" data-value="muted">'+a(o(null!=(r=null!=e?e.strings:e)?r.muted:r,e))+'</li>\r\n  </ul>\r\n  <span class="aside">'+a(o(null!=(r=null!=e?e.strings:e)?r.volumeAside:r,e))+"</span>\r\n</div>\r\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabVideo",["module","exports","./Tab","lib-build/hbars!./TabVideo","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.title=d.default.builder.mediaConfig.tabs.appearance,e.type="appearance",e.icon="fa-sliders",e}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.appearance})}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindPlayOptions(),this.bindAudioOptions()}},{key:"bindPlayOptions",value:function(){var e=this,t=this._node.find('.config-item[data-type="play"]'),n=this._media.play||"automatic";this._node.find('.config-item[data-type="play"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("play",r)})}},{key:"bindAudioOptions",value:function(){var e=this,t=this._node.find('.config-item[data-type="audio"]'),n=this._media.options&&this._media.options.audio||"on";this._node.find('.config-item[data-type="audio"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("audio",r)})}},{key:"unbindPlayOptions",value:function(){var e=this._node.find('.config-item[data-type="play"]');e.off("click")}},{key:"unbindAudioOptions",value:function(){var e=this._node.find('.config-item[data-type="audio"]');e.off("click")}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindPlayOptions(),this.unbindAudioOptions()}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageMedia",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<!--<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="upload-image">\r\n      Upload Alternate Image for Mobile\r\n    </div>\r\n    <div class="image-preview">\r\n      <div class="overlay">\r\n        <span class="icon">Edit</span>\r\n        <span class="icon">Remove</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>-->\r\n<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="swap">\r\n      <img class="edit-media-icon" src="resources/tpl/builder/icons/media-config/edit-media.png" />\r\n      '+a(o(null!=(r=null!=e?e.strings:e)?r.changeMedia:r,e))+'\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section centered">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="remove">\r\n      <i class="config-icon fa fa-trash-o"></i>\r\n      '+a(o(null!=(r=null!=e?e.strings:e)?r.remove:r,e))+"\r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageMedia",["module","exports","./Tab","lib-build/hbars!./TabManageMedia","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=d.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.manage})}},{key:"postCreate",value:function(e){var n=this;f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/VideoBuilder",[],function(){}),define("storymaps-react/tpl/view/media/VideoBuilder",["module","exports","./Video","./builder/Panel","./builder/TabSizeImage","./builder/TabVideo","./builder/TabManageMedia","./builder/TabSectionAppearance","dojo/_base/lang","dojo/topic","../../builder/Issues","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./VideoBuilder"],function(e,t,n,i,r,o,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=p(n),g=p(i),b=p(r),y=p(o),_=p(a),w=p(s),C=p(l),E=p(u),k=p(c),T=p(d),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},P=T.default.builder.mediaErrors,O=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),x(t,[{key:"render",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return"block"==e.placement&&this._video.title&&(this._video.caption=this._video.title),delete this._video.title,delete this._video.description,S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,e)}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._builderConfigurationTabs[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"size"==l?n.push(new b.default):"appearance"==l?"immersive"==this._sectionType&&n.push(new y.default):"section-appearance"==l?n.push(new w.default({sectionOptions:e.foregroundOptions,onSectionChange:e.applySectionConfig})):"manage"==l&&n.push(new _.default({hideRemove:"background"==this._placement}))}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}new g.default({containerMedia:this._node,tabs:n,media:this._video,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){e.onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"}),this.initBuilderUI(),E.default.subscribe("scan/videos/"+this._video.url,C.default.hitch(this,this.checkErrors))}},{key:"checkErrors",value:function(e){var t=this.mapErrors(e);if(!t)return void this.removeError();var n=this.isUnfixableError(t);return n?void this.setError(n):void this.setError({errors:e.errors})}},{key:"isUnfixableError",value:function(e){return e.indexOf(k.default.videos.inaccessible)>=0&&{msg:P.placeholders.inaccessible.replace("${media-type}",P.mediaTypes.video),showLoadingError:!0,unfixable:!0}}},{key:"serialize",value:function(){return delete this._video.user,delete this._video.thumbUrl,delete this._video.viewCount,delete this._video.likeCount,this._node&&(this._video.caption=this._node.find(".block-caption").html()),C.default.clone({type:"video",video:this._video})}},{key:"_onConfigChange",value:function(){console.log("onConfigChange: ",this._video),this._applyConfig(),S(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(v.default);t.default=O,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u=this.lambda;return'<!--<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="upload-image">\r\n      Upload Alternate Image for Mobile\r\n    </div>\r\n    <div class="image-preview">\r\n      <div class="overlay">\r\n        <span class="icon">Edit</span>\r\n        <span class="icon">Remove</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>-->\r\n\r\n<div class="webmap-name">'+l((o=null!=(o=t.mapName||(null!=e?e.mapName:e))?o:s,typeof o===a?o.call(e,{name:"mapName",hash:{},data:i}):o))+'</div>\r\n\r\n<div class="builder-config-section larger">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="swap">\r\n      <img class="edit-media-icon" src="resources/tpl/builder/icons/media-config/edit-media.png" />\r\n      '+l(u(null!=(r=null!=e?e.strings:e)?r.changeMedia:r,e))+'\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="edit">\r\n      <i class="config-icon fa fa-external-link"></i>\r\n      '+l(u(null!=(r=null!=e?e.strings:e)?r.edit:r,e))+'\r\n    </div>\r\n  </div>\r\n  <span class="aside">'+l(u(null!=(r=null!=e?e.strings:e)?r.editAside:r,e))+'</span>\r\n</div>\r\n<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="remove">\r\n      <i class="config-icon fa fa-trash-o"></i>\r\n      '+l(u(null!=(r=null!=e?e.strings:e)?r.remove:r,e))+"\r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("storymaps/common/builder/BuilderHelper",["dojo/_base/lang","dojo/_base/array","esri/arcgis/utils","esri/IdentityManager","esri/request"],function(e,t,n,i,r){function o(){return n.arcgisUrl.split("/sharing/")[0]}function a(t){var n=o(),a=e.clone(app.data.appItem.item),s=e.clone(app.data.appItem.data),l=a.owner||i.findCredential(n).userId,u=i.findCredential(n).token;delete a.avgRating,delete a.modified,delete a.numComments,delete a.numRatings,delete a.numViews,delete a.size,a.typeKeywords||(a.typeKeywords=[]),a.typeKeywords=a.typeKeywords.concat(app.cfg.WEBAPP_KEYWORD_APP),a.typeKeywords=a.typeKeywords.concat(app.cfg.WEBAPP_KEYWORD_GENERIC);var c=$.map(app.cfg.LAYOUTS,function(e){return"layout-"+e.id});a.typeKeywords=$.grep(a.typeKeywords,function(e){return $.inArray(e,c)==-1}),a.typeKeywords.push("layout-cascade-1"),a.typeKeywords=$.grep(a.typeKeywords,function(e,t){return t==$.inArray(e,a.typeKeywords)}),a.tags=a.tags?a.tags.join(","):"",a.typeKeywords=a.typeKeywords.join(","),a.serviceProxyParams=JSON.stringify(a.serviceProxyParams),t||(a.title=app.data.title),a.properties&&(a.properties=JSON.stringify(a.properties)),a.url&&a.url.match(/apps\/[a-zA-Z]+\/\?appid=/)&&(a.url=a.url.replace("/?appid=","/index.html?appid=")),a=e.mixin(a,{f:"json",token:u,overwrite:!0,text:JSON.stringify(s)});var d=n+"/sharing/content/users/"+l+(a.ownerFolder?"/"+a.ownerFolder:"");return d+=a.id?"/items/"+a.id+"/update":"/addItem",r({url:d,handleAs:"json",content:a},{usePost:!0})}function s(){if(!app.portal)return void console.error("Fatal error - not signed in")}function l(){return{itemType:"text",guid:null,name:null,type:"Web Mapping Application",typeKeywords:app.cfg.WEBAPP_KEYWORD_GENERIC.concat(app.cfg.WEBAPP_KEYWORD_APP),description:null,tags:app.cfg.WEBAPP_TAG,snippet:null,thumbnail:null,documentation:null,extent:[],lastModified:-1,spatialReference:null,accessInformation:null,licenseInfo:null,culture:"en-us",properties:null,size:1,appCategories:[],industries:[],languages:[],largeThumbnail:null,banner:null,screenshots:[],listed:!1,ownerFolder:null,protected:!1,commentsEnabled:!0,numComments:0,numRatings:0,avgRating:0,numViews:1}}function u(e){return this.getPortalURL()+"/home/webmap/viewer.html?webmap="+e}function c(e){return this.getPortalURL()+"/home/webscene/viewer.html?webscene="+e}function d(){return app.isPortal?this.getPortalURL()+"/apps/MyStories/":"//storymaps.arcgis.com/en/my-stories/"}return{getPortalURL:o,saveApp:a,getBlankAppJSON:l,cleanApp:s,getMapViewerLink:u,getSceneViewerLink:c,getMyStoriesURL:d}}),define("storymaps-react/tpl/view/media/builder/TabManage",["module","exports","./Tab","lib-build/hbars!./TabManage","lib-build/i18n!resources/tpl/builder/nls/app","storymaps/common/builder/BuilderHelper","lib-build/less!./Common"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=p.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n.mapName=e.mapName,n._mediaType=e.mediaType,n._mediaId=e.mediaId,n}return u(t,e),h(t,[{key:"setMapName",value:function(e){this.mapName=e,this._node&&this.updateMapName()}},{key:"updateMapName",value:function(){this._node.find(".webmap-name").text(this.mapName)}},{key:"render",value:function(){return(0,d.default)({mapName:this.mapName,strings:p.default.builder.mediaConfig.manage})}},{key:"postCreate",value:function(e){var n=this;m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find('.config-item[data-action="edit"]').on("click",function(){n._mediaType&&n._mediaId&&("webmap"==n._mediaType?window.open(f.default.getMapViewerLink(n._mediaId),"_blank"):"webscene"==n._mediaType&&window.open(f.default.getSceneViewerLink(n._mediaId),"_blank"))}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="edit"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}}]),t}(c.default);t.default=v,e.exports=t.default}),define("storymaps-react/tpl/view/media/builder/TabArcGIS",["module","exports","./Tab","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(e){o(this,t);var n=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=u.default.builder.mediaConfig.tabs.appearance,n.type="appearance",n.icon="fa-sliders",n}return s(t,e),c(t,[{key:"postCreate",value:function(e){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindPopup(),this.bindInteraction(),this.bindView(),this.bindExtras()}},{key:"bindPopup",value:function(){var e=this,t=this._node.find('.config-item[data-type="popup"]'),n=this._media.popup||!0,i=n?"enabled":"disabled";this._node.find('.config-item[data-type="popup"][data-value="'+i+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r="enabled"===i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setMedia("popup",r)})}},{key:"unbindPopup",value:function(){var e=this._node.find('.config-item[data-type="popup"]');e.off("click")}},{key:"bindInteraction",value:function(){var e=this,t=this._node.find('.config-item[data-type="interaction"]'),n=this._media.options.interaction||"enabled";this._node.find('.config-item[data-type="interaction"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("interaction",r)})}},{key:"unbindInteraction",value:function(){var e=this._node.find('.config-item[data-type="interaction"]');e.off("click")}},{key:"bindView",value:function(){}},{key:"unbindView",value:function(){}},{key:"bindExtras",value:function(){var e=this._node.find('.config-item[data-type="extra"]'),t=!1,n=!1,i=!1;this._media.extras&&(t=this._media.extras.legend&&this._media.extras.legend.enabled,n=this._media.extras.search&&this._media.extras.search.enabled,i=this._media.extras.locate&&this._media.extras.locate.enabled),this._node.find('.config-item[data-type="extra"][data-value="legend"] input[type="checkbox"]').prop("checked",t),this._node.find('.config-item[data-type="extra"][data-value="search"] input[type="checkbox"]').prop("checked",n),
this._node.find('.config-item[data-type="extra"][data-value="locate"] input[type="checkbox"]').prop("checked",i);var r=this;e.on("click",function(e){var t=$(e.currentTarget),n=t.data("value"),i=t.find('input[type="checkbox"]').is(":checked");r.setExtras(n,i)})}},{key:"unbindExtras",value:function(){var e=this._node.find('.config-item[data-type="extra"]');e.off("click")}},{key:"setExtras",value:function(e,t){this._media.extras||(this._media.extras={}),this._media.extras[e]||(this._media.extras[e]={}),this._media.extras[e].enabled=t,this.onChange()}},{key:"destroy",value:function(){d(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindPopup(),this.unbindInteraction(),this.unbindView(),this.unbindExtras()}}]),t}(l.default);t.default=p,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebMap",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section">\r\n  <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.view:r,e))+'</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray disabled" data-type="reset" data-value="location">'+a(o(null!=(r=null!=e?e.strings:e)?r.resetLocation:r,e))+'</li>\r\n    <li class="config-item btn btn-gray disabled" data-type="reset" data-value="layers">'+a(o(null!=(r=null!=e?e.strings:e)?r.resetLayers:r,e))+'</li>\r\n    <li class="config-item btn btn-gray disabled" data-type="reset" data-value="popup">'+a(o(null!=(r=null!=e?e.strings:e)?r.clearPopup:r,e))+'</li>\r\n  </ul>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.interaction:r,e))+'</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="disabled">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionDisabled:r,e))+'</li>\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="button">'+a(o(null!=(r=null!=e?e.strings:e)?r.buttonToEnable:r,e))+'</li>\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="enabled">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionEnabled:r,e))+' <sup style="vertical-align: 0;">*</sup></li>\r\n  </ul>\r\n  <span class="aside">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionAside:r,e))+'</span>\r\n</div>\r\n<!--<div class="builder-config-section">\r\n  <h4 class="title">Pop-Ups</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray" data-type="popup" data-value="disabled">Disabled</li>\r\n    <li class="config-item btn btn-gray" data-type="popup" data-value="enabled">Enabled</li>\r\n  </ul>\r\n</div>\r\n<div class="builder-config-section">\r\n  <h4 class="title">Extras</h4>\r\n  <ul class="section-content vertical-list checkmarks">\r\n    <li class="config-item btn btn-gray" data-type="extra" data-value="legend">\r\n      <label class="check"><input type="checkbox" value="legend"> Legend</label>\r\n    </li>\r\n    <li class="config-item btn btn-gray" data-type="extra" data-value="search">\r\n      <label class="check"><input type="checkbox" value="search"> Search</label>\r\n    </li>\r\n    <li class="config-item btn btn-gray" data-type="extra" data-value="locate">\r\n      <label class="check"><input type="checkbox" value="locate"> Locate</label>\r\n    </li>\r\n  </ul>\r\n</div>-->\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebMap",["module","exports","./TabArcGIS","esri/dijit/LayerList","esri/arcgis/utils","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./TabWebMap"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.map=e.map,n.layerList=null,n._layerListNode=e.layerListNode,n._eventExtent=null,n._eventPopup=null,n._eventPopup2=null,n._isFirstOpening=!0,n}return c(t,e),v(t,[{key:"setMap",value:function(e){e&&(this.map=e),this.attachEvents(),this._node&&this.initLayerList()}},{key:"attachEvents",value:function(){this._media&&this.map&&(this._eventExtent||(this._eventExtent=this.map.map.on("extent-change",function(e){this._isActive&&(this.setMedia("extent",e.extent.toJson()),this._updateLocationReset())}.bind(this))),this._eventPopup||(this._eventPopup=this.map.map.on("click",function(){if(this._isActive){var e=this.getSelectedFeatureInfo();if(e){var t="disabled",n=this._node.find('.config-item[data-type="reset"][data-value="popup"]');n.removeClass(t),this.setMedia("popup",e)}}}.bind(this))),this._eventPopup2||(this._eventPopup2=$(this.map.map.infoWindow.domNode).find(".titleButton.close").click(function(){if(this._isActive){var e=this._node.find('.config-item[data-type="reset"][data-value="popup"]');e.addClass("disabled"),this.setMedia("popup",null)}}.bind(this))))}},{key:"detachEvents",value:function(){this._eventExtent&&(this._eventExtent.remove(),this._eventExtent=null),this._eventPopup&&(this._eventPopup.remove(),this._eventPopup=null),this._eventPopup2&&(this._eventPopup2.remove(),this._eventPopup2=null)}},{key:"initLayerList",value:function(){var e=this;if(!this.layerList&&this._rootNode&&this._media&&this.map){this._layerListNode.html('<div class="layer-list"></div>');var t=this._layerListNode.find(".layer-list")[0],n="disabled",i=this._node.find('.config-item[data-type="reset"][data-value="layers"]'),r=f.default.getLayerList(this.map);if(this._media.layers)for(var o=function(t){var n=e._media.layers[t],i=r.find(function(e){var t=e.id;return e.layer&&e.layer.id&&(t=e.layer.id),e.featureCollection&&(t=e.featureCollection.layers[0].id),n.id===t});i&&(i.visibility=n.visibility)},a=0;a<this._media.layers.length;a++)o(a);this.layerList=new p.default({map:this.map.map,layers:r,showSubLayers:!1},t),this.layerList.startup(),this._media.layers&&this._media.layers.length>0&&i.removeClass(n);var s=this;this.layerList.on("toggle",function(t){if(e._isActive){e._media.layers||(e._media.layers=[]);var r=s.layerList.layers[t.layerIndex],o=s._media.layers.findIndex(function(e){var t=r.id;return e.layer&&e.layer.id&&(t=e.layer.id),r.featureCollection&&(t=r.featureCollection.layers[0].id),e.id===t});if(o!==-1)s._media.layers.splice(o,1);else{var a=r.id;r.layer&&r.layer.id&&(a=r.layer.id),r.featureCollection&&(a=r.featureCollection.layers[0].id),s._media.layers.push({id:a,visibility:r.visibility})}e.onChange(),s._media.layers.length>0?i.removeClass(n):i.addClass(n)}})}}},{key:"postCreate",value:function(e){var n=this;this._isFirstOpening=!1,g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.map&&this.initLayerList();var i="disabled",r=this._node.find('.config-item[data-type="reset"][data-value="location"]'),o=this._node.find('.config-item[data-type="reset"][data-value="popup"]'),a=this._node.find('.config-item[data-type="reset"][data-value="layers"]');this._media.popup&&o.removeClass(i),r.on("click",function(){n.detachEvents(),n.setMedia("extent",null),n._updateLocationReset()}),o.on("click",function(){o.addClass(i),n.setMedia("popup",null)}),a.on("click",function(){n.layerList.destroy(),n.layerList=null,a.addClass(i),n.setMedia("layers",[]),n.initLayerList()}),this._updateLocationReset(),this.attachEvents(),this.map&&$(this.map.map.container).addClass("appearance-invite")}},{key:"_updateLocationReset",value:function(){var e=this._node.find('.config-item[data-type="reset"][data-value="location"]');e.toggleClass("disabled",!this._media.extent)}},{key:"destroy",value:function(){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this);var e=this._node.find('.config-item[data-type="reset"][data-value="location"]');e.off("click"),this.layerList&&(this.layerList.destroy(),this.layerList=null),this.map&&$(this.map.map.container).removeClass("appearance-invite")}},{key:"render",value:function(){return(0,m.default)({strings:h.default.builder.mediaConfig.appearance})}},{key:"getSelectedFeatureInfo",value:function(){var e=this.map.map.infoWindow.getSelectedFeature();if(!e)return null;var t=e.getLayer(),n=t.fields;if(!n)return null;var i=$.grep(n,function(e){return"esriFieldTypeOID"===e.type});if(t&&n&&!i.length&&(i=$.grep(n,function(e){return"OBJECTID"===e.name||"FID"===e.name||"objectId"===e.name}),i.length||(i=$.grep(n,function(e){return"esriFieldTypeInteger"===e.type}))),i.length){var r=i[0].name;return{layerId:t.id,fieldName:r,fieldValue:e.attributes[r],anchorPoint:this.map.map.infoWindow.location.toJson()}}return null}}]),t}(d.default);t.default=b,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabIssues",["Handlebars"],function(e){return e.template({1:function(e,t,n,i,r){var o,a='          <ol class="carousel-indicators">\r\n';return o=t.each.call(e,null!=e?e.errorMsgs:e,{name:"each",hash:{},fn:this.program(2,i,r),inverse:this.noop,data:i}),null!=o&&(a+=o),a+"          </ol>\r\n"},2:function(e,t,n,i,r){var o,a=this.lambda,s=this.escapeExpression,l="function",u=t.helperMissing;return'              <li data-target="#'+s(a(null!=r[1]?r[1].carouselId:r[1],e))+'" data-slide-to="'+s((o=null!=(o=t.index||(null!=e?e.index:e))?o:u,typeof o===l?o.call(e,{name:"index",hash:{},data:i}):o))+'"></li>\r\n'},4:function(e,t,n,i){return"is-carousel"},6:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'            <div class="single-issue-summary item" data-target="#'+s((r=null!=(r=t.carouselId||(null!=e?e.carouselId:e))?r:a,typeof r===o?r.call(e,{name:"carouselId",hash:{},data:i}):r))+'" data-slide-to="'+s((r=null!=(r=t.index||(null!=e?e.index:e))?r:a,typeof r===o?r.call(e,{name:"index",hash:{},data:i}):r))+'">\r\n              <div class="title-wrapper">\r\n                <div class="title">'+s((r=null!=(r=t.banner||(null!=e?e.banner:e))?r:a,typeof r===o?r.call(e,{name:"banner",hash:{},data:i}):r))+'</div>\r\n                <div class="description">'+s((r=null!=(r=t.description||(null!=e?e.description:e))?r:a,typeof r===o?r.call(e,{name:"description",hash:{},data:i}):r))+'</div>\r\n              </div>\r\n              <div class="fix-btn btn btn-primary">\r\n                <span class="small-loader hidden"></span>\r\n                <span>'+s((r=null!=(r=t.button||(null!=e?e.button:e))?r:a,typeof r===o?r.call(e,{name:"button",hash:{},data:i}):r))+'</span>\r\n              </div>\r\n              <div class="media-info">\r\n                <div class="media-info-background"></div>\r\n                <i class="fix-tooltip fa fa-info-circle" aria-hidden="true" title="'+s((r=null!=(r=t.tooltip||(null!=e?e.tooltip:e))?r:a,typeof r===o?r.call(e,{name:"tooltip",hash:{},data:i}):r))+'" data-link='+s((r=null!=(r=t.helpLink||(null!=e?e.helpLink:e))?r:a,typeof r===o?r.call(e,{name:"helpLink",hash:{},data:i}):r))+"></i>\r\n              </div>\r\n            </div>\r\n"},8:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'          <div class="carousel-control left" href="#'+s((r=null!=(r=t.carouselId||(null!=e?e.carouselId:e))?r:a,typeof r===o?r.call(e,{name:"carouselId",hash:{},data:i}):r))+'" role="button" data-slide="prev">\r\n            <span class="fa fa-arrow-left arrow icon-prev"></span>\r\n          </div>\r\n          <div class="carousel-control right" href="#'+s((r=null!=(r=t.carouselId||(null!=e?e.carouselId:e))?r:a,typeof r===o?r.call(e,{name:"carouselId",hash:{},data:i}):r))+'" role="button" data-slide="next">\r\n            <span class="fa fa-arrow-right arrow icon-next"></span>\r\n          </div>\r\n'},10:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'            <div class="layer" data-lyr-id="'+s((r=null!=(r=t.id||(null!=e?e.id:e))?r:a,typeof r===o?r.call(e,{name:"id",hash:{},data:i}):r))+'">\r\n              <span class="error-icon fa fa-exclamation-triangle"></span>\r\n              <span>'+s((r=null!=(r=t.lyrTitle||(null!=e?e.lyrTitle:e))?r:a,typeof r===o?r.call(e,{name:"lyrTitle",hash:{},data:i}):r))+"</span>\r\n            </div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,r){var o,a,s="function",l=t.helperMissing,u=this.escapeExpression,c='<div class="builder-config-section issues">\r\n  <div class="section-content horizontal">\r\n    <div class="issue-summary">\r\n\r\n      <div id="'+u((a=null!=(a=t.carouselId||(null!=e?e.carouselId:e))?a:l,typeof a===s?a.call(e,{name:"carouselId",hash:{},data:i}):a))+'" class="issue-summary-wrapper carousel slide" data-interval="false" data-wrap="false" data-ride="carousel">\r\n\r\n        <!-- Indicators if needed -->\r\n';return o=t.if.call(e,null!=e?e.needsCarousel:e,{name:"if",hash:{},fn:this.program(1,i,r),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='\r\n        <!-- Content -->\r\n        <div class="carousel-inner ',o=t.if.call(e,null!=e?e.needsCarousel:e,{name:"if",hash:{},fn:this.program(4,i,r),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='">\r\n',o=t.each.call(e,null!=e?e.errorMsgs:e,{name:"each",hash:{},fn:this.program(6,i,r),inverse:this.noop,data:i}),null!=o&&(c+=o),c+="        </div>\r\n\r\n        <!-- arrows if needed -->\r\n",o=t.if.call(e,null!=e?e.needsCarousel:e,{name:"if",hash:{},fn:this.program(8,i,r),inverse:this.noop,data:i}),null!=o&&(c+=o),c+='\r\n      </div>\r\n    </div>\r\n\r\n    <div class="issue-items">\r\n        <div class="webmap-info">\r\n          <span class="error-icon fa fa-exclamation-triangle"></span>\r\n          <span>'+u((a=null!=(a=t.webmapLabel||(null!=e?e.webmapLabel:e))?a:l,typeof a===s?a.call(e,{name:"webmapLabel",hash:{},data:i}):a))+'</span>\r\n        </div>\r\n        <div class="layers-info">\r\n',o=t.each.call(e,null!=e?e.layers:e,{name:"each",hash:{},fn:this.program(10,i,r),inverse:this.noop,data:i}),null!=o&&(c+=o),c+"        </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0,useDepths:!0})}),define("lib-build/less!storymaps-react/tpl/view/media/builder/TabIssues",[],function(){}),define("storymaps-react/tpl/view/media/builder/TabIssues",["module","exports","./Tab","lib-build/hbars!./TabIssues","../../../builder/Issues","storymaps/common/builder/BuilderHelper","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./TabIssues","lib-build/less!./Common"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b=m.default.builder.mediaErrors.mapIssues,y=app.cfg.BUILDER_LINKS.issueHelps,_=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=m.default.builder.mediaConfig.tabs.issues,n.type="issues",n.icon="fa-exclamation-triangle",n.scanResults=e.scanResults,n.errorIds=e.errorIds,e.map&&n.setMap(e.map),n}return c(t,e),v(t,[{key:"setMap",value:function(e){e&&(this.map=e,this.mapItem=this.map.itemInfo.item),this._node&&this.updateCarouselId()}},{key:"getCarouselId",value:function(){var e=this.map.map.root.id;return e?e.replace(".","")+"_carousel":void console.warn("No map root",this.map.map)}},{key:"updateCarouselId",value:function(){var e=this.getCarouselId();this._node.find(".issue-summary-wrapper.carousel").prop("id",e),this._node.find(".carousel-indicators li").data("target","#"+e),this._node.find(".carousel-inner .item").data("target","#"+e),this._node.find(".carousel-control").attr("href","#"+e)}},{key:"render",value:function(){if(!(this.scanResults&&this.scanResults.hasErrors&&this.errorIds&&this.errorIds.length))return void console.warn("render without errors",this.scanResults,this.errorIds);var e=this.getErrorMessages(),t=this.scanResults.layers.slice().reverse();return t.forEach(function(e){e.details&&e.details.title&&(e.lyrTitle=e.details.title.replace(/_/g," "))}),(0,p.default)({errorMsgs:e,needsCarousel:e.length>1,carouselId:this.getCarouselId(),layers:t,webmapLabel:b.mapLabel+" "+this.scanResults.details.title})}},{key:"getErrorMessages",value:function(){var e=this;return this.errorIds.map(function(t,n){var i=void 0,r=void 0,o=void 0,a=void 0,s=void 0;t===f.default.maps.unshared||t===f.default.layers.unshared||t===f.default.content.unshared?(i=b.summaries.unshared,a=b.descriptions.unshared,r=b.tooltips.unshared,o=b.fixButtons.share,s=y.unshared):t===f.default.maps.othersUnshared||t===f.default.layers.othersUnshared||t===f.default.content.othersUnshared?(i=b.summaries.othersUnshared,a=b.descriptions.othersUnshared,r=b.tooltips.othersUnshared,o=b.fixButtons.help,s=y.othersUnshared):t===f.default.layers.deleted?(i=b.summaries.deleted,a=b.descriptions.descriptions,r=b.tooltips.deleted,o=b.fixButtons.remove,s=y.deleted):t===f.default.layers.inaccessible?(i=b.summaries.inaccessible,a=b.descriptions.inaccessible,r=b.tooltips.inaccessible,o=b.fixButtons.remove,s=y.inaccessible):t===f.default.layers.unauthorized?(i=b.summaries.unauthorized,a=b.descriptions.unauthorized,r=b.tooltips.unauthorized,o=b.fixButtons.remove,s=y.unauthorized):t===f.default.layers.premiumContent?(i=b.summaries.premiumContent,a=b.descriptions.premiumContent,r=b.tooltips.premiumContent,o=b.fixButtons.authorize,s=y.premiumContent):t===f.default.layers.subscriptionContent?(i=b.summaries.subscriptionContent,a=b.descriptions.subscriptionContent,r=b.tooltips.subscriptionContent,o=b.fixButtons.authorize,s=y.subscriptionContent):t===f.default.layers.secureService?(i=b.summaries.secureContent,a=b.descriptions.secureContent,r=b.tooltips.secureService,o=b.fixButtons.authorize,s=y.secureContent):(i=b.summaries.uncaught,a=b.descriptions.uncaught,r=b.tooltips.uncaught,o=b.fixButtons.edit,s=y.edit);var l=e.scanResults.errors[n];return l&&!l.actions.length&&(o=b.fixButtons.edit),{index:n,banner:i,description:a,tooltip:r,button:o,helpLink:s}})}},{key:"postCreate",value:function(e){var n=this;g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.showErrors(),this.highlightFromError(this.scanResults.errors[0]);var i=this._node.find(".fix-tooltip");i.tooltip({container:this._node}),i.on("click",function(){var e=$(this).data("link");e&&window.open(e,"_blank")});var r=this._node.find(".carousel");r.find(".carousel-control.left").addClass("hidden"),r.find(".item").eq(0).addClass("active"),r.find(".carousel-indicators li").eq(0).addClass("active");var o=this;r.on("slide.bs.carousel",function(e){var t=parseInt($(e.relatedTarget).data("slide-to"));o.updateCarouselArrows(r,o,t);var n=o.scanResults.errors[t];o.highlightFromError(n,o)}),this._node.find(".fix-btn").each(function(e,t){var i=o.scanResults.errors[e],r=n.getFixOptions(i),a=$(t).find(".small-loader");$(t).on("click",function(){a.removeClass("hidden"),i.actions.length?i.actions.forEach(function(e){e.fix(r).then(function(){a.addClass("hidden")})}):window.open(h.default.getMapViewerLink(n._media.id),"_blank")})})}},{key:"showErrors",value:function(){this._node.find(".webmap-info").toggleClass("error",this.mapHasError());var e=this._node.find(".layers-info"),t=this.getLayersWithErrors();this.scanResults.layers.forEach(function(n){var i=t.indexOf(n.id)>=0;e.find('[data-lyr-id="'+n.id+'"]').toggleClass("error",i)})}},{key:"updateCarouselArrows",value:function(e,t,n){e.find(".carousel-control").removeClass("hidden"),0===n?e.find(".carousel-control.left").addClass("hidden"):n+1===t.scanResults.errors.length&&e.find(".carousel-control.right").addClass("hidden")}},{key:"highlightFromError",value:function(e,t){t=t||this;var n=this._node.find(".webmap-info"),i=this._node.find(".layers-info .layer");if(n.add(i).removeClass("highlight"),"map"!==e.mediaType&&"content"!==e.mediaType||n.addClass("highlight"),"layer"===e.mediaType||"content"===e.mediaType){var r=t.getLayersFromError(e);i.filter(function(e,t){var n=$(t).data("lyr-id");return!!n&&r.indexOf(n)>=0}).addClass("highlight")}}},{key:"getLayersWithErrors",value:function(){var e=this.scanResults.errors.map(this.getLayersFromError);return e.reduce(function(e,t){return e.concat(t)})}},{key:"getLayersFromError",value:function(e){var t=[];return"layer"!==e.mediaType&&"content"!==e.mediaType||!e.layers||!e.layers.length?[]:(e.layers.forEach(function(e){t.push(e.id)}),t)}},{key:"mapHasError",value:function(){return this.scanResults.errors.some(function(e){return"map"===e.mediaType||"content"===e.mediaType})}},{key:"getFixOptions",value:function(e){var t=[],n=[],i=[];"map"!==e.mediaType&&"content"!==e.mediaType||(n=[{id:this._media.id,owner:this.mapItem.owner}],t=n),"layer"!==e.mediaType&&"content"!==e.mediaType||(i=e.layers.map(function(e){return{id:e.id,url:e.details.url,owner:e.details.owner}}),t=i),"content"===e.mediaType&&(t=t.concat(n)),t.length||console.warn("HOW DID I GET HERE?!?!?",e);var r={sharingLevel:app.data.appItem.item.access};return{items:t,details:r}}},{key:"destroy",value:function(){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}}]),t}(d.default);t.default=_,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/WebMapEditor",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<div class="modal-dialog">\r\n  <div class="modal-content">\r\n    <div class="modal-logo"></div>\r\n    <div class="modal-header">\r\n      <h4 class="modal-title"></h4>\r\n    </div>\r\n\r\n    <div class="modal-body">\r\n      <div class="loading-container">\r\n        <div style="padding-top: 200px;">\r\n          <img src="resources/tpl/viewer/icons/loading-light.gif" />\r\n        </div>\r\n        <div class="loading-lbl">'+s((r=null!=(r=t.loadingLabel||(null!=e?e.loadingLabel:e))?r:a,typeof r===o?r.call(e,{name:"loadingLabel",hash:{},data:i}):r))+'</div>\r\n      </div>\r\n      <div class="error-container hide">\r\n        <div class="error-msg"></div>\r\n      </div>\r\n\r\n      <div class="webmap-builder-container">\r\n        <iframe class="webmap-builder"></iframe>\r\n      </div>\r\n\r\n    </div>\r\n\r\n    <div class="modal-footer">\r\n      <span class="error"></span>\r\n      <button class="btnSubmit btn btn-primary hide" ></button>\r\n      <button type="button" class="btn btnCancel btn-naked btn-close"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("commonResources/nls/webmap",{root:{commonWebmap:{editor:{loading:"Please wait while the map editor is loading",newTitle:"Create new map",editTitle:"Edit map",titleLbl:"Title",titlePh:"Map title...",folderLbl:"The map will be created in the same folder as the story.",creating:"Creating the map",saving:"Saving the map",success:"Map saved",successCreate:"Map created",cancelTitle:"Discard any unsaved changes?",errorDuplicate:"You already have a map with that title",errorCreate:"Unable to create map. Please try again.",errorSave:"Unable to save map. Please try again.",loadFail:"Fatal error, the map editor cannot be loaded",notavailable1:"Sorry, creating or editing a map is not supported in Firefox due to a technical limitation. You may want to build your story using a different web browser or use the following workaround.",notavailable2:"Sorry, creating or editing a map is not supported since the story map application is not hosted in ${PRODUCT}. Please contact your ArcGIS administrator for more information.",notavailable3:"Sorry, creating or editing a map is not supported on this version of Portal for ArcGIS (requires 10.4 or later). Please contact your ArcGIS administrator for more information.",notavailable4:"You can create a map using ${MV}, then come back here to add it to your story.",notavailable5:"You can edit the map using ${MV}, then come back here and ${APPLY} to see your changes.",notavailable6:"map viewer",notavailable7:"reload the map",close:"Close",save:"Save",yes:"Yes",no:"No"}}},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("storymaps/common/builder/mapEditor/MapViewerWrapperUtils",["esri/arcgis/utils"],function(e){return{isWhiteListedDomain:function(){return document.location.host.match(/\.esri\.com$/)||document.location.host.match(/\.arcgis\.com$/)},getMapViewerLink:function(e){return this.getMapViewerURL()+"?webmap="+e},getMapViewerURL:function(){return this.getPortalURL()+"/home/webmap/viewer.html"},getPortalURL:function(){var t=e.arcgisUrl.split("/sharing/")[0];return app.portal.allSSL&&(t=t.replace("http:","https:")),t},getPortalDomain:function(){var e=document.createElement("a");return e.setAttribute("href",this.getPortalURL()),e.protocol+"//"+e.hostname},viewerIsSameDomain:function(){var e=this.getPortalURL().split("//").slice(-1)[0],t=e.split("."),n=document.location.host,i=n.split(".");return e==n||e.split("/").length>1&&e.split("/")[0]==n||(i.length<3?n==e:i.slice(1).join(".")==t.slice(-2).join("."))}}}),define("storymaps/common/builder/mapEditor/MapViewerWrapper",["esri/IdentityManager","./MapViewerWrapperUtils","./../BuilderHelper"],function(e,t,n){var i={mapViewerOpt:"embedded=1&hide=bm,share,save,analysis,directions,measure"};return function(r){function o(){p?clearInterval(f):c.send({type:"isLoaded"})}function a(){h||(h=setInterval(l,1e3))}function s(){h&&(clearInterval(h),h=null)}function l(){c.send({type:"hasUnsavedChanges"})}function u(e){if(e.origin!==t.getPortalDomain())return void console.log("MV ignored a message from another domain:",e.origin,e.data);var n=JSON.parse(e.data);switch(console.log("MV received",n),n.type){case"mapSaved":r.onSaveSucceed(n.webmapId,n.title);break;case"mapSaveError":r.onSaveError(n);break;case"webmapId":a(),setTimeout(function(){c.send({type:"isWebmapEditable"})},1e3);break;case"webmapEditable":n.value||r.onEnableSave();break;case"unsavedChanges":n.value&&r.onEnableSave();break;case"loaded":p=n.value,p?(console.log("MV loaded - map too"),d?setTimeout(function(){c.send({type:"isWebmapEditable"})},1e3):(r.onLoad(),c.send({type:"getWebmapId"}),d=!0)):(console.log("MV loaded - map not yet"),d||(setTimeout(r.onLoad,500),c.send({type:"getWebmapId"})),d=!0);break;case"newViewerBaseUrl":break;case"message":r.onError(n.message)}}var c=this,d=!1,p=!1,f=null,h=null;window.addEventListener("message",u,!1),this.load=function(a,s){var l=n.getPortalURL(),u=e.findCredential(l).token,c="";if(!a&&!s)throw"INVALID CALL TO MapViewerWrapper.load";if(!(r&&r.onSaveSucceed&&r.onSaveError&&r.onLoad&&r.onError&&r.onEnableSave&&r.frameWindow))throw"INVALID CALL TO MapViewerWrapper.load";if(c+=t.getMapViewerURL(),a?c+="?"+i.mapViewerOpt:(c+="?webmap="+s,c+="&"+i.mapViewerOpt),c+="&locale="+dojo.locale,t.isWhiteListedDomain()&&!t.viewerIsSameDomain()&&dojo.cookie("esri_auth"))c+="#"+JSON.parse(dojo.cookie("esri_auth")).token;else if(t.isWhiteListedDomain()&&!t.viewerIsSameDomain()&&u)c+="#"+u;else{if(!t.isWhiteListedDomain()&&!app.isProduction)throw"DEV_FAIL";if(t.isWhiteListedDomain()&&!app.isProduction&&!u)throw"DEV_TOKEN"}return d=!1,p=!1,f=setInterval(o,500),c},this.cancelLoading=function(){clearInterval(f),s()},this.send=function(e){console.log("MV sending",e);try{r.frameWindow.postMessage(JSON.stringify(e),t.getPortalURL())}catch(e){r.onError(e)}},this.close=function(){f&&clearInterval(f),s()}}}),define("lib-build/less!storymaps-react/tpl/view/media/WebMapEditor",[],function(){}),define("storymaps-react/tpl/view/media/WebMapEditor",["module","exports","lib-build/hbars!./WebMapEditor","lib-build/i18n!commonResources/nls/webmap","storymaps/common/builder/mapEditor/MapViewerWrapper","storymaps/common/builder/mapEditor/MapViewerWrapperUtils","dojo/Deferred","dojo/topic","dojo/has","lib-build/less!./WebMapEditor"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=u(n),p=u(i),f=u(r),h=u(o),m=u(a),v=u(s),g=u(l),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};c(this,e),this._node=t.container,this._resultDeferred=null,this._newMapDialog=null,this._mapViewerWrapper=null,this._viewerMapIsLoaded=!1,this._isCreatingMap=!1,this._hasCreatedMap=!1,this._hasSavedMap=!1,this._newMapInfos=null,this._params=null,this._isSaving=!1,this._node.append((0,d.default)({loadingLabel:p.default.commonWebmap.editor.loading})),this._mapViewerWrapper=new f.default({frameWindow:this.getFrameWindow(),onSaveSucceed:this.onSaveSucceed.bind(this),onSaveError:this.onSaveError.bind(this),onLoad:this.mapViewerLoaded.bind(this),onError:this.mapViewerFatalError.bind(this),onEnableSave:this.onEnableSave.bind(this)})}return b(e,[{key:"present",value:function(e){var t=this;this._resultDeferred=new m.default,this._viewerMapIsLoaded=!1,this._isCreatingMap=!1,this._hasCreatedMap=!1,this._hasSavedMap=!1,this._newMapInfos=null,this._params=e,this.initUI();var n="";try{n=this._mapViewerWrapper.load(e.newMap,e.id)}catch(e){return this.mapViewerFatalError(e),this._resultDeferred.reject(e),this._resultDeferred}if(e.newMap){!this._newMapDialog;var i=e.title||"";this._newMapDialog.present({title:i,tags:["map"],folderId:app.data.getWebAppItem().ownerFolder}).then(this.onNewMapDialogSuccess,this.onNewMapDialogError),
(0,g.default)("ff")&&this._node.addClass("firefox-hide-fix").modal({keyboard:!1})}else this._node.modal({keyboard:!1});return this.mapViewerLoading(),setTimeout(function(){t._node.find(".webmap-builder").attr("src",n)},50),this._node.find(".btnSubmit").click(this.onSave.bind(this)),this._node.on("hide.bs.modal",this.onClose.bind(this)),this._resultDeferred}},{key:"onNewMapDialogSuccess",value:function(e){console.log("New map dialog saved",e),this._newMapInfos=e;var t=function(){this._isCreatingMap=!0,this._mapViewerWrapper.send({type:"saveNewMap",title:e.title,tags:e.tags,folderId:e.folderId})};if(this._viewerMapIsLoaded)t();else var n=setInterval(function(){console.log("MV - Waiting for the map viewer to load to create the map"),this._viewerMapIsLoaded&&(t(),clearInterval(n))},500)}},{key:"onNewMapDialogError",value:function(){h.default.cancelLoading(),(0,g.default)("ff")&&this._node.modal("hide")}},{key:"initUI",value:function(){this._node.removeClass("firefox-hide-fix"),this._node.find(".modal-footer .error").hide(),this._node.find(".modal-title").html(p.default.commonWebmap.editor.editTitle),this._node.find(".btnSubmit").addClass("disabled"),this.createCancelButton(),this._node.find(".btn-close").html(p.default.commonWebmap.editor.close)}},{key:"mapViewerLoading",value:function(){this._node.find(".webmap-builder-container").addClass("hide"),this._node.find(".loading-container").removeClass("hide"),this._node.find(".btnSubmit").removeClass("hide").addClass("disabled").html(p.default.commonWebmap.editor.save),this.createCancelButton()}},{key:"mapViewerLoaded",value:function(){this._node.find(".webmap-builder-container").removeClass("hide"),this._node.find(".loading-container").addClass("hide"),this._viewerMapIsLoaded=!0}},{key:"mapViewerFatalError",value:function(e){console.error(e),this._node.find(".error-container").removeClass("hide"),this._node.find(".error-msg").html(p.default.commonWebmap.editor.loadFail+"<br />"+e),this._node.find(".loading-container").addClass("hide"),this._node.find(".webmap-builder-container").addClass("hide")}},{key:"onEnableSave",value:function(){this._isSaving||(this._node.find(".btnSubmit").removeClass("disabled").html(p.default.commonWebmap.editor.save),this.createCancelButton(!0))}},{key:"createCancelButton",value:function(e){var t=this;this._node.find(".btnCancel").hasClass("open")||e&&this._node.find(".btnCancel").hasClass("has-confirmation")||(this._node.find(".btnCancel").off("click").confirmation("destroy"),e?(this._node.find(".btnCancel").confirmation({container:".mapEditPopup .modal-dialog",placement:"top",title:p.default.commonWebmap.editor.cancelTitle,btnOkLabel:p.default.commonWebmap.editor.yes,btnCancelLabel:p.default.commonWebmap.editor.no,onConfirm:function(){t.onClickClose(!0)},btnCancelClass:"btn btn-sm btn-default btn-cancel-popover"}),this._node.find(".btnCancel").addClass("has-confirmation")):this._node.find(".btnCancel").click(this.onClickClose).removeClass("has-confirmation"))}},{key:"onSave",value:function(){this._viewerMapIsLoaded&&(this._node.find(".btnSubmit").hasClass("disabled")||(this._isSaving=!0,this._node.find(".btnSubmit").addClass("disabled").html('<span class="small-loader"></span>'+p.default.commonWebmap.editor.saving),this.createCancelButton(),this._node.find(".modal-footer .error").html("").hide(),this._mapViewerWrapper.send({type:"saveMap"})))}},{key:"onClickClose",value:function(e){this._node.modal("hide"),e===!0&&this._node.find(".webmap-builder").attr("src","about:blank")}},{key:"onClose",value:function(){this._mapViewerWrapper.close(),this._resultDeferred&&(this._hasSavedMap&&v.default.publish("ADDEDIT_RELOAD_CURRENT_WEBMAP"),this._hasSavedMap||this._hasCreatedMap?this._resultDeferred.resolve({newMap:this._hasCreatedMap,newMapInfos:this._newMapInfos}):this._resultDeferred.reject())}},{key:"onSaveSucceed",value:function(e,t){this._isCreatingMap?(this._newMapInfos.id=e,this._isCreatingMap=!1,this._hasCreatedMap=!0,this._newMapDialog.saveSuccess().then(function(){(0,g.default)("ff")?this._node.removeClass("firefox-hide-fix"):this._node.modal({keyboard:!1})})):this._params.id&&this._params.id!=e?(this._params.id=e,this._newMapInfos={id:e,title:t||""},this._hasCreatedMap=!0,this.onSaveSuccessStep2()):(this._hasSavedMap=!0,this.onSaveSuccessStep2(),v.default.publish("BUILDER-MY-STORIES-CHECK"))}},{key:"onSaveSuccessStep2",value:function(){this._node.find(".btnSubmit").addClass("disabled").html('<span class="glyphicon glyphicon-ok"></span> '+p.default.commonWebmap.editor.success),setTimeout(function(){this._node.find(".btnSubmit").html(p.default.commonWebmap.editor.save),this._node.find(".btnSubmit").toggleClass("disabled",!0),this._isSaving=!1},2e3)}},{key:"onSaveError",value:function(e){this._isCreatingMap?this._newMapDialog.saveError(e).then(this.onNewMapDialogSuccess,this.onNewMapDialogError):(this._node.find(".btnSubmit").removeClass("disabled").html(p.default.commonWebmap.editor.save),this._node.find(".modal-footer .error").html(p.default.commonWebmap.editor.errorSave).show())}},{key:"getFrameWindow",value:function(){return this._node.find(".webmap-builder")[0].contentWindow}}]),e}();t.default=y,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/media/WebMapBuilder",[],function(){}),define("storymaps-react/tpl/view/media/WebMapBuilder",["module","exports","./WebMap","./builder/Panel","./builder/TabSize","./builder/TabManage","./builder/TabWebMap","./builder/TabIssues","./WebMapEditor","dojo/_base/lang","dojo/topic","../../builder/Issues","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./WebMapBuilder"],function(e,t,n,i,r,o,a,s,l,u,c,d,p){"use strict";function f(e){return e&&e.__esModule?e:{default:e}}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=f(n),b=f(i),y=f(r),_=f(o),w=f(a),C=f(s),E=f(l),k=f(u),T=f(c),x=f(d),S=f(p),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),O=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},I=S.default.builder.mediaErrors,M=function(e){function t(e){h(this,t);var n=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._configTabWebMap=null,n._configTabIssues=null,n._configTabManage=null,n._isMultiViewSection=!1,n._onToggleMediaConfig=null,n}return v(t,e),P(t,[{key:"postCreate",value:function(e){O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,e.delayBuilderInit||this._initConfigPanel(),T.default.subscribe("scan/maps/"+this._webmap.id,k.default.hitch(this,this.checkErrors)),this.initBuilderUI(),this._node.find(".media-media").attr("data-builder-invite",S.default.builder.mediaConfig.appearance.mapExtentPrompt)}},{key:"checkErrors",value:function(e){if(this.errorIds=this.mapErrors(e),this.errorIds){var t=this.isUnfixableError(this.errorIds);t?this.setError(t):this.setError({scanResult:e,errors:e.errors})}else this.removeError(e);this.builderConfig&&this._node.hasClass("builder-config-open")&&this._configTabIssues&&this.errorIds?(this._configTabIssues.errorIds=this.errorIds,this.builderConfig.renderTab(this._configTabIssues)):(this._destroyConfigPanel(),this._initConfigPanel())}},{key:"isUnfixableError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="";if(e.indexOf(x.default.maps.deleted)>=0)t=I.placeholders.deleted.replace("${media-type}",I.mediaTypes.webmap);else if(e.indexOf(x.default.maps.inaccessible)>=0)t=I.placeholders.inaccessible.replace("${media-type}",I.mediaTypes.webmap);else{if(!(e.indexOf(x.default.maps.unauthorized)>=0))return!1;t=I.placeholders.unauthorized.replace("${media-type}",I.mediaTypes.webmap)}return{unfixable:!0,showLoadingError:!0,msg:t}}},{key:"performAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.performBuilderInit&&(this._destroyConfigPanel(),this._initConfigPanel()),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"performAction",this).call(this,e)}},{key:"serialize",value:function(){return this._node&&(this._webmap.caption=this._node.find(".block-caption").html()),k.default.clone({type:"webmap",webmap:this._webmap})}},{key:"_destroyConfigPanel",value:function(){if(this.builderConfig&&this.builderConfig._tabs){var e=this.builderConfig._tabs.find(function(e){return e._isActive});e&&this.builderConfig.destroyTab(e)}}},{key:"_initConfigPanel",value:function(){var e=this,t=[];this._configTabWebMap=new w.default({map:this._cache[this.id],layerListNode:this._node.find(".layer-list-container"),onOpen:function(){e.map&&e.performAction({forceSetExtent:!0})}});var n=!0,i=!1,r=void 0;try{for(var o,a=this._builderConfigurationTabs[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if("size"==s)t.push(new y.default);else if("appearance"==s)t.push(this._configTabWebMap);else if("manage"==s){var l=this.getMapName(this._cache[this.id]);this._configTabManage=new _.default({hideRemove:"background"==this._placement,mediaType:"webmap",mediaId:this.id,mapName:l}),t.push(this._configTabManage)}}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}this.scanResults&&this.scanResults.hasErrors&&!this.scanResults.unfixable&&(this._configTabIssues=new C.default({map:this._cache[this.id],scanResults:this.scanResults,errorIds:this.errorIds}),t.push(this._configTabIssues)),this.builderConfig=new b.default({containerMedia:this._node,tabs:t,media:this._webmap,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"_onWebMapLoaded",value:function(){if(this._configTabWebMap&&this._configTabWebMap.setMap(this._cache[this.id]),this._configTabIssues&&this._configTabIssues.setMap(this._cache[this.id]),this._configTabManage){var e=this.getMapName(this._cache[this.id]);this._configTabManage.setMapName(e)}}},{key:"getMapName",value:function(e){if(!e)return"";var t=e.itemInfo&&e.itemInfo.item;return t?t.title||t.name:""}},{key:"_openEditor",value:function(){var e=new E.default({container:$("#mapEditPopup")});e.present({id:this.id})}},{key:"_onConfigChange",value:function(){this._applyConfig(),O(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(g.default);t.default=M,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabManageScene",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u=this.lambda;return'<div class="webscene-name">'+l((o=null!=(o=t.sceneName||(null!=e?e.sceneName:e))?o:s,typeof o===a?o.call(e,{name:"sceneName",hash:{},data:i}):o))+'</div>\r\n\r\n<div class="builder-config-section larger">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="swap">\r\n      <img class="edit-media-icon" src="resources/tpl/builder/icons/media-config/edit-media.png" />\r\n      '+l(u(null!=(r=null!=e?e.strings:e)?r.changeMedia:r,e))+'\r\n    </div>\r\n    <div class="image-preview">\r\n      <div class="overlay">\r\n        <span class="icon">'+l(u(null!=(r=null!=e?e.strings:e)?r.edit:r,e))+'</span>\r\n        <span class="icon">'+l(u(null!=(r=null!=e?e.strings:e)?r.remove:r,e))+'</span>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="edit">\r\n      <i class="config-icon fa fa-external-link"></i>\r\n      '+l(u(null!=(r=null!=e?e.strings:e)?r.edit:r,e))+'\r\n    </div>\r\n  </div>\r\n  <span class="aside">'+l(u(null!=(r=null!=e?e.strings:e)?r.editAside:r,e))+'</span>\r\n</div>\r\n<div class="builder-config-section">\r\n  <div class="section-content button">\r\n    <div class="config-item button btn btn-bw" data-action="remove">\r\n      <i class="config-icon fa fa-trash-o"></i>\r\n      '+l(u(null!=(r=null!=e?e.strings:e)?r.remove:r,e))+"\r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabManageScene",["module","exports","./Tab","lib-build/hbars!./TabManageScene","storymaps/common/builder/BuilderHelper","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Common"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};s(this,t);var n=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.title=f.default.builder.mediaConfig.tabs.manage,n.type="manage",n.icon="fa-wrench",n.sceneName=e.sceneName,n._mediaType=e.mediaType,n._mediaId=e.mediaId,n}return u(t,e),h(t,[{key:"setSceneName",value:function(e){this.sceneName=e,this._node&&this.updateSceneName()}},{key:"updateSceneName",value:function(){this._node.find(".webscene-name").text(this.sceneName)}},{key:"render",value:function(){return(0,d.default)({sceneName:this.sceneName,strings:f.default.builder.mediaConfig.manage})}},{key:"postCreate",value:function(e){var n=this;m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._options&&this._options.hideRemove&&this._node.find('.config-item[data-action="remove"]').parents(".builder-config-section").hide(),this._node.find('.config-item[data-action="remove"]').on("click",function(){n._onAction("remove")}),this._node.find('.config-item[data-action="upload-image"]').on("click",function(){console.log("action")}),this._node.find('.config-item[data-action="edit"]').on("click",function(){n._mediaType&&n._mediaId&&("webmap"==n._mediaType?window.open(p.default.getMapViewerLink(n._mediaId),"_blank"):"webscene"==n._mediaType&&window.open(p.default.getSceneViewerLink(n._mediaId),"_blank"))}),this._node.find('.config-item[data-action="swap"]').on("click",function(){n._onAction("swap")})}},{key:"destroy",value:function(){m(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this._node.find('.config-item[data-action="remove"]').off("click"),this._node.find('.config-item[data-action="upload-image"]').off("click"),this._node.find('.config-item[data-action="edit"]').off("click"),this._node.find('.config-item[data-action="swap"]').off("click")}}]),t}(c.default);t.default=v,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebScene",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section">\r\n  <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.slide:r,e))+'</h4>\r\n  <select class="section-content" name="slides"></select>\r\n  <div class="section-content no-slides">\r\n    <span class="">'+a(o(null!=(r=null!=e?e.strings:e)?r.noSlides:r,e))+'</span>\r\n  </div>\r\n</div>\r\n<div class="builder-config-section larger">\r\n  <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.interaction:r,e))+'</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="disabled">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionDisabled:r,e))+'</li>\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="button">'+a(o(null!=(r=null!=e?e.strings:e)?r.buttonToEnable:r,e))+'</li>\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="enabled">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionEnabled:r,e))+' <sup style="vertical-align: 0;">*</sup></li>\r\n  </ul>\r\n  <span class="aside">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionAside:r,e))+'</span>\r\n</div>\r\n<!--\r\n<div class="builder-config-section">\r\n  <h4 class="title">Pop-Ups</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray" data-type="popup" data-value="disabled">Disabled</li>\r\n    <li class="config-item btn btn-gray" data-type="popup" data-value="enabled">Enabled</li>\r\n  </ul>\r\n</div>\r\n<div class="builder-config-section">\r\n  <h4 class="title">Extras</h4>\r\n  <ul class="section-content vertical-list checkmarks">\r\n    <li class="config-item btn btn-gray" data-type="extra" data-value="legend">\r\n      <label class="check"><input type="checkbox" value="legend"> Legend</label>\r\n    </li>\r\n    <li class="config-item btn btn-gray" data-type="extra" data-value="search">\r\n      <label class="check"><input type="checkbox" value="search"> Search</label>\r\n    </li>\r\n    <li class="config-item btn btn-gray" data-type="extra" data-value="locate">\r\n      <label class="check"><input type="checkbox" value="locate"> Locate</label>\r\n    </li>\r\n  </ul>\r\n</div>\r\n-->\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebScene",["module","exports","./TabArcGIS","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/hbars!./TabWebScene"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(e){a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scene=e.scene,n}return l(t,e),p(t,[{key:"setScene",value:function(e){this.scene=e,this._node&&this.renderSceneSection()}},{key:"renderSceneSection",value:function(){var e=this,t=this.scene.scene,n=this._node.find('.section-content[name="slides"]'),i=this._node.find(".section-content.no-slides");if(t.presentation&&t.presentation.slides&&t.presentation.slides.items&&t.presentation.slides.items.length>0){var r=t.presentation.slides.items;i.hide(),n.show(),n.append('<option class="config-item" data-type="slides" value="-1">'+c.default.builder.mediaConfig.appearance.homeView+"</option>");for(var o=0;o<r.length;o++)n.append('<option class="config-item" data-type="slides" value="'+o+'">'+r[o].title.text+"</option>");this._media.slide>=0&&n.val(this._media.slide),n.on("change",function(t){var n=$(t.currentTarget).val(),i=parseInt(n,10);isNaN(i)||e.setMedia("slide",i)})}else n.hide(),i.show()}},{key:"attachEvents",value:function(){!this._media}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.scene&&this.renderSceneSection()}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this)}},{key:"render",value:function(){return(0,d.default)({strings:c.default.builder.mediaConfig.appearance})}}]),t}(u.default);t.default=h,e.exports=t.default}),define("storymaps-react/tpl/view/media/WebSceneBuilder",["module","exports","./WebScene","./builder/Panel","./builder/TabSize","./builder/TabManageScene","./builder/TabWebScene","dojo/_base/lang","dojo/topic","../../builder/Issues","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),v=d(i),g=d(r),b=d(o),y=d(a),_=d(s),w=d(l),C=d(u),E=d(c),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},x=E.default.builder.mediaErrors,S=function(e){function t(e){p(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._configTabWebScene=null,n._configTabManageScene=null,n._onToggleMediaConfig=null,n}return h(t,e),k(t,[{key:"postCreate",value:function(e){T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onToggleMediaConfig=e.onToggleMediaConfig,e.delayBuilderInit||this._initConfigPanel(),w.default.subscribe("scan/scenes/"+this._webscene.id,_.default.hitch(this,this.checkErrors)),this.initBuilderUI()}},{key:"checkErrors",value:function(e){var t=this.mapErrors(e);if(!t)return void this.removeError();var n=this.isUnfixableError(t);return n?void this.setError(n):void this.setError({errors:e.errors})}},{key:"isUnfixableError",value:function(e){var t=void 0,n=!1;return e.indexOf(C.default.scenes.deleted)>=0?(t=x.placeholders.deleted.replace("${media-type}",x.mediaTypes.webscene),n=!0):e.indexOf(C.default.scenes.inaccessible)>=0?(t=x.placeholders.inaccessible.replace("${media-type}",x.mediaTypes.webscene),n=!0):e.indexOf(C.default.scenes.unauthorized)>=0&&(t=x.placeholders.unauthorized.replace("${media-type}",x.mediaTypes.webscene),n=!0),!!n&&{msg:t,unfixable:n,showLoadingError:!0}}},{key:"performAction",value:function(e){return e.performBuilderInit&&this._initConfigPanel(),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"performAction",this).call(this,e)}},{key:"serialize",value:function(){return this._node&&(this._webscene.caption=this._node.find(".block-caption").html()),_.default.clone({type:"webscene",webscene:this._webscene})}},{key:"_initConfigPanel",value:function(){var e=[];this._configTabWebScene=new y.default({scene:this._cache[this.id]});var t=!0,n=!1,i=void 0;try{for(var r,o=this._builderConfigurationTabs[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if("size"==a)e.push(new g.default);else if("appearance"==a)e.push(this._configTabWebScene);else if("manage"==a){var s=this.getSceneName(this._cache[this.id]);this._configTabManageScene=new b.default({hideRemove:"background"==this._placement,mediaType:"webscene",mediaId:this.id,sceneName:s}),e.push(this._configTabManageScene)}}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}new v.default({containerMedia:this._node,tabs:e,media:this._webscene,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),this._onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"})}},{key:"getSceneName",value:function(e){var t=this.getSceneItem(e);return t?t.title||t.name:""}},{key:"getSceneItem",value:function(e){return e&&e.scene&&e.scene.portalItem}},{key:"findAndSetSceneName",value:function(e){var t=this,n=this.getSceneItem(e);if(n){var i=void 0;return n.loaded?(i=n.title||n.name,this._configTabManageScene&&this._configTabManageScene.setSceneName(i),i):void n.then(function(){i=n.title||n.name,t._configTabManageScene&&t._configTabManageScene.setSceneName(i)})}}},{key:"_onWebSceneLoaded",value:function(){this._initConfigPanel(),this._configTabWebScene.setScene(this._cache[this.id]),this._configTabManageScene&&this.findAndSetSceneName(this._cache[this.id])}},{key:"_onConfigChange",value:function(){this._applyConfig(),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(m.default);t.default=S,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/builder/TabWebPage",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-section no-spread">\r\n  <h4 class="title">'+a(o(null!=(r=null!=e?e.strings:e)?r.interaction:r,e))+'</h4>\r\n  <ul class="section-content vertical-list">\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="disabled">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionDisabled:r,e))+'</li>\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="button">'+a(o(null!=(r=null!=e?e.strings:e)?r.buttonToEnable:r,e))+'</li>\r\n    <li class="config-item btn btn-gray" data-type="interaction" data-value="enabled">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionEnabled:r,e))+' <sup style="vertical-align: 0;">*</sup></li>\r\n  </ul>\r\n  <span class="aside">'+a(o(null!=(r=null!=e?e.strings:e)?r.interactionAside:r,e))+"</span>\r\n</div>\r\n"},useData:!0})}),define("storymaps-react/tpl/view/media/builder/TabWebPage",["module","exports","./Tab","lib-build/hbars!./TabWebPage","lib-build/i18n!resources/tpl/builder/nls/app"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.title=d.default.builder.mediaConfig.tabs.appearance,e.type="appearance",e.icon="fa-sliders",e}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({strings:d.default.builder.mediaConfig.appearance})}},{key:"postCreate",value:function(e){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this.bindInteraction()}},{key:"bindInteraction",value:function(){var e=this,t=this._node.find('.config-item[data-type="interaction"]'),n=this._media.options.interaction||"enabled";this._node.find('.config-item[data-type="interaction"][data-value="'+n+'"]').addClass(this.selectedClass),t.on("click",function(n){var i=$(n.currentTarget),r=i.data("value");t.removeClass(e.selectedClass),i.addClass(e.selectedClass),e.setConfig("interaction",r)})}},{key:"unbindInteraction",value:function(){var e=this._node.find('.config-item[data-type="interaction"]');e.off("click")}},{key:"destroy",value:function(){f(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.unbindInteraction()}}]),t}(u.default);t.default=h,e.exports=t.default}),define("storymaps-react/tpl/view/media/WebPageBuilder",["module","exports","./WebPage","./builder/Panel","./builder/TabSize","./builder/TabManageMedia","./builder/TabWebPage","dojo/_base/lang"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);
return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},_=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),b(t,[{key:"postCreate",value:function(e){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=this._builderConfigurationTabs[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"size"==l?n.push(new h.default):"appearance"==l?n.push(new v.default):"manage"==l&&n.push(new m.default({hideRemove:"background"==this._placement}))}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}new f.default({containerMedia:this._node,tabs:n,media:this._webpage,onChange:this._onConfigChange.bind(this),onAction:this._onAction.bind(this),onToggle:function(){this._node.toggleClass("builder-config-open"),e.onToggleMediaConfig(this)}.bind(this),closeBtnStyle:"background"==this._placement?"light":"standard"}),this.initBuilderUI()}},{key:"serialize",value:function(){return this._node&&(this._webpage.caption=this._node.find(".block-caption").html()),g.default.clone({type:"webpage",webpage:this._webpage})}},{key:"_onConfigChange",value:function(){console.log("onConfigChange: ",this._webpage),this._applyConfig(),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"_onConfigChange",this).call(this)}}]),t}(p.default);t.default=_,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/media/CreditsItemBuilder",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" cr-empty"},3:function(e,t,n,i){return" cr-incomplete"},5:function(e,t,n,i){return" cr-link"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a=this.lambda,s=this.escapeExpression,l="function",u=t.helperMissing,c='<li class="cr-item builder';return r=t.if.call(e,null!=e?e.empty:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),r=t.if.call(e,null!=e?e.incomplete:e,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='">\r\n  <div class="cr-item-main">\r\n    <div class="cr-input-container first">\r\n      <div class="cr-validation-warning cr-hidden">\r\n        '+s(a(null!=(r=null!=e?e.text:e)?r.warning:r,e))+'\r\n      </div>\r\n      <div class="cr-item-input cr-content" contenteditable="true" placeholder="'+s(a(null!=(r=null!=e?e.text:e)?r.content:r,e))+'">'+s((o=null!=(o=t.label||(null!=e?e.label:e))?o:u,typeof o===l?o.call(e,{name:"label",hash:{},data:i}):o))+'</div>\r\n    </div>\r\n    <span class="cr-pipe"></span>\r\n    <div class="cr-input-container">\r\n      <div class="cr-item-input cr-source',r=t.if.call(e,null!=e?e.link:e,{name:"if",hash:{},fn:this.program(5,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'" contenteditable="true" placeholder="'+s(a(null!=(r=null!=e?e.text:e)?r.source:r,e))+'" data-toggle="popover" data-link="'+s((o=null!=(o=t.link||(null!=e?e.link:e))?o:u,typeof o===l?o.call(e,{name:"link",hash:{},data:i}):o))+'">'+s((o=null!=(o=t.source||(null!=e?e.source:e))?o:u,typeof o===l?o.call(e,{name:"source",hash:{},data:i}):o))+'</div>\r\n      <div class="cr-item-remove cr-hidden">\r\n        <i class="cr-remove-icon fa fa-trash"></i>\r\n      </div>\r\n  </div>\r\n  <div class="cr-builder-ui cr-hidden">\r\n    <div class="cr-add-line">\r\n      <div class="cr-add-button cr-hidden">\r\n        <i class="cr-add-icon fa fa-plus"></i>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</li>\r\n'},useData:!0})}),define("storymaps-react/tpl/view/media/CreditsBuilder",["module","exports","./Credits","storymaps/common/utils/CommonHelper","lib-build/hbars!./CreditsItemBuilder","lib-build/i18n!resources/tpl/builder/nls/app","dojo/_base/lang"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onContentChange=null,n}return c(t,e),v(t,[{key:"render",value:function(e){if(!this._credits||!e)return console.log("Could not render credits block in section"),"";var t='<div id="'+this._domID+'" class="block block-type-credits" contenteditable="false"><ul class="cr-list">';if(this._credits.length){var n=!0,i=!1,r=void 0;try{for(var o,a=this._credits[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t+=(0,f.default)({label:s.label,link:s.link,source:s.source,text:h.default.builder.credits,empty:!1,incomplete:!1})}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}else t+=(0,f.default)({label:null,link:null,source:null,text:h.default.builder.credits,empty:!0,incomplete:!0});return t+="</ul></div>"}},{key:"addPopoverEvents",value:function(e){e.find('.cr-item-input[data-toggle="popover"]').popover({html:!0,content:function(){var e=$(this).data("link");return'<div class="form-group form-group-sm"><input type="text" class="credit-link" placeholder="'+h.default.builder.credits.linkPrompt+'" value="'+e+'"></div>'},trigger:"manual",placement:"top"}),e.find('.cr-item-input[data-toggle="popover"]').focus(function(e){var t=$(e.currentTarget);t.data("bs.popover").$tip?t.data("bs.popover").$tip.hasClass("in")||t.popover("show"):t.popover("show")}),e.find('.cr-item-input[data-toggle="popover"]').blur(function(e){var t=$(e.currentTarget);setTimeout(function(){var e=t.data("bs.popover");e.$tip&&!e.$tip.find(".credit-link").is(":focus")&&t.popover("hide")},50)});var t=this;e.find('.cr-item-input[data-toggle="popover"]').on("shown.bs.popover",function(){var n=$(this),i=$(this).data("bs.popover");i.$tip&&i.$tip.find(".credit-link").blur(function(){setTimeout(function(){n.is(":focus")||n.popover("hide")},50),t._onContentChange(),t.validate(e,n)}),i.$tip&&i.$tip.find(".credit-link").on("keyup",function(){t._onContentChange()}),i.$tip&&i.$tip.find(".credit-link").on("paste",function(e){var n=$(e.currentTarget);setTimeout(function(){var e=t.sanitizeText(n[0].value);n[0].value=e},0)})}),e.find('.cr-item-input[data-toggle="popover"]').on("hide.bs.popover",function(){var e=$(this).data("bs.popover");if(e.$tip){var t=e.$tip.find(".credit-link").val(),n=t.trim();n?$(this).addClass("cr-link"):$(this).removeClass("cr-link");var i=p.default.prependURLHTTP(n);$(this).data("link",i)}})}},{key:"showValidationError",value:function(e){e.find(".cr-item-input").addClass("cr-error"),e.find(".cr-validation-warning").removeClass("cr-hidden")}},{key:"hideValidationError",value:function(e){e.find(".cr-item-input").removeClass("cr-error"),e.find(".cr-validation-warning").addClass("cr-hidden")}},{key:"addEvents",value:function(e){var t=this;this.addPopoverEvents(e),e.find(".cr-builder-ui").hover(function(e){var t=$(e.currentTarget);t.removeClass("cr-hidden"),t.find(".cr-add-button").removeClass("cr-hidden")},function(e){var t=$(e.currentTarget);t.addClass("cr-hidden"),t.find(".cr-add-button").addClass("cr-hidden")}),e.find(".cr-item-main").hover(function(e){var n=$(e.currentTarget),i=n.closest(".cr-item"),r=t._node.find(".cr-item").length;(!i.hasClass("cr-empty")||r>1)&&n.find(".cr-item-remove").removeClass("cr-hidden")},function(e){var t=$(e.currentTarget);t.find(".cr-item-remove").addClass("cr-hidden")}),e.find(".cr-add-button").on("click",function(e){var n=$(e.currentTarget),i=n.closest(".cr-item");i.after(t.renderEmptyCredit()),t.addEvents(i.next(".cr-item")),t._onContentChange()}),e.find(".cr-item-remove").on("click",function(e){var n=$(e.currentTarget),i=n.closest(".cr-item");i.find('.cr-item-input[data-toggle="popover"]').popover("destroy"),i.remove();var r=t._node.find(".cr-item").length;if(0===r){var o=t.renderEmptyCredit(),a=t._node.find(".cr-list");a.append(o),t.addEvents(a.children(":last"))}t._onContentChange()}),e.find(".cr-item-input").on("keyup",function(e){var n=$(e.currentTarget).closest(".cr-item"),i=n.find(".cr-item-input.cr-content")[0],r=n.find(".cr-item-input.cr-source")[0];if(i&&r){var o=i.textContent,a=r.textContent;o.length>0||a.length>0?n.removeClass("cr-empty"):n.addClass("cr-empty"),o.length>0&&a.length>0?(n.removeClass("cr-incomplete"),t.hideValidationError(n)):0===o.length&&0===a.length?t.hideValidationError(n):n.addClass("cr-incomplete")}t._onContentChange()}),e.find(".cr-item-input").on("keydown",function(e){if(13===e.keyCode){var n=$(e.currentTarget).closest(".cr-item");n.hasClass("cr-incomplete")||(n.after(t.renderEmptyCredit()),t.addEvents(n.next(".cr-item"))),e.preventDefault()}if(e.ctrlKey||e.metaKey){var i=e.keyCode;if(66==i||98==i||73==i||105==i||85==i||117==i)return!1}}),e.find(".cr-item-input").on("paste",function(e){var n=$(e.currentTarget);setTimeout(function(){var e=t.sanitizeText(n[0].textContent);n[0].innerHTML=e},0)}),e.find(".cr-item-input").blur(function(n){var i=$(n.currentTarget);t.validate(e,i),t._onContentChange()})}},{key:"validate",value:function(e,t){var n=this;setTimeout(function(){var i=t.closest(".cr-item"),r=e.find(".cr-item-input").is(":focus"),o=e.find(".popover .credit-link").is(":focus"),a=i.hasClass("cr-incomplete")&&!i.hasClass("cr-empty");r||o||!a?n.hideValidationError(i):n.showValidationError(i)},50)}},{key:"renderEmptyCredit",value:function(){return(0,f.default)({label:"",link:"",source:"",text:h.default.builder.credits,empty:!0,incomplete:!0})}},{key:"postCreate",value:function(e){g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._onContentChange=e.onContentChange,this.addEvents(this._node.find(".cr-item"))}},{key:"sanitizeText",value:function(e){var t=$("<div>"+e+"</div>").text();return t}},{key:"serialize",value:function(){this._credits=[];var e=this._node.find(".cr-item:not(.cr-empty)"),t=!0,n=!1,i=void 0;try{for(var r,o=e[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=$(a),l=this.sanitizeText(s.find(".cr-item-input.cr-content").text()),u=this.sanitizeText(s.find(".cr-item-input.cr-source").text()),c=this.sanitizeText(s.find(".cr-item-input.cr-source").data("link")),d={label:l,source:u,link:c};this._credits.push(d)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return m.default.clone({type:"credits",credits:this._credits})}}]),t}(d.default);t.default=b,e.exports=t.default}),define("storymaps-react/tpl/view/media/FactoryBuilder",["module","exports","./FactoryViewer","./Text","./ImageBuilder","./ImageGalleryBuilder","./VideoBuilder","./WebMapBuilder","./WebSceneBuilder","./WebPageBuilder","./Empty","./Color","./CreditsBuilder","storymaps/tpl/view/media/Discover"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f){"use strict";function h(e){return e&&e.__esModule?e:{default:e}}function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function g(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var b=h(n),y=h(i),_=h(r),w=h(o),C=h(a),E=h(s),k=h(l),T=h(u),x=h(c),S=h(d),P=h(p),O=h(f),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function(e){function t(){return m(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return g(t,e),I(t,null,[{key:"getClasses",value:function(){return{Text:y.default,Image:_.default,ImageGallery:w.default,Video:C.default,WebMap:E.default,WebScene:k.default,WebPage:T.default,Empty:x.default,Color:S.default,Credits:P.default,Discover:O.default}}}]),t}(b.default);t.default=M,e.exports=t.default}),define("lib-build/less!storymaps/tpl/view/section/Common",[],function(){}),define("storymaps/tpl/view/section/Common",["../../utils/UI","dojo/topic","lib-build/less!./Common"],function(e,t){return{initMedia:function(e,t){return app.ui.MediaFactory.createInstance(e,t)},checkErrors:function(e,t,n){var i=!1;if(t.background&&t.foreground?(e.backgroundMedia.indexOf(t.background.type)<0&&(console.error("Section ",n," is using invalid background"),i=!0),t.foreground.layout&&(!e.foregroundLayout||!e.foregroundLayout.length||e.foregroundLayout.indexOf(t.foreground.layout)<0)&&(console.error("Section ",n," is using invalid foreground"),i=!0)):t.views?$.each(t.views,function(t,r){e.backgroundMedia.indexOf(r.background.type)<0&&(console.error("Section ",n," - view "+t+"is using invalid background"),i=!0)}):console.error("Section ",n," is not using a proper background/foreground configuration"),i)return void console.error("Section",n," ignored")},renderBlocks:function(e){var t="",n=null,i=[],r=null,o="";return $.each(e,function(e,a){r=app.ui.MediaFactory.createInstance(a),o=a[a.type].style||[],r&&(n&&"text"==n||o.push("first-letter-huge"),t+=r.render({placement:"block",style:o}),n=a.type,i.push(r))}),{output:t,blocks:i}},createBlock:function(e){var t=app.ui.MediaFactory.createInstance(e);return t},renderBackground:function(t){var n="";if(t=t||{},!t.media)return n;if(e.isMobileBrowser()&&t.media.getAlternate&&t.media.getAlternate()&&(t.media=t.media.getAlternate()),!t.noBackgroundTag){var i=" "+(t.media.options||""),r=[];t.transition&&r.push(" transition-"+t.transition),n+='<div class="background background-type-'+t.media.type+" "+r.join(" ")+'" style="'+i+'">'}return n+=t.media.render({placement:"background",sectionType:t.sectionType}),t.noBackgroundTag||(n+="</div>"),n},getMediaIndexes:function(e,t,n){if(!e||!e.length||!t)return-1;var i=t.type,r=null;r=n?t:t[i];var o=[];return $.each(e,function(e,t){t.type==i&&("webmap"==t.type||"webscene"==t.type?t.id==r.id&&o.push(e):"webpage"==t.type?t.id==r.url&&o.push(e):"video"==t.type?t.id==r.source+"-"+r.id&&o.push(e):"image"==t.type&&t.id==r.id&&o.push(e))}),o},resize:function(){},_applyTitleBackground:function(e,t){e.background?"light"===e.background?(t.addClass("background-light"),t.removeClass("background-dark")):(t.addClass("background-dark"),t.removeClass("background-light")):(t.removeClass("background-dark"),t.removeClass("background-light"))},_applyTitleText:function(e,t){e.text&&("light"===e.text?(t.addClass("text-light"),t.removeClass("text-dark")):(t.addClass("text-dark"),t.removeClass("text-light")))},_applyTextShadow:function(e,t){e.shadow?t.addClass("text-shadow"):t.removeClass("text-shadow")},applyTitleStyle:function(e,t,n){e?(this._applyTitleBackground(e,n),this._applyTitleText(e,t),this._applyTextShadow(e,t)):t.addClass("text-shadow")},checkMedia:function(e){"image-gallery"!==e.type&&("image"===e.type&&e.image.uploadDeferred?e.image.uploadDeferred.then(function(){t.publish("builder-should-check-story")}.bind(this),function(){t.publish("builder-should-check-story")}.bind(this)):t.publish("builder-should-check-story"))}}}),define("storymaps/tpl/view/section/Cover/CoverCommonEffects",[],function(){function e(e){var t=e.$currentSection.find(".foreground"),n=e.$currentSection.find(".background");setTimeout(function(){n.addClass("scale-out")},c),setTimeout(function(){n.css("transform","scale(1)"),n.css("opacity",1),n.removeClass("scale-out")},c+1500),setTimeout(function(){t.addClass("slide-text")},c+200),setTimeout(function(){t.css("transform","translateY(0)"),t.css("opacity",1),t.removeClass("slide-text")},c+1700)}function t(e){var t=e.$currentSection.find(".background");setTimeout(function(){t.addClass("fade-in-background")},c),setTimeout(function(){e.$currentSection.find(".cover-title").addClass("fade-in-cover-title")},c+500),setTimeout(function(){e.$currentSection.find(".cover-subtitle").addClass("fade-in-cover-subtitle")},c+1200),setTimeout(function(){e.$currentSection.find(".cover-title").css("opacity",1)},c+2500),setTimeout(function(){e.$currentSection.find(".cover-subtitle").css("opacity",1)},c+3e3)}function n(e,t){var n=e.$currentSection.data("views"),i=n*app.display.windowHeight,r=e.currentSectionScroll/i,o=t?1.5:2.5,a=Math.pow(1-r,o);e.$currentSection.find(".foreground, .scroll-invite").css("opacity",a)}function i(e,t){var n=t?-1:-5,i=e.$currentSection.find(".foreground"),r=e.currentSectionScroll/100*n;r=parseInt(r,10),i.css("transform","translateY("+r+"px)")}function r(e){var t=e.$currentSection.data("views"),n=t*app.display.windowHeight,i=e.currentSectionScroll/n,r=1-i,o=e.currentSectionScroll*r,a=(e.currentSectionScroll-100)/n,s=(1-a)*e.currentSectionScroll;o=parseInt(o,10),s=parseInt(s,10),e.$currentSection.find(".cover-title").css("transform","translateY("+o+"px)"),e.$currentSection.find(".cover-subtitle").css("transform","translateY("+s+"px)")}function o(e,t){var n=e.$currentSection.find(".background"),i=e.$currentSection.data("views"),r=i*app.display.windowHeight,o=0,a=t?6:10;r>0&&(o=e.currentSectionScroll/r*a),n.css({webkitFilter:"blur("+o+"px)",filter:"blur("+o+"px)"})}function a(e,t,n){var i=e.$currentSection.find(".background"),r=1,o=0,a=t?4:20,s=e.$currentSection.find(".foreground");e.currentSectionScroll>0&&(o=e.currentSectionScroll/app.display.windowHeight,r=1+o/a),i.css("transform","scale("+r+")"),n&&s.css("transform","scale("+r+")")}function s(e){var t=e.$currentSection.find(".wrapper"),n=1;e.currentSectionScroll>0&&(n=1-e.currentSectionScroll/app.display.windowHeight),t.css("opacity",n)}function l(e,t){var n=e.$currentSection.data("views"),i=n*app.display.windowHeight,r=e.$currentSection.find(".wrapper"),o=100,a=o,s="";e.currentSectionScroll>0&&(a=t?100*(1-e.currentSectionScroll/i):(i-e.currentSectionScroll)/app.display.windowHeight*100,a>o&&(a=o)),s="brightness("+a.toFixed(1)+"%)",r.css({webkitFilter:s,filter:s})}function u(e){var t=e.$currentSection.find(".background"),n=e.$currentSection.data("views"),i=n*app.display.windowHeight,r=.1,o=.7,a=e.currentSectionScroll>=i*r,s=1;a&&(s=1-(e.currentSectionScroll-i*r)/(i*(1-r)*o)),t.css("opacity",s)}var c=900;return{scaleFadeInCover:e,fadeInBackground:t,fadeOutForeground:n,translateForeground:i,translateForegroundDown:r,blurBackground:o,scaleBackground:a,blendCoverWithHeader:s,darkenCover:l,fadeOutCover:u}}),define("storymaps/tpl/view/section/Cover/CoverStatic",["./CoverCommonEffects"],function(){return function(){this.dataViews=1,this.layoutType="static",this.displayCover=function(){},this.onScroll=function(){}}}),define("storymaps/tpl/view/section/Cover/CoverScale",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!1),e.fadeOutCover(t)}function n(t){e.translateForeground(t,!0),e.fadeOutForeground(t)}this.dataViews=1.25,this.layoutType="scale",this.displayCover=function(t){e.scaleFadeInCover(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverBlur",["./CoverCommonEffects"],function(e){return function(){function t(t){e.blurBackground(t,!1)}function n(t){e.fadeOutForeground(t)}this.dataViews=1.5,this.layoutType="blur",this.displayCover=function(t){e.scaleFadeInCover(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverPartialPage",["./CoverCommonEffects"],function(e){return function(){function t(t){e.blurBackground(t,!0),e.darkenCover(t,!0)}function n(t){e.translateForeground(t,!1),e.fadeOutForeground(t,!0)}this.dataViews=.7,this.layoutType="partial-page",this.displayCover=function(){},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverDelay",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!1),e.darkenCover(t,!1)}function n(t){e.translateForeground(t,!1),e.fadeOutForeground(t,!1)}this.dataViews=1.5,this.layoutType="delay",this.displayCover=function(t){e.fadeInBackground(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverBlendHeader",["./CoverCommonEffects"],function(e){return function(){function t(t){e.scaleBackground(t,!0,!0),e.blendCoverWithHeader(t)}function n(e){e.$currentSection.css("background-color","rgba(0,0,0,1)")}this.dataViews=1,this.layoutType="blend-header",this.displayCover=function(e){n(e)},this.onScroll=function(e){t(e)}}}),define("storymaps/tpl/view/section/Cover/CoverCurtain",["./CoverCommonEffects"],function(e){return function(){function t(t){e.darkenCover(t,!1)}function n(t){e.translateForegroundDown(t)}this.dataViews=1,this.layoutType="curtain",this.displayCover=function(t){e.fadeInBackground(t)},this.onScroll=function(e){t(e),n(e)}}}),define("storymaps/tpl/view/section/Cover/CoverStyleFactory",["./CoverStatic","./CoverScale","./CoverBlur","./CoverPartialPage","./CoverDelay","./CoverBlendHeader","./CoverCurtain"],function(e,t,n,i,r,o,a){function s(s){var u=null;if(u=l(),!u)switch(s){case"scale":u=new t;break;case"blur":u=new n;break;case"partial-page":u=new i;break;case"delay":u=new r;break;case"blend-header":u=new o;break;case"curtain":u=new a;break;default:u=new e}return u}function l(){var e=window.location.href,s=null;return e.indexOf("coverStyle=blur")!==-1?s=new n:e.indexOf("coverStyle=scale")!==-1?s=new t:e.indexOf("coverStyle=partial-page")!==-1?s=new i:e.indexOf("coverStyle=delay")!==-1?s=new r:e.indexOf("coverStyle=blend-header")!==-1?s=new o:e.indexOf("coverStyle=curtain")!==-1&&(s=new a),s}return{createInstance:s}}),define("lib-build/hbars!storymaps-react/tpl/view/section/Cover/Cover",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'            <h2 class="cover-subtitle title-text">'+s((r=null!=(r=t.subtitle||(null!=e?e.subtitle:e))?r:a,typeof r===o?r.call(e,{name:"subtitle",hash:{},data:i}):r))+"</h2>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u=this.lambda,c='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" data-views="'+l((o=null!=(o=t.nbViews||(null!=e?e.nbViews:e))?o:s,typeof o===a?o.call(e,{name:"nbViews",hash:{},data:i}):o))+'">\r\n  <div class="wrapper">\r\n\r\n    ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(c+=r),c+='\r\n\r\n    <div class="foreground">\r\n      <div class="foo">\r\n        <div class="title-error-container hidden">\r\n          <div class="title-error-message">'+l(u(null!=(r=null!=e?e.strings:e)?r.saveError:r,e))+'</div>\r\n        </div>\r\n        <div class="text-background">\r\n          <h1 class="cover-title title-text">'+l((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+'</h1>\r\n          <!--<span class="cover-title-mock-cursor"></span>-->\r\n',r=t.if.call(e,null!=e?e.showSubtitle:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'        </div>\r\n      </div>\r\n\r\n      <div class="cover-media-placeholder">\r\n        <div class="cover-media-placeholder-wrapper">\r\n          <i class="fa fa-picture-o ph-icon-media" aria-hidden="true"></i>\r\n          <div class="cover-media-placeholder-label">'+l(u(null!=(r=null!=e?e.strings:e)?r.mediaPlaceholder:r,e))+'</div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="scroll-invite">\r\n      <div class="scroll-invite-btn"></div>\r\n    </div>\r\n\r\n    <div class="cover-credits-left">'+l((o=null!=(o=t.creditsLeft||(null!=e?e.creditsLeft:e))?o:s,typeof o===a?o.call(e,{name:"creditsLeft",hash:{},data:i}):o))+'</div>\r\n    <div class="cover-credits-right">'+l((o=null!=(o=t.creditsRight||(null!=e?e.creditsRight:e))?o:s,typeof o===a?o.call(e,{name:"creditsRight",hash:{},data:i}):o))+"</div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Cover/Cover",[],function(){}),define("storymaps-react/tpl/view/section/Cover/Cover",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/i18n!resources/tpl/builder/nls/app","storymaps/tpl/view/section/Cover/CoverStyleFactory","lib-build/hbars!./Cover","lib-build/less!./Cover"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=s(n),c=s(i),d=s(r),p=s(o),f=s(a),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(t){l(this,e),this.type="cover",this.id=c.default.getUID(),this._section=t,this._section.options=this._section.options||{},this._node=null,this._isLoaded=!1,this._backgroundMedia=null,this._cover=p.default.createInstance(this._section.layout)}return h(e,[{key:"render",value:function(){return this._backgroundMedia=u.default.initMedia(this._section.background),(0,f.default)({classes:["section","section-layout-cover",this._section.layout,this._cover.layoutType].join(" "),nbViews:this._cover.dataViews,background:u.default.renderBackground({media:this._backgroundMedia}),title:this._section.foreground.title,subtitle:this._section.foreground.subtitle,showSubtitle:this._section.foreground.subtitle||app.isInBuilder,creditsLeft:this._section.foreground["credits-left"],creditsRight:this._section.foreground["credits-right"],strings:d.default.builder.cover})}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate({container:e,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"cover"}),$(".scroll-invite").click(function(){app.Controller.navigateToSection({index:1,animate:!0})}),this._applyConfig()}},{key:"_applyConfig",value:function(){var e=this._node.find(".foreground .title-text"),t=this._node.find(".foreground .text-background"),n=null;this._section.foreground&&this._section.foreground.options&&(n=this._section.foreground.options.titleStyle),u.default.applyTitleStyle(n,e,t)}},{key:"onScroll",value:function(e){if("unload"==e.status)this._backgroundMedia.performAction({visible:!1});else{if("preload"==e.status)return;if("current"==e.status)this._isLoaded?this._backgroundMedia.performAction({isActive:!0}):(this._isLoaded=!0,this._backgroundMedia.load().then(function(){this._backgroundMedia.performAction({isActive:!0})}.bind(this))),this._cover.displayCover(e),this.updateContent(e,!0);else{if(!this._isLoaded)return;this.updateContent(e,!1)}}}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getPreviewText",value:function(){return this._section.foreground.title}},{key:"updateContent",value:function(e,t){0==e.currentSectionIndex&&(e.currentSectionScroll>app.display.sectionHeight/2?$(".story-header").css("background-color","rgba(0,0,0,"+e.currentSectionScroll/app.display.sectionHeight+")"):$(".story-header").css("background-color","rgba(0,0,0,0)")),t||"current"!==e.status||this._cover.onScroll(e)}},{key:"resize",value:function(e){this._backgroundMedia.resize(e)}},{key:"getArcGISContent",value:function(){return this._backgroundMedia.getArcGISContent()}}]),e}();t.default=m,e.exports=t.default}),define("storymaps-react/tpl/utils/Viewport",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,null,[{key:"isInViewport",value:function(e){var t=app.display.scrollTop,n=t+app.display.windowHeight,i=e.offset().top,r=i+e.outerHeight(),o=r<t,a=n<i;return!o&&!a}},{key:"isNearViewportBottom",value:function(e,t){var n=app.display.scrollTop,i=n+app.display.windowHeight,r=e.offset().top,o=r+e.outerHeight(),a=r-i<=t,s=o>=n;return!(!a||!s)}},{key:"isNearViewportTop",value:function(e,t){var n=app.display.scrollTop,i=n+app.display.windowHeight,r=e.offset().top,o=r+e.outerHeight(),a=n-o<=t,s=r<=i;return!(!a||!s)}}]),e}();t.default=r,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Sequence",[],function(){}),define("storymaps-react/tpl/view/section/Sequence",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","storymaps-react/tpl/utils/Viewport","lib-build/less!./Sequence"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p={backgroundMedia:["color","image"],foregroundLayout:["sequence-1"],foregroundMedia:["image","video","webscene","webpage"]},f=function(){function e(t){s(this,e),this.type="sequence",this.id=u.default.getUID(),this._section=t,this._node=null,this._isLoaded=!1,this._blocks=null,this._backgroundMedia=null,this._isActive=!1,this._sectionIndex=null}return d(e,[{key:"render",value:function(e){var t="",n=this._section.foreground;if(l.default.checkErrors(p,this._section,e))return t;if(this._sectionIndex=e,t+='<div class="section section-layout-sequence '+this._section.layout+'">',this._backgroundMedia=l.default.initMedia(this._section.background),t+=l.default.renderBackground({media:this._backgroundMedia}),t+='<div class="foreground">',n.blocks){var i=l.default.renderBlocks(n.blocks);this._blocks=i.blocks,t+=i.output}return t+="</div>",t+="</div>"}},{key:"postCreate",value:function(e){this._node=e;var t=[],n=!0,i=!1,r=void 0;
try{for(var o,a=this._blocks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s.postCreate){var l=s.postCreate({container:e,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS});l&&l.isAsync&&t.push(l.promise)}}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getNumberOfBlocks",value:function(){return this._section.foreground&&this._section.foreground.blocks?this._section.foreground.blocks.length:0}},{key:"onScroll",value:function(e){if("unload"==e.status)this._isActive=!1,$.each(this._blocks,function(e,t){t.performAction({isActive:!1})});else if("preload"==e.status){if(this._isLoaded)return;this._isLoaded=!0,this._backgroundMedia.load(),$.each(this._blocks,function(e,t){"webscene"!==t.type&&t.load()}),this._loadWebScenes(e.webSceneCache,!0,e.scrollDifference)}else"visible"!=e.status&&"current"!=e.status||(this._isLoaded||$.each(this._blocks,function(e,t){"webscene"!==t.type&&t.load()}),this._loadWebScenes(e.webSceneCache,!1,e.scrollDifference),this._isLoaded=!0)}},{key:"_loadWebScenes",value:function(e,t,n){if(!app.data.errorWebGL){var i=!t,r=this._blocks.filter(function(e){return"webscene"===e.type}),o=750,a=!0,s=!1,l=void 0;try{for(var u,d=function(){var r=u.value;if(!r._isLoaded){var a=!1;if(a=n>=0?c.default.isNearViewportBottom(r._node,o):c.default.isNearViewportTop(r._node,o),t||a){var s={item:r,sectionType:"sequential",canRemove:function(){return!c.default.isInViewport(r._node)}};e.add(s,i)}}},p=r[Symbol.iterator]();!(a=(u=p.next()).done);a=!0)d()}catch(e){s=!0,l=e}finally{try{!a&&p.return&&p.return()}finally{if(s)throw l}}}}},{key:"resize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.resize&&a.resize()}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}this._loadWebScenes(e.webSceneCache,!1,0)}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.push.apply(e,a(s.getArcGISContent()))}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return e}}]),e}();t.default=f,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Title",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'      <div class="text-background">\r\n        <h1 class="fg-title title-text">'+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,typeof r===o?r.call(e,{name:"title",hash:{},data:i}):r))+"</h1>\r\n      </div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'">\r\n\r\n  ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(u+=r),u+='\r\n\r\n  <div class="foreground">\r\n',r=t.if.call(e,null!=e?e.showTitle:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(u+=r),u+'  </div>\r\n\r\n  <div class="fg-credits">'+l((o=null!=(o=t.credits||(null!=e?e.credits:e))?o:s,typeof o===a?o.call(e,{name:"credits",hash:{},data:i}):o))+'</div>\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Title",[],function(){}),define("storymaps-react/tpl/view/section/Title",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Title","lib-build/less!./Title"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(t){a(this,e),this.type="title",this.id=l.default.getUID(),this._section=t,this._node=null,this._isLoaded=!1,this._backgroundMedia=null}return c(e,[{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"getPreviewThumbnail",value:function(){return this._backgroundMedia.getPreviewThumbnail()}},{key:"getPreviewText",value:function(){return this._section.foreground?this._section.foreground.title:""}},{key:"getPreviewIcon",value:function(){return""}},{key:"render",value:function(){var e=this._section.background,t=this._section.foreground,n=[],i=this._section.options,r="medium";return i&&i.size&&(r=i.size),n.push("size-"+r),this._backgroundMedia=s.default.initMedia(e),(0,u.default)({classes:["section","section-layout-title"].concat(n).join(" "),id:this.id,background:s.default.renderBackground({media:this._backgroundMedia}),title:t.title,showTitle:app.isInBuilder||t.title,credits:t.credits})}},{key:"postCreate",value:function(e){this._node=e,this._backgroundMedia.postCreate({container:e,mediaIcon:"image",onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"title"}),this._applyConfig()}},{key:"_applyConfig",value:function(){var e=this._node.find(".title-text"),t=this._node.find(".text-background"),n=null;this._section.foreground&&this._section.foreground.options&&(n=this._section.foreground.options.titleStyle),s.default.applyTitleStyle(n,e,t)}},{key:"onScroll",value:function(e){"unload"!=e.status&&("preload"==e.status?this._isLoaded||(this._backgroundMedia.load(),this._isLoaded=!0):this._backgroundMedia.performAction({isActive:!0,progress:0}))}},{key:"resize",value:function(e){this._backgroundMedia.resize(e)}},{key:"getArcGISContent",value:function(){return this._backgroundMedia.getArcGISContent()}}]),e}();t.default=d,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/Immersive",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='    <div class="background-title">\r\n      <div class="background-title-wrapper text-background">\r\n        <h2 class="title-text">'+l((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+"</h2>\r\n        ";return o=null!=(o=t.titleConfigPanel||(null!=e?e.titleConfigPanel:e))?o:s,r=typeof o===a?o.call(e,{name:"titleConfigPanel",hash:{},data:i}):o,null!=r&&(u+=r),u+"\r\n      </div>\r\n    </div>\r\n"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" data-views="'+l((o=null!=(o=t.viewsCount||(null!=e?e.viewsCount:e))?o:s,typeof o===a?o.call(e,{name:"viewsCount",hash:{},data:i}):o))+'">\r\n';return r=t.if.call(e,null!=e?e.showTitle:e,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(u+=r),u+='  <div class="background-credits">'+l((o=null!=(o=t.credits||(null!=e?e.credits:e))?o:s,typeof o===a?o.call(e,{name:"credits",hash:{},data:i}):o))+'</div>\r\n  <div class="background-filler"></div>\r\n\r\n  ',o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(u+=r),u+='\r\n\r\n  <div class="background-swipe-trans-extras">\r\n    <div class="separator-vertical"></div>\r\n    <div class="separator-horizontal"></div>\r\n  </div>\r\n\r\n  <div class="foreground">\r\n    ',o=null!=(o=t.foreground||(null!=e?e.foreground:e))?o:s,r=typeof o===a?o.call(e,{name:"foreground",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n  </div>\r\n\r\n  <div class="builder-panel"></div>\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/Immersive",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/Immersive",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","storymaps-react/tpl/utils/Viewport","lib-build/hbars!./Immersive","lib-build/less!./Immersive"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=a(n),c=a(i),d=a(r),p=a(o),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=125,m=function(){function e(t){l(this,e),this.type="immersive",this.id=c.default.getUID(),this._section=t,this._section.options=this._section.options||{},this._nbViews=0,this._isLoaded=!1,this._isActive=!1,this._currentViewIndex=-1,this._isNavigatingAway=!1,this._currentViewScrollPosition=-1,this._swipeTransitionExtrasNode=null,this._previousMedia=null,this._medias=[],this._panels=[],this._transitions=[],this._mediaCache={}}return f(e,[{key:"render",value:function(e){var t=this._section.views,n=this._section.options;t=t||[],n=n||{},this._nbViews=t.length;var i=[],r="",o="",a="",s="";n.style&&i.push(n.style),t.length&&t[0].foreground.panels&&t[0].foreground.panels[0]&&i.push("layout-"+t[0].foreground.panels[0].layout),n.events&&i.push("events-"+n.events),n["events-btn"]&&i.push("events-"+n["events-btn"]),c.default.isMobileBrowser()&&n["events-btn"]&&(this._nbViews=1.2),t.length&&t[0].foreground.title&&t[0].foreground.title.value&&(r=t[0].foreground.title.value),n.credits&&(o=n.credits);var l=!0,d=!1,f=void 0;try{for(var h,m=t[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var v=h.value,g=this.isMediaAlreadyLoaded(v.background),b=u.default.initMedia(v.background,this._mediaCache);g||(a+=u.default.renderBackground({media:b,transition:v.transition,sectionType:"immersive"})),this._medias.push(b);var y=v.foreground.panels?v.foreground.panels[0]:null;if(y){var _=app.ui.ImmersivePanelFactory.createInstance(y,v.transition,{onUpdateLayout:app.isInBuilder?this.onUpdatePanelLayout.bind(this):null,onChange:app.isInBuilder?this._onContentChange.bind(this):null});this._panels.push(_),s+=_.render()}this._transitions.push(v.transition)}}catch(e){d=!0,f=e}finally{try{!l&&m.return&&m.return()}finally{if(d)throw f}}return(0,p.default)({classes:["section","section-immersive"].concat(i).join(" "),viewsCount:this._nbViews+1,title:r,showTitle:app.isInBuilder||r,credits:o,background:a,foreground:s,titleConfigPanel:app.isInBuilder&&e?e.titleConfigPanel:null})}},{key:"postCreate",value:function(e){this._node=e,this._swipeTransitionExtrasNode=this._node.find(".background-swipe-trans-extras");var t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.postCreate({container:e,delayBuilderInit:!0,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"})}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}var s=!0,l=!1,u=void 0;try{for(var c,d=this._panels[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;p.postCreate({container:e,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL})}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}this._update()}},{key:"update",value:function(){this._update()}},{key:"_update",value:function(){this._nbViews=this._medias.length;var e=this._nbViews+1;1==e&&this._node.find(".background").hasClass("background-type-image")&&(e*=1.1),this._node.css("min-height",100*e+"vh"),this._applyTransitionRules(),this._computeWebMapsSwipeLayers(),this._applyTitleConfig()}},{key:"_applyTitleConfig",value:function(){if(this._section.views.length&&this._section.views[0].foreground&&this._section.views[0].foreground.title){var e=this._section.views[0].foreground.title.style,t=this._node.find(".background-title-wrapper h2"),n=this._node.find(".background-title-wrapper");u.default.applyTitleStyle(e,t,n)}}},{key:"onScroll",value:function(e){var t=parseInt(e.currentSectionScroll/app.display.windowHeight,10)+1;if(this._isNavigatingAway=t>this._nbViews,this._currentViewScrollPosition=e.currentSectionScroll%app.display.windowHeight,t=Math.min(t,this._nbViews),e.viewportTop<=0&&(t=1),"unload"==e.status){this._isActive=!1;var n=!0,i=!1,r=void 0;try{for(var o,a=this._medias[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.performAction({isActive:!1,animate:!1})}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return this._medias[0]&&(1===this._currentViewIndex&&this._medias[0].getNode().nextAll().removeClass("active"),this._medias[0].getNode().addClass("active"),this._medias[0].performAction({isActive:!1,transition:this._transitions[0],isNewView:!0,viewIndex:0,visibilityProgress:0,scrollPositionSection:0,scrollPositionView:0,performBuilderInit:!1,animate:!1})),this._panels[0]&&this._panels[0].updatePosition(e),this._node.toggleClass("hide-title hide-credits",!0),this._currentViewIndex=-1,void(this._previousMedia=null)}var l=this._medias[t-1];if(l){if(!this._isLoaded){this._isLoaded=!0,this.loadMedias(),this._loadWebScenes({cache:e.webSceneCache,currentMedia:l,viewIndex:t,isPreload:!0,scrollDifference:e.scrollDifference});var u=!0,c=!1,d=void 0;try{for(var p,f=this._panels[Symbol.iterator]();!(u=(p=f.next()).done);u=!0){var m=p.value;m.load()}}catch(e){c=!0,d=e}finally{try{!u&&f.return&&f.return()}finally{if(c)throw d}}this._node.find(".background").eq(0).addClass("active")}var v=this._currentViewIndex;if("visible"!==e.status&&"current"!==e.status||(this._currentViewIndex=t,this._loadWebScenes({cache:e.webSceneCache,currentMedia:l,viewIndex:t,isPreload:!1,scrollDifference:e.scrollDifference})),"current"==e.status){var g={isActive:"current"==e.status,transition:this._transitions[t-1],isNewView:v!=t||!this._isActive&&"current"===e.status,viewIndex:t,visibilityProgress:1,scrollPositionSection:e.currentSectionScroll,scrollPositionView:this._currentViewScrollPosition,performBuilderInit:v!=t||!this._isActive&&"current"===e.status};this._isActive=!0;var b=!1;if("current"==e.status){var y=this._transitions[t-1],_=this._medias[t-2];b=this._isTransitionDoneByMedia(y,l,_)}var w=g.isNewView;if(w||"webmap"!=l.type||this._isNavigatingAway||(w=b),w&&l.performAction(g),"current"==e.status){if(this._node.toggleClass("hide-title hide-credits",!1),g.isNewView&&(l.getNode().nextAll().removeClass("active"),l.getNode().addClass("active"),this._previousMedia&&"video"==this._previousMedia.type&&!this._previousMedia.isSameMedia(l)&&this._previousMedia.performAction({isActive:!1}),this._previousMedia=l),!this._isNavigatingAway)if("swipe-vertical"==y||"swipe-horizontal"==y)if(b)this._swipeTransitionExtrasNode.removeClass("active");else{var C=null,E=app.display.windowWidth,k=app.display.windowHeight;if(app.isInBuilder&&(k-=h),"swipe-vertical"==y)C=k-this._currentViewScrollPosition,l.getNode().css("clip","rect("+C+"px,"+E+"px,"+app.display.windowHeight+"px,0px)"),this._swipeTransitionExtrasNode.css({top:C,left:""}).toggleClass("trans-vertical",!0).toggleClass("trans-horizontal",!1).addClass("active");else if("swipe-horizontal"==y){var T=this._currentViewScrollPosition/k;C=T>=.97?0:E-T*E,l.getNode().css("clip","rect(0px,"+E+"px,"+app.display.windowHeight+"px,"+C+"px)"),this._swipeTransitionExtrasNode.css({top:"",left:C}).toggleClass("trans-vertical",!1).toggleClass("trans-horizontal",!0).addClass("active")}}else this._swipeTransitionExtrasNode.removeClass("active");var x=this._panels&&this._panels.length?this._panels[t-1]:null;if(x.updatePosition(e),g.isNewView){var S=this._panels[t-2];S&&S.updatePosition({isNewView:!0})}t==this._nbViews&&(this._node.toggleClass("hide-title hide-credits",this._isNavigatingAway),"scroll-partial"==x.layout&&this._isNavigatingAway&&this._node.find(".imm-panel").css("opacity",0))}}}}},{key:"_loadWebScenes",value:function(e){var t=this;if(!app.data.errorWebGL){var n=!e.isPreload,i=this._medias.filter(function(e){return"webscene"===e.type}),r=!0,o=!1,a=void 0;try{for(var s,l=function(){var i=s.value;if(!i._isLoaded){var r=t._medias[e.viewIndex-2],o=t._medias[e.viewIndex],a=750,l={item:i,sectionType:"immersive",canRemove:function(){return t._canRemoveWebScene(i)},viewIndex:e.viewIndex-1};if(e.isPreload){var u=t._medias.findIndex(function(e){return e.id===i.id&&e._node===i._node});l.viewIndex=u,e.cache.add(l,n)}else if(e.currentMedia===i)e.cache.add(l,n);else if(r===i)l.viewIndex=e.viewIndex-2,e.cache.add(l,n);else if(e.scrollDifference>=0&&o===i){var c=app.display.windowHeight-t._currentViewScrollPosition;c<=a&&(l.viewIndex=e.viewIndex,e.cache.add(l,n))}}},u=i[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}}}},{key:"_canRemoveWebScene",value:function(e){var t=d.default.isInViewport(this._node);return!t||this._medias[this._currentViewIndex-1]!==e&&this._medias[this._currentViewIndex-2]!==e}},{key:"loadMedias",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,s=!1;"webmap"==a.type&&(e.indexOf(a.id)>-1?s=!0:e.push(a.id)),s||"webscene"===a.type||this.loadMediaItem(a)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"loadMediaItem",value:function(e){var t=null;t="webmap"===e.type?e.load({isUniqueInSection:this.isMediaUniqueInSection(e.serialize())}):e.load(),t&&t.then(function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.id==e&&a.postLoad()}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}.bind(this))}},{key:"navigateToViewByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(void 0!=e.index&&void 0!=e.animate){var t=this._node.position().top,n=app.display.windowHeight,i=e.index*n,r=n-250;app.isInBuilder&&(r+=h);var o=Math.floor(t+i+r);e.animate?$("html,body").animate({scrollTop:o}):(document.body.scrollTop=o,document.documentElement.scrollTop=o)}}},{key:"isMediaAlreadyLoaded",value:function(e){return u.default.getMediaIndexes(this._medias,e).length>0}},{key:"isMediaUniqueInSection",value:function(e){return 1==u.default.getMediaIndexes(this._medias,e).length}},{key:"resize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.resize(e)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}this._loadWebScenes({cache:e.webSceneCache,currentMedia:this._medias[this._currentViewIndex-1],viewIndex:this._currentViewIndex,isPreload:!1,scrollDifference:0})}},{key:"getBookmark",value:function(){var e=this._section.bookmark||{};return{status:e.enabled?"visible":"disabled",title:this.getPreviewText?this.getPreviewText():"",bookmark:e.title||this.getPreviewText&&this.getPreviewText()}}},{key:"_computeWebMapsSwipeLayers",value:function(){for(var e=0;e<this._medias.length;e++){var t=this._getTransitionInfo(e),n=this._medias[e];0!=e&&"webmap"==n.type&&t.isDuplicateConsecutive&&this._medias[e].computeSwipeLayers(this._medias[e-1].getLayersConfiguration())}}},{key:"_isTransitionDoneByMedia",value:function(e,t,n){return e&&t&&n&&("swipe-vertical"==e||"swipe-horizontal"==e)&&"webmap"==t.type&&"webmap"==n.type&&t.id==n.id}},{key:"_applyTransitionRules",value:function(){for(var e=0;e<this._medias.length;e++){var t=this._getTransitionInfo(e);0!=e?t.isDuplicateConsecutive?t.duplicateConsecutiveTransitions.indexOf(this._transitions[e])==-1&&(this._transitions[e]="none"):t.isDuplicate&&t.firstOccurenceTransition&&"image"!=this._medias[e].type&&(this._transitions[e]="none"):this._transitions[e]="fade-fast"}}},{key:"_getTransitionInfo",value:function(e){var t=this._medias[e],n=u.default.getMediaIndexes(this._medias,t,!0),i=!1,r=null,o=!1,a=[];return n.length>1&&n[0]<e&&(i=!0,r=this._transitions[n[0]],n[n.indexOf(e)-1]==e-1&&(o=!0,a=t.getAuthorizedTransitionsWith(this._medias[e-1]))),{isDuplicate:i,isDuplicateConsecutive:o,firstOccurenceTransition:r,duplicateConsecutiveTransitions:a}}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._medias[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;e.push.apply(e,s(a.getArcGISContent()))}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}var l=!0,u=!1,c=void 0;try{for(var d,p=this._panels[Symbol.iterator]();!(l=(d=p.next()).done);l=!0){var f=d.value;e.push.apply(e,s(f.getArcGISContent()))}}catch(e){u=!0,c=e}finally{try{!l&&p.return&&p.return()}finally{if(u)throw c}}return e}}]),e}();t.default=m,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Credits",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l='<div class="section section-layout-credits" role="contentinfo">\r\n\r\n  ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(l+=r),l+='\r\n\r\n  <div class="foreground">\r\n    <div class="credits">\r\n      ',o=null!=(o=t.credits||(null!=e?e.credits:e))?o:s,r=typeof o===a?o.call(e,{name:"credits",hash:{},data:i}):o,null!=r&&(l+=r),l+'\r\n    </div>\r\n  </div>\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Credits",[],function(){}),define("lib-build/css!storymaps-react/tpl/view/ui/AuthorInfo",[],function(){}),define("storymaps-react/tpl/view/section/Credits",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Credits","lib-build/less!./Credits","lib-build/css!../ui/AuthorInfo"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d={backgroundMedia:["color"],foregroundLayout:["credits-1"]},p=function(){function e(t){a(this,e),this.type="credits",this.id=l.default.getUID(),this._section=t,this._node=null,this._backgroundMedia=null,this._panels=[]}return c(e,[{key:"render",value:function(e){var t=this._section.background,n=this._section.foreground,i="";if(s.default.checkErrors(d,this._section,e))return"";this._backgroundMedia=s.default.initMedia(t);var r=!0,o=!1,a=void 0;try{for(var l,c=n.panels[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var p=l.value;if("blocks"===p.type){var f=s.default.renderBlocks(p.blocks);this._panels.push({type:"blocks",blocks:f.blocks,editor:null});var h='<div class="blocks">'+f.output+"</div>";i+=h}else if("credits"===p.type){var m=s.default.initMedia(p,null);this._panels.push({type:"credits",credits:m,editor:null}),i+=m.render({placement:"block"})}}}catch(e){o=!0,a=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw a}}return(0,u.default)({background:s.default.renderBackground({media:this._backgroundMedia}),credits:i})}},{key:"postCreate",value:function(e){this._node=e;var t=!0,n=!1,i=void 0;try{for(var r,o=this._panels[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if("blocks"===a.type){var s=!0,l=!1,u=void 0;try{for(var c,d=a.blocks[Symbol.iterator]();!(s=(c=d.next()).done);s=!0){var p=c.value;p.postCreate({container:e})}}catch(e){l=!0,u=e}finally{try{!s&&d.return&&d.return()}finally{if(l)throw u}}}else"credits"===a.type&&a.credits.postCreate({container:e,onContentChange:app.isInBuilder?this._onContentChange.bind(this):null})}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"getPreviewThumbnail",value:function(){return""}},{key:"getPreviewText",value:function(){return""}},{key:"getPreviewIcon",value:function(){return""}},{key:"getArcGISContent",value:function(){return[]}},{key:"onScroll",value:function(){}},{key:"resize",value:function(){}}]),e}();t.default=p,e.exports=t.default}),define("storymaps-react/tpl/view/section/FactoryViewer",["module","exports","./Cover/Cover","./Sequence","./Title","./Immersive/Immersive","./Credits"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=s(n),c=s(i),d=s(r),p=s(o),f=s(a),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(){l(this,e)}return h(e,null,[{key:"getClasses",value:function(){return{Cover:u.default,Sequence:c.default,Title:d.default,Immersive:p.default,Credits:f.default,CreditsPlaceholder:function(){}}}},{key:"createInstance",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=null,n=e.type;if(!n)return console.error("Invalid json for: ",e),t;var i=this.getClasses();return"cover"==n?t=new i.Cover(e):"sequence"==n?t=new i.Sequence(e):"title"==n?t=new i.Title(e):"immersive"==n?t=new i.Immersive(e):"credits"==n?t=new i.Credits(e):"credits-placeholder"==n?t=new i.CreditsPlaceholder(e):console.error("Could not find corresponding layout for: ",e),t}}]),e}();t.default=m,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Cover/CoverBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Cover/CoverBuilder",["module","exports","./Cover","lib-build/i18n!resources/tpl/builder/nls/app","storymaps/tpl/view/section/Common","dojo/topic","dojo/_base/lang","lib-build/less!./CoverBuilder"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.scanResults={hasErrors:!1,hasWarnings:!1},n.MEDIA_BUILDER_TABS_BACKGROUND=["section-appearance","background","manage"],n}return c(t,e),v(t,[{key:"render",value:function(){return this._section.background||(this._section.layout="cover-1",this._section.background={type:"image",image:{url:this._getCoverPlaceholderImage(),isPlaceholder:!0}},this._section.foreground.options={titleStyle:{shadow:!1,text:"dark",background:"light"}}),this._section.foreground.options||(this._section.foreground.options={}),this._section.foreground.options.titleStyle||(this._section.foreground.options.titleStyle={shadow:!0,text:"light",background:null}),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){var n=this;g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._node.find(".cover-title").attr("contenteditable",!0).attr("placeholder",p.default.builder.cover.titlePrompt).on("blur keyup",function(e){var t=$("<div>"+$(e.target).text()+"</div>").text();t!=app.Controller.getStoryTitle()&&(this._section.foreground.title=t,h.default.publish("builder-story-title-update",t),this._onContentChange())}.bind(this)).on("paste",function(){setTimeout(function(){this._node.find(".cover-title").html($("<div>"+this._node.find(".cover-title").text()+"</div>").text());var e=this._node.find(".cover-title").text();this._section.foreground.title=e,h.default.publish("builder-story-title-update",e),this._onContentChange()}.bind(this),0)}.bind(this)).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}n._node.find(".cover-title").removeClass("title-error"),n._node.find(".title-error-container").addClass("hidden")}),this._node.find(".cover-subtitle").attr("contenteditable",!0).attr("placeholder",p.default.builder.cover.subtitlePrompt).on("blur keyup",function(e){var t=$("<div>"+$(e.target).text()+"</div>").text();t!=this._section.foreground.subtitle&&(this._section.foreground.subtitle=t,this._onContentChange())}.bind(this)).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}}).on("paste",function(){setTimeout(function(){this._node.find(".cover-subtitle").html($("<div>"+this._node.find(".cover-subtitle").text()+"</div>").text())}.bind(this),0)}.bind(this)),this._backgroundMedia.isPlaceholder()&&(this._node.find(".cover-media-placeholder").addClass("active"),this._node.find(".cover-media-placeholder-wrapper").click(this._onEditPlaceholderMedia.bind(this)))}},{key:"serialize",value:function(){return this._node&&(this._section.foreground.title=$("<div>"+this._node.find(".cover-title").text()+"</div>").text(),this._section.foreground.subtitle=$("<div>"+this._node.find(".cover-subtitle").text()+"</div>").text(),this._section.background=this._backgroundMedia.serialize()),m.default.clone(this._section)}},{key:"setBookmark",
value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"showTitleError",value:function(){this._node.find(".cover-title").addClass("title-error"),this._node.find(".title-error-container").removeClass("hidden")}},{key:"_onContentChange",value:function(){h.default.publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(){this._node.toggleClass("hide-scroll-invite")}},{key:"_onEditPlaceholderMedia",value:function(){app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image","video"]}).then(function(e){this._onEditMedia(this._backgroundMedia,e),this._node.find(".cover-media-placeholder").removeClass("active"),this._onContentChange()}.bind(this),function(){})}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.action&&e.media&&("swap"==e.action&&app.builder.mediaPicker.open({mode:"edit",media:e.media.serialize(),authorizedMedia:["image","video"]}).then(function(t){this._onToggleMediaConfig(),this._onEditMedia(e.media,t)}.bind(this),function(){}),this._onContentChange())}},{key:"_applySectionConfig",value:function(){this._applyConfig(),this._onContentChange()}},{key:"_onEditMedia",value:function(e,t){var n=f.default.initMedia(t);this._node.find(".background").remove(),this._node.find(".wrapper").prepend(f.default.renderBackground({media:n})),n.postCreate({container:this._node,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"cover"}),n.load({isBuilderAdd:!0}),e.destroy(),this._backgroundMedia=n,f.default.checkMedia(t),this._applySectionConfig()}},{key:"_getCoverPlaceholderImage",value:function(){var e=["AndrewNeel.jpg","AustinD.jpg","BlakeRichardVerdoorn.jpg","ChristianNielsen.jpg","DariuszSankowski.jpg","JamieHagan.jpg","JarrenSimmons.jpg","JOHNTOWNER.jpg","KamalJ.jpg","KoushikC.jpg","KristoferSelbekk.jpg","SteveRichey.jpg","YuxXiang.jpg","ZbysiuRodak.jpg","14828.jpg","24241.jpg","24963.jpg","57688.jpg","93092.jpg","123972.jpg","124325.jpg","134977.jpg","136526.jpg","152227.jpg","154060.jpg","162286.jpg","173199.jpg","182304.jpg","183942.jpg","196539.jpg","198863.jpg","207956.jpg"],t=e[Math.floor(Math.random()*e.length)];return"resources/tpl/viewer/cover-placeholder/"+t}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}}]),t}(d.default);t.default=b,e.exports=t.default}),"classList"in document.createElement("_")||!function(e){"use strict";if("Element"in e){var t="classList",n="prototype",i=e.Element[n],r=Object,o=String[n].trim||function(){return this.replace(/^\s+|\s+$/g,"")},a=Array[n].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1},s=function(e,t){this.name=e,this.code=DOMException[e],this.message=t},l=function(e,t){if(""===t)throw new s("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(t))throw new s("INVALID_CHARACTER_ERR","String contains an invalid character");return a.call(e,t)},u=function(e){for(var t=o.call(e.getAttribute("class")||""),n=t?t.split(/\s+/):[],i=0,r=n.length;i<r;i++)this.push(n[i]);this._updateClassName=function(){e.setAttribute("class",this.toString())}},c=u[n]=[],d=function(){return new u(this)};if(s[n]=Error[n],c.item=function(e){return this[e]||null},c.contains=function(e){return e+="",l(this,e)!==-1},c.add=function(){var e,t=arguments,n=0,i=t.length,r=!1;do e=t[n]+"",l(this,e)===-1&&(this.push(e),r=!0);while(++n<i);r&&this._updateClassName()},c.remove=function(){var e,t,n=arguments,i=0,r=n.length,o=!1;do for(e=n[i]+"",t=l(this,e);t!==-1;)this.splice(t,1),o=!0,t=l(this,e);while(++i<r);o&&this._updateClassName()},c.toggle=function(e,t){e+="";var n=this.contains(e),i=n?t!==!0&&"remove":t!==!1&&"add";return i&&this[i](e),t===!0||t===!1?t:!n},c.toString=function(){return this.join(" ")},r.defineProperty){var p={get:d,enumerable:!0,configurable:!0};try{r.defineProperty(i,t,p)}catch(e){e.number===-2146823252&&(p.enumerable=!1,r.defineProperty(i,t,p))}}else r[n].__defineGetter__&&i.__defineGetter__(t,d)}}(self),function(e){"use strict";if(e.URL=e.URL||e.webkitURL,e.Blob&&e.URL)try{return void new Blob}catch(e){}var t=e.BlobBuilder||e.WebKitBlobBuilder||e.MozBlobBuilder||function(e){var t=function(e){return Object.prototype.toString.call(e).match(/^\[object\s(.*)\]$/)[1]},n=function(){this.data=[]},i=function(e,t,n){this.data=e,this.size=e.length,this.type=t,this.encoding=n},r=n.prototype,o=i.prototype,a=e.FileReaderSync,s=function(e){this.code=this[this.name=e]},l="NOT_FOUND_ERR SECURITY_ERR ABORT_ERR NOT_READABLE_ERR ENCODING_ERR NO_MODIFICATION_ALLOWED_ERR INVALID_STATE_ERR SYNTAX_ERR".split(" "),u=l.length,c=e.URL||e.webkitURL||e,d=c.createObjectURL,p=c.revokeObjectURL,f=c,h=e.btoa,m=e.atob,v=e.ArrayBuffer,g=e.Uint8Array,b=/^[\w-]+:\/*\[?[\w\.:-]+\]?(?::[0-9]+)?/;for(i.fake=o.fake=!0;u--;)s.prototype[l[u]]=u+1;return c.createObjectURL||(f=e.URL=function(e){var t,n=document.createElementNS("http://www.w3.org/1999/xhtml","a");return n.href=e,"origin"in n||("data:"===n.protocol.toLowerCase()?n.origin=null:(t=e.match(b),n.origin=t&&t[1])),n}),f.createObjectURL=function(e){var t,n=e.type;return null===n&&(n="application/octet-stream"),e instanceof i?(t="data:"+n,"base64"===e.encoding?t+";base64,"+e.data:"URI"===e.encoding?t+","+decodeURIComponent(e.data):h?t+";base64,"+h(e.data):t+","+encodeURIComponent(e.data)):d?d.call(c,e):void 0},f.revokeObjectURL=function(e){"data:"!==e.substring(0,5)&&p&&p.call(c,e)},r.append=function(e){var n=this.data;if(g&&(e instanceof v||e instanceof g)){for(var r="",o=new g(e),l=0,u=o.length;l<u;l++)r+=String.fromCharCode(o[l]);n.push(r)}else if("Blob"===t(e)||"File"===t(e)){if(!a)throw new s("NOT_READABLE_ERR");var c=new a;n.push(c.readAsBinaryString(e))}else e instanceof i?"base64"===e.encoding&&m?n.push(m(e.data)):"URI"===e.encoding?n.push(decodeURIComponent(e.data)):"raw"===e.encoding&&n.push(e.data):("string"!=typeof e&&(e+=""),n.push(unescape(encodeURIComponent(e))))},r.getBlob=function(e){return arguments.length||(e=null),new i(this.data.join(""),e,"raw")},r.toString=function(){return"[object BlobBuilder]"},o.slice=function(e,t,n){var r=arguments.length;return r<3&&(n=null),new i(this.data.slice(e,r>1?t:this.data.length),n,this.encoding)},o.toString=function(){return"[object Blob]"},o.close=function(){this.size=0,delete this.data},n}(e);e.Blob=function(e,n){var i=n?n.type||"":"",r=new t;if(e)for(var o=0,a=e.length;o<a;o++)Uint8Array&&e[o]instanceof Uint8Array?r.append(e[o].buffer):r.append(e[o]);var s=r.getBlob(i);return!s.slice&&s.webkitSlice&&(s.slice=s.webkitSlice),s};var n=Object.getPrototypeOf||function(e){return e.__proto__};e.Blob.prototype=n(new e.Blob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this),function(e,t){"use strict";var n="object"==typeof module&&process&&process.versions&&process.versions.electron;n||"object"!=typeof module?"function"==typeof define&&define.amd?define("lib/medium-editor/dist/js/medium-editor",[],function(){return t}):e.MediumEditor=t:module.exports=t}(this,function(){"use strict";function e(e,t){return this.init(e,t)}return e.extensions={},function(t){function n(e,t){var n,i=Array.prototype.slice.call(arguments,2);t=t||{};for(var r=0;r<i.length;r++){var o=i[r];if(o)for(n in o)o.hasOwnProperty(n)&&"undefined"!=typeof o[n]&&(e||t.hasOwnProperty(n)===!1)&&(t[n]=o[n])}return t}var i=!1;try{var r=document.createElement("div"),o=document.createTextNode(" ");r.appendChild(o),i=r.contains(o)}catch(e){}var a={isIE:"Microsoft Internet Explorer"===navigator.appName||"Netscape"===navigator.appName&&null!==new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})").exec(navigator.userAgent),isEdge:null!==/Edge\/\d+/.exec(navigator.userAgent),isFF:navigator.userAgent.toLowerCase().indexOf("firefox")>-1,isMac:t.navigator.platform.toUpperCase().indexOf("MAC")>=0,keyCode:{BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,SPACE:32,DELETE:46,K:75,M:77,V:86},isMetaCtrlKey:function(e){return!!(a.isMac&&e.metaKey||!a.isMac&&e.ctrlKey)},isKey:function(e,t){var n=a.getKeyCode(e);return!1===Array.isArray(t)?n===t:-1!==t.indexOf(n)},getKeyCode:function(e){var t=e.which;return null===t&&(t=null!==e.charCode?e.charCode:e.keyCode),t},blockContainerElementNames:["p","h1","h2","h3","h4","h5","h6","blockquote","pre","ul","li","ol","address","article","aside","audio","canvas","dd","dl","dt","fieldset","figcaption","figure","footer","form","header","hgroup","main","nav","noscript","output","section","video","table","thead","tbody","tfoot","tr","th","td"],emptyElementNames:["br","col","colgroup","hr","img","input","source","wbr"],extend:function(){var e=[!0].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},defaults:function(){var e=[!1].concat(Array.prototype.slice.call(arguments));return n.apply(this,e)},createLink:function(e,t,n,i){var r=e.createElement("a");return a.moveTextRangeIntoElement(t[0],t[t.length-1],r),r.setAttribute("href",n),i&&r.setAttribute("target",i),r},findOrCreateMatchingTextNodes:function(e,t,n){for(var i=e.createTreeWalker(t,NodeFilter.SHOW_ALL,null,!1),r=[],o=0,s=!1,l=null,u=null;null!==(l=i.nextNode());)if(!(l.nodeType>3))if(3===l.nodeType){if(!s&&n.start<o+l.nodeValue.length&&(s=!0,u=a.splitStartNodeIfNeeded(l,n.start,o)),s&&a.splitEndNodeIfNeeded(l,u,n.end,o),s&&o===n.end)break;if(s&&o>n.end+1)throw new Error("PerformLinking overshot the target!");s&&r.push(u||l),o+=l.nodeValue.length,null!==u&&(o+=u.nodeValue.length,i.nextNode()),u=null}else"img"===l.tagName.toLowerCase()&&(!s&&n.start<=o&&(s=!0),s&&r.push(l));return r},splitStartNodeIfNeeded:function(e,t,n){return t!==n?e.splitText(t-n):null},splitEndNodeIfNeeded:function(e,t,n,i){var r,o;r=i+(t||e).nodeValue.length+(t?e.nodeValue.length:0)-1,o=(t||e).nodeValue.length-(r+1-n),r>=n&&i!==r&&0!==o&&(t||e).splitText(o)},splitByBlockElements:function(t){if(3!==t.nodeType&&1!==t.nodeType)return[];var n=[],i=e.util.blockContainerElementNames.join(",");if(3===t.nodeType||0===t.querySelectorAll(i).length)return[t];for(var r=0;r<t.childNodes.length;r++){var o=t.childNodes[r];if(3===o.nodeType)n.push(o);else if(1===o.nodeType){var a=o.querySelectorAll(i);0===a.length?n.push(o):n=n.concat(e.util.splitByBlockElements(o))}}return n},findAdjacentTextNodeWithContent:function(e,t,n){var i,r=!1,o=n.createNodeIterator(e,NodeFilter.SHOW_TEXT,null,!1);for(i=o.nextNode();i;){if(i===t)r=!0;else if(r&&3===i.nodeType&&i.nodeValue&&i.nodeValue.trim().length>0)break;i=o.nextNode()}return i},findPreviousSibling:function(e){if(!e||a.isMediumEditorElement(e))return!1;for(var t=e.previousSibling;!t&&!a.isMediumEditorElement(e.parentNode);)e=e.parentNode,t=e.previousSibling;return t},isDescendant:function(e,t,n){if(!e||!t)return!1;if(e===t)return!!n;if(1!==e.nodeType)return!1;if(i||3!==t.nodeType)return e.contains(t);for(var r=t.parentNode;null!==r;){if(r===e)return!0;r=r.parentNode}return!1},isElement:function(e){return!(!e||1!==e.nodeType)},throttle:function(e,t){var n,i,r,o=50,a=null,s=0,l=function(){s=Date.now(),a=null,r=e.apply(n,i),a||(n=i=null)};return t||0===t||(t=o),function(){var o=Date.now(),u=t-(o-s);return n=this,i=arguments,u<=0||u>t?(a&&(clearTimeout(a),a=null),s=o,r=e.apply(n,i),a||(n=i=null)):a||(a=setTimeout(l,u)),r}},traverseUp:function(e,t){if(!e)return!1;do{if(1===e.nodeType){if(t(e))return e;if(a.isMediumEditorElement(e))return!1}e=e.parentNode}while(e);return!1},htmlEntities:function(e){return String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},insertHTMLCommand:function(t,n){var i,r,o,s,l,u,c,d=!1,p=["insertHTML",!1,n];if(!e.util.isEdge&&t.queryCommandSupported("insertHTML"))try{return t.execCommand.apply(t,p)}catch(e){}if(i=t.getSelection(),i.rangeCount){if(r=i.getRangeAt(0),c=r.commonAncestorContainer,a.isMediumEditorElement(c)&&!c.firstChild)r.selectNode(c.appendChild(t.createTextNode("")));else if(3===c.nodeType&&0===r.startOffset&&r.endOffset===c.nodeValue.length||3!==c.nodeType&&c.innerHTML===r.toString()){for(;!a.isMediumEditorElement(c)&&c.parentNode&&1===c.parentNode.childNodes.length&&!a.isMediumEditorElement(c.parentNode);)c=c.parentNode;r.selectNode(c)}for(r.deleteContents(),o=t.createElement("div"),o.innerHTML=n,s=t.createDocumentFragment();o.firstChild;)l=o.firstChild,u=s.appendChild(l);r.insertNode(s),u&&(r=r.cloneRange(),r.setStartAfter(u),r.collapse(!0),e.selection.selectRange(t,r)),d=!0}return t.execCommand.callListeners&&t.execCommand.callListeners(p,d),d},execFormatBlock:function(t,n){var i,r=a.getTopBlockContainer(e.selection.getSelectionStart(t));if("blockquote"===n){if(r&&(i=Array.prototype.slice.call(r.childNodes),i.some(function(e){return a.isBlockContainer(e)})))return t.execCommand("outdent",!1,null);if(a.isIE)return t.execCommand("indent",!1,n)}if(r&&n===r.nodeName.toLowerCase()&&(n="p"),a.isIE&&(n="<"+n+">"),r&&"blockquote"===r.nodeName.toLowerCase()){if(a.isIE&&"<p>"===n)return t.execCommand("outdent",!1,n);if((a.isFF||a.isEdge)&&"p"===n)return i=Array.prototype.slice.call(r.childNodes),i.some(function(e){return!a.isBlockContainer(e)})&&t.execCommand("formatBlock",!1,n),t.execCommand("outdent",!1,n)}return t.execCommand("formatBlock",!1,n)},setTargetBlank:function(e,t){var n,i=t||!1;if("a"===e.nodeName.toLowerCase())e.target="_blank";else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)!1!==i&&i!==e[n].attributes.href.value||(e[n].target="_blank")},removeTargetBlank:function(e,t){var n;if("a"===e.nodeName.toLowerCase())e.removeAttribute("target");else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)t===e[n].attributes.href.value&&e[n].removeAttribute("target")},addClassToAnchors:function(e,t){var n,i,r=t.split(" ");if("a"===e.nodeName.toLowerCase())for(i=0;i<r.length;i+=1)e.classList.add(r[i]);else for(e=e.getElementsByTagName("a"),n=0;n<e.length;n+=1)for(i=0;i<r.length;i+=1)e[n].classList.add(r[i])},isListItem:function(e){if(!e)return!1;if("li"===e.nodeName.toLowerCase())return!0;for(var t=e.parentNode,n=t.nodeName.toLowerCase();"li"===n||!a.isBlockContainer(t)&&"div"!==n;){if("li"===n)return!0;if(t=t.parentNode,!t)return!1;n=t.nodeName.toLowerCase()}return!1},cleanListDOM:function(t,n){if("li"===n.nodeName.toLowerCase()){var i=n.parentElement;"p"===i.parentElement.nodeName.toLowerCase()&&(a.unwrap(i.parentElement,t),e.selection.moveCursor(t,n.firstChild,n.firstChild.textContent.length))}},splitOffDOMTree:function(e,t,n){for(var i=t,r=null,o=!n;i!==e;){var a,s=i.parentNode,l=s.cloneNode(!1),u=o?i:s.firstChild;for(r&&(o?l.appendChild(r):a=r),r=l;u;){var c=u.nextSibling;u===i?(u.hasChildNodes()?u=u.cloneNode(!1):u.parentNode.removeChild(u),u.textContent&&r.appendChild(u),u=o?c:null):(u.parentNode.removeChild(u),(u.hasChildNodes()||u.textContent)&&r.appendChild(u),u=c)}a&&r.appendChild(a),i=s}return r},moveTextRangeIntoElement:function(e,t,n){if(!e||!t)return!1;var i=a.findCommonRoot(e,t);if(!i)return!1;if(t===e){var r=e.parentNode,o=e.nextSibling;return r.removeChild(e),n.appendChild(e),o?r.insertBefore(n,o):r.appendChild(n),n.hasChildNodes()}for(var s,l,u,c=[],d=0;d<i.childNodes.length;d++)if(u=i.childNodes[d],s){if(a.isDescendant(u,t,!0)){l=u;break}c.push(u)}else a.isDescendant(u,e,!0)&&(s=u);var p=l.nextSibling,f=i.ownerDocument.createDocumentFragment();return s===e?(s.parentNode.removeChild(s),f.appendChild(s)):f.appendChild(a.splitOffDOMTree(s,e)),c.forEach(function(e){e.parentNode.removeChild(e),f.appendChild(e)}),l===t?(l.parentNode.removeChild(l),f.appendChild(l)):f.appendChild(a.splitOffDOMTree(l,t,!0)),n.appendChild(f),l.parentNode===i?i.insertBefore(n,l):p?i.insertBefore(n,p):i.appendChild(n),n.hasChildNodes()},depthOfNode:function(e){for(var t=0,n=e;null!==n.parentNode;)n=n.parentNode,t++;return t},findCommonRoot:function(e,t){for(var n=a.depthOfNode(e),i=a.depthOfNode(t),r=e,o=t;n!==i;)n>i?(r=r.parentNode,n-=1):(o=o.parentNode,i-=1);for(;r!==o;)r=r.parentNode,o=o.parentNode;return r},isElementAtBeginningOfBlock:function(e){for(var t,n;!a.isBlockContainer(e)&&!a.isMediumEditorElement(e);){for(n=e;n=n.previousSibling;)if(t=3===n.nodeType?n.nodeValue:n.textContent,t.length>0)return!1;e=e.parentNode}return!0},isMediumEditorElement:function(e){return e&&e.getAttribute&&!!e.getAttribute("data-medium-editor-element")},getContainerEditorElement:function(e){return a.traverseUp(e,function(e){return a.isMediumEditorElement(e)})},isBlockContainer:function(e){return e&&3!==e.nodeType&&a.blockContainerElementNames.indexOf(e.nodeName.toLowerCase())!==-1},getClosestBlockContainer:function(e){return a.traverseUp(e,function(e){return a.isBlockContainer(e)||a.isMediumEditorElement(e)})},getTopBlockContainer:function(e){var t=!!a.isBlockContainer(e)&&e;return a.traverseUp(e,function(e){return a.isBlockContainer(e)&&(t=e),!(t||!a.isMediumEditorElement(e))&&(t=e,!0)}),t},getFirstSelectableLeafNode:function(e){for(;e&&e.firstChild;)e=e.firstChild;if(e=a.traverseUp(e,function(e){return a.emptyElementNames.indexOf(e.nodeName.toLowerCase())===-1}),"table"===e.nodeName.toLowerCase()){var t=e.querySelector("th, td");t&&(e=t)}return e},getFirstTextNode:function(e){return a.warn("getFirstTextNode is deprecated and will be removed in version 6.0.0"),a._getFirstTextNode(e)},_getFirstTextNode:function(e){if(3===e.nodeType)return e;for(var t=0;t<e.childNodes.length;t++){var n=a._getFirstTextNode(e.childNodes[t]);if(null!==n)return n}return null},ensureUrlHasProtocol:function(e){return e.indexOf("://")===-1?"http://"+e:e},warn:function(){void 0!==t.console&&"function"==typeof t.console.warn&&t.console.warn.apply(t.console,arguments)},deprecated:function(e,t,n){var i=e+" is deprecated, please use "+t+" instead.";n&&(i+=" Will be removed in "+n),a.warn(i)},deprecatedMethod:function(e,t,n,i){a.deprecated(e,t,i),"function"==typeof this[t]&&this[t].apply(this,n)},cleanupAttrs:function(e,t){t.forEach(function(t){e.removeAttribute(t)})},cleanupTags:function(e,t){t.forEach(function(t){e.nodeName.toLowerCase()===t&&e.parentNode.removeChild(e)})},getClosestTag:function(e,t){return a.traverseUp(e,function(e){return e.nodeName.toLowerCase()===t.toLowerCase()})},unwrap:function(e,t){for(var n=t.createDocumentFragment(),i=Array.prototype.slice.call(e.childNodes),r=0;r<i.length;r++)n.appendChild(i[r]);n.childNodes.length?e.parentNode.replaceChild(n,e):e.parentNode.removeChild(e)},guid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}};e.util=a}(window),function(){var t=function(t){e.util.extend(this,t)};t.extend=function(t){var n,i=this;n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return i.apply(this,arguments)},e.util.extend(n,i);var r=function(){this.constructor=n};return r.prototype=i.prototype,n.prototype=new r,t&&e.util.extend(n.prototype,t),n},t.prototype={init:function(){},base:void 0,name:void 0,checkState:void 0,destroy:void 0,queryCommandState:void 0,isActive:void 0,isAlreadyApplied:void 0,setActive:void 0,setInactive:void 0,getInteractionElements:void 0,window:void 0,document:void 0,getEditorElements:function(){return this.base.elements},getEditorId:function(){return this.base.id},getEditorOption:function(e){return this.base.options[e]}},["execAction","on","off","subscribe","trigger"].forEach(function(e){t.prototype[e]=function(){return this.base[e].apply(this.base,arguments)}}),e.Extension=t}(),function(){function t(t){return e.util.isBlockContainer(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}var n={findMatchingSelectionParent:function(t,n){var i,r,o=n.getSelection();return 0!==o.rangeCount&&(i=o.getRangeAt(0),r=i.commonAncestorContainer,e.util.traverseUp(r,t))},getSelectionElement:function(t){return this.findMatchingSelectionParent(function(t){return e.util.isMediumEditorElement(t)},t)},exportSelection:function(e,t){if(!e)return null;var n=null,i=t.getSelection();if(i.rangeCount>0){var r,o=i.getRangeAt(0),a=o.cloneRange();a.selectNodeContents(e),a.setEnd(o.startContainer,o.startOffset),r=a.toString().length,n={start:r,end:r+o.toString().length},this.doesRangeStartWithImages(o,t)&&(n.startsWithImage=!0);var s=this.getTrailingImageCount(e,n,o.endContainer,o.endOffset);if(s&&(n.trailingImageCount=s),0!==r){var l=this.getIndexRelativeToAdjacentEmptyBlocks(t,e,o.startContainer,o.startOffset);l!==-1&&(n.emptyBlocksIndex=l)}}return n},importSelection:function(e,t,n,i){if(e&&t){var r=n.createRange();r.setStart(t,0),r.collapse(!0);var o,a=t,s=[],l=0,u=!1,c=!1,d=0,p=!1,f=!1,h=null;for((i||e.startsWithImage||"undefined"!=typeof e.emptyBlocksIndex)&&(f=!0);!p&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if(e.trailingImageCount&&c&&("img"===a.nodeName.toLowerCase()&&d++,d===e.trailingImageCount)){for(var m=0;a.parentNode.childNodes[m]!==a;)m++;r.setEnd(a.parentNode,m+1),p=!0}if(!p&&1===a.nodeType)for(var v=a.childNodes.length-1;v>=0;)s.push(a.childNodes[v]),v-=1}else o=l+a.length,!u&&e.start>=l&&e.start<=o&&(f||e.start<o?(r.setStart(a,e.start-l),u=!0):h=a),u&&e.end>=l&&e.end<=o&&(e.trailingImageCount?c=!0:(r.setEnd(a,e.end-l),p=!0)),l=o;p||(a=s.pop())}!u&&h&&(r.setStart(h,h.length),r.setEnd(h,h.length)),"undefined"!=typeof e.emptyBlocksIndex&&(r=this.importSelectionMoveCursorPastBlocks(n,t,e.emptyBlocksIndex,r)),i&&(r=this.importSelectionMoveCursorPastAnchor(e,r)),this.selectRange(n,r)}},importSelectionMoveCursorPastAnchor:function(t,n){var i=function(e){return"a"===e.nodeName.toLowerCase()};if(t.start===t.end&&3===n.startContainer.nodeType&&n.startOffset===n.startContainer.nodeValue.length&&e.util.traverseUp(n.startContainer,i)){for(var r=n.startContainer,o=n.startContainer.parentNode;null!==o&&"a"!==o.nodeName.toLowerCase();)o.childNodes[o.childNodes.length-1]!==r?o=null:(r=o,o=o.parentNode);if(null!==o&&"a"===o.nodeName.toLowerCase()){for(var a=null,s=0;null===a&&s<o.parentNode.childNodes.length;s++)o.parentNode.childNodes[s]===o&&(a=s);n.setStart(o.parentNode,a+1),n.collapse(!0)}}return n},importSelectionMoveCursorPastBlocks:function(n,i,r,o){var a,s,l=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),u=o.startContainer,c=0;for(r=r||1,a=3===u.nodeType&&e.util.isBlockContainer(u.previousSibling)?u.previousSibling:e.util.getClosestBlockContainer(u);l.nextNode();)if(s){if(s=l.currentNode,c++,c===r)break;if(s.textContent.length>0)break}else a===l.currentNode&&(s=l.currentNode);return s||(s=a),o.setStart(e.util.getFirstSelectableLeafNode(s),0),o},getIndexRelativeToAdjacentEmptyBlocks:function(n,i,r,o){if(r.textContent.length>0&&o>0)return-1;var a=r;if(3!==a.nodeType&&(a=r.childNodes[o]),a){if(!e.util.isElementAtBeginningOfBlock(a))return-1;var s=e.util.findPreviousSibling(a);if(!s)return-1;if(s.nodeValue)return-1}for(var l=e.util.getClosestBlockContainer(r),u=n.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,t,!1),c=0;u.nextNode();){var d=""===u.currentNode.textContent;if((d||c>0)&&(c+=1),u.currentNode===l)return c;d||(c=0)}return c},doesRangeStartWithImages:function(e,t){if(0!==e.startOffset||1!==e.startContainer.nodeType)return!1;if("img"===e.startContainer.nodeName.toLowerCase())return!0;var n=e.startContainer.querySelector("img");if(!n)return!1;for(var i=t.createTreeWalker(e.startContainer,NodeFilter.SHOW_ALL,null,!1);i.nextNode();){var r=i.currentNode;if(r===n)break;if(r.nodeValue)return!1}return!0},getTrailingImageCount:function(e,t,n,i){if(0===i||1!==n.nodeType)return 0;if("img"!==n.nodeName.toLowerCase()&&!n.querySelector("img"))return 0;for(var r=n.childNodes[i-1];r.hasChildNodes();)r=r.lastChild;for(var o,a=e,s=[],l=0,u=!1,c=!1,d=!1,p=0;!d&&a;)if(a.nodeType>3)a=s.pop();else{if(3!==a.nodeType||c){if("img"===a.nodeName.toLowerCase()&&p++,a===r)d=!0;else if(1===a.nodeType)for(var f=a.childNodes.length-1;f>=0;)s.push(a.childNodes[f]),f-=1}else p=0,o=l+a.length,!u&&t.start>=l&&t.start<=o&&(u=!0),u&&t.end>=l&&t.end<=o&&(c=!0),l=o;d||(a=s.pop())}return p},selectionContainsContent:function(e){var t=e.getSelection();if(!t||t.isCollapsed||!t.rangeCount)return!1;if(""!==t.toString().trim())return!0;var n=this.getSelectedParentElement(t.getRangeAt(0));return!(!n||!("img"===n.nodeName.toLowerCase()||1===n.nodeType&&n.querySelector("img")))},selectionInContentEditableFalse:function(e){var t,n=this.findMatchingSelectionParent(function(e){var n=e&&e.getAttribute("contenteditable");return"true"===n&&(t=!0),"#text"!==e.nodeName&&"false"===n},e);return!t&&n},getSelectionHtml:function(e){var t,n,i,r="",o=e.getSelection();if(o.rangeCount){for(i=e.createElement("div"),t=0,n=o.rangeCount;t<n;t+=1)i.appendChild(o.getRangeAt(t).cloneContents());r=i.innerHTML}return r},getCaretOffsets:function(e,t){var n,i;return t||(t=window.getSelection().getRangeAt(0)),n=t.cloneRange(),i=t.cloneRange(),n.selectNodeContents(e),n.setEnd(t.endContainer,t.endOffset),i.selectNodeContents(e),i.setStart(t.endContainer,t.endOffset),{left:n.toString().length,right:i.toString().length}},rangeSelectsSingleNode:function(e){var t=e.startContainer;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===e.startOffset+1},getSelectedParentElement:function(e){return e?this.rangeSelectsSingleNode(e)&&3!==e.startContainer.childNodes[e.startOffset].nodeType?e.startContainer.childNodes[e.startOffset]:3===e.startContainer.nodeType?e.startContainer.parentNode:e.startContainer:null},getSelectedElements:function(e){var t,n,i,r=e.getSelection();if(!r.rangeCount||r.isCollapsed||!r.getRangeAt(0).commonAncestorContainer)return[];if(t=r.getRangeAt(0),3===t.commonAncestorContainer.nodeType){for(n=[],i=t.commonAncestorContainer;i.parentNode&&1===i.parentNode.childNodes.length;)n.push(i.parentNode),i=i.parentNode;return n}return[].filter.call(t.commonAncestorContainer.getElementsByTagName("*"),function(e){return"function"!=typeof r.containsNode||r.containsNode(e,!0)})},selectNode:function(e,t){var n=t.createRange();n.selectNodeContents(e),this.selectRange(t,n)},select:function(e,t,n,i,r){var o=e.createRange();return o.setStart(t,n),i?o.setEnd(i,r):o.collapse(!0),this.selectRange(e,o),o},clearSelection:function(e,t){t?e.getSelection().collapseToStart():e.getSelection().collapseToEnd()},moveCursor:function(e,t,n){this.select(e,t,n)},getSelectionRange:function(e){var t=e.getSelection();return 0===t.rangeCount?null:t.getRangeAt(0)},selectRange:function(e,t){var n=e.getSelection();n.removeAllRanges(),n.addRange(t)},getSelectionStart:function(e){var t=e.getSelection().anchorNode,n=t&&3===t.nodeType?t.parentNode:t;return n}};e.selection=n}(),function(){function t(t,n){return t.some(function(t){if("function"!=typeof t.getInteractionElements)return!1;var i=t.getInteractionElements();return!!i&&(Array.isArray(i)||(i=[i]),i.some(function(t){return e.util.isDescendant(t,n,!0)}))})}var n=function(e){this.base=e,this.options=this.base.options,this.events=[],this.disabledEvents={},this.customEvents={},this.listeners={}};n.prototype={InputEventOnContenteditableSupported:!e.util.isIE&&!e.util.isEdge,attachDOMEvent:function(t,n,i,r){t=e.util.isElement(t)||[window,document].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){e.addEventListener(n,i,r),this.events.push([e,n,i,r])}.bind(this))},detachDOMEvent:function(t,n,i,r){var o,a;t=e.util.isElement(t)||[window,document].indexOf(t)>-1?[t]:t,Array.prototype.forEach.call(t,function(e){o=this.indexOfListener(e,n,i,r),o!==-1&&(a=this.events.splice(o,1)[0],a[0].removeEventListener(a[1],a[2],a[3]))}.bind(this))},indexOfListener:function(e,t,n,i){var r,o,a;for(r=0,o=this.events.length;r<o;r+=1)if(a=this.events[r],a[0]===e&&a[1]===t&&a[2]===n&&a[3]===i)return r;return-1},detachAllDOMEvents:function(){for(var e=this.events.pop();e;)e[0].removeEventListener(e[1],e[2],e[3]),e=this.events.pop()},detachAllEventsFromElement:function(e){for(var t=this.events.filter(function(t){return t&&t[0].getAttribute&&t[0].getAttribute("medium-editor-index")===e.getAttribute("medium-editor-index")}),n=0,i=t.length;n<i;n++){var r=t[n];this.detachDOMEvent(r[0],r[1],r[2],r[3])}},attachAllEventsToElement:function(e){this.listeners.editableInput&&(this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML),this.eventsCache&&this.eventsCache.forEach(function(t){this.attachDOMEvent(e,t.name,t.handler.bind(this))},this)},enableCustomEvent:function(e){void 0!==this.disabledEvents[e]&&delete this.disabledEvents[e]},disableCustomEvent:function(e){this.disabledEvents[e]=!0},attachCustomEvent:function(e,t){this.setupListener(e),this.customEvents[e]||(this.customEvents[e]=[]),this.customEvents[e].push(t)},detachCustomEvent:function(e,t){var n=this.indexOfCustomListener(e,t);n!==-1&&this.customEvents[e].splice(n,1)},indexOfCustomListener:function(e,t){return this.customEvents[e]&&this.customEvents[e].length?this.customEvents[e].indexOf(t):-1},detachAllCustomEvents:function(){this.customEvents={}},triggerCustomEvent:function(e,t,n){this.customEvents[e]&&!this.disabledEvents[e]&&this.customEvents[e].forEach(function(e){e(t,n)})},destroy:function(){this.detachAllDOMEvents(),this.detachAllCustomEvents(),this.detachExecCommand(),this.base.elements&&this.base.elements.forEach(function(e){e.removeAttribute("data-medium-focused")})},attachToExecCommand:function(){this.execCommandListener||(this.execCommandListener=function(e){this.handleDocumentExecCommand(e)}.bind(this),this.wrapExecCommand(),this.options.ownerDocument.execCommand.listeners.push(this.execCommandListener))},detachExecCommand:function(){var e=this.options.ownerDocument;if(this.execCommandListener&&e.execCommand.listeners){var t=e.execCommand.listeners.indexOf(this.execCommandListener);t!==-1&&e.execCommand.listeners.splice(t,1),e.execCommand.listeners.length||this.unwrapExecCommand()}},wrapExecCommand:function(){var e=this.options.ownerDocument;if(!e.execCommand.listeners){var t=function(t,n){e.execCommand.listeners&&e.execCommand.listeners.forEach(function(e){e({command:t[0],value:t[2],args:t,result:n})})},n=function(){var n=e.execCommand.orig.apply(this,arguments);if(!e.execCommand.listeners)return n;var i=Array.prototype.slice.call(arguments);return t(i,n),n};n.orig=e.execCommand,n.listeners=[],n.callListeners=t,e.execCommand=n}},unwrapExecCommand:function(){var e=this.options.ownerDocument;e.execCommand.orig&&(e.execCommand=e.execCommand.orig)},setupListener:function(e){if(!this.listeners[e]){switch(e){case"externalInteraction":this.attachDOMEvent(this.options.ownerDocument.body,"mousedown",this.handleBodyMousedown.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"click",this.handleBodyClick.bind(this),!0),this.attachDOMEvent(this.options.ownerDocument.body,"focus",this.handleBodyFocus.bind(this),!0);break;case"blur":this.setupListener("externalInteraction");break;case"focus":this.setupListener("externalInteraction");break;case"editableInput":this.contentCache={},this.base.elements.forEach(function(e){this.contentCache[e.getAttribute("medium-editor-index")]=e.innerHTML},this),this.InputEventOnContenteditableSupported&&this.attachToEachElement("input",this.handleInput),this.InputEventOnContenteditableSupported||(this.setupListener("editableKeypress"),this.keypressUpdateInput=!0,this.attachDOMEvent(document,"selectionchange",this.handleDocumentSelectionChange.bind(this)),this.attachToExecCommand());break;case"editableClick":this.attachToEachElement("click",this.handleClick);break;case"editableBlur":this.attachToEachElement("blur",this.handleBlur);break;case"editableKeypress":this.attachToEachElement("keypress",this.handleKeypress);break;case"editableKeyup":this.attachToEachElement("keyup",this.handleKeyup);break;case"editableKeydown":this.attachToEachElement("keydown",this.handleKeydown);break;case"editableKeydownSpace":this.setupListener("editableKeydown");break;case"editableKeydownEnter":this.setupListener("editableKeydown");
break;case"editableKeydownTab":this.setupListener("editableKeydown");break;case"editableKeydownDelete":this.setupListener("editableKeydown");break;case"editableMouseover":this.attachToEachElement("mouseover",this.handleMouseover);break;case"editableDrag":this.attachToEachElement("dragover",this.handleDragging),this.attachToEachElement("dragleave",this.handleDragging);break;case"editableDrop":this.attachToEachElement("drop",this.handleDrop);break;case"editablePaste":this.attachToEachElement("paste",this.handlePaste)}this.listeners[e]=!0}},attachToEachElement:function(e,t){this.eventsCache||(this.eventsCache=[]),this.base.elements.forEach(function(n){this.attachDOMEvent(n,e,t.bind(this))},this),this.eventsCache.push({name:e,handler:t})},cleanupElement:function(e){var t=e.getAttribute("medium-editor-index");t&&(this.detachAllEventsFromElement(e),this.contentCache&&delete this.contentCache[t])},focusElement:function(e){e.focus(),this.updateFocus(e,{target:e,type:"focus"})},updateFocus:function(n,i){var r,o=this.base.getFocusedElement();o&&"click"===i.type&&this.lastMousedownTarget&&(e.util.isDescendant(o,this.lastMousedownTarget,!0)||t(this.base.extensions,this.lastMousedownTarget))&&(r=o),r||this.base.elements.some(function(t){return!r&&e.util.isDescendant(t,n,!0)&&(r=t),!!r},this);var a=!e.util.isDescendant(o,n,!0)&&!t(this.base.extensions,n);r!==o&&(o&&a&&(o.removeAttribute("data-medium-focused"),this.triggerCustomEvent("blur",i,o)),r&&(r.setAttribute("data-medium-focused",!0),this.triggerCustomEvent("focus",i,r))),a&&this.triggerCustomEvent("externalInteraction",i)},updateInput:function(e,t){if(this.contentCache){var n=e.getAttribute("medium-editor-index"),i=e.innerHTML;i!==this.contentCache[n]&&this.triggerCustomEvent("editableInput",t,e),this.contentCache[n]=i}},handleDocumentSelectionChange:function(t){if(t.currentTarget&&t.currentTarget.activeElement){var n,i=t.currentTarget.activeElement;this.base.elements.some(function(t){return!!e.util.isDescendant(t,i,!0)&&(n=t,!0)},this),n&&this.updateInput(n,{target:i,currentTarget:n})}},handleDocumentExecCommand:function(){var e=this.base.getFocusedElement();e&&this.updateInput(e,{target:e,currentTarget:e})},handleBodyClick:function(e){this.updateFocus(e.target,e)},handleBodyFocus:function(e){this.updateFocus(e.target,e)},handleBodyMousedown:function(e){this.lastMousedownTarget=e.target},handleInput:function(e){this.updateInput(e.currentTarget,e)},handleClick:function(e){this.triggerCustomEvent("editableClick",e,e.currentTarget)},handleBlur:function(e){this.triggerCustomEvent("editableBlur",e,e.currentTarget)},handleKeypress:function(e){if(this.triggerCustomEvent("editableKeypress",e,e.currentTarget),this.keypressUpdateInput){var t={target:e.target,currentTarget:e.currentTarget};setTimeout(function(){this.updateInput(t.currentTarget,t)}.bind(this),0)}},handleKeyup:function(e){this.triggerCustomEvent("editableKeyup",e,e.currentTarget)},handleMouseover:function(e){this.triggerCustomEvent("editableMouseover",e,e.currentTarget)},handleDragging:function(e){this.triggerCustomEvent("editableDrag",e,e.currentTarget)},handleDrop:function(e){this.triggerCustomEvent("editableDrop",e,e.currentTarget)},handlePaste:function(e){this.triggerCustomEvent("editablePaste",e,e.currentTarget)},handleKeydown:function(t){return this.triggerCustomEvent("editableKeydown",t,t.currentTarget),e.util.isKey(t,e.util.keyCode.SPACE)?this.triggerCustomEvent("editableKeydownSpace",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.ENTER)||t.ctrlKey&&e.util.isKey(t,e.util.keyCode.M)?this.triggerCustomEvent("editableKeydownEnter",t,t.currentTarget):e.util.isKey(t,e.util.keyCode.TAB)?this.triggerCustomEvent("editableKeydownTab",t,t.currentTarget):e.util.isKey(t,[e.util.keyCode.DELETE,e.util.keyCode.BACKSPACE])?this.triggerCustomEvent("editableKeydownDelete",t,t.currentTarget):void 0}},e.Events=n}(),function(){var t=e.Extension.extend({action:void 0,aria:void 0,tagNames:void 0,style:void 0,useQueryState:void 0,contentDefault:void 0,contentFA:void 0,classList:void 0,attrs:void 0,constructor:function(n){t.isBuiltInButton(n)?e.Extension.call(this,this.defaults[n]):e.Extension.call(this,n)},init:function(){e.Extension.prototype.init.apply(this,arguments),this.button=this.createButton(),this.on(this.button,"click",this.handleClick.bind(this))},getButton:function(){return this.button},getAction:function(){return"function"==typeof this.action?this.action(this.base.options):this.action},getAria:function(){return"function"==typeof this.aria?this.aria(this.base.options):this.aria},getTagNames:function(){return"function"==typeof this.tagNames?this.tagNames(this.base.options):this.tagNames},createButton:function(){var e=this.document.createElement("button"),t=this.contentDefault,n=this.getAria(),i=this.getEditorOption("buttonLabels");return e.classList.add("medium-editor-action"),e.classList.add("medium-editor-action-"+this.name),this.classList&&this.classList.forEach(function(t){e.classList.add(t)}),e.setAttribute("data-action",this.getAction()),n&&(e.setAttribute("title",n),e.setAttribute("aria-label",n)),this.attrs&&Object.keys(this.attrs).forEach(function(t){e.setAttribute(t,this.attrs[t])},this),"fontawesome"===i&&this.contentFA&&(t=this.contentFA),e.innerHTML=t,e},handleClick:function(e){e.preventDefault(),e.stopPropagation();var t=this.getAction();t&&this.execAction(t)},isActive:function(){return this.button.classList.contains(this.getEditorOption("activeButtonClass"))},setInactive:function(){this.button.classList.remove(this.getEditorOption("activeButtonClass")),delete this.knownState},setActive:function(){this.button.classList.add(this.getEditorOption("activeButtonClass")),delete this.knownState},queryCommandState:function(){var e=null;return this.useQueryState&&(e=this.base.queryCommandState(this.getAction())),e},isAlreadyApplied:function(e){var t,n,i=!1,r=this.getTagNames();return this.knownState===!1||this.knownState===!0?this.knownState:(r&&r.length>0&&(i=r.indexOf(e.nodeName.toLowerCase())!==-1),!i&&this.style&&(t=this.style.value.split("|"),n=this.window.getComputedStyle(e,null).getPropertyValue(this.style.prop),t.forEach(function(e){this.knownState||(i=n.indexOf(e)!==-1,(i||"text-decoration"!==this.style.prop)&&(this.knownState=i))},this)),i)}});t.isBuiltInButton=function(t){return"string"==typeof t&&e.extensions.button.prototype.defaults.hasOwnProperty(t)},e.extensions.button=t}(),function(){e.extensions.button.prototype.defaults={bold:{name:"bold",action:"bold",aria:"bold",tagNames:["b","strong"],style:{prop:"font-weight",value:"700|bold"},useQueryState:!0,contentDefault:"<b>B</b>",contentFA:'<i class="fa fa-bold"></i>'},italic:{name:"italic",action:"italic",aria:"italic",tagNames:["i","em"],style:{prop:"font-style",value:"italic"},useQueryState:!0,contentDefault:"<b><i>I</i></b>",contentFA:'<i class="fa fa-italic"></i>'},underline:{name:"underline",action:"underline",aria:"underline",tagNames:["u"],style:{prop:"text-decoration",value:"underline"},useQueryState:!0,contentDefault:"<b><u>U</u></b>",contentFA:'<i class="fa fa-underline"></i>'},strikethrough:{name:"strikethrough",action:"strikethrough",aria:"strike through",tagNames:["strike"],style:{prop:"text-decoration",value:"line-through"},useQueryState:!0,contentDefault:"<s>A</s>",contentFA:'<i class="fa fa-strikethrough"></i>'},superscript:{name:"superscript",action:"superscript",aria:"superscript",tagNames:["sup"],contentDefault:"<b>x<sup>1</sup></b>",contentFA:'<i class="fa fa-superscript"></i>'},subscript:{name:"subscript",action:"subscript",aria:"subscript",tagNames:["sub"],contentDefault:"<b>x<sub>1</sub></b>",contentFA:'<i class="fa fa-subscript"></i>'},image:{name:"image",action:"image",aria:"image",tagNames:["img"],contentDefault:"<b>image</b>",contentFA:'<i class="fa fa-picture-o"></i>'},orderedlist:{name:"orderedlist",action:"insertorderedlist",aria:"ordered list",tagNames:["ol"],useQueryState:!0,contentDefault:"<b>1.</b>",contentFA:'<i class="fa fa-list-ol"></i>'},unorderedlist:{name:"unorderedlist",action:"insertunorderedlist",aria:"unordered list",tagNames:["ul"],useQueryState:!0,contentDefault:"<b>&bull;</b>",contentFA:'<i class="fa fa-list-ul"></i>'},indent:{name:"indent",action:"indent",aria:"indent",tagNames:[],contentDefault:"<b>&rarr;</b>",contentFA:'<i class="fa fa-indent"></i>'},outdent:{name:"outdent",action:"outdent",aria:"outdent",tagNames:[],contentDefault:"<b>&larr;</b>",contentFA:'<i class="fa fa-outdent"></i>'},justifyCenter:{name:"justifyCenter",action:"justifyCenter",aria:"center justify",tagNames:[],style:{prop:"text-align",value:"center"},contentDefault:"<b>C</b>",contentFA:'<i class="fa fa-align-center"></i>'},justifyFull:{name:"justifyFull",action:"justifyFull",aria:"full justify",tagNames:[],style:{prop:"text-align",value:"justify"},contentDefault:"<b>J</b>",contentFA:'<i class="fa fa-align-justify"></i>'},justifyLeft:{name:"justifyLeft",action:"justifyLeft",aria:"left justify",tagNames:[],style:{prop:"text-align",value:"left"},contentDefault:"<b>L</b>",contentFA:'<i class="fa fa-align-left"></i>'},justifyRight:{name:"justifyRight",action:"justifyRight",aria:"right justify",tagNames:[],style:{prop:"text-align",value:"right"},contentDefault:"<b>R</b>",contentFA:'<i class="fa fa-align-right"></i>'},removeFormat:{name:"removeFormat",aria:"remove formatting",action:"removeFormat",contentDefault:"<b>X</b>",contentFA:'<i class="fa fa-eraser"></i>'},quote:{name:"quote",action:"append-blockquote",aria:"blockquote",tagNames:["blockquote"],contentDefault:"<b>&ldquo;</b>",contentFA:'<i class="fa fa-quote-right"></i>'},pre:{name:"pre",action:"append-pre",aria:"preformatted text",tagNames:["pre"],contentDefault:"<b>0101</b>",contentFA:'<i class="fa fa-code fa-lg"></i>'},h1:{name:"h1",action:"append-h1",aria:"header type one",tagNames:["h1"],contentDefault:"<b>H1</b>",contentFA:'<i class="fa fa-header"><sup>1</sup>'},h2:{name:"h2",action:"append-h2",aria:"header type two",tagNames:["h2"],contentDefault:"<b>H2</b>",contentFA:'<i class="fa fa-header"><sup>2</sup>'},h3:{name:"h3",action:"append-h3",aria:"header type three",tagNames:["h3"],contentDefault:"<b>H3</b>",contentFA:'<i class="fa fa-header"><sup>3</sup>'},h4:{name:"h4",action:"append-h4",aria:"header type four",tagNames:["h4"],contentDefault:"<b>H4</b>",contentFA:'<i class="fa fa-header"><sup>4</sup>'},h5:{name:"h5",action:"append-h5",aria:"header type five",tagNames:["h5"],contentDefault:"<b>H5</b>",contentFA:'<i class="fa fa-header"><sup>5</sup>'},h6:{name:"h6",action:"append-h6",aria:"header type six",tagNames:["h6"],contentDefault:"<b>H6</b>",contentFA:'<i class="fa fa-header"><sup>6</sup>'}}}(),function(){var t=e.extensions.button.extend({init:function(){e.extensions.button.prototype.init.apply(this,arguments)},formSaveLabel:"&#10003;",formCloseLabel:"&times;",activeClass:"medium-editor-toolbar-form-active",hasForm:!0,getForm:function(){},isDisplayed:function(){return!!this.hasForm&&this.getForm().classList.contains(this.activeClass)},showForm:function(){this.hasForm&&this.getForm().classList.add(this.activeClass)},hideForm:function(){this.hasForm&&this.getForm().classList.remove(this.activeClass)},showToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.showToolbarDefaultActions()},hideToolbarDefaultActions:function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbarDefaultActions()},setToolbarPosition:function(){var e=this.base.getExtensionByName("toolbar");e&&e.setToolbarPosition()}});e.extensions.form=t}(),function(){var t=e.extensions.form.extend({customClassOption:null,customClassOptionText:"Button",linkValidation:!1,placeholderText:"Paste or type a link",targetCheckbox:!1,targetCheckboxText:"Open in new window",name:"anchor",action:"createLink",aria:"link",tagNames:["a"],contentDefault:"<b>#</b>",contentFA:'<i class="fa fa-link"></i>',init:function(){e.extensions.form.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this))},handleClick:function(t){t.preventDefault(),t.stopPropagation();var n=e.selection.getSelectionRange(this.document);return"a"===n.startContainer.nodeName.toLowerCase()||"a"===n.endContainer.nodeName.toLowerCase()||e.util.getClosestTag(e.selection.getSelectedParentElement(n),"a")?this.execAction("unlink"):(this.isDisplayed()||this.showForm(),!1)},handleKeydown:function(t){e.util.isKey(t,e.util.keyCode.K)&&e.util.isMetaCtrlKey(t)&&!t.shiftKey&&this.handleClick(t)},getForm:function(){return this.form||(this.form=this.createForm()),this.form},getTemplate:function(){var e=['<input type="text" class="medium-editor-toolbar-input" placeholder="',this.placeholderText,'">'];return e.push('<a href="#" class="medium-editor-toolbar-save">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':this.formSaveLabel,"</a>"),e.push('<a href="#" class="medium-editor-toolbar-close">',"fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':this.formCloseLabel,"</a>"),this.targetCheckbox&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-target">',"<label>",this.targetCheckboxText,"</label>","</div>"),this.customClassOption&&e.push('<div class="medium-editor-toolbar-form-row">','<input type="checkbox" class="medium-editor-toolbar-anchor-button">',"<label>",this.customClassOptionText,"</label>","</div>"),e.join("")},isDisplayed:function(){return e.extensions.form.prototype.isDisplayed.apply(this)},hideForm:function(){e.extensions.form.prototype.hideForm.apply(this),this.getInput().value=""},showForm:function(t){var n=this.getInput(),i=this.getAnchorTargetCheckbox(),r=this.getAnchorButtonCheckbox();if(t=t||{value:""},"string"==typeof t&&(t={value:t}),this.base.saveSelection(),this.hideToolbarDefaultActions(),e.extensions.form.prototype.showForm.apply(this),this.setToolbarPosition(),n.value=t.value,n.focus(),i&&(i.checked="_blank"===t.target),r){var o=t.buttonClass?t.buttonClass.split(" "):[];r.checked=o.indexOf(this.customClassOption)!==-1}},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},getFormOpts:function(){var e=this.getAnchorTargetCheckbox(),t=this.getAnchorButtonCheckbox(),n={value:this.getInput().value.trim()};return this.linkValidation&&(n.value=this.checkLinkFormat(n.value)),n.target="_self",e&&e.checked&&(n.target="_blank"),t&&t.checked&&(n.buttonClass=this.customClassOption),n},doFormSave:function(){var e=this.getFormOpts();this.completeFormSave(e)},completeFormSave:function(e){this.base.restoreSelection(),this.execAction(this.action,e),this.base.checkSelection()},checkLinkFormat:function(e){var t=/^([a-z]+:)?\/\/|^(mailto|tel|maps):|^\#/i,n=/^\+?\s?\(?(?:\d\s?\-?\)?){3,20}$/;return n.test(e)?"tel:"+e:(t.test(e)?"":"http://")+encodeURI(e)},doFormCancel:function(){this.base.restoreSelection(),this.base.checkSelection()},attachFormEvents:function(e){var t=e.querySelector(".medium-editor-toolbar-close"),n=e.querySelector(".medium-editor-toolbar-save"),i=e.querySelector(".medium-editor-toolbar-input");this.on(e,"click",this.handleFormClick.bind(this)),this.on(i,"keyup",this.handleTextboxKeyup.bind(this)),this.on(t,"click",this.handleCloseClick.bind(this)),this.on(n,"click",this.handleSaveClick.bind(this),!0)},createForm:function(){var e=this.document,t=e.createElement("div");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-anchor-"+this.getEditorId(),t.innerHTML=this.getTemplate(),this.attachFormEvents(t),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},getAnchorTargetCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-target")},getAnchorButtonCheckbox:function(){return this.getForm().querySelector(".medium-editor-toolbar-anchor-button")},handleTextboxKeyup:function(t){return t.keyCode===e.util.keyCode.ENTER?(t.preventDefault(),void this.doFormSave()):void(t.keyCode===e.util.keyCode.ESCAPE&&(t.preventDefault(),this.doFormCancel()))},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.anchor=t}(),function(){var t=e.Extension.extend({name:"anchor-preview",hideDelay:500,previewValueSelector:"a",showWhenToolbarIsVisible:!1,showOnEmptyLinks:!0,init:function(){this.anchorPreview=this.createPreview(),this.getEditorOption("elementsContainer").appendChild(this.anchorPreview),this.attachToEditables()},getInteractionElements:function(){return this.getPreviewElement()},getPreviewElement:function(){return this.anchorPreview},createPreview:function(){var e=this.document.createElement("div");return e.id="medium-editor-anchor-preview-"+this.getEditorId(),e.className="medium-editor-anchor-preview",e.innerHTML=this.getTemplate(),this.on(e,"click",this.handleClick.bind(this)),e},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner"></a></div>'},destroy:function(){this.anchorPreview&&(this.anchorPreview.parentNode&&this.anchorPreview.parentNode.removeChild(this.anchorPreview),delete this.anchorPreview)},hidePreview:function(){this.anchorPreview.classList.remove("medium-editor-anchor-preview-active"),this.activeAnchor=null},showPreview:function(e){return!(!this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")&&!e.getAttribute("data-disable-preview"))||(this.previewValueSelector&&(this.anchorPreview.querySelector(this.previewValueSelector).textContent=e.attributes.href.value,this.anchorPreview.querySelector(this.previewValueSelector).href=e.attributes.href.value),this.anchorPreview.classList.add("medium-toolbar-arrow-over"),this.anchorPreview.classList.remove("medium-toolbar-arrow-under"),this.anchorPreview.classList.contains("medium-editor-anchor-preview-active")||this.anchorPreview.classList.add("medium-editor-anchor-preview-active"),this.activeAnchor=e,this.positionPreview(),this.attachPreviewHandlers(),this)},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i,r,o,a=this.window.innerWidth,s=this.anchorPreview.offsetHeight,l=e.getBoundingClientRect(),u=this.diffLeft,c=this.diffTop,d=this.getEditorOption("elementsContainer"),p=["absolute","fixed"].indexOf(window.getComputedStyle(d).getPropertyValue("position"))>-1,f={};t=this.anchorPreview.offsetWidth/2;var h=this.base.getExtensionByName("toolbar");h&&(u=h.diffLeft,c=h.diffTop),n=u-t,p?(r=d.getBoundingClientRect(),["top","left"].forEach(function(e){f[e]=l[e]-r[e]}),f.width=l.width,f.height=l.height,l=f,a=r.width,o=d.scrollTop):o=this.window.pageYOffset,i=l.left+l.width/2,o+=s+l.top+l.height-c-this.anchorPreview.offsetHeight,this.anchorPreview.style.top=Math.round(o)+"px",this.anchorPreview.style.right="initial",i<t?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):a-i<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+i+"px",this.anchorPreview.style.right="initial")},attachToEditables:function(){this.subscribe("editableMouseover",this.handleEditableMouseover.bind(this)),this.subscribe("positionedToolbar",this.handlePositionedToolbar.bind(this))},handlePositionedToolbar:function(){this.showWhenToolbarIsVisible||this.hidePreview()},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&(e.preventDefault(),this.base.selectElement(this.activeAnchor),this.base.delay(function(){if(n){var e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this))),this.hidePreview()},handleAnchorMouseout:function(){this.anchorToPreview=null,this.off(this.activeAnchor,"mouseout",this.instanceHandleAnchorMouseout),this.instanceHandleAnchorMouseout=null},handleEditableMouseover:function(t){var n=e.util.getClosestTag(t.target,"a");if(!1!==n){if(!this.showOnEmptyLinks&&(!/href=["']\S+["']/.test(n.outerHTML)||/href=["']#\S+["']/.test(n.outerHTML)))return!0;var i=this.base.getExtensionByName("toolbar");if(!this.showWhenToolbarIsVisible&&i&&i.isDisplayed&&i.isDisplayed())return!0;this.activeAnchor&&this.activeAnchor!==n&&this.detachPreviewHandlers(),this.anchorToPreview=n,this.instanceHandleAnchorMouseout=this.handleAnchorMouseout.bind(this),this.on(this.anchorToPreview,"mouseout",this.instanceHandleAnchorMouseout),this.base.delay(function(){this.anchorToPreview&&this.showPreview(this.anchorToPreview)}.bind(this))}},handlePreviewMouseover:function(){this.lastOver=(new Date).getTime(),this.hovering=!0},handlePreviewMouseout:function(e){e.relatedTarget&&/anchor-preview/.test(e.relatedTarget.className)||(this.hovering=!1)},updatePreview:function(){if(this.hovering)return!0;var e=(new Date).getTime()-this.lastOver;e>this.hideDelay&&this.detachPreviewHandlers()},detachPreviewHandlers:function(){clearInterval(this.intervalTimer),this.instanceHandlePreviewMouseover&&(this.off(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.activeAnchor&&(this.off(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.off(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout))),this.hidePreview(),this.hovering=this.instanceHandlePreviewMouseover=this.instanceHandlePreviewMouseout=null},attachPreviewHandlers:function(){this.lastOver=(new Date).getTime(),this.hovering=!0,this.instanceHandlePreviewMouseover=this.handlePreviewMouseover.bind(this),this.instanceHandlePreviewMouseout=this.handlePreviewMouseout.bind(this),this.intervalTimer=setInterval(this.updatePreview.bind(this),200),this.on(this.anchorPreview,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.anchorPreview,"mouseout",this.instanceHandlePreviewMouseout),this.on(this.activeAnchor,"mouseover",this.instanceHandlePreviewMouseover),this.on(this.activeAnchor,"mouseout",this.instanceHandlePreviewMouseout)}});e.extensions.anchorPreview=t}(),function(){function t(t){return!e.util.getClosestTag(t,"a")}var n,i,r,o;n=[" ","\t","\n","\r","","","","","","\u2028","\u2029"],i="com|net|org|edu|gov|mil|aero|asia|biz|cat|coop|info|int|jobs|mobi|museum|name|post|pro|tel|travel|xxx|ac|ad|ae|af|ag|ai|al|am|an|ao|aq|ar|as|at|au|aw|ax|az|ba|bb|bd|be|bf|bg|bh|bi|bj|bm|bn|bo|br|bs|bt|bv|bw|by|bz|ca|cc|cd|cf|cg|ch|ci|ck|cl|cm|cn|co|cr|cs|cu|cv|cx|cy|cz|dd|de|dj|dk|dm|do|dz|ec|ee|eg|eh|er|es|et|eu|fi|fj|fk|fm|fo|fr|ga|gb|gd|ge|gf|gg|gh|gi|gl|gm|gn|gp|gq|gr|gs|gt|gu|gw|gy|hk|hm|hn|hr|ht|hu|id|ie|il|im|in|io|iq|ir|is|it|je|jm|jo|jp|ke|kg|kh|ki|km|kn|kp|kr|kw|ky|kz|la|lb|lc|li|lk|lr|ls|lt|lu|lv|ly|ma|mc|md|me|mg|mh|mk|ml|mm|mn|mo|mp|mq|mr|ms|mt|mu|mv|mw|mx|my|mz|na|nc|ne|nf|ng|ni|nl|no|np|nr|nu|nz|om|pa|pe|pf|pg|ph|pk|pl|pm|pn|pr|ps|pt|pw|py|qa|re|ro|rs|ru|rw|sa|sb|sc|sd|se|sg|sh|si|sj|ja|sk|sl|sm|sn|so|sr|ss|st|su|sv|sx|sy|sz|tc|td|tf|tg|th|tj|tk|tl|tm|tn|to|tp|tr|tt|tv|tw|tz|ua|ug|uk|us|uy|uz|va|vc|ve|vg|vi|vn|vu|wf|ws|ye|yt|yu|za|zm|zw",r="(((?:(https?://|ftps?://|nntp://)|www\\d{0,3}[.]|[a-z0-9.\\-]+[.]("+i+")\\/)\\S+(?:[^\\s`!\\[\\]{};:'\".,?])))|(([a-z0-9\\-]+\\.)?[a-z0-9\\-]+\\.("+i+"))",o=new RegExp("^("+i+")$","i");var a=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.disableEventHandling=!1,this.subscribe("editableKeypress",this.onKeypress.bind(this)),this.subscribe("editableBlur",this.onBlur.bind(this)),this.document.execCommand("AutoUrlDetect",!1,!1)},isLastInstance:function(){for(var e=0,t=0;t<this.window._mediumEditors.length;t++){var n=this.window._mediumEditors[t];null!==n&&void 0!==n.getExtensionByName("autoLink")&&e++}return 1===e},destroy:function(){this.document.queryCommandSupported("AutoUrlDetect")&&this.isLastInstance()&&this.document.execCommand("AutoUrlDetect",!1,!0)},onBlur:function(e,t){this.performLinking(t)},onKeypress:function(t){this.disableEventHandling||e.util.isKey(t,[e.util.keyCode.SPACE,e.util.keyCode.ENTER])&&(clearTimeout(this.performLinkingTimeout),this.performLinkingTimeout=setTimeout(function(){try{var e=this.base.exportSelection();this.performLinking(t.target)&&this.base.importSelection(e,!0)}catch(e){window.console&&window.console.error("Failed to perform linking",e),this.disableEventHandling=!0}}.bind(this),0))},performLinking:function(t){var n=e.util.splitByBlockElements(t),i=!1;0===n.length&&(n=[t]);for(var r=0;r<n.length;r++)i=this.removeObsoleteAutoLinkSpans(n[r])||i,i=this.performLinkingWithinElement(n[r])||i;return this.base.events.updateInput(t,{target:t,currentTarget:t}),i},removeObsoleteAutoLinkSpans:function(n){if(!n||3===n.nodeType)return!1;for(var i=n.querySelectorAll('span[data-auto-link="true"]'),r=!1,o=0;o<i.length;o++){var a=i[o].textContent;if(a.indexOf("://")===-1&&(a=e.util.ensureUrlHasProtocol(a)),i[o].getAttribute("data-href")!==a&&t(i[o])){r=!0;var s=a.replace(/\s+$/,"");if(i[o].getAttribute("data-href")===s){var l=a.length-s.length,u=e.util.splitOffDOMTree(i[o],this.splitTextBeforeEnd(i[o],l));i[o].parentNode.insertBefore(u,i[o].nextSibling)}else e.util.unwrap(i[o],this.document)}}return r},splitTextBeforeEnd:function(e,t){for(var n=this.document.createTreeWalker(e,NodeFilter.SHOW_TEXT,null,!1),i=!0;i;)i=null!==n.lastChild();for(var r,o,a;t>0&&null!==a;)r=n.currentNode,o=r.nodeValue,o.length>t?(a=r.splitText(o.length-t),t=0):(a=n.previousNode(),t-=o.length);return a},performLinkingWithinElement:function(t){for(var n=this.findLinkableText(t),i=!1,r=0;r<n.length;r++){var o=e.util.findOrCreateMatchingTextNodes(this.document,t,n[r]);this.shouldNotLink(o)||this.createAutoLink(o,n[r].href)}return i},shouldNotLink:function(t){for(var n=!1,i=0;i<t.length&&n===!1;i++)n=!!e.util.traverseUp(t[i],function(e){return"a"===e.nodeName.toLowerCase()||e.getAttribute&&"true"===e.getAttribute("data-auto-link")});return n},findLinkableText:function(e){for(var t=new RegExp(r,"gi"),i=e.textContent,a=null,s=[];null!==(a=t.exec(i));){var l=!0,u=a.index+a[0].length;l=!(0!==a.index&&n.indexOf(i[a.index-1])===-1||u!==i.length&&n.indexOf(i[u])===-1),l=l&&(a[0].indexOf("/")!==-1||o.test(a[0].split(".").pop().split("?").shift())),l&&s.push({href:a[0],start:a.index,end:u})}return s},createAutoLink:function(t,n){n=e.util.ensureUrlHasProtocol(n);var i=e.util.createLink(this.document,t,n,this.getEditorOption("targetBlank")?"_blank":null),r=this.document.createElement("span");for(r.setAttribute("data-auto-link","true"),r.setAttribute("data-href",n),i.insertBefore(r,i.firstChild);i.childNodes.length>1;)r.appendChild(i.childNodes[1])}});e.extensions.autoLink=a}(),function(){function t(t){var i=e.util.getContainerEditorElement(t),r=Array.prototype.slice.call(i.parentElement.querySelectorAll("."+n));r.forEach(function(e){e.classList.remove(n)})}var n="medium-editor-dragover",i=e.Extension.extend({name:"fileDragging",allowedTypes:["image"],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){e.preventDefault(),e.dataTransfer.dropEffect="copy";var i=e.target.classList?e.target:e.target.parentElement;t(i),"dragover"===e.type&&i.classList.add(n)},handleDrop:function(e){e.preventDefault(),e.stopPropagation(),this.base.selectElement(e.target);var n=this.base.exportSelection();n.start=n.end,this.base.importSelection(n),e.dataTransfer.files&&Array.prototype.slice.call(e.dataTransfer.files).forEach(function(e){this.isAllowedFile(e)&&e.type.match("image")&&this.insertImageFile(e)},this),t(e.target)},isAllowedFile:function(e){return this.allowedTypes.some(function(t){return!!e.type.match(t)})},insertImageFile:function(t){if("function"==typeof FileReader){var n=new FileReader;n.readAsDataURL(t),n.addEventListener("load",function(t){var n=this.document.createElement("img");n.src=t.target.result,e.util.insertHTMLCommand(this.document,n.outerHTML)}.bind(this))}}});e.extensions.fileDragging=i}(),function(){var t=e.Extension.extend({name:"keyboard-commands",commands:[{command:"bold",key:"B",meta:!0,shift:!1,alt:!1},{command:"italic",key:"I",meta:!0,shift:!1,alt:!1},{command:"underline",key:"U",meta:!0,shift:!1,alt:!1}],init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.keys={},this.commands.forEach(function(e){var t=e.key.charCodeAt(0);this.keys[t]||(this.keys[t]=[]),this.keys[t].push(e)},this)},handleKeydown:function(t){var n=e.util.getKeyCode(t);if(this.keys[n]){var i=e.util.isMetaCtrlKey(t),r=!!t.shiftKey,o=!!t.altKey;this.keys[n].forEach(function(e){e.meta!==i||e.shift!==r||e.alt!==o&&void 0!==e.alt||(t.preventDefault(),t.stopPropagation(),"function"==typeof e.command?e.command.apply(this):!1!==e.command&&this.execAction(e.command))},this)}}});e.extensions.keyboardCommands=t}(),function(){var t=e.extensions.form.extend({name:"fontname",action:"fontName",aria:"change font name",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-font"></i>',fonts:["","Arial","Verdana","Times New Roman"],init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontName")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getSelect().value=""},showForm:function(e){var t=this.getSelect();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontName(),this.base.checkSelection()},createForm:function(){var e,t=this.document,n=t.createElement("div"),i=t.createElement("select"),r=t.createElement("a"),o=t.createElement("a");n.className="medium-editor-toolbar-form",n.id="medium-editor-toolbar-form-fontname-"+this.getEditorId(),this.on(n,"click",this.handleFormClick.bind(this));for(var a=0;a<this.fonts.length;a++)e=t.createElement("option"),e.innerHTML=this.fonts[a],e.value=this.fonts[a],i.appendChild(e);return i.className="medium-editor-toolbar-select",n.appendChild(i),this.on(i,"change",this.handleFontChange.bind(this)),o.setAttribute("href","#"),o.className="medium-editor-toobar-save",o.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",n.appendChild(o),this.on(o,"click",this.handleSaveClick.bind(this),!0),r.setAttribute("href","#"),r.className="medium-editor-toobar-close",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",n.appendChild(r),this.on(r,"click",this.handleCloseClick.bind(this)),n},getSelect:function(){return this.getForm().querySelector("select.medium-editor-toolbar-select")},clearFontName:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("face")&&e.removeAttribute("face")})},handleFontChange:function(){var e=this.getSelect().value;""===e?this.clearFontName():this.execAction("fontName",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontName=t}(),function(){var t=e.extensions.form.extend({name:"fontsize",action:"fontSize",aria:"increase/decrease font size",contentDefault:"&#xB1;",contentFA:'<i class="fa fa-text-height"></i>',
init:function(){e.extensions.form.prototype.init.apply(this,arguments)},handleClick:function(e){if(e.preventDefault(),e.stopPropagation(),!this.isDisplayed()){var t=this.document.queryCommandValue("fontSize")+"";this.showForm(t)}return!1},getForm:function(){return this.form||(this.form=this.createForm()),this.form},isDisplayed:function(){return"block"===this.getForm().style.display},hideForm:function(){this.getForm().style.display="none",this.getInput().value=""},showForm:function(e){var t=this.getInput();this.base.saveSelection(),this.hideToolbarDefaultActions(),this.getForm().style.display="block",this.setToolbarPosition(),t.value=e||"",t.focus()},destroy:function(){return!!this.form&&(this.form.parentNode&&this.form.parentNode.removeChild(this.form),void delete this.form)},doFormSave:function(){this.base.restoreSelection(),this.base.checkSelection()},doFormCancel:function(){this.base.restoreSelection(),this.clearFontSize(),this.base.checkSelection()},createForm:function(){var e=this.document,t=e.createElement("div"),n=e.createElement("input"),i=e.createElement("a"),r=e.createElement("a");return t.className="medium-editor-toolbar-form",t.id="medium-editor-toolbar-form-fontsize-"+this.getEditorId(),this.on(t,"click",this.handleFormClick.bind(this)),n.setAttribute("type","range"),n.setAttribute("min","1"),n.setAttribute("max","7"),n.className="medium-editor-toolbar-input",t.appendChild(n),this.on(n,"change",this.handleSliderChange.bind(this)),r.setAttribute("href","#"),r.className="medium-editor-toobar-save",r.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-check"></i>':"&#10003;",t.appendChild(r),this.on(r,"click",this.handleSaveClick.bind(this),!0),i.setAttribute("href","#"),i.className="medium-editor-toobar-close",i.innerHTML="fontawesome"===this.getEditorOption("buttonLabels")?'<i class="fa fa-times"></i>':"&times;",t.appendChild(i),this.on(i,"click",this.handleCloseClick.bind(this)),t},getInput:function(){return this.getForm().querySelector("input.medium-editor-toolbar-input")},clearFontSize:function(){e.selection.getSelectedElements(this.document).forEach(function(e){"font"===e.nodeName.toLowerCase()&&e.hasAttribute("size")&&e.removeAttribute("size")})},handleSliderChange:function(){var e=this.getInput().value;"4"===e?this.clearFontSize():this.execAction("fontSize",{value:e})},handleFormClick:function(e){e.stopPropagation()},handleSaveClick:function(e){e.preventDefault(),this.doFormSave()},handleCloseClick:function(e){e.preventDefault(),this.doFormCancel()}});e.extensions.fontSize=t}(),function(){function t(){return[[new RegExp(/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/g),""],[new RegExp(/<!--StartFragment-->|<!--EndFragment-->/g),""],[new RegExp(/<br>$/i),""],[new RegExp(/<[^>]*docs-internal-guid[^>]*>/gi),""],[new RegExp(/<\/b>(<br[^>]*>)?$/gi),""],[new RegExp(/<span class="Apple-converted-space">\s+<\/span>/g)," "],[new RegExp(/<br class="Apple-interchange-newline">/g),"<br>"],[new RegExp(/<span[^>]*(font-style:italic;font-weight:(bold|700)|font-weight:(bold|700);font-style:italic)[^>]*>/gi),'<span class="replace-with italic bold">'],[new RegExp(/<span[^>]*font-style:italic[^>]*>/gi),'<span class="replace-with italic">'],[new RegExp(/<span[^>]*font-weight:(bold|700)[^>]*>/gi),'<span class="replace-with bold">'],[new RegExp(/&lt;(\/?)(i|b|a)&gt;/gi),"<$1$2>"],[new RegExp(/&lt;a(?:(?!href).)+href=(?:&quot;|&rdquo;|&ldquo;|"||)(((?!&quot;|&rdquo;|&ldquo;|"||).)*)(?:&quot;|&rdquo;|&ldquo;|"||)(?:(?!&gt;).)*&gt;/gi),'<a href="$1">'],[new RegExp(/<\/p>\n+/gi),"</p>"],[new RegExp(/\n+<p/gi),"<p"],[new RegExp(/<\/?o:[a-z]*>/gi),""],[new RegExp(/<!\[if !supportLists\]>(((?!<!).)*)<!\[endif]\>/gi),"$1"]]}function n(e,t,n){var i=e.clipboardData||t.clipboardData||n.dataTransfer,r={};if(!i)return r;if(i.getData){var o=i.getData("Text");o&&o.length>0&&(r["text/plain"]=o)}if(i.types)for(var a=0;a<i.types.length;a++){var s=i.types[a];r[s]=i.getData(s)}return r}var i="%ME_PASTEBIN%",r=null,o=null,a=function(e){e.stopPropagation()},s=e.Extension.extend({forcePlainText:!0,cleanPastedHTML:!1,preCleanReplacements:[],cleanReplacements:[],cleanAttrs:["class","style","dir"],cleanTags:["meta"],init:function(){e.Extension.prototype.init.apply(this,arguments),(this.forcePlainText||this.cleanPastedHTML)&&(this.subscribe("editableKeydown",this.handleKeydown.bind(this)),this.getEditorElements().forEach(function(e){this.on(e,"paste",this.handlePaste.bind(this))},this),this.subscribe("addElement",this.handleAddElement.bind(this)))},handleAddElement:function(e,t){this.on(t,"paste",this.handlePaste.bind(this))},destroy:function(){(this.forcePlainText||this.cleanPastedHTML)&&this.removePasteBin()},handlePaste:function(e,t){if(!e.defaultPrevented){var i=n(e,this.window,this.document),r=i["text/html"],o=i["text/plain"];this.window.clipboardData&&void 0===e.clipboardData&&!r&&(r=o),(r||o)&&(e.preventDefault(),this.doPaste(r,o,t))}},doPaste:function(t,n,i){var r,o,a="";if(this.cleanPastedHTML&&t)return this.cleanPaste(t);if(this.getEditorOption("disableReturn")||i&&i.getAttribute("data-disable-return"))a=e.util.htmlEntities(n);else if(r=n.split(/[\r\n]+/g),r.length>1)for(o=0;o<r.length;o+=1)""!==r[o]&&(a+="<p>"+e.util.htmlEntities(r[o])+"</p>");else a=e.util.htmlEntities(r[0]);e.util.insertHTMLCommand(this.document,a)},handlePasteBinPaste:function(e){if(e.defaultPrevented)return void this.removePasteBin();var t=n(e,this.window,this.document),i=t["text/html"],r=t["text/plain"],a=o;return!this.cleanPastedHTML||i?(e.preventDefault(),this.removePasteBin(),this.doPaste(i,r,a),void this.trigger("editablePaste",{currentTarget:a,target:a},a)):void setTimeout(function(){this.cleanPastedHTML&&(i=this.getPasteBinHtml()),this.removePasteBin(),this.doPaste(i,r,a),this.trigger("editablePaste",{currentTarget:a,target:a},a)}.bind(this),0)},handleKeydown:function(t,n){e.util.isKey(t,e.util.keyCode.V)&&e.util.isMetaCtrlKey(t)&&(t.stopImmediatePropagation(),this.removePasteBin(),this.createPasteBin(n))},createPasteBin:function(t){var n,s=e.selection.getSelectionRange(this.document),l=this.window.pageYOffset;o=t,s&&(n=s.getClientRects(),l+=n.length?n[0].top:s.startContainer.getBoundingClientRect().top),r=s;var u=this.document.createElement("div");u.id=this.pasteBinId="medium-editor-pastebin-"+ +Date.now(),u.setAttribute("style","border: 1px red solid; position: absolute; top: "+l+"px; width: 10px; height: 10px; overflow: hidden; opacity: 0"),u.setAttribute("contentEditable",!0),u.innerHTML=i,this.document.body.appendChild(u),this.on(u,"focus",a),this.on(u,"focusin",a),this.on(u,"focusout",a),u.focus(),e.selection.selectNode(u,this.document),this.boundHandlePaste||(this.boundHandlePaste=this.handlePasteBinPaste.bind(this)),this.on(u,"paste",this.boundHandlePaste)},removePasteBin:function(){null!==r&&(e.selection.selectRange(this.document,r),r=null),null!==o&&(o=null);var t=this.getPasteBin();t&&t&&(this.off(t,"focus",a),this.off(t,"focusin",a),this.off(t,"focusout",a),this.off(t,"paste",this.boundHandlePaste),t.parentElement.removeChild(t))},getPasteBin:function(){return this.document.getElementById(this.pasteBinId)},getPasteBinHtml:function(){var e=this.getPasteBin();if(!e)return!1;if(e.firstChild&&"mcepastebin"===e.firstChild.id)return!1;var t=e.innerHTML;return!(!t||t===i)&&t},cleanPaste:function(e){var n,i,r,o,a=/<p|<br|<div/.test(e),s=[].concat(this.preCleanReplacements||[],t(),this.cleanReplacements||[]);for(n=0;n<s.length;n+=1)e=e.replace(s[n][0],s[n][1]);if(!a)return this.pasteHTML(e);for(r=this.document.createElement("div"),r.innerHTML="<p>"+e.split("<br><br>").join("</p><p>")+"</p>",i=r.querySelectorAll("a,p,div,br"),n=0;n<i.length;n+=1)switch(o=i[n],o.innerHTML=o.innerHTML.replace(/\n/gi," "),o.nodeName.toLowerCase()){case"p":case"div":this.filterCommonBlocks(o);break;case"br":this.filterLineBreak(o)}this.pasteHTML(r.innerHTML)},pasteHTML:function(t,n){n=e.util.defaults({},n,{cleanAttrs:this.cleanAttrs,cleanTags:this.cleanTags});var i,r,o,a,s=this.document.createDocumentFragment();for(s.appendChild(this.document.createElement("body")),a=s.querySelector("body"),a.innerHTML=t,this.cleanupSpans(a),i=a.querySelectorAll("*"),o=0;o<i.length;o+=1)r=i[o],"a"===r.nodeName.toLowerCase()&&this.getEditorOption("targetBlank")&&e.util.setTargetBlank(r),e.util.cleanupAttrs(r,n.cleanAttrs),e.util.cleanupTags(r,n.cleanTags);e.util.insertHTMLCommand(this.document,a.innerHTML.replace(/&nbsp;/g," "))},isCommonBlock:function(e){return e&&("p"===e.nodeName.toLowerCase()||"div"===e.nodeName.toLowerCase())},filterCommonBlocks:function(e){/^\s*$/.test(e.textContent)&&e.parentNode&&e.parentNode.removeChild(e)},filterLineBreak:function(e){this.isCommonBlock(e.previousElementSibling)?this.removeWithParent(e):!this.isCommonBlock(e.parentNode)||e.parentNode.firstChild!==e&&e.parentNode.lastChild!==e?e.parentNode&&1===e.parentNode.childElementCount&&""===e.parentNode.textContent&&this.removeWithParent(e):this.removeWithParent(e)},removeWithParent:function(e){e&&e.parentNode&&(e.parentNode.parentNode&&1===e.parentNode.childElementCount?e.parentNode.parentNode.removeChild(e.parentNode):e.parentNode.removeChild(e))},cleanupSpans:function(t){var n,i,r,o=t.querySelectorAll(".replace-with"),a=function(e){return e&&"#text"!==e.nodeName&&"false"===e.getAttribute("contenteditable")};for(n=0;n<o.length;n+=1)i=o[n],r=this.document.createElement(i.classList.contains("bold")?"b":"i"),i.classList.contains("bold")&&i.classList.contains("italic")?r.innerHTML="<i>"+i.innerHTML+"</i>":r.innerHTML=i.innerHTML,i.parentNode.replaceChild(r,i);for(o=t.querySelectorAll("span"),n=0;n<o.length;n+=1){if(i=o[n],e.util.traverseUp(i,a))return!1;e.util.unwrap(i,this.document)}}});e.extensions.paste=s}(),function(){var t=e.Extension.extend({name:"placeholder",text:"Type your text",hideOnClick:!0,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initPlaceholders(),this.attachEventHandlers()},initPlaceholders:function(){this.getEditorElements().forEach(this.initElement,this)},handleAddElement:function(e,t){this.initElement(t)},initElement:function(e){e.getAttribute("data-placeholder")||e.setAttribute("data-placeholder",this.text),this.updatePlaceholder(e)},destroy:function(){this.getEditorElements().forEach(this.cleanupElement,this)},handleRemoveElement:function(e,t){this.cleanupElement(t)},cleanupElement:function(e){e.getAttribute("data-placeholder")===this.text&&e.removeAttribute("data-placeholder")},showPlaceholder:function(t){t&&(e.util.isFF&&0===t.childNodes.length?(t.classList.add("medium-editor-placeholder-relative"),t.classList.remove("medium-editor-placeholder")):(t.classList.add("medium-editor-placeholder"),t.classList.remove("medium-editor-placeholder-relative")))},hidePlaceholder:function(e){e&&(e.classList.remove("medium-editor-placeholder"),e.classList.remove("medium-editor-placeholder-relative"))},updatePlaceholder:function(e,t){return e.querySelector("img, blockquote, ul, ol, table")||""!==e.textContent.replace(/^\s+|\s+$/g,"")?this.hidePlaceholder(e):void(t||this.showPlaceholder(e))},attachEventHandlers:function(){this.hideOnClick&&this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableInput",this.handleInput.bind(this)),this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("addElement",this.handleAddElement.bind(this)),this.subscribe("removeElement",this.handleRemoveElement.bind(this))},handleInput:function(e,t){var n=this.hideOnClick&&t===this.base.getFocusedElement();this.updatePlaceholder(t,n)},handleFocus:function(e,t){this.hidePlaceholder(t)},handleBlur:function(e,t){this.updatePlaceholder(t)}});e.extensions.placeholder=t}(),function(){var t=e.Extension.extend({name:"toolbar",align:"center",allowMultiParagraphSelection:!0,buttons:["bold","italic","underline","anchor","h2","h3","quote"],diffLeft:0,diffTop:-10,firstButtonClass:"medium-editor-button-first",lastButtonClass:"medium-editor-button-last",standardizeSelectionStart:!1,static:!1,sticky:!1,stickyTopOffset:0,updateOnEmptySelection:!1,relativeContainer:null,init:function(){e.Extension.prototype.init.apply(this,arguments),this.initThrottledMethods(),this.relativeContainer?this.relativeContainer.appendChild(this.getToolbarElement()):this.getEditorOption("elementsContainer").appendChild(this.getToolbarElement())},forEachExtension:function(e,t){return this.base.extensions.forEach(function(n){if(n!==this)return e.apply(t||this,arguments)},this)},createToolbar:function(){var e=this.document.createElement("div");return e.id="medium-editor-toolbar-"+this.getEditorId(),e.className="medium-editor-toolbar",this.static?e.className+=" static-toolbar":this.relativeContainer?e.className+=" medium-editor-relative-toolbar":e.className+=" medium-editor-stalker-toolbar",e.appendChild(this.createToolbarButtons()),this.forEachExtension(function(t){t.hasForm&&e.appendChild(t.getForm())}),this.attachEventHandlers(),e},createToolbarButtons:function(){var t,n,i,r,o,a,s=this.document.createElement("ul");return s.id="medium-editor-toolbar-actions"+this.getEditorId(),s.className="medium-editor-toolbar-actions",s.style.display="block",this.buttons.forEach(function(i){"string"==typeof i?(o=i,a=null):(o=i.name,a=i),r=this.base.addBuiltInExtension(o,a),r&&"function"==typeof r.getButton&&(n=r.getButton(this.base),t=this.document.createElement("li"),e.util.isElement(n)?t.appendChild(n):t.innerHTML=n,s.appendChild(t))},this),i=s.querySelectorAll("button"),i.length>0&&(i[0].classList.add(this.firstButtonClass),i[i.length-1].classList.add(this.lastButtonClass)),s},destroy:function(){this.toolbar&&(this.toolbar.parentNode&&this.toolbar.parentNode.removeChild(this.toolbar),delete this.toolbar)},getInteractionElements:function(){return this.getToolbarElement()},getToolbarElement:function(){return this.toolbar||(this.toolbar=this.createToolbar()),this.toolbar},getToolbarActionsElement:function(){return this.getToolbarElement().querySelector(".medium-editor-toolbar-actions")},initThrottledMethods:function(){this.throttledPositionToolbar=e.util.throttle(function(){this.base.isActive&&this.positionToolbarIfShown()}.bind(this))},attachEventHandlers:function(){this.subscribe("blur",this.handleBlur.bind(this)),this.subscribe("focus",this.handleFocus.bind(this)),this.subscribe("editableClick",this.handleEditableClick.bind(this)),this.subscribe("editableKeyup",this.handleEditableKeyup.bind(this)),this.on(this.document.documentElement,"mouseup",this.handleDocumentMouseup.bind(this)),this.static&&this.sticky&&this.on(this.window,"scroll",this.handleWindowScroll.bind(this),!0),this.on(this.window,"resize",this.handleWindowResize.bind(this))},handleWindowScroll:function(){this.positionToolbarIfShown()},handleWindowResize:function(){this.throttledPositionToolbar()},handleDocumentMouseup:function(t){return!(t&&t.target&&e.util.isDescendant(this.getToolbarElement(),t.target))&&void this.checkState()},handleEditableClick:function(){setTimeout(function(){this.checkState()}.bind(this),0)},handleEditableKeyup:function(){this.checkState()},handleBlur:function(){clearTimeout(this.hideTimeout),clearTimeout(this.delayShowTimeout),this.hideTimeout=setTimeout(function(){this.hideToolbar()}.bind(this),1)},handleFocus:function(){this.checkState()},isDisplayed:function(){return this.getToolbarElement().classList.contains("medium-editor-toolbar-active")},showToolbar:function(){clearTimeout(this.hideTimeout),this.isDisplayed()||(this.getToolbarElement().classList.add("medium-editor-toolbar-active"),this.trigger("showToolbar",{},this.base.getFocusedElement()))},hideToolbar:function(){this.isDisplayed()&&(this.getToolbarElement().classList.remove("medium-editor-toolbar-active"),this.trigger("hideToolbar",{},this.base.getFocusedElement()))},isToolbarDefaultActionsDisplayed:function(){return"block"===this.getToolbarActionsElement().style.display},hideToolbarDefaultActions:function(){this.isToolbarDefaultActionsDisplayed()&&(this.getToolbarActionsElement().style.display="none")},showToolbarDefaultActions:function(){this.hideExtensionForms(),this.isToolbarDefaultActionsDisplayed()||(this.getToolbarActionsElement().style.display="block"),this.delayShowTimeout=this.base.delay(function(){this.showToolbar()}.bind(this))},hideExtensionForms:function(){this.forEachExtension(function(e){e.hasForm&&e.isDisplayed()&&e.hideForm()})},multipleBlockElementsSelected:function(){var t=/<[^\/>][^>]*><\/[^>]+>/gim,n=new RegExp("<("+e.util.blockContainerElementNames.join("|")+")[^>]*>","g"),i=e.selection.getSelectionHtml(this.document).replace(t,""),r=i.match(n);return!!r&&r.length>1},modifySelection:function(){var t=this.window.getSelection(),n=t.getRangeAt(0);if(this.standardizeSelectionStart&&n.startContainer.nodeValue&&n.startOffset===n.startContainer.nodeValue.length){var i=e.util.findAdjacentTextNodeWithContent(e.selection.getSelectionElement(this.window),n.startContainer,this.document);if(i){for(var r=0;0===i.nodeValue.substr(r,1).trim().length;)r+=1;n=e.selection.select(this.document,i,r,n.endContainer,n.endOffset)}}},checkState:function(){if(!this.base.preventSelectionUpdates){if(!this.base.getFocusedElement()||e.selection.selectionInContentEditableFalse(this.window))return this.hideToolbar();var t=e.selection.getSelectionElement(this.window);return!t||this.getEditorElements().indexOf(t)===-1||t.getAttribute("data-disable-toolbar")?this.hideToolbar():this.updateOnEmptySelection&&this.static?this.showAndUpdateToolbar():!e.selection.selectionContainsContent(this.document)||this.allowMultiParagraphSelection===!1&&this.multipleBlockElementsSelected()?this.hideToolbar():void this.showAndUpdateToolbar()}},showAndUpdateToolbar:function(){this.modifySelection(),this.setToolbarButtonStates(),this.trigger("positionToolbar",{},this.base.getFocusedElement()),this.showToolbarDefaultActions(),this.setToolbarPosition()},setToolbarButtonStates:function(){this.forEachExtension(function(e){"function"==typeof e.isActive&&"function"==typeof e.setInactive&&e.setInactive()}),this.checkActiveButtons()},checkActiveButtons:function(){var t,n=[],i=null,r=e.selection.getSelectionRange(this.document),o=function(e){"function"==typeof e.checkState?e.checkState(t):"function"==typeof e.isActive&&"function"==typeof e.isAlreadyApplied&&"function"==typeof e.setActive&&!e.isActive()&&e.isAlreadyApplied(t)&&e.setActive()};if(r&&(this.forEachExtension(function(e){return"function"==typeof e.queryCommandState&&(i=e.queryCommandState(),null!==i)?void(i&&"function"==typeof e.setActive&&e.setActive()):void n.push(e)}),t=e.selection.getSelectedParentElement(r),this.getEditorElements().some(function(n){return e.util.isDescendant(n,t,!0)})))for(;t&&(n.forEach(o),!e.util.isMediumEditorElement(t));)t=t.parentNode},positionToolbarIfShown:function(){this.isDisplayed()&&this.setToolbarPosition()},setToolbarPosition:function(){var e=this.base.getFocusedElement(),t=this.window.getSelection();return e?void(!this.static&&t.isCollapsed||(this.showToolbar(),this.relativeContainer||(this.static?this.positionStaticToolbar(e):this.positionToolbar(t)),this.trigger("positionedToolbar",{},this.base.getFocusedElement()))):this},positionStaticToolbar:function(e){this.getToolbarElement().style.left="0";var t,n=this.document.documentElement&&this.document.documentElement.scrollTop||this.document.body.scrollTop,i=this.window.innerWidth,r=this.getToolbarElement(),o=e.getBoundingClientRect(),a=o.top+n,s=o.left+o.width/2,l=r.offsetHeight,u=r.offsetWidth,c=u/2;switch(this.sticky?n>a+e.offsetHeight-l-this.stickyTopOffset?(r.style.top=a+e.offsetHeight-l+"px",r.classList.remove("medium-editor-sticky-toolbar")):n>a-l-this.stickyTopOffset?(r.classList.add("medium-editor-sticky-toolbar"),r.style.top=this.stickyTopOffset+"px"):(r.classList.remove("medium-editor-sticky-toolbar"),r.style.top=a-l+"px"):r.style.top=a-l+"px",this.align){case"left":t=o.left;break;case"right":t=o.right-u;break;case"center":t=s-c}t<0?t=0:t+u>i&&(t=i-Math.ceil(u)-1),r.style.left=t+"px"},positionToolbar:function(e){this.getToolbarElement().style.left="0",this.getToolbarElement().style.right="initial";var t=e.getRangeAt(0),n=t.getBoundingClientRect();(!n||0===n.height&&0===n.width&&t.startContainer===t.endContainer)&&(n=1===t.startContainer.nodeType&&t.startContainer.querySelector("img")?t.startContainer.querySelector("img").getBoundingClientRect():t.startContainer.getBoundingClientRect());var i,r,o=this.window.innerWidth,a=this.getToolbarElement(),s=a.offsetHeight,l=a.offsetWidth,u=l/2,c=50,d=this.diffLeft-u,p=this.getEditorOption("elementsContainer"),f=["absolute","fixed"].indexOf(window.getComputedStyle(p).getPropertyValue("position"))>-1,h={},m={};f?(r=p.getBoundingClientRect(),["top","left"].forEach(function(e){m[e]=n[e]-r[e]}),m.width=n.width,m.height=n.height,n=m,o=r.width,h.top=p.scrollTop):h.top=this.window.pageYOffset,i=n.left+n.width/2,h.top+=n.top-s,n.top<c?(a.classList.add("medium-toolbar-arrow-over"),a.classList.remove("medium-toolbar-arrow-under"),h.top+=c+n.height-this.diffTop):(a.classList.add("medium-toolbar-arrow-under"),a.classList.remove("medium-toolbar-arrow-over"),h.top+=this.diffTop),i<u?(h.left=d+u,h.right="initial"):o-i<u?(h.left="auto",h.right=0):(h.left=d+i,h.right="initial"),["top","left","right"].forEach(function(e){a.style[e]=h[e]+(isNaN(h[e])?"":"px")})}});e.extensions.toolbar=t}(),function(){var t=e.Extension.extend({init:function(){e.Extension.prototype.init.apply(this,arguments),this.subscribe("editableDrag",this.handleDrag.bind(this)),this.subscribe("editableDrop",this.handleDrop.bind(this))},handleDrag:function(e){var t="medium-editor-dragover";e.preventDefault(),e.dataTransfer.dropEffect="copy","dragover"===e.type?e.target.classList.add(t):"dragleave"===e.type&&e.target.classList.remove(t)},handleDrop:function(t){var n,i="medium-editor-dragover";t.preventDefault(),t.stopPropagation(),t.dataTransfer.files&&(n=Array.prototype.slice.call(t.dataTransfer.files,0),n.some(function(t){if(t.type.match("image")){var n,i;n=new FileReader,n.readAsDataURL(t),i="medium-img-"+ +new Date,e.util.insertHTMLCommand(this.document,'<img class="medium-editor-image-loading" id="'+i+'" />'),n.onload=function(){var e=this.document.getElementById(i);e&&(e.removeAttribute("id"),e.removeAttribute("class"),e.src=n.result)}.bind(this)}}.bind(this))),t.target.classList.remove(i)}});e.extensions.imageDragging=t}(),function(){function t(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n.textContent,r=e.selection.getCaretOffsets(n);(void 0===i[r.left-1]||""===i[r.left-1].trim()||void 0!==i[r.left]&&""===i[r.left].trim())&&t.preventDefault()}function n(t,n){if(this.options.disableReturn||n.getAttribute("data-disable-return"))t.preventDefault();else if(this.options.disableDoubleReturn||n.getAttribute("data-disable-double-return")){var i=e.selection.getSelectionStart(this.options.ownerDocument);(i&&""===i.textContent.trim()&&"li"!==i.nodeName.toLowerCase()||i.previousElementSibling&&"br"!==i.previousElementSibling.nodeName.toLowerCase()&&""===i.previousElementSibling.textContent.trim())&&t.preventDefault()}}function i(t){var n=e.selection.getSelectionStart(this.options.ownerDocument),i=n&&n.nodeName.toLowerCase();"pre"===i&&(t.preventDefault(),e.util.insertHTMLCommand(this.options.ownerDocument,"    ")),e.util.isListItem(n)&&(t.preventDefault(),t.shiftKey?this.options.ownerDocument.execCommand("outdent",!1,null):this.options.ownerDocument.execCommand("indent",!1,null))}function r(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument),r=i.nodeName.toLowerCase(),o=/^(\s+|<br\/?>)?$/i,a=/h\d/i;e.util.isKey(t,[e.util.keyCode.BACKSPACE,e.util.keyCode.ENTER])&&i.previousElementSibling&&a.test(r)&&0===e.selection.getCaretOffsets(i).left?e.util.isKey(t,e.util.keyCode.BACKSPACE)&&o.test(i.previousElementSibling.innerHTML)?(i.previousElementSibling.parentNode.removeChild(i.previousElementSibling),t.preventDefault()):!this.options.disableDoubleReturn&&e.util.isKey(t,e.util.keyCode.ENTER)&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.previousElementSibling.parentNode.insertBefore(n,i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.DELETE)&&i.nextElementSibling&&i.previousElementSibling&&!a.test(r)&&o.test(i.innerHTML)&&a.test(i.nextElementSibling.nodeName.toLowerCase())?(e.selection.moveCursor(this.options.ownerDocument,i.nextElementSibling),i.previousElementSibling.parentNode.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&"li"===r&&o.test(i.innerHTML)&&!i.previousElementSibling&&!i.parentElement.previousElementSibling&&i.nextElementSibling&&"li"===i.nextElementSibling.nodeName.toLowerCase()?(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.parentElement.insertBefore(n,i.parentElement),e.selection.moveCursor(this.options.ownerDocument,n),i.parentElement.removeChild(i),t.preventDefault()):e.util.isKey(t,e.util.keyCode.BACKSPACE)&&e.util.getClosestTag(i,"blockquote")!==!1&&0===e.selection.getCaretOffsets(i).left?(t.preventDefault(),e.util.execFormatBlock(this.options.ownerDocument,"p")):e.util.isKey(t,e.util.keyCode.ENTER)&&e.util.getClosestTag(i,"blockquote")!==!1&&0===e.selection.getCaretOffsets(i).right&&(n=this.options.ownerDocument.createElement("p"),n.innerHTML="<br>",i.parentElement.insertBefore(n,i.nextSibling),e.selection.moveCursor(this.options.ownerDocument,n),t.preventDefault())}function o(t){var n,i=e.selection.getSelectionStart(this.options.ownerDocument);i&&(e.util.isMediumEditorElement(i)&&0===i.children.length&&!e.util.isBlockContainer(i)&&this.options.ownerDocument.execCommand("formatBlock",!1,"p"),!e.util.isKey(t,e.util.keyCode.ENTER)||e.util.isListItem(i)||e.util.isBlockContainer(i)||(n=i.nodeName.toLowerCase(),"a"===n?this.options.ownerDocument.execCommand("unlink",!1,null):t.shiftKey||t.ctrlKey||this.options.ownerDocument.execCommand("formatBlock",!1,"p")))}function a(e,t){var n=t.parentNode.querySelector('textarea[medium-editor-textarea-id="'+t.getAttribute("medium-editor-textarea-id")+'"]');n&&(n.value=t.innerHTML.trim())}function s(e){e._mediumEditors||(e._mediumEditors=[null]),this.id||(this.id=e._mediumEditors.length),e._mediumEditors[this.id]=this}function l(e){e._mediumEditors&&e._mediumEditors[this.id]&&(e._mediumEditors[this.id]=null)}function u(t,n,i){var r=[];if(t||(t=[]),"string"==typeof t&&(t=n.querySelectorAll(t)),e.util.isElement(t)&&(t=[t]),i)for(var o=0;o<t.length;o++){var a=t[o];!e.util.isElement(a)||a.getAttribute("data-medium-editor-element")||a.getAttribute("medium-editor-textarea-id")||r.push(a)}else r=Array.prototype.slice.apply(t);return r}function c(e){var t=e.parentNode.querySelector('textarea[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]');t&&(t.classList.remove("medium-editor-hidden"),t.removeAttribute("medium-editor-textarea-id")),e.parentNode&&e.parentNode.removeChild(e)}function d(e,t){return Object.keys(t).forEach(function(n){void 0===e[n]&&(e[n]=t[n])}),e}function p(e,t,n){var i={window:n.options.contentWindow,document:n.options.ownerDocument,base:n};return e=d(e,i),"function"==typeof e.init&&e.init(),e.name||(e.name=t),e}function f(){return!this.elements.every(function(e){return!!e.getAttribute("data-disable-toolbar")})&&this.options.toolbar!==!1}function h(){return!!f.call(this)&&this.options.anchorPreview!==!1}function m(){return this.options.placeholder!==!1}function v(){return this.options.autoLink!==!1}function g(){return this.options.imageDragging!==!1}function b(){return this.options.keyboardCommands!==!1}function y(){return!this.options.extensions.imageDragging}function _(e){for(var t=this.options.ownerDocument.createElement("div"),n=Date.now(),i="medium-editor-"+n,r=e.attributes;this.options.ownerDocument.getElementById(i);)n++,i="medium-editor-"+n;t.className=e.className,t.id=i,t.innerHTML=e.value,e.setAttribute("medium-editor-textarea-id",i);for(var o=0,a=r.length;o<a;o++)t.hasAttribute(r[o].nodeName)||t.setAttribute(r[o].nodeName,r[o].nodeValue);return e.form&&this.on(e.form,"reset",function(e){e.defaultPrevented||this.resetContent(this.options.ownerDocument.getElementById(i))}.bind(this)),e.classList.add("medium-editor-hidden"),e.parentNode.insertBefore(t,e),t}function w(t,i){if(!t.getAttribute("data-medium-editor-element")){"textarea"===t.nodeName.toLowerCase()&&(t=_.call(this,t),this.instanceHandleEditableInput||(this.instanceHandleEditableInput=a.bind(this),this.subscribe("editableInput",this.instanceHandleEditableInput))),this.options.disableEditing||t.getAttribute("data-disable-editing")||(t.setAttribute("contentEditable",!0),t.setAttribute("spellcheck",this.options.spellcheck)),this.instanceHandleEditableKeydownEnter||(t.getAttribute("data-disable-return")||t.getAttribute("data-disable-double-return"))&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter)),this.options.disableReturn||t.getAttribute("data-disable-return")||this.on(t,"keyup",o.bind(this));var r=e.util.guid();t.setAttribute("data-medium-editor-element",!0),t.classList.add("medium-editor-element"),t.setAttribute("role","textbox"),t.setAttribute("aria-multiline",!0),t.setAttribute("data-medium-editor-editor-index",i),t.setAttribute("medium-editor-index",r),S[r]=t.innerHTML,this.events.attachAllEventsToElement(t)}return t}function C(){this.subscribe("editableKeydownTab",i.bind(this)),this.subscribe("editableKeydownDelete",r.bind(this)),this.subscribe("editableKeydownEnter",r.bind(this)),this.options.disableExtraSpaces&&this.subscribe("editableKeydownSpace",t.bind(this)),this.instanceHandleEditableKeydownEnter||(this.options.disableReturn||this.options.disableDoubleReturn)&&(this.instanceHandleEditableKeydownEnter=n.bind(this),this.subscribe("editableKeydownEnter",this.instanceHandleEditableKeydownEnter))}function E(){if(this.extensions=[],Object.keys(this.options.extensions).forEach(function(e){"toolbar"!==e&&this.options.extensions[e]&&this.extensions.push(p(this.options.extensions[e],e,this))},this),y.call(this)){var t=this.options.fileDragging;t||(t={},g.call(this)||(t.allowedTypes=[])),this.addBuiltInExtension("fileDragging",t)}var n={paste:!0,"anchor-preview":h.call(this),autoLink:v.call(this),keyboardCommands:b.call(this),placeholder:m.call(this)};Object.keys(n).forEach(function(e){n[e]&&this.addBuiltInExtension(e)},this);var i=this.options.extensions.toolbar;if(!i&&f.call(this)){var r=e.util.extend({},this.options.toolbar,{allowMultiParagraphSelection:this.options.allowMultiParagraphSelection});i=new e.extensions.toolbar(r)}i&&this.extensions.push(p(i,"toolbar",this))}function k(t,n){var i=[["allowMultiParagraphSelection","toolbar.allowMultiParagraphSelection"]];return n&&i.forEach(function(t){n.hasOwnProperty(t[0])&&void 0!==n[t[0]]&&e.util.deprecated(t[0],t[1],"v6.0.0")}),e.util.defaults({},n,t)}function T(t,n){var i,r,o=/^append-(.+)$/gi,a=/justify([A-Za-z]*)$/g;if(i=o.exec(t))return e.util.execFormatBlock(this.options.ownerDocument,i[1]);if("fontSize"===t)return n.size&&e.util.deprecated(".size option for fontSize command",".value","6.0.0"),r=n.value||n.size,this.options.ownerDocument.execCommand("fontSize",!1,r);if("fontName"===t)return n.name&&e.util.deprecated(".name option for fontName command",".value","6.0.0"),r=n.value||n.name,this.options.ownerDocument.execCommand("fontName",!1,r);if("createLink"===t)return this.createLink(n);if("image"===t){var s=this.options.contentWindow.getSelection().toString().trim();return this.options.ownerDocument.execCommand("insertImage",!1,s)}if(a.exec(t)){var l=this.options.ownerDocument.execCommand(t,!1,null),u=e.selection.getSelectedParentElement(e.selection.getSelectionRange(this.options.ownerDocument));return u&&x.call(this,e.util.getTopBlockContainer(u)),l}return r=n&&n.value,this.options.ownerDocument.execCommand(t,!1,r)}function x(t){if(t){var n,i=Array.prototype.slice.call(t.childNodes).filter(function(e){var t="div"===e.nodeName.toLowerCase();return t&&!n&&(n=e.style.textAlign),t});i.length&&(this.saveSelection(),
i.forEach(function(t){if(t.style.textAlign===n){var i=t.lastChild;if(i){e.util.unwrap(t,this.options.ownerDocument);var r=this.options.ownerDocument.createElement("BR");i.parentNode.insertBefore(r,i.nextSibling)}}},this),t.style.textAlign=n,this.restoreSelection())}}var S={};e.prototype={init:function(e,t){return this.options=k.call(this,this.defaults,t),this.origElements=e,this.options.elementsContainer||(this.options.elementsContainer=this.options.ownerDocument.body),this.setup()},setup:function(){this.isActive||(s.call(this,this.options.contentWindow),this.events=new e.Events(this),this.elements=[],this.addElements(this.origElements),0!==this.elements.length&&(this.isActive=!0,E.call(this),C.call(this)))},destroy:function(){this.isActive&&(this.isActive=!1,this.extensions.forEach(function(e){"function"==typeof e.destroy&&e.destroy()},this),this.events.destroy(),this.elements.forEach(function(e){this.options.spellcheck&&(e.innerHTML=e.innerHTML),e.removeAttribute("contentEditable"),e.removeAttribute("spellcheck"),e.removeAttribute("data-medium-editor-element"),e.classList.remove("medium-editor-element"),e.removeAttribute("role"),e.removeAttribute("aria-multiline"),e.removeAttribute("medium-editor-index"),e.removeAttribute("data-medium-editor-editor-index"),e.getAttribute("medium-editor-textarea-id")&&c(e)},this),this.elements=[],this.instanceHandleEditableKeydownEnter=null,this.instanceHandleEditableInput=null,l.call(this,this.options.contentWindow))},on:function(e,t,n,i){return this.events.attachDOMEvent(e,t,n,i),this},off:function(e,t,n,i){return this.events.detachDOMEvent(e,t,n,i),this},subscribe:function(e,t){return this.events.attachCustomEvent(e,t),this},unsubscribe:function(e,t){return this.events.detachCustomEvent(e,t),this},trigger:function(e,t,n){return this.events.triggerCustomEvent(e,t,n),this},delay:function(e){var t=this;return setTimeout(function(){t.isActive&&e()},this.options.delay)},serialize:function(){var e,t,n={},i=this.elements.length;for(e=0;e<i;e+=1)t=""!==this.elements[e].id?this.elements[e].id:"element-"+e,n[t]={value:this.elements[e].innerHTML.trim()};return n},getExtensionByName:function(e){var t;return this.extensions&&this.extensions.length&&this.extensions.some(function(n){return n.name===e&&(t=n,!0)}),t},addBuiltInExtension:function(t,n){var i,r=this.getExtensionByName(t);if(r)return r;switch(t){case"anchor":i=e.util.extend({},this.options.anchor,n),r=new e.extensions.anchor(i);break;case"anchor-preview":r=new e.extensions.anchorPreview(this.options.anchorPreview);break;case"autoLink":r=new e.extensions.autoLink;break;case"fileDragging":r=new e.extensions.fileDragging(n);break;case"fontname":r=new e.extensions.fontName(this.options.fontName);break;case"fontsize":r=new e.extensions.fontSize(n);break;case"keyboardCommands":r=new e.extensions.keyboardCommands(this.options.keyboardCommands);break;case"paste":r=new e.extensions.paste(this.options.paste);break;case"placeholder":r=new e.extensions.placeholder(this.options.placeholder);break;default:e.extensions.button.isBuiltInButton(t)&&(n?(i=e.util.defaults({},n,e.extensions.button.prototype.defaults[t]),r=new e.extensions.button(i)):r=new e.extensions.button(t))}return r&&this.extensions.push(p(r,t,this)),r},stopSelectionUpdates:function(){this.preventSelectionUpdates=!0},startSelectionUpdates:function(){this.preventSelectionUpdates=!1},checkSelection:function(){var e=this.getExtensionByName("toolbar");return e&&e.checkState(),this},queryCommandState:function(e){var t,n=/^full-(.+)$/gi,i=null;t=n.exec(e),t&&(e=t[1]);try{i=this.options.ownerDocument.queryCommandState(e)}catch(e){i=null}return i},execAction:function(t,n){var i,r,o=/^full-(.+)$/gi;return i=o.exec(t),i?(this.saveSelection(),this.selectAllContents(),r=T.call(this,i[1],n),this.restoreSelection()):r=T.call(this,t,n),"insertunorderedlist"!==t&&"insertorderedlist"!==t||e.util.cleanListDOM(this.options.ownerDocument,this.getSelectedParentElement()),this.checkSelection(),r},getSelectedParentElement:function(t){return void 0===t&&(t=this.options.contentWindow.getSelection().getRangeAt(0)),e.selection.getSelectedParentElement(t)},selectAllContents:function(){var t=e.selection.getSelectionElement(this.options.contentWindow);if(t){for(;1===t.children.length;)t=t.children[0];this.selectElement(t)}},selectElement:function(t){e.selection.selectNode(t,this.options.ownerDocument);var n=e.selection.getSelectionElement(this.options.contentWindow);n&&this.events.focusElement(n)},getFocusedElement:function(){var e;return this.elements.some(function(t){return!e&&t.getAttribute("data-medium-focused")&&(e=t),!!e},this),e},exportSelection:function(){var t=e.selection.getSelectionElement(this.options.contentWindow),n=this.elements.indexOf(t),i=null;return n>=0&&(i=e.selection.exportSelection(t,this.options.ownerDocument)),null!==i&&0!==n&&(i.editableElementIndex=n),i},saveSelection:function(){this.selectionState=this.exportSelection()},importSelection:function(t,n){if(t){var i=this.elements[t.editableElementIndex||0];e.selection.importSelection(t,i,this.options.ownerDocument,n)}},restoreSelection:function(){this.importSelection(this.selectionState)},createLink:function(t){var n,i=e.selection.getSelectionElement(this.options.contentWindow),r={};if(this.elements.indexOf(i)!==-1){try{if(this.events.disableCustomEvent("editableInput"),t.url&&e.util.deprecated(".url option for createLink",".value","6.0.0"),n=t.url||t.value,n&&n.trim().length>0){var o=this.options.contentWindow.getSelection();if(o){var a,s,l,u,c=o.getRangeAt(0),d=c.commonAncestorContainer;if(3===c.endContainer.nodeType&&3!==c.startContainer.nodeType&&0===c.startOffset&&c.startContainer.firstChild===c.endContainer&&(d=c.endContainer),s=e.util.getClosestBlockContainer(c.startContainer),l=e.util.getClosestBlockContainer(c.endContainer),3!==d.nodeType&&0!==d.textContent.length&&s===l){var p=s||i,f=this.options.ownerDocument.createDocumentFragment();this.execAction("unlink"),a=this.exportSelection(),f.appendChild(p.cloneNode(!0)),i===p?e.selection.select(this.options.ownerDocument,p.firstChild,0,p.lastChild,3===p.lastChild.nodeType?p.lastChild.nodeValue.length:p.lastChild.childNodes.length):e.selection.select(this.options.ownerDocument,p,0,p,p.childNodes.length);var h=this.exportSelection();u=e.util.findOrCreateMatchingTextNodes(this.options.ownerDocument,f,{start:a.start-h.start,end:a.end-h.start,editableElementIndex:a.editableElementIndex}),0===u.length&&(f=this.options.ownerDocument.createDocumentFragment(),f.appendChild(d.cloneNode(!0)),u=[f.firstChild.firstChild,f.firstChild.lastChild]),e.util.createLink(this.options.ownerDocument,u,n.trim());var m=(f.firstChild.innerHTML.match(/^\s+/)||[""])[0].length;e.util.insertHTMLCommand(this.options.ownerDocument,f.firstChild.innerHTML.replace(/^\s+/,"")),a.start-=m,a.end-=m,this.importSelection(a)}else this.options.ownerDocument.execCommand("createLink",!1,n);this.options.targetBlank||"_blank"===t.target?e.util.setTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n):e.util.removeTargetBlank(e.selection.getSelectionStart(this.options.ownerDocument),n),t.buttonClass&&e.util.addClassToAnchors(e.selection.getSelectionStart(this.options.ownerDocument),t.buttonClass)}}if(this.options.targetBlank||"_blank"===t.target||t.buttonClass){r=this.options.ownerDocument.createEvent("HTMLEvents"),r.initEvent("input",!0,!0,this.options.contentWindow);for(var v=0,g=this.elements.length;v<g;v+=1)this.elements[v].dispatchEvent(r)}}finally{this.events.enableCustomEvent("editableInput")}this.events.triggerCustomEvent("editableInput",r,i)}},cleanPaste:function(e){this.getExtensionByName("paste").cleanPaste(e)},pasteHTML:function(e,t){this.getExtensionByName("paste").pasteHTML(e,t)},setContent:function(e,t){if(t=t||0,this.elements[t]){var n=this.elements[t];n.innerHTML=e,this.checkContentChanged(n)}},getContent:function(e){return e=e||0,this.elements[e]?this.elements[e].innerHTML.trim():null},checkContentChanged:function(t){t=t||e.selection.getSelectionElement(this.options.contentWindow),this.events.updateInput(t,{target:t,currentTarget:t})},resetContent:function(e){if(e){var t=this.elements.indexOf(e);return void(t!==-1&&this.setContent(S[e.getAttribute("medium-editor-index")],t))}this.elements.forEach(function(e,t){this.setContent(S[e.getAttribute("medium-editor-index")],t)},this)},addElements:function(e){var t=u(e,this.options.ownerDocument,!0);return 0!==t.length&&void t.forEach(function(e){e=w.call(this,e,this.id),this.elements.push(e),this.trigger("addElement",{target:e,currentTarget:e},e)},this)},removeElements:function(e){var t=u(e,this.options.ownerDocument),n=t.map(function(e){return e.getAttribute("medium-editor-textarea-id")&&e.parentNode?e.parentNode.querySelector('div[medium-editor-textarea-id="'+e.getAttribute("medium-editor-textarea-id")+'"]'):e});this.elements=this.elements.filter(function(e){return n.indexOf(e)===-1||(this.events.cleanupElement(e),e.getAttribute("medium-editor-textarea-id")&&c(e),this.trigger("removeElement",{target:e,currentTarget:e},e),!1)},this)}},e.getEditorFromElement=function(e){var t=e.getAttribute("data-medium-editor-editor-index"),n=e&&e.ownerDocument&&(e.ownerDocument.defaultView||e.ownerDocument.parentWindow);return n&&n._mediumEditors&&n._mediumEditors[t]?n._mediumEditors[t]:null}}(),function(){e.prototype.defaults={activeButtonClass:"medium-editor-button-active",buttonLabels:!1,delay:0,disableReturn:!1,disableDoubleReturn:!1,disableExtraSpaces:!1,disableEditing:!1,autoLink:!1,elementsContainer:!1,contentWindow:window,ownerDocument:document,targetBlank:!1,extensions:{},spellcheck:!0}}(),e.parseVersionString=function(e){var t=e.split("-"),n=t[0].split("."),i=t.length>1?t[1]:"";return{major:parseInt(n[0],10),minor:parseInt(n[1],10),revision:parseInt(n[2],10),preRelease:i,toString:function(){return[n[0],n[1],n[2]].join(".")+(i?"-"+i:"")}}},e.version=e.parseVersionString.call(this,{version:"5.21.1"}.version),e}()),define("storymaps-react/common/builder/textEditor/plugins/blockToolbar/utils",["module","exports","lib/medium-editor/dist/js/medium-editor"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),o={isChildOf:function(e,t){return!!r.default.util.traverseUp(e,function(e){return e===t})}};t.default=o,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/textEditor/plugins/blockToolbar/Core",[],function(){}),define("storymaps-react/common/builder/textEditor/plugins/blockToolbar/Core",["module","exports","lib/medium-editor/dist/js/medium-editor","./utils","lib-build/less!./Core"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){o(this,e),this._plugin=t,this._editor=this._plugin.base,this._editorNode=$(this._editor.elements[0]),this._document=$(document),this._defaultButtons=a.default.extensions.button.prototype.defaults,this._highlightToolbar=null,this._buttonsClasses={},this._managedTagsList=[],this._activeButtons=[],this._actionPendingRefresh=!1,this._button=null,this._blockToolbar=null,this._selection=a.default.selection,this.init(),this.createToolbar(),this.initEvents()}return l(e,[{key:"selectElement",value:function(e){this.selectedElement=e}},{key:"getSelectedElement",value:function(){return this.selectedElement}},{key:"init",value:function(){var e=this,t=this._plugin.getButtons();t.forEach(function(t){e._buttonsClasses[t]=e._editor.addBuiltInExtension(t),e._managedTagsList=e._managedTagsList.concat(e._buttonsClasses[t].tagNames)}),this._managedTagsList.push("p"),this._managedTagsList=this._managedTagsList.filter(function(e,t,n){return n.indexOf(e)==t}),setTimeout(function(){var e=this;this._editor.extensions.forEach(function(t){"toolbar"==t.name&&(e._highlightToolbar=t)})}.bind(this),1e3)}},{key:"createToolbar",value:function(){var e=this._plugin.getButtons(),t=a.default.extensions.button.prototype.defaults,n=void 0;this._button=document.createElement("div"),this._button.classList.add("block-toolbar-button"),this._button.setAttribute("contentediable",!1),this._button.innerHTML=n,document.body.appendChild(this._button),this._blockToolbar=document.createElement("div"),this._blockToolbar.classList.add("block-toolbar-buttons"),this._blockToolbar.classList.add("medium-toolbar-arrow-under"),this._blockToolbar.setAttribute("contentediable",!1),n="<ul>",e.forEach(function(e){if(t[e]){var i=t[e].contentFA;i.match(/<\/i>$/)||(i+="</i>"),n+='<li><a class="block-button" data-button="'+e+'">'+i+"</a></li>"}}),n+="</ul>",this._blockToolbar.innerHTML=n,document.body.appendChild(this._blockToolbar)}},{key:"initEvents",value:function(){var e=this;this._plugin.on(document,"click",this.updateToolbar.bind(this)),this._plugin.on(document,"keyup",this.updateToolbarKeyboard.bind(this)),this._plugin.on(this._button,"click",this.toggleToolbar.bind(this));var t=this._blockToolbar.getElementsByClassName("block-button");Array.prototype.forEach.call(t,function(t){e._plugin.on(t,"click",e.handleButtonClick.bind(e))}),this._plugin.on(window,"resize",this.positionToolbar.bind(this)),this._editor.subscribe("showToolbar",function(){this.hideToolbar()}.bind(this))}},{key:"destroy",value:function(){this._button.remove(),this._blockToolbar.remove()}},{key:"positionToolbar",value:function(){var e=void 0,t=void 0,n=void 0;this._button.classList.contains("active")!==!1&&(e=this._editor.getSelectedParentElement(),this._managedTagsList.indexOf(e.tagName.toLowerCase())<0&&(e=$(e).closest(this._managedTagsList.join(","))[0],!this.shouldDisplayButtonsOnElement(e))||(t=e.getBoundingClientRect(),n={top:this.getScrollY()+t.top,left:(window.scrollX||0)+t.left},$(e).is("h1")&&(n.top=n.top+10),n.left-=35,n.left=n.left<0?t.left:n.left,this._button.style.left=n.left+"px",this._button.style.top=n.top+"px",this._blockToolbar.style.top=n.top-42+"px",this._blockToolbar.style.left=n.left-10+"px"))}},{key:"updateToolbar",value:function(e){var t=$(e.target),n=$(this._editor.elements[0]);return this._editorNode.has(t).length||this._actionPendingRefresh||t.is(this._editor.elements[0])&&1==n.find(".block").length&&""==n.find(".block").eq(0).html()||t.parents(".block-toolbar-button").length?void this.updateToolbarForElement(this._editor.getSelectedParentElement()):void this.hideToolbarAndButton()}},{key:"updateToolbarKeyboard",value:function(e){var t=e.keyCode;(this._editorNode.is(e.target)||this._editorNode.has(e.target).length)&&(8!=t&&46!=t&&13!=t&&37!=t&&38!=t&&39!=t&&40!=t||this.updateToolbarForElement(this._editor.getSelectedParentElement()))}},{key:"updateToolbarForElement",value:function(e){var t=$(e);if(this._highlightToolbar&&this._highlightToolbar.multipleBlockElementsSelected())return void this.hideToolbarAndButton();if(!this.shouldDisplayButtonsOnElement(e))return void this.hideToolbarAndButton();if(t.hasClass("block-caption")||t.parents(".block-media").length)return void this.hideToolbarAndButton();var n=e!=this.getSelectedElement();null==this.getSelectedElement()?n=!1:$(e).hasClass("block-toolbar-button-status")?n=!1:this._actionPendingRefresh&&(n=!1,this._actionPendingRefresh=!1),n&&this.hideToolbar(),this.selectElement(e),this.showButtons()}},{key:"shouldDisplayButtonsOnElement",value:function(e){var t=!1;return this._plugin.getEditorElements().forEach(function(n){if(s.default.isChildOf(e,n))return void(t=!0)}),!!t}},{key:"showButtons",value:function(){var e=this,t=this._plugin.getButtons(),n=[];t.forEach(function(t){var i=!1;if("ALREADY_APLLIED"==e._plugin.getQueryStateMethods()[t]){var r=$(e.getSelectedElement());r=r.is("b, i, u, span")&&r.parent().is("h1, h2, blockquote")?r.parent()[0]:r[0],i=e._buttonsClasses[t].isAlreadyApplied(r)}else i=e._editor.queryCommandState(t);i&&n.push(t)}),t.forEach(function(e){var t=n.indexOf(e)>-1;$(".block-button[data-button="+e+"]").toggleClass("active",t)});var i="justifyLeft";n.length?i=n.indexOf("h1")>-1?"h1":n.indexOf("h2")>-1?"h2":n.indexOf("quote")>-1?"quote":n[0]:(n=[i],$(".block-button[data-button="+i+"]").toggleClass("active",!0)),this._button.innerHTML='<a class="block-toolbar-button-status">'+this._defaultButtons[i].contentFA+"</a>",this._button.classList.add("active"),this.positionToolbar(),this._activeButtons=n}},{key:"toggleToolbar",value:function(){this._button.classList.toggle("buttons-active"),this._blockToolbar.classList.toggle("active")}},{key:"hideToolbar",value:function(){this._button.classList.remove("buttons-active"),this._blockToolbar.classList.remove("active")}},{key:"hideToolbarAndButton",value:function(){this._button.classList.remove("active"),this._button.classList.remove("buttons-active"),this._blockToolbar.classList.remove("active")}},{key:"handleButtonClick",value:function(e){var t=e.currentTarget.getAttribute("data-button");this._actionPendingRefresh=!0,this._selection.selectNode(this.getSelectedElement(),document),"quote"==t?this._activeButtons.indexOf("h1")>-1?this._editor.execAction(this._defaultButtons.h1.action):this._activeButtons.indexOf("h2")>-1&&this._editor.execAction(this._defaultButtons.h2.action):"h1"!=t&&"h2"!=t||(this._activeButtons.indexOf("quote")>-1?this._editor.execAction(this._defaultButtons.quote.action):this._activeButtons.indexOf("orderedlist")>-1?this._editor.execAction(this._defaultButtons.orderedlist.action):this._activeButtons.indexOf("unorderedlist")>-1&&this._editor.execAction(this._defaultButtons.unorderedlist.action)),this._defaultButtons[t]&&this._editor.execAction(this._defaultButtons[t].action),this.hideEditorToolbar(),this._selection.clearSelection(document),e.preventDefault()}},{key:"hideEditorToolbar",value:function(){setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),0),setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),10),setTimeout(function(){this._highlightToolbar.hideToolbar()}.bind(this),50)}},{key:"getScrollY",value:function(){return this._document.scrollTop()}}]),e}();t.default=u,e.exports=t.default}),define("storymaps-react/common/builder/textEditor/plugins/blockToolbar/Plugin",["module","exports","lib/medium-editor/dist/js/medium-editor","./Core"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n),a=r(i),s=o.default.Extension.extend({name:"blockToolbar",_initializedAddons:{},init:function(){o.default.Extension.prototype.init.apply(this,arguments),this.core=new a.default(this)},destroy:function(){this.core.destroy()},getCore:function(){return this.core},getButtons:function(){return this.buttons},getQueryStateMethods:function(){return this.queryStateMethods},hide:function(){this.core.hideToolbarAndButton()},updateToolbar:function(){this.core.updateToolbarForElement(this.base.getSelectedParentElement())}});t.default=s,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/textEditor/plugins/blockAdd/Core",[],function(){}),define("storymaps-react/common/builder/textEditor/plugins/blockAdd/Core",["module","exports","dojo/has","lib-build/less!./Core"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){r(this,e),this._plugin=t,this._editor=this._plugin.base,this._document=$(document),this._editorNode=$(this._editor.elements[0]),this._menu=null,this._placementRules=null,this.createMenu(),this.initEvents(),this.addBlockEvents()}return a(e,[{key:"setPlacementRules",value:function(e){this._placementRules=e,e.left&&this._menu.attr("style","left:"+e.left),this._menu.css(e)}},{key:"addBlockEvents",value:function(){this.getEditorBlocks().removeClass("show-add-invite").off("mousemove").off("mouseleave").mousemove(function(e){var t=$(e.target),n=t[0];if(t.hasClass("block")){var i=n.getBoundingClientRect(),r=e.pageY>i.bottom+this.getScrollY();$(e.target).toggleClass("show-add-invite",r).css("cursor",r?"hand":"")}}.bind(this)).mouseleave(function(){var e=$(this);e.hasClass("block")&&e.toggleClass("show-add-invite",!1).css("cursor","")})}},{key:"getEditorBlocks",value:function(){return this._editorNode.find(this._plugin.getBlocksSelector())}},{key:"onEditorContentChange",value:function(){setTimeout(function(){this.addBlockEvents()}.bind(this),200)}},{key:"update",value:function(){this.onEditorContentChange()}},{key:"destroy",value:function(){this._menu.remove()}},{key:"createMenu",value:function(){var e=this._plugin.getButtons();this._menu=document.createElement("div"),this._menu.classList.add("add-toolbar-menu-container"),this._menu.setAttribute("contentediable",!1);var t='<div class="add-toolbar-menu"><ul>';Object.keys(e).forEach(function(n){var i=e[n],r=e[n].icon||"",o=e[n].iconHover||"",a='<img class="add-button-icon" src="'+r+'" />';t+='<li><a class="add-button" data-button="'+n+'" data-icon="'+r+'" data-icon-hover="'+o+'">'+a+" "+i.label+"</a></li>"}),t+="</ul></div>",this._menu.innerHTML=t,document.body.appendChild(this._menu),this._menu=$(this._menu)}},{key:"initEvents",value:function(){var e=this;this._plugin.on(document,"click",this.handleDocumentClick.bind(this));var t=this._menu[0].getElementsByClassName("add-button");Array.prototype.forEach.call(t,function(t){e._plugin.on(t,"click",e.handleButtonClick.bind(e)),t.getAttribute("data-icon-hover")&&$(t).hover(function(){$(this).find("img").attr("src",t.getAttribute("data-icon-hover"))},function(){$(this).find("img").attr("src",t.getAttribute("data-icon"))})}),this._editor.subscribe("editableInput",this.onEditorContentChange.bind(this)),(0,o.default)("mac")&&$("body").addClass("is-mac-os")}},{key:"handleDocumentClick",value:function(e){var t=$(e.target),n=!1,i=null;if(this._editorNode.has(t).length&&t.hasClass("block")&&(i=e.target.getBoundingClientRect(),e.pageY>i.bottom+this.getScrollY()&&(n=!0)),this.hideMenuAndInvite(),n){if(this._menu.hasClass("active")&&this._menu.data("block-index")==t.index())return void this._menu.removeClass("active");this._menu.css({top:this.getScrollY()+i.bottom}).data("block-index",t.index()).addClass("active"),this._editor.options.extensions&&this._editor.options.extensions.blockToolbar&&this._editor.options.extensions.blockToolbar.hide(),t.addClass("add-menu-active");var r=this._menu[0].getBoundingClientRect(),o=0;if(r.bottom>app.display.windowHeight&&(o=app.display.windowHeight-r.bottom),o){var a=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:a-o+10},150)}}}},{key:"hideMenuAndInvite",value:function(){this.getEditorBlocks().removeClass("add-menu-active"),this._menu.removeClass("active")}},{key:"handleButtonClick",value:function(e){var t=e.currentTarget.getAttribute("data-button"),n=this._plugin.getButtons();if(n[t].action){var i=this._editorNode.find(".add-menu-active"),r=i.parents(".section").eq(0).index();n[t].action({previousNode:i,sectionIndex:r,blockIndex:i.index()}).then(function(e){var n=null;return e?(i.after(e),this.update(),this.hideMenuAndInvite(),"text"==t&&(n=i.next(),this._editor.selectElement(n[0]),setTimeout(function(){n.click()},50)),void(i.hasClass("block-placeholder")&&(i.remove(),this._editorNode.attr("contentEditable","true"),n&&(this._editor.selectElement(n[0]),setTimeout(function(){n.click()},50))))):void this.hideMenuAndInvite()}.bind(this),function(){})}}},{key:"getScrollY",value:function(){return this._document.scrollTop()}}]),e}();t.default=s,e.exports=t.default}),define("storymaps-react/common/builder/textEditor/plugins/blockAdd/Plugin",["module","exports","lib/medium-editor/dist/js/medium-editor","./Core"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n),a=r(i),s=o.default.Extension.extend({name:"blockAdd",_initializedAddons:{},init:function(){o.default.Extension.prototype.init.apply(this,arguments),this.core=new a.default(this)},destroy:function(){this.core.destroy()},getCore:function(){return this.core},getButtons:function(){return this.buttons},getBlocksSelector:function(){return this.blocksSelector},update:function(){this.core.update()},hide:function(){this.core.hideMenuAndInvite()},setPlacementRules:function(e){this.core.setPlacementRules(e)}});t.default=s,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/textEditor/plugins/AnchorPreview",[],function(){}),define("storymaps-react/common/builder/textEditor/plugins/AnchorPreview",["module","exports","lib/medium-editor/dist/js/medium-editor","lib-build/less!./AnchorPreview"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),o=r.default.extensions.anchorPreview.extend({name:"anchor-preview",init:function(){r.default.extensions.anchorPreview.prototype.init.call(this)},getTemplate:function(){return'<div class="medium-editor-toolbar-anchor-preview" id="medium-editor-toolbar-anchor-preview">    <a class="medium-editor-toolbar-anchor-preview-inner" target="_blank"></a>    <i class="fa fa-trash-o delete-btn" aria-hidden="true"></i>    <i class="fa fa-pencil edit-btn" aria-hidden="true"></i></div>'},handleClick:function(e){var t=this.base.getExtensionByName("anchor"),n=this.activeAnchor;t&&n&&($(t.form).parent().addClass("medium-editor-toolbar-anchor-sm"),e.target.classList.contains("delete-btn")&&(r.default.selection.selectNode(this.activeAnchor,document),t.execAction("unlink"),e.preventDefault()),e.target.classList.contains("edit-btn")&&(r.default.selection.selectNode(this.activeAnchor,document),e.preventDefault(),this.base.delay(function(){if(n){var e={value:n.attributes.href.value,target:n.getAttribute("target"),buttonClass:n.getAttribute("class")};t.showForm(e),n=null}}.bind(this)))),this.hidePreview()},positionPreview:function(e){e=e||this.activeAnchor;var t,n,i=this.anchorPreview.offsetHeight,r=e.getBoundingClientRect(),o=(r.left+r.right)/2,a=this.diffLeft;t=this.anchorPreview.offsetWidth/2;var s=this.base.getExtensionByName("toolbar");s&&(a=s.diffLeft),n=a-t,this.anchorPreview.style.top=Math.round(r.top-i+this.window.pageYOffset)+"px",this.anchorPreview.style.right="initial",o<t?(this.anchorPreview.style.left=n+t+"px",this.anchorPreview.style.right="initial"):this.window.innerWidth-o<t?(this.anchorPreview.style.left="auto",this.anchorPreview.style.right=0):(this.anchorPreview.style.left=n+o+"px",this.anchorPreview.style.right="initial")}});t.default=o,e.exports=t.default}),define("storymaps-react/common/builder/textEditor/plugins/ColorPicker",["module","exports","lib/medium-editor/dist/js/medium-editor","storymaps-react/common/builder/ColorPicker"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(){if(window.getSelection){var e=window.getSelection();if(e.getRangeAt&&e.rangeCount)return e.getRangeAt(0)}else if(document.selection&&document.selection.createRange)return document.selection.createRange();return null}function a(e){if(e)if(window.getSelection){var t=window.getSelection();t.removeAllRanges(),t.addRange(e)}else document.selection&&e.select&&e.select()}Object.defineProperty(t,"__esModule",{value:!0});var s=r(n),l=r(i),u=s.default.selection,c=s.default.extensions.button.extend({name:"colorPicker",action:"applyForeColor",aria:"color picker",init:function(){this.button=this.document.createElement("button"),this.button.classList.add("medium-editor-action"),this.button.innerHTML='<i class="fa fa-paint-brush" aria-hidden="true"></i>',l.default.initPicker({element:this.button,showPalette:!0,onShowCallback:this.onShow.bind(this),onChangeCallback:this.onChange.bind(this),onMoveCallback:this.onChange.bind(this),onHideCallback:this.onHide.bind(this),showAlpha:!0,showClear:!0}),this.on(this.button,"click",this.handleClick.bind(this))},handleClick:function(){this._selectedText=o();var e=$(this.base.getSelectedParentElement()).css("color");$(this.button).spectrum("set",e)},onShow:function(){this._colorSelected=!1},onChange:function(){this._colorSelected=!0},onHide:function(e){a(this._selectedText),this._colorSelected&&(this.document.execCommand("styleWithCSS",!1,!0),null===e?this.document.execCommand("removeFormat",!1,"foreColor"):this.document.execCommand("foreColor",!1,e),u.clearSelection(document)),setTimeout(function(){var e=this.base.getExtensionByName("toolbar");e&&(this._colorSelected?e.hideToolbar():e.showToolbar())}.bind(this),0)}});t.default=c,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/textEditor/plugins/Anchor",[],function(){}),define("storymaps-react/common/builder/textEditor/plugins/Anchor",["module","exports","lib/medium-editor/dist/js/medium-editor","lib-build/i18n!commonResources/nls/texteditor","lib-build/less!./Anchor"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(n),a=r(i),s=o.default.selection,l=o.default.extensions.anchor.extend({name:"anchor",aria:"",placeholderText:a.default.textEditor.link.invite,linkValidation:!0,init:function(){o.default.extensions.anchor.prototype.init.call(this)},createForm:function(){var e=o.default.extensions.anchor.prototype.createForm.call(this);return e.className+=" medium-editor-toolbar-anchor-creation",e},completeFormSave:function(e){o.default.extensions.anchor.prototype.completeFormSave.call(this,e),this.hideToolbarDefaultActions(),setTimeout(function(){var e=this.base.getExtensionByName("toolbar");e&&e.hideToolbar();var t=this.base.getExtensionByName("anchor-preview");t.handleEditableMouseover({target:s.getSelectedElements(document)[0]})}.bind(this),0)}});t.default=l,e.exports=t.default}),define("lib-build/css!lib/medium-editor/dist/css/medium-editor",[],function(){}),define("lib-build/less!storymaps-react/common/builder/textEditor/MediumEditorWrapper",[],function(){}),define("storymaps-react/common/builder/textEditor/MediumEditorWrapper",["module","exports","lib/medium-editor/dist/js/medium-editor","lib-build/i18n!commonResources/nls/texteditor","./plugins/blockToolbar/Plugin","./plugins/blockAdd/Plugin","./plugins/AnchorPreview","./plugins/ColorPicker","./plugins/Anchor","storymaps/common/utils/CommonHelper","dojo/Deferred","lib-build/css!lib/medium-editor/dist/css/medium-editor","lib-build/less!./MediumEditorWrapper"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.node,n=e.addMedia,i=e.style,r=e.addButtons||[],o=e.authorizedMedia,a=e.onChange,s=null;if(!t||!n||!i)return void console.error("Could not initialize MediumEditor");var l={text:f.default.textEditor.placeholder.continueStory,hideOnClick:!1};e.placeholder===!1&&(l=!1);var u=[{name:"bold",aria:""},{name:"italic",aria:""},{name:"underline",aria:""},{name:"strikethrough",aria:""},{name:"anchor",aria:""},{name:"colorPicker",aria:""}],c=["h1","h2","quote","justifyLeft","justifyCenter","justifyRight"],d=["justifyLeft","justifyCenter","justifyRight","h2"],E={justifyLeft:"QUERY_STATE",justifyCenter:"QUERY_STATE",justifyRight:"QUERY_STATE",quote:"ALREADY_APLLIED",h1:"ALREADY_APLLIED",h2:"ALREADY_APLLIED"},k={text:{icon:"resources/tpl/builder/icons/text-editor/Text.png",
label:f.default.textEditor.blockAdd.text,action:function(){var e=new _.default,t='<p class="block"></p>';return e.resolve(t),e}},media:{icon:"resources/tpl/builder/icons/text-editor/Media.png",label:f.default.textEditor.blockAdd.media,action:function(e){var t=new _.default;return e=e||{},e.previousNode?(app.builder.mediaPicker.open({mode:"add",authorizedMedia:o}).then(function(i){var r=n({media:i,blockIndex:e.blockIndex});t.resolve(r)},function(){t.reject()}),t):(t.reject(),t)}},title:{icon:"resources/tpl/builder/icons/text-editor/Title.png",label:f.default.textEditor.blockAdd.title,action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new _.default;return void 0===e.sectionIndex?(t.reject(),t):(app.Controller.splitAndAddSection({section:e.sectionIndex,split:e.blockIndex,type:"title"}),t.resolve(),t)}},immersive:{icon:"resources/tpl/builder/icons/text-editor/Immersive.png",label:f.default.textEditor.blockAdd.immersive,action:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=new _.default;return void 0===e.sectionIndex?(t.reject(),t):(app.Controller.splitAndAddSection({section:e.sectionIndex,split:e.blockIndex,type:"immersive"}),t.resolve(),t)}}},T="p, h1, h2, blockquote, ol, ul",x=".block",S=".image-gallery, .image, .block-type-webmap, .block-webpage, .block-type-webscene, .block-type-video",P={},O=!0,I=!1,M=void 0;try{for(var A,N=r[Symbol.iterator]();!(O=(A=N.next()).done);O=!0){var j=A.value;k[j]&&(P[j]=k[j])}}catch(e){I=!0,M=e}finally{try{!O&&N.return&&N.return()}finally{if(I)throw M}}var L="compact"==i?d:c,D=null;r.length&&(D=new m.default({buttons:P,blocksSelector:x,style:i}));var R=new p.default(t,{targetBlank:!0,autoLink:!0,imageDragging:!1,fileDragging:!1,diffTop:-20,buttonLabels:"fontawesome",toolbar:{allowMultiParagraphSelection:!1,buttons:u},placeholder:l,paste:{forcePlainText:!0,cleanPastedHTML:!1},extensions:{imageDragging:new function(){},blockToolbar:new h.default({buttons:L,queryStateMethods:E,style:i}),blockAdd:D,"anchor-preview":new v.default,anchor:new b.default,colorPicker:new g.default}});e.disableEditing&&t.attr("contenteditable",!1),R.subscribe("editableKeydown",function(e){var t=$(R.getSelectedParentElement());if(8==event.keyCode)0===w.getSelectionRange(document).startOffset&&(t.is(".block-caption")?0===w.getSelectionRange(document).endOffset&&e.preventDefault():(t.is(S)||t.parents(".block").eq(0).is(S))&&e.preventDefault(),setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},0));else if(46==event.keyCode){var n=w.getSelectionRange(document),i=t.next();t.hasClass("block")&&i.is(S)&&(n.startOffset==n.startContainer.length?e.preventDefault():0==n.startOffset&&0==n.endOffset&&0==n.collapsed&&setTimeout(function(){w.moveCursor(document,i.find(".block-caption")[0],0),s.options.extensions.blockToolbar.updateToolbar()},0))}else 37!=event.keyCode&&38!=event.keyCode&&39!=event.keyCode&&40!=event.keyCode||setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},0)}),R.subscribe("editableKeydownEnter",function(e){var t=$(R.getSelectedParentElement()),n=w.getSelectionRange(document);if(D.hide(),(t.is("h1")||t.is("h2")||t.is("blockquote"))&&(t.prev().is(T)&&t.prev().addClass("block"),n.startOffset==n.startContainer.length))return t.after('<p class="block"></p>'),p.default.selection.moveCursor(document,t.next()[0],0),setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},10),void e.preventDefault();if(t.is(".block-caption"))return n.startOffset==n.startContainer.length&&(t.parents(".block").eq(0).after('<p class="block"></p>'),p.default.selection.moveCursor(document,t.parents(".block").eq(0).next()[0],0)),void e.preventDefault();if(t.is(x)){var i=t.children();""==t.html()&&0==i.length&&e.preventDefault(),""!=t.prev().html()&&"<br>"!=t.prev().html()||0!==n.startOffset||e.preventDefault(),1==i.length?"br"!=i[0].tagName.toLowerCase()||t.text()||e.preventDefault():setTimeout(function(){s.options.extensions.blockToolbar.updateToolbar()},100)}}.bind(this)),R.subscribe("editableInput",function(e,t){var n=$(R.getSelectedParentElement());return n.is("p")&&n.parent().is(".block-caption")?void n.parent().html(n.html()):(n.is(T)?n.addClass("block"):n.is("b, i, u")&&n.parent().is(T)&&n.parent().addClass("block"),$(t).find("p").contents().each(function(){this.nodeType!==Node.COMMENT_NODE&&8!=this.nodeType||$(this).remove()}),void B())});var F=$(R.elements[0]);F.on("input",function(){F.children("p, h1, h2, blockquote").children("span[style]").each(function(){(this.style.fontWeight||this.style.fontStyle||this.style.textDecoration||this.style.color)&&"inherit"!=this.style.color&&this.style.color!=C||$(this).contents().unwrap()}),F.find(".block-caption").find("p").each(function(){$(this).contents().unwrap()}),setTimeout(function(){F.find(".block-caption").children("span[style]").each(function(){(this.style.fontWeight||this.style.fontStyle||this.style.textDecoration||this.style.color)&&"inherit"!=this.style.color&&this.style.color!=C||$(this).contents().unwrap()})},50),F.children("h1:not(.block), h2:not(.block), blockquote:not(.block)").children("p:empty").each(function(){var e=$(this),t=e.parent();t.addClass("block"),e.replaceWith("<br>");var n=t.children();R.selectElement(n[0]),setTimeout(function(){n.click()},50)}),F.children("p:not(.block), h1:not(.block), h2:not(.block), blockquote:not(.block)").addClass("block")}),R.subscribe("editablePaste",function(){setTimeout(function(){$(R.elements[0]).find(T).addClass("block")},100)}),s=R,s.extensions.forEach(function(e){"placeholder"==e.name&&(e.updatePlaceholder=function(e,t){return e.querySelector("img, blockquote, ul, ol")||""!==e.textContent?this.hidePlaceholder(e):void(t||this.showPlaceholder(e))})}),this.serialize=function(){var e=[],t=$(s.serialize()["element-0"].value);return $.each(t,function(t,n){var i=$(n);3!=n.nodeType&&(i.is(T)?e.push({type:"text",text:{value:i[0].outerHTML}}):i.is(S)&&e.push({type:"media",id:i.attr("id")}))}),e},this.hideToolbars=function(){s.options.extensions.blockToolbar.hide(),s.options.extensions.blockAdd.hide(),s.extensions.forEach(function(e){"toolbar"==e.name&&e.hideToolbar()})},this.setAddMenuPlacementRules=function(e){D.setPlacementRules(e)},this.focus=function(){s.elements[0].focus()};var B=y.default.throttle(function(){a&&a()},500)};var p=d(n),f=d(i),h=d(r),m=d(o),v=d(a),g=d(s),b=d(l),y=d(u),_=d(c),w=p.default.selection,C="rgb(76, 76, 76)";e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/SequenceBuilder",[],function(){}),define("storymaps-react/tpl/view/section/SequenceBuilder",["module","exports","./Sequence","storymaps/tpl/view/section/Common","storymaps-react/common/builder/textEditor/MediumEditorWrapper","dojo/topic","dojo/_base/lang","lib-build/less!./SequenceBuilder"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},b=function(e){function t(e){l(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._editor=null,n.scanResults={hasErrors:!1,hasWarnings:!1},n.MEDIA_BUILDER_TABS=["size","appearance","manage"],n}return c(t,e),v(t,[{key:"render",value:function(){return this._section.background&&this._section.foreground&&this._section.foreground.blocks&&this._section.foreground.blocks.length||(this._section={type:"sequence",layout:"sequence-1",background:{type:"color",color:{value:"#FFF"}},foreground:{blocks:[{type:"text",text:{value:'<p class="block"></p>'}}]}}),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){var n=g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e);return this._editor=new f.default({node:this._node.find(".foreground"),addMedia:this.addMedia.bind(this),addButtons:["text","arcgis","media","title","immersive"],style:"full",placeholder:1!=e.index(),disableEditing:1==e.index()&&this._section.foreground.blocks&&1==this._section.foreground.blocks.length&&"text"==this._section.foreground.blocks[0].type&&this._section.foreground.blocks[0].text.value.match(/block-placeholder/),onChange:this._onContentChange.bind(this)}),n}},{key:"focus",value:function(){setTimeout(function(){this._editor.focus()}.bind(this),50)}},{key:"addMedia",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.media){var t=p.default.createBlock(e.media);return this._blocks.splice(e.blockIndex,0,t),setTimeout(function(){t.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS}),t.load();var n=t.getNode()[0].getBoundingClientRect(),i=0;if(n.bottom>app.display.windowHeight&&(i=app.display.windowHeight-n.bottom),i){var r=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:r-i+10},150)}p.default.checkMedia(e.media),this._onContentChange()}.bind(this),50),t.render({placement:"block"})}}},{key:"_onContentChange",value:function(){this.serialize(),h.default.publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(e){var t=e.getNode()[0],n=t.getBoundingClientRect(),i=0;if(n.bottom>app.display.windowHeight&&(i=app.display.windowHeight-n.bottom),i){var r=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:r-i+10},150)}}},{key:"_onEditMedia",value:function(e,t){var n=this,i=p.default.initMedia(t);e.getNode().before(i.render({placement:"block"})),e.getNode().remove();var r=i.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS});r&&r.isAsync?r.promise.then(function(){n._onEditedContentMounted(i,e,t)}):this._onEditedContentMounted(i,e,t)}},{key:"_onEditedContentMounted",value:function(e,t,n){e.load(),this._blocks.splice(this._blocks.indexOf(t),1,e),p.default.checkMedia(n),this._onContentChange()}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.action&&e.media){if("remove"==e.action)e.media.remove(),this._blocks.splice(this._blocks.indexOf(e.media),1);else if("swap"==e.action)app.builder.mediaPicker.open({mode:"edit",media:e.media.serialize()}).then(function(t){this._onEditMedia(e.media,t)}.bind(this),function(){});else if("image-to-image-gallery"==e.action)app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(t){if("image"==t.type){var n=e.media.serialize();this._onEditMedia(e.media,{type:"image-gallery","image-gallery":{images:[{url:n.image.url,width:n.image.width,height:n.image.height},t.image],caption:n.image.caption}})}}.bind(this),function(){});else if("image-gallery-to-image"==e.action){var t=e.media.serialize()["image-gallery"],n=t.images[0];this._onEditMedia(e.media,{type:"image",image:{url:n.url,width:n.width,height:n.height,caption:t.caption}})}this._onContentChange()}}},{key:"getPreviewThumbnail",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._blocks[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;if("text"!=o.type)return o.getPreviewThumbnail()}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}return null}},{key:"getPreviewIcon",value:function(){return""}},{key:"getPreviewText",value:function(){var e="";if(this._section.foreground.blocks&&this._section.foreground.blocks.length){var t=!0,n=!1,i=void 0;try{for(var r,o=this._section.foreground.blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if("text"==a.type&&(e=$(a.text.value).text()))break}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}return e}},{key:"findBlock",value:function(e){if(!e)return null;for(var t=0;t<this._blocks.length;t++)if(this._blocks[t]._domID==e)return this._blocks[t]}},{key:"serialize",value:function(){if(this._editor){for(var e=this._editor.serialize(),t=0;t<e.length;t++){var n=e[t];if("media"==n.type){var i=this.findBlock(n.id);i&&(e[t]=i.serialize())}}this._section.foreground.blocks=e}return m.default.clone(this._section)}},{key:"requireSplitAt",value:function(e){return e<this.serialize().foreground.blocks.length-1}},{key:"serializePartially",value:function(e,t){var n=this.serialize();return void 0===t&&(t=n.foreground.blocks.length),n.foreground.blocks=n.foreground.blocks.slice(e,t),n}},{key:"mergeAndSerialize",value:function(e){var t=this.serialize(),n=e.serialize();return t.foreground.blocks=t.foreground.blocks.concat(n.foreground.blocks),t}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}}]),t}(d.default);t.default=b,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/builder/AddMenu",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l='<div class="add-menu">\r\n  <ul>\r\n    ';return o=null!=(o=t.buttons||(null!=e?e.buttons:e))?o:s,r=typeof o===a?o.call(e,{name:"buttons",hash:{},data:i}):o,null!=r&&(l+=r),l+"\r\n  </ul>\r\n</div>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/builder/AddMenu",[],function(){}),define("storymaps-react/tpl/view/section/builder/AddMenu",["module","exports","lib-build/hbars!./AddMenu","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./AddMenu"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u={sequence:{name:"sequence",icon:"resources/tpl/builder/icons/text-editor/Narrative.png",label:s.default.builder.sections.sequence},title:{name:"title",icon:"resources/tpl/builder/icons/text-editor/Title.png",label:s.default.builder.sections.title},immersive:{name:"immersive",icon:"resources/tpl/builder/icons/text-editor/Immersive.png",label:s.default.builder.sections.immersive}},c=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(o(this,e),this._container=null,this._sectionContainer=null,this._buttons=[],t.buttons&&t.buttons.length){var n=!0,i=!1,r=void 0;try{for(var a,s=t.buttons[Symbol.iterator]();!(n=(a=s.next()).done);n=!0){var l=a.value;this._buttons.push(u[l])}}catch(e){i=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(i)throw r}}}}return l(e,[{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._container=e.container,this._sectionContainer=e.sectionContainer,this._container.html(this._render()).mouseleave(this._onMenuMouseleave.bind(this)).find(".add-button").click(this._onButtonClick.bind(this)),this._sectionContainer.click(this._onSectionClick.bind(this)).mousemove(this._onSectionMouseMove.bind(this)).mouseleave(this._onSectionMouseleave.bind(this))}},{key:"_render",value:function(){var e="",t=!0,n=!1,i=void 0;try{for(var r,o=this._buttons[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value,l=s.name,u=s.icon||"",c=s.iconHover||"",d='<img class="add-button-icon" src="'+u+'" />';e+='<li><a class="add-button" data-button="'+l+'" data-icon="'+u+'" data-icon-hover="'+c+'">'+d+" "+s.label+"</a></li>"}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return(0,a.default)({buttons:e})}},{key:"show",value:function(){this._container.addClass("active")}},{key:"_onSectionClick",value:function(e){var t=e.currentTarget.getBoundingClientRect();if(e.clientY-15<t.top){var n=window.getComputedStyle(this._container.parent(".section")[0],":before").getPropertyValue("display");"block"==n&&this.show()}}},{key:"_onSectionMouseMove",value:function(e){var t=e.currentTarget.getBoundingClientRect(),n=e.clientY-15<t.top;this._sectionContainer.toggleClass("show-add-section-menu",n).css("cursor",n?"hand":"default")}},{key:"_onSectionMouseleave",value:function(){this._sectionContainer.toggleClass("show-add-section-menu",!1).css("cursor","default"),this._container.removeClass("active")}},{key:"_onMenuMouseleave",value:function(){this._onSectionMouseleave()}},{key:"_onButtonClick",value:function(e){var t=$(e.currentTarget),n=this._sectionContainer.index()-1;this._sectionContainer.hasClass("section-layout-credits")&&n--;var i=t.data("button");app.Controller.addSection({type:i,index:n,navigation:"title"!=i,animateSpeed:800,ensureFullyVisible:"title"==i})}}]),e}();t.default=c,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/TitleBuilder",[],function(){}),define("storymaps-react/tpl/view/section/TitleBuilder",["module","exports","./Title","lib-build/i18n!resources/tpl/builder/nls/app","storymaps/tpl/view/section/Common","./builder/AddMenu","dojo/topic","dojo/_base/lang","lib-build/less!./TitleBuilder"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},_=function(e){function t(e,n){u(this,t);var i=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i._initialMedia=n,i._addMenu=new m.default({buttons:["sequence","title","immersive"]}),i.scanResults={hasErrors:!1,hasWarnings:!1},i.MEDIA_BUILDER_TABS_BACKGROUND=["section-appearance","background","manage"],i}return d(t,e),b(t,[{key:"render",value:function(){return this._section.layout||(this._section.layout="title-regular"),this._section.background||(this._section.background=this._initialMedia||{type:"empty",empty:"empty"},this._section.foreground={title:"",credits:"",options:{titleStyle:{shadow:!1,text:"dark",background:"light"}}}),this._section.foreground.options||(this._section.foreground.options={}),this._section.foreground.options.titleStyle||(this._section.foreground.options.titleStyle={shadow:!0,text:"light",background:null}),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._node.find(".fg-title").attr("contenteditable",!0).attr("placeholder",f.default.builder.title.placeholder).on("blur keyup",function(){this.serialize(),this._onContentChange()}.bind(this)).on("paste",function(){setTimeout(function(){this._node.find(".fg-title").html($("<div>"+this._node.find(".fg-title").text()+"</div>").text()),this.serialize(),this._onContentChange()}.bind(this),0)}.bind(this)).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}})}},{key:"focus",value:function(){setTimeout(function(){this._node.find(".fg-title").focus()}.bind(this),50)}},{key:"serialize",value:function(){return this._section.background=this._backgroundMedia.serialize(),this._section.foreground.title=$("<div>"+this._node.find(".fg-title").text()+"</div>").text(),g.default.clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"_onContentChange",value:function(){v.default.publish("builder-section-update")}},{key:"_onToggleMediaConfig",value:function(){var e="media-config-active",t=this._backgroundMedia.isConfigActive(),n=225;if(t){this._node.addClass(e);var i=this._node[0],r=i.getBoundingClientRect(),o=0,a=n,s=r.bottom+a;if(s>app.display.windowHeight&&(o=app.display.windowHeight-s),o){var l=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:l-o+50},150)}}else this._node.removeClass(e)}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.action&&e.media){if("swap"==e.action){var t="empty"==e.media.serialize().type;app.builder.mediaPicker.open({mode:t?"add":"edit",media:t?null:e.media.serialize(),authorizedMedia:["image"]}).then(function(t){this._onEditMedia(e.media,t)}.bind(this),function(){})}this._onContentChange()}}},{key:"_applySectionConfig",value:function(){this._applyConfig(),this._onContentChange()}},{key:"_onEditMedia",value:function(e,t){var n=h.default.initMedia(t);this._node.find(".background").remove(),this._node.prepend(h.default.renderBackground({media:n})),n.postCreate({container:this._node,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,foregroundOptions:this._section.foreground.options,applySectionConfig:app.isInBuilder?this._applySectionConfig.bind(this):null,sectionType:"title"}),n.load(),"empty"!=e.type&&this._onToggleMediaConfig(),e.destroy(),this._backgroundMedia=n,h.default.checkMedia(t),this._applySectionConfig()}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}}]),t}(p.default);t.default=_,e.exports=t.default}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("react",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.React=e()}}(function(){return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){"use strict";var i=e(40),r=e(148),o={focusDOMComponent:function(){r(i.getNodeFromInstance(this))}};t.exports=o},{148:148,40:40}],2:[function(e,t,n){"use strict";function i(){var e=window.opera;return"object"==typeof e&&"function"==typeof e.version&&parseInt(e.version(),10)<=12}function r(e){return(e.ctrlKey||e.altKey||e.metaKey)&&!(e.ctrlKey&&e.altKey)}function o(e){switch(e){case P.topCompositionStart:return O.compositionStart;case P.topCompositionEnd:return O.compositionEnd;case P.topCompositionUpdate:return O.compositionUpdate}}function a(e,t){return e===P.topKeyDown&&t.keyCode===w}function s(e,t){switch(e){case P.topKeyUp:return _.indexOf(t.keyCode)!==-1;case P.topKeyDown:return t.keyCode!==w;case P.topKeyPress:case P.topMouseDown:case P.topBlur:return!0;default:return!1}}function l(e){var t=e.detail;return"object"==typeof t&&"data"in t?t.data:null}function u(e,t,n,i){var r,u;if(C?r=o(e):M?s(e,n)&&(r=O.compositionEnd):a(e,n)&&(r=O.compositionStart),!r)return null;T&&(M||r!==O.compositionStart?r===O.compositionEnd&&M&&(u=M.getData()):M=v.getPooled(i));var c=g.getPooled(r,t,n,i);if(u)c.data=u;else{var d=l(n);null!==d&&(c.data=d)}return h.accumulateTwoPhaseDispatches(c),c}function c(e,t){switch(e){case P.topCompositionEnd:return l(t);case P.topKeyPress:var n=t.which;return n!==x?null:(I=!0,S);case P.topTextInput:var i=t.data;return i===S&&I?null:i;default:return null}}function d(e,t){if(M){if(e===P.topCompositionEnd||!C&&s(e,t)){var n=M.getData();return v.release(M),M=null,n}return null}switch(e){case P.topPaste:return null;case P.topKeyPress:return t.which&&!r(t)?String.fromCharCode(t.which):null;case P.topCompositionEnd:return T?null:t.data;default:return null}}function p(e,t,n,i){var r;if(r=k?c(e,n):d(e,n),!r)return null;var o=b.getPooled(O.beforeInput,t,n,i);return o.data=r,h.accumulateTwoPhaseDispatches(o),o}var f=e(16),h=e(20),m=e(140),v=e(21),g=e(95),b=e(99),y=e(158),_=[9,13,27,32],w=229,C=m.canUseDOM&&"CompositionEvent"in window,E=null;m.canUseDOM&&"documentMode"in document&&(E=document.documentMode);var k=m.canUseDOM&&"TextEvent"in window&&!E&&!i(),T=m.canUseDOM&&(!C||E&&E>8&&E<=11),x=32,S=String.fromCharCode(x),P=f.topLevelTypes,O={beforeInput:{phasedRegistrationNames:{bubbled:y({onBeforeInput:null}),captured:y({onBeforeInputCapture:null})},dependencies:[P.topCompositionEnd,P.topKeyPress,P.topTextInput,P.topPaste]},compositionEnd:{phasedRegistrationNames:{bubbled:y({onCompositionEnd:null}),captured:y({onCompositionEndCapture:null})},dependencies:[P.topBlur,P.topCompositionEnd,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionStart:{phasedRegistrationNames:{bubbled:y({onCompositionStart:null}),captured:y({onCompositionStartCapture:null})},dependencies:[P.topBlur,P.topCompositionStart,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]},compositionUpdate:{phasedRegistrationNames:{bubbled:y({onCompositionUpdate:null}),captured:y({onCompositionUpdateCapture:null})},dependencies:[P.topBlur,P.topCompositionUpdate,P.topKeyDown,P.topKeyPress,P.topKeyUp,P.topMouseDown]}},I=!1,M=null,A={eventTypes:O,extractEvents:function(e,t,n,i){return[u(e,t,n,i),p(e,t,n,i)]}};t.exports=A},{140:140,158:158,16:16,20:20,21:21,95:95,99:99}],3:[function(e,t,n){"use strict";function i(e,t){return e+t.charAt(0).toUpperCase()+t.substring(1)}var r={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridRow:!0,gridColumn:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},o=["Webkit","ms","Moz","O"];Object.keys(r).forEach(function(e){o.forEach(function(t){r[i(t,e)]=r[e]})});var a={background:{backgroundAttachment:!0,backgroundColor:!0,backgroundImage:!0,backgroundPositionX:!0,backgroundPositionY:!0,backgroundRepeat:!0},backgroundPosition:{backgroundPositionX:!0,backgroundPositionY:!0},border:{borderWidth:!0,borderStyle:!0,borderColor:!0},borderBottom:{borderBottomWidth:!0,borderBottomStyle:!0,borderBottomColor:!0},borderLeft:{borderLeftWidth:!0,borderLeftStyle:!0,borderLeftColor:!0},borderRight:{borderRightWidth:!0,borderRightStyle:!0,borderRightColor:!0},borderTop:{borderTopWidth:!0,borderTopStyle:!0,borderTopColor:!0},font:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,lineHeight:!0,fontFamily:!0},outline:{outlineWidth:!0,outlineStyle:!0,outlineColor:!0}},s={isUnitlessNumber:r,shorthandPropertyExpansions:a};t.exports=s},{}],4:[function(e,t,n){"use strict";var i=e(3),r=e(140),o=(e(66),e(142),e(113)),a=e(153),s=e(159),l=(e(161),s(function(e){return a(e)})),u=!1,c="cssFloat";if(r.canUseDOM){var d=document.createElement("div").style;try{d.font=""}catch(e){u=!0}void 0===document.documentElement.style.cssFloat&&(c="styleFloat")}var p={createMarkupForStyles:function(e,t){var n="";for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];null!=r&&(n+=l(i)+":",n+=o(i,r,t)+";")}return n||null},setValueForStyles:function(e,t,n){var r=e.style;for(var a in t)if(t.hasOwnProperty(a)){var s=o(a,t[a],n);if("float"!==a&&"cssFloat"!==a||(a=c),s)r[a]=s;else{var l=u&&i.shorthandPropertyExpansions[a];if(l)for(var d in l)r[d]="";else r[a]=""}}}};t.exports=p},{113:113,140:140,142:142,153:153,159:159,161:161,3:3,66:66}],5:[function(e,t,n){"use strict";function i(){this._callbacks=null,this._contexts=null}var r=e(132),o=e(162),a=e(25);e(154),o(i.prototype,{enqueue:function(e,t){this._callbacks=this._callbacks||[],this._contexts=this._contexts||[],this._callbacks.push(e),this._contexts.push(t)},notifyAll:function(){var e=this._callbacks,t=this._contexts;if(e){e.length!==t.length?r("24"):void 0,this._callbacks=null,this._contexts=null;for(var n=0;n<e.length;n++)e[n].call(t[n]);e.length=0,t.length=0}},checkpoint:function(){return this._callbacks?this._callbacks.length:0},rollback:function(e){this._callbacks&&(this._callbacks.length=e,this._contexts.length=e)},reset:function(){this._callbacks=null,this._contexts=null},destructor:function(){this.reset()}}),a.addPoolingTo(i),t.exports=i},{132:132,154:154,162:162,25:25}],6:[function(e,t,n){"use strict";function i(e){var t=e.nodeName&&e.nodeName.toLowerCase();return"select"===t||"input"===t&&"file"===e.type}function r(e){var t=k.getPooled(I.change,A,e,T(e));_.accumulateTwoPhaseDispatches(t),E.batchedUpdates(o,t)}function o(e){y.enqueueEvents(e),y.processEventQueue(!1)}function a(e,t){M=e,A=t,M.attachEvent("onchange",r)}function s(){M&&(M.detachEvent("onchange",r),M=null,A=null)}function l(e,t){if(e===O.topChange)return t}function u(e,t,n){e===O.topFocus?(s(),a(t,n)):e===O.topBlur&&s()}function c(e,t){M=e,A=t,N=e.value,j=Object.getOwnPropertyDescriptor(e.constructor.prototype,"value"),Object.defineProperty(M,"value",R),M.attachEvent?M.attachEvent("onpropertychange",p):M.addEventListener("propertychange",p,!1)}function d(){M&&(delete M.value,M.detachEvent?M.detachEvent("onpropertychange",p):M.removeEventListener("propertychange",p,!1),M=null,A=null,N=null,j=null)}function p(e){if("value"===e.propertyName){var t=e.srcElement.value;t!==N&&(N=t,r(e))}}function f(e,t){
if(e===O.topInput)return t}function h(e,t,n){e===O.topFocus?(d(),c(t,n)):e===O.topBlur&&d()}function m(e,t){if((e===O.topSelectionChange||e===O.topKeyUp||e===O.topKeyDown)&&M&&M.value!==N)return N=M.value,A}function v(e){return e.nodeName&&"input"===e.nodeName.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)}function g(e,t){if(e===O.topClick)return t}var b=e(16),y=e(17),_=e(20),w=e(140),C=e(40),E=e(88),k=e(97),T=e(121),x=e(128),S=e(129),P=e(158),O=b.topLevelTypes,I={change:{phasedRegistrationNames:{bubbled:P({onChange:null}),captured:P({onChangeCapture:null})},dependencies:[O.topBlur,O.topChange,O.topClick,O.topFocus,O.topInput,O.topKeyDown,O.topKeyUp,O.topSelectionChange]}},M=null,A=null,N=null,j=null,L=!1;w.canUseDOM&&(L=x("change")&&(!document.documentMode||document.documentMode>8));var D=!1;w.canUseDOM&&(D=x("input")&&(!document.documentMode||document.documentMode>11));var R={get:function(){return j.get.call(this)},set:function(e){N=""+e,j.set.call(this,e)}},F={eventTypes:I,extractEvents:function(e,t,n,r){var o,a,s=t?C.getNodeFromInstance(t):window;if(i(s)?L?o=l:a=u:S(s)?D?o=f:(o=m,a=h):v(s)&&(o=g),o){var c=o(e,t);if(c){var d=k.getPooled(I.change,c,n,r);return d.type="change",_.accumulateTwoPhaseDispatches(d),d}}a&&a(e,s,t)}};t.exports=F},{121:121,128:128,129:129,140:140,158:158,16:16,17:17,20:20,40:40,88:88,97:97}],7:[function(e,t,n){"use strict";function i(e,t){return Array.isArray(t)&&(t=t[1]),t?t.nextSibling:e.firstChild}function r(e,t,n){c.insertTreeBefore(e,t,n)}function o(e,t,n){Array.isArray(t)?s(e,t[0],t[1],n):v(e,t,n)}function a(e,t){if(Array.isArray(t)){var n=t[1];t=t[0],l(e,t,n),e.removeChild(n)}e.removeChild(t)}function s(e,t,n,i){for(var r=t;;){var o=r.nextSibling;if(v(e,r,i),r===n)break;r=o}}function l(e,t,n){for(;;){var i=t.nextSibling;if(i===n)break;e.removeChild(i)}}function u(e,t,n){var i=e.parentNode,r=e.nextSibling;r===t?n&&v(i,document.createTextNode(n),r):n?(m(r,n),l(i,r,t)):l(i,e,t)}var c=e(8),d=e(12),p=e(70),f=(e(40),e(66),e(112)),h=e(134),m=e(135),v=f(function(e,t,n){e.insertBefore(t,n)}),g=d.dangerouslyReplaceNodeWithMarkup,b={dangerouslyReplaceNodeWithMarkup:g,replaceDelimitedText:u,processUpdates:function(e,t){for(var n=0;n<t.length;n++){var s=t[n];switch(s.type){case p.INSERT_MARKUP:r(e,s.content,i(e,s.afterNode));break;case p.MOVE_EXISTING:o(e,s.fromNode,i(e,s.afterNode));break;case p.SET_MARKUP:h(e,s.content);break;case p.TEXT_CONTENT:m(e,s.content);break;case p.REMOVE_NODE:a(e,s.fromNode)}}}};t.exports=b},{112:112,12:12,134:134,135:135,40:40,66:66,70:70,8:8}],8:[function(e,t,n){"use strict";function i(e){if(v){var t=e.node,n=e.children;if(n.length)for(var i=0;i<n.length;i++)g(t,n[i],null);else null!=e.html?d(t,e.html):null!=e.text&&f(t,e.text)}}function r(e,t){e.parentNode.replaceChild(t.node,e),i(t)}function o(e,t){v?e.children.push(t):e.node.appendChild(t.node)}function a(e,t){v?e.html=t:d(e.node,t)}function s(e,t){v?e.text=t:f(e.node,t)}function l(){return this.node.nodeName}function u(e){return{node:e,children:[],html:null,text:null,toString:l}}var c=e(9),d=e(134),p=e(112),f=e(135),h=1,m=11,v="undefined"!=typeof document&&"number"==typeof document.documentMode||"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent&&/\bEdge\/\d/.test(navigator.userAgent),g=p(function(e,t,n){t.node.nodeType===m||t.node.nodeType===h&&"object"===t.node.nodeName.toLowerCase()&&(null==t.node.namespaceURI||t.node.namespaceURI===c.html)?(i(t),e.insertBefore(t.node,n)):(e.insertBefore(t.node,n),i(t))});u.insertTreeBefore=g,u.replaceChildWithTree=r,u.queueChild=o,u.queueHTML=a,u.queueText=s,t.exports=u},{112:112,134:134,135:135,9:9}],9:[function(e,t,n){"use strict";var i={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};t.exports=i},{}],10:[function(e,t,n){"use strict";function i(e,t){return(e&t)===t}var r=e(132),o=(e(154),{MUST_USE_PROPERTY:1,HAS_BOOLEAN_VALUE:4,HAS_NUMERIC_VALUE:8,HAS_POSITIVE_NUMERIC_VALUE:24,HAS_OVERLOADED_BOOLEAN_VALUE:32,injectDOMPropertyConfig:function(e){var t=o,n=e.Properties||{},a=e.DOMAttributeNamespaces||{},l=e.DOMAttributeNames||{},u=e.DOMPropertyNames||{},c=e.DOMMutationMethods||{};e.isCustomAttribute&&s._isCustomAttributeFunctions.push(e.isCustomAttribute);for(var d in n){s.properties.hasOwnProperty(d)?r("48",d):void 0;var p=d.toLowerCase(),f=n[d],h={attributeName:p,attributeNamespace:null,propertyName:d,mutationMethod:null,mustUseProperty:i(f,t.MUST_USE_PROPERTY),hasBooleanValue:i(f,t.HAS_BOOLEAN_VALUE),hasNumericValue:i(f,t.HAS_NUMERIC_VALUE),hasPositiveNumericValue:i(f,t.HAS_POSITIVE_NUMERIC_VALUE),hasOverloadedBooleanValue:i(f,t.HAS_OVERLOADED_BOOLEAN_VALUE)};if(h.hasBooleanValue+h.hasNumericValue+h.hasOverloadedBooleanValue<=1?void 0:r("50",d),l.hasOwnProperty(d)){var m=l[d];h.attributeName=m}a.hasOwnProperty(d)&&(h.attributeNamespace=a[d]),u.hasOwnProperty(d)&&(h.propertyName=u[d]),c.hasOwnProperty(d)&&(h.mutationMethod=c[d]),s.properties[d]=h}}}),a=":A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD",s={ID_ATTRIBUTE_NAME:"data-reactid",ROOT_ATTRIBUTE_NAME:"data-reactroot",ATTRIBUTE_NAME_START_CHAR:a,ATTRIBUTE_NAME_CHAR:a+"\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040",properties:{},getPossibleStandardName:null,_isCustomAttributeFunctions:[],isCustomAttribute:function(e){for(var t=0;t<s._isCustomAttributeFunctions.length;t++){var n=s._isCustomAttributeFunctions[t];if(n(e))return!0}return!1},injection:o};t.exports=s},{132:132,154:154}],11:[function(e,t,n){"use strict";function i(e){return!!u.hasOwnProperty(e)||!l.hasOwnProperty(e)&&(s.test(e)?(u[e]=!0,!0):(l[e]=!0,!1))}function r(e,t){return null==t||e.hasBooleanValue&&!t||e.hasNumericValue&&isNaN(t)||e.hasPositiveNumericValue&&t<1||e.hasOverloadedBooleanValue&&t===!1}var o=e(10),a=(e(40),e(66),e(131)),s=(e(161),new RegExp("^["+o.ATTRIBUTE_NAME_START_CHAR+"]["+o.ATTRIBUTE_NAME_CHAR+"]*$")),l={},u={},c={createMarkupForID:function(e){return o.ID_ATTRIBUTE_NAME+"="+a(e)},setAttributeForID:function(e,t){e.setAttribute(o.ID_ATTRIBUTE_NAME,t)},createMarkupForRoot:function(){return o.ROOT_ATTRIBUTE_NAME+'=""'},setAttributeForRoot:function(e){e.setAttribute(o.ROOT_ATTRIBUTE_NAME,"")},createMarkupForProperty:function(e,t){var n=o.properties.hasOwnProperty(e)?o.properties[e]:null;if(n){if(r(n,t))return"";var i=n.attributeName;return n.hasBooleanValue||n.hasOverloadedBooleanValue&&t===!0?i+'=""':i+"="+a(t)}return o.isCustomAttribute(e)?null==t?"":e+"="+a(t):null},createMarkupForCustomAttribute:function(e,t){return i(e)&&null!=t?e+"="+a(t):""},setValueForProperty:function(e,t,n){var i=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(i){var a=i.mutationMethod;if(a)a(e,n);else{if(r(i,n))return void this.deleteValueForProperty(e,t);if(i.mustUseProperty)e[i.propertyName]=n;else{var s=i.attributeName,l=i.attributeNamespace;l?e.setAttributeNS(l,s,""+n):i.hasBooleanValue||i.hasOverloadedBooleanValue&&n===!0?e.setAttribute(s,""):e.setAttribute(s,""+n)}}}else if(o.isCustomAttribute(t))return void c.setValueForAttribute(e,t,n)},setValueForAttribute:function(e,t,n){i(t)&&(null==n?e.removeAttribute(t):e.setAttribute(t,""+n))},deleteValueForAttribute:function(e,t){e.removeAttribute(t)},deleteValueForProperty:function(e,t){var n=o.properties.hasOwnProperty(t)?o.properties[t]:null;if(n){var i=n.mutationMethod;if(i)i(e,void 0);else if(n.mustUseProperty){var r=n.propertyName;n.hasBooleanValue?e[r]=!1:e[r]=""}else e.removeAttribute(n.attributeName)}else o.isCustomAttribute(t)&&e.removeAttribute(t)}};t.exports=c},{10:10,131:131,161:161,40:40,66:66}],12:[function(e,t,n){"use strict";var i=e(132),r=e(8),o=e(140),a=e(145),s=e(146),l=(e(154),{dangerouslyReplaceNodeWithMarkup:function(e,t){if(o.canUseDOM?void 0:i("56"),t?void 0:i("57"),"HTML"===e.nodeName?i("58"):void 0,"string"==typeof t){var n=a(t,s)[0];e.parentNode.replaceChild(n,e)}else r.replaceChildWithTree(e,t)}});t.exports=l},{132:132,140:140,145:145,146:146,154:154,8:8}],13:[function(e,t,n){"use strict";var i=e(158),r=[i({ResponderEventPlugin:null}),i({SimpleEventPlugin:null}),i({TapEventPlugin:null}),i({EnterLeaveEventPlugin:null}),i({ChangeEventPlugin:null}),i({SelectEventPlugin:null}),i({BeforeInputEventPlugin:null})];t.exports=r},{158:158}],14:[function(e,t,n){"use strict";var i={onClick:!0,onDoubleClick:!0,onMouseDown:!0,onMouseMove:!0,onMouseUp:!0,onClickCapture:!0,onDoubleClickCapture:!0,onMouseDownCapture:!0,onMouseMoveCapture:!0,onMouseUpCapture:!0},r={getHostProps:function(e,t){if(!t.disabled)return t;var n={};for(var r in t)!i[r]&&t.hasOwnProperty(r)&&(n[r]=t[r]);return n}};t.exports=r},{}],15:[function(e,t,n){"use strict";var i=e(16),r=e(20),o=e(40),a=e(101),s=e(158),l=i.topLevelTypes,u={mouseEnter:{registrationName:s({onMouseEnter:null}),dependencies:[l.topMouseOut,l.topMouseOver]},mouseLeave:{registrationName:s({onMouseLeave:null}),dependencies:[l.topMouseOut,l.topMouseOver]}},c={eventTypes:u,extractEvents:function(e,t,n,i){if(e===l.topMouseOver&&(n.relatedTarget||n.fromElement))return null;if(e!==l.topMouseOut&&e!==l.topMouseOver)return null;var s;if(i.window===i)s=i;else{var c=i.ownerDocument;s=c?c.defaultView||c.parentWindow:window}var d,p;if(e===l.topMouseOut){d=t;var f=n.relatedTarget||n.toElement;p=f?o.getClosestInstanceFromNode(f):null}else d=null,p=t;if(d===p)return null;var h=null==d?s:o.getNodeFromInstance(d),m=null==p?s:o.getNodeFromInstance(p),v=a.getPooled(u.mouseLeave,d,n,i);v.type="mouseleave",v.target=h,v.relatedTarget=m;var g=a.getPooled(u.mouseEnter,p,n,i);return g.type="mouseenter",g.target=m,g.relatedTarget=h,r.accumulateEnterLeaveDispatches(v,g,d,p),[v,g]}};t.exports=c},{101:101,158:158,16:16,20:20,40:40}],16:[function(e,t,n){"use strict";var i=e(157),r=i({bubbled:null,captured:null}),o=i({topAbort:null,topAnimationEnd:null,topAnimationIteration:null,topAnimationStart:null,topBlur:null,topCanPlay:null,topCanPlayThrough:null,topChange:null,topClick:null,topCompositionEnd:null,topCompositionStart:null,topCompositionUpdate:null,topContextMenu:null,topCopy:null,topCut:null,topDoubleClick:null,topDrag:null,topDragEnd:null,topDragEnter:null,topDragExit:null,topDragLeave:null,topDragOver:null,topDragStart:null,topDrop:null,topDurationChange:null,topEmptied:null,topEncrypted:null,topEnded:null,topError:null,topFocus:null,topInput:null,topInvalid:null,topKeyDown:null,topKeyPress:null,topKeyUp:null,topLoad:null,topLoadedData:null,topLoadedMetadata:null,topLoadStart:null,topMouseDown:null,topMouseMove:null,topMouseOut:null,topMouseOver:null,topMouseUp:null,topPaste:null,topPause:null,topPlay:null,topPlaying:null,topProgress:null,topRateChange:null,topReset:null,topScroll:null,topSeeked:null,topSeeking:null,topSelectionChange:null,topStalled:null,topSubmit:null,topSuspend:null,topTextInput:null,topTimeUpdate:null,topTouchCancel:null,topTouchEnd:null,topTouchMove:null,topTouchStart:null,topTransitionEnd:null,topVolumeChange:null,topWaiting:null,topWheel:null}),a={topLevelTypes:o,PropagationPhases:r};t.exports=a},{157:157}],17:[function(e,t,n){"use strict";var i=e(132),r=e(18),o=e(19),a=e(58),s=e(108),l=e(117),u=(e(154),{}),c=null,d=function(e,t){e&&(o.executeDispatchesInOrder(e,t),e.isPersistent()||e.constructor.release(e))},p=function(e){return d(e,!0)},f=function(e){return d(e,!1)},h=function(e){return"."+e._rootNodeID},m={injection:{injectEventPluginOrder:r.injectEventPluginOrder,injectEventPluginsByName:r.injectEventPluginsByName},putListener:function(e,t,n){"function"!=typeof n?i("94",t,typeof n):void 0;var o=h(e),a=u[t]||(u[t]={});a[o]=n;var s=r.registrationNameModules[t];s&&s.didPutListener&&s.didPutListener(e,t,n)},getListener:function(e,t){var n=u[t],i=h(e);return n&&n[i]},deleteListener:function(e,t){var n=r.registrationNameModules[t];n&&n.willDeleteListener&&n.willDeleteListener(e,t);var i=u[t];if(i){var o=h(e);delete i[o]}},deleteAllListeners:function(e){var t=h(e);for(var n in u)if(u.hasOwnProperty(n)&&u[n][t]){var i=r.registrationNameModules[n];i&&i.willDeleteListener&&i.willDeleteListener(e,n),delete u[n][t]}},extractEvents:function(e,t,n,i){for(var o,a=r.plugins,l=0;l<a.length;l++){var u=a[l];if(u){var c=u.extractEvents(e,t,n,i);c&&(o=s(o,c))}}return o},enqueueEvents:function(e){e&&(c=s(c,e))},processEventQueue:function(e){var t=c;c=null,e?l(t,p):l(t,f),c?i("95"):void 0,a.rethrowCaughtError()},__purge:function(){u={}},__getListenerBank:function(){return u}};t.exports=m},{108:108,117:117,132:132,154:154,18:18,19:19,58:58}],18:[function(e,t,n){"use strict";function i(){if(s)for(var e in l){var t=l[e],n=s.indexOf(e);if(n>-1?void 0:a("96",e),!u.plugins[n]){t.extractEvents?void 0:a("97",e),u.plugins[n]=t;var i=t.eventTypes;for(var o in i)r(i[o],t,o)?void 0:a("98",o,e)}}}function r(e,t,n){u.eventNameDispatchConfigs.hasOwnProperty(n)?a("99",n):void 0,u.eventNameDispatchConfigs[n]=e;var i=e.phasedRegistrationNames;if(i){for(var r in i)if(i.hasOwnProperty(r)){var s=i[r];o(s,t,n)}return!0}return!!e.registrationName&&(o(e.registrationName,t,n),!0)}function o(e,t,n){u.registrationNameModules[e]?a("100",e):void 0,u.registrationNameModules[e]=t,u.registrationNameDependencies[e]=t.eventTypes[n].dependencies}var a=e(132),s=(e(154),null),l={},u={plugins:[],eventNameDispatchConfigs:{},registrationNameModules:{},registrationNameDependencies:{},possibleRegistrationNames:null,injectEventPluginOrder:function(e){s?a("101"):void 0,s=Array.prototype.slice.call(e),i()},injectEventPluginsByName:function(e){var t=!1;for(var n in e)if(e.hasOwnProperty(n)){var r=e[n];l.hasOwnProperty(n)&&l[n]===r||(l[n]?a("102",n):void 0,l[n]=r,t=!0)}t&&i()},getPluginModuleForEvent:function(e){var t=e.dispatchConfig;if(t.registrationName)return u.registrationNameModules[t.registrationName]||null;for(var n in t.phasedRegistrationNames)if(t.phasedRegistrationNames.hasOwnProperty(n)){var i=u.registrationNameModules[t.phasedRegistrationNames[n]];if(i)return i}return null},_resetEventPlugins:function(){s=null;for(var e in l)l.hasOwnProperty(e)&&delete l[e];u.plugins.length=0;var t=u.eventNameDispatchConfigs;for(var n in t)t.hasOwnProperty(n)&&delete t[n];var i=u.registrationNameModules;for(var r in i)i.hasOwnProperty(r)&&delete i[r]}};t.exports=u},{132:132,154:154}],19:[function(e,t,n){"use strict";function i(e){return e===b.topMouseUp||e===b.topTouchEnd||e===b.topTouchCancel}function r(e){return e===b.topMouseMove||e===b.topTouchMove}function o(e){return e===b.topMouseDown||e===b.topTouchStart}function a(e,t,n,i){var r=e.type||"unknown-event";e.currentTarget=y.getNodeFromInstance(i),t?v.invokeGuardedCallbackWithCatch(r,n,e):v.invokeGuardedCallback(r,n,e),e.currentTarget=null}function s(e,t){var n=e._dispatchListeners,i=e._dispatchInstances;if(Array.isArray(n))for(var r=0;r<n.length&&!e.isPropagationStopped();r++)a(e,t,n[r],i[r]);else n&&a(e,t,n,i);e._dispatchListeners=null,e._dispatchInstances=null}function l(e){var t=e._dispatchListeners,n=e._dispatchInstances;if(Array.isArray(t)){for(var i=0;i<t.length&&!e.isPropagationStopped();i++)if(t[i](e,n[i]))return n[i]}else if(t&&t(e,n))return n;return null}function u(e){var t=l(e);return e._dispatchInstances=null,e._dispatchListeners=null,t}function c(e){var t=e._dispatchListeners,n=e._dispatchInstances;Array.isArray(t)?h("103"):void 0,e.currentTarget=t?y.getNodeFromInstance(n):null;var i=t?t(e):null;return e.currentTarget=null,e._dispatchListeners=null,e._dispatchInstances=null,i}function d(e){return!!e._dispatchListeners}var p,f,h=e(132),m=e(16),v=e(58),g=(e(154),e(161),{injectComponentTree:function(e){p=e},injectTreeTraversal:function(e){f=e}}),b=m.topLevelTypes,y={isEndish:i,isMoveish:r,isStartish:o,executeDirectDispatch:c,executeDispatchesInOrder:s,executeDispatchesInOrderStopAtTrue:u,hasDispatches:d,getInstanceFromNode:function(e){return p.getInstanceFromNode(e)},getNodeFromInstance:function(e){return p.getNodeFromInstance(e)},isAncestor:function(e,t){return f.isAncestor(e,t)},getLowestCommonAncestor:function(e,t){return f.getLowestCommonAncestor(e,t)},getParentInstance:function(e){return f.getParentInstance(e)},traverseTwoPhase:function(e,t,n){return f.traverseTwoPhase(e,t,n)},traverseEnterLeave:function(e,t,n,i,r){return f.traverseEnterLeave(e,t,n,i,r)},injection:g};t.exports=y},{132:132,154:154,16:16,161:161,58:58}],20:[function(e,t,n){"use strict";function i(e,t,n){var i=t.dispatchConfig.phasedRegistrationNames[n];return y(e,i)}function r(e,t,n){var r=t?b.bubbled:b.captured,o=i(e,n,r);o&&(n._dispatchListeners=v(n._dispatchListeners,o),n._dispatchInstances=v(n._dispatchInstances,e))}function o(e){e&&e.dispatchConfig.phasedRegistrationNames&&m.traverseTwoPhase(e._targetInst,r,e)}function a(e){if(e&&e.dispatchConfig.phasedRegistrationNames){var t=e._targetInst,n=t?m.getParentInstance(t):null;m.traverseTwoPhase(n,r,e)}}function s(e,t,n){if(n&&n.dispatchConfig.registrationName){var i=n.dispatchConfig.registrationName,r=y(e,i);r&&(n._dispatchListeners=v(n._dispatchListeners,r),n._dispatchInstances=v(n._dispatchInstances,e))}}function l(e){e&&e.dispatchConfig.registrationName&&s(e._targetInst,null,e)}function u(e){g(e,o)}function c(e){g(e,a)}function d(e,t,n,i){m.traverseEnterLeave(n,i,s,e,t)}function p(e){g(e,l)}var f=e(16),h=e(17),m=e(19),v=e(108),g=e(117),b=(e(161),f.PropagationPhases),y=h.getListener,_={accumulateTwoPhaseDispatches:u,accumulateTwoPhaseDispatchesSkipTarget:c,accumulateDirectDispatches:p,accumulateEnterLeaveDispatches:d};t.exports=_},{108:108,117:117,16:16,161:161,17:17,19:19}],21:[function(e,t,n){"use strict";function i(e){this._root=e,this._startText=this.getText(),this._fallbackText=null}var r=e(162),o=e(25),a=e(125);r(i.prototype,{destructor:function(){this._root=null,this._startText=null,this._fallbackText=null},getText:function(){return"value"in this._root?this._root.value:this._root[a()]},getData:function(){if(this._fallbackText)return this._fallbackText;var e,t,n=this._startText,i=n.length,r=this.getText(),o=r.length;for(e=0;e<i&&n[e]===r[e];e++);var a=i-e;for(t=1;t<=a&&n[i-t]===r[o-t];t++);var s=t>1?1-t:void 0;return this._fallbackText=r.slice(e,s),this._fallbackText}}),o.addPoolingTo(i),t.exports=i},{125:125,162:162,25:25}],22:[function(e,t,n){"use strict";var i=e(10),r=i.injection.MUST_USE_PROPERTY,o=i.injection.HAS_BOOLEAN_VALUE,a=i.injection.HAS_NUMERIC_VALUE,s=i.injection.HAS_POSITIVE_NUMERIC_VALUE,l=i.injection.HAS_OVERLOADED_BOOLEAN_VALUE,u={isCustomAttribute:RegExp.prototype.test.bind(new RegExp("^(data|aria)-["+i.ATTRIBUTE_NAME_CHAR+"]*$")),Properties:{accept:0,acceptCharset:0,accessKey:0,action:0,allowFullScreen:o,allowTransparency:0,alt:0,as:0,async:o,autoComplete:0,autoPlay:o,capture:o,cellPadding:0,cellSpacing:0,charSet:0,challenge:0,checked:r|o,cite:0,classID:0,className:0,cols:s,colSpan:0,content:0,contentEditable:0,contextMenu:0,controls:o,coords:0,crossOrigin:0,data:0,dateTime:0,default:o,defer:o,dir:0,disabled:o,download:l,draggable:0,encType:0,form:0,formAction:0,formEncType:0,formMethod:0,formNoValidate:o,formTarget:0,frameBorder:0,headers:0,height:0,hidden:o,high:0,href:0,hrefLang:0,htmlFor:0,httpEquiv:0,icon:0,id:0,inputMode:0,integrity:0,is:0,keyParams:0,keyType:0,kind:0,label:0,lang:0,list:0,loop:o,low:0,manifest:0,marginHeight:0,marginWidth:0,max:0,maxLength:0,media:0,mediaGroup:0,method:0,min:0,minLength:0,multiple:r|o,muted:r|o,name:0,nonce:0,noValidate:o,open:o,optimum:0,pattern:0,placeholder:0,playsInline:o,poster:0,preload:0,profile:0,radioGroup:0,readOnly:o,referrerPolicy:0,rel:0,required:o,reversed:o,role:0,rows:s,rowSpan:a,sandbox:0,scope:0,scoped:o,scrolling:0,seamless:o,selected:r|o,shape:0,size:s,sizes:0,span:s,spellCheck:0,src:0,srcDoc:0,srcLang:0,srcSet:0,start:a,step:0,style:0,summary:0,tabIndex:0,target:0,title:0,type:0,useMap:0,value:0,width:0,wmode:0,wrap:0,about:0,datatype:0,inlist:0,prefix:0,property:0,resource:0,typeof:0,vocab:0,autoCapitalize:0,autoCorrect:0,autoSave:0,color:0,itemProp:0,itemScope:o,itemType:0,itemID:0,itemRef:0,results:0,security:0,unselectable:0},DOMAttributeNames:{acceptCharset:"accept-charset",className:"class",htmlFor:"for",httpEquiv:"http-equiv"},DOMPropertyNames:{}};t.exports=u},{10:10}],23:[function(e,t,n){"use strict";function i(e){var t=/[=:]/g,n={"=":"=0",":":"=2"},i=(""+e).replace(t,function(e){return n[e]});return"$"+i}function r(e){var t=/(=0|=2)/g,n={"=0":"=","=2":":"},i="."===e[0]&&"$"===e[1]?e.substring(2):e.substring(1);return(""+i).replace(t,function(e){return n[e]})}var o={escape:i,unescape:r};t.exports=o},{}],24:[function(e,t,n){"use strict";function i(e){null!=e.checkedLink&&null!=e.valueLink?s("87"):void 0}function r(e){i(e),null!=e.value||null!=e.onChange?s("88"):void 0}function o(e){i(e),null!=e.checked||null!=e.onChange?s("89"):void 0}function a(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}var s=e(132),l=e(76),u=e(75),c=e(77),d=(e(154),e(161),{button:!0,checkbox:!0,image:!0,hidden:!0,radio:!0,reset:!0,submit:!0}),p={value:function(e,t,n){return!e[t]||d[e.type]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `value` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultValue`. Otherwise, set either `onChange` or `readOnly`.")},checked:function(e,t,n){return!e[t]||e.onChange||e.readOnly||e.disabled?null:new Error("You provided a `checked` prop to a form field without an `onChange` handler. This will render a read-only field. If the field should be mutable use `defaultChecked`. Otherwise, set either `onChange` or `readOnly`.")},onChange:l.func},f={},h={checkPropTypes:function(e,t,n){for(var i in p){if(p.hasOwnProperty(i))var r=p[i](t,i,e,u.prop,null,c);r instanceof Error&&!(r.message in f)&&(f[r.message]=!0,a(n))}},getValue:function(e){return e.valueLink?(r(e),e.valueLink.value):e.value},getChecked:function(e){return e.checkedLink?(o(e),e.checkedLink.value):e.checked},executeOnChange:function(e,t){return e.valueLink?(r(e),e.valueLink.requestChange(t.target.value)):e.checkedLink?(o(e),e.checkedLink.requestChange(t.target.checked)):e.onChange?e.onChange.call(void 0,t):void 0}};t.exports=h},{132:132,154:154,161:161,75:75,76:76,77:77}],25:[function(e,t,n){"use strict";var i=e(132),r=(e(154),function(e){var t=this;if(t.instancePool.length){var n=t.instancePool.pop();return t.call(n,e),n}return new t(e)}),o=function(e,t){var n=this;if(n.instancePool.length){var i=n.instancePool.pop();return n.call(i,e,t),i}return new n(e,t)},a=function(e,t,n){var i=this;if(i.instancePool.length){var r=i.instancePool.pop();return i.call(r,e,t,n),r}return new i(e,t,n)},s=function(e,t,n,i){var r=this;if(r.instancePool.length){var o=r.instancePool.pop();return r.call(o,e,t,n,i),o}return new r(e,t,n,i)},l=function(e,t,n,i,r){var o=this;if(o.instancePool.length){var a=o.instancePool.pop();return o.call(a,e,t,n,i,r),a}return new o(e,t,n,i,r)},u=function(e){var t=this;e instanceof t?void 0:i("25"),e.destructor(),t.instancePool.length<t.poolSize&&t.instancePool.push(e)},c=10,d=r,p=function(e,t){var n=e;return n.instancePool=[],n.getPooled=t||d,n.poolSize||(n.poolSize=c),n.release=u,n},f={addPoolingTo:p,oneArgumentPooler:r,twoArgumentPooler:o,threeArgumentPooler:a,fourArgumentPooler:s,fiveArgumentPooler:l};t.exports=f},{132:132,154:154}],26:[function(e,t,n){"use strict";var i=e(162),r=e(29),o=e(31),a=e(78),s=e(30),l=e(43),u=e(56),c=e(76),d=e(89),p=e(130),f=(e(161),u.createElement),h=u.createFactory,m=u.cloneElement,v=i,g={Children:{map:r.map,forEach:r.forEach,count:r.count,toArray:r.toArray,only:p},Component:o,PureComponent:a,createElement:f,cloneElement:m,isValidElement:u.isValidElement,PropTypes:c,createClass:s.createClass,createFactory:h,createMixin:function(e){return e},DOM:l,version:d,__spread:v};t.exports=g},{130:130,161:161,162:162,29:29,30:30,31:31,43:43,56:56,76:76,78:78,89:89}],27:[function(e,t,n){"use strict";function i(e){return Object.prototype.hasOwnProperty.call(e,v)||(e[v]=h++,p[e[v]]={}),p[e[v]]}var r,o=e(162),a=e(16),s=e(18),l=e(59),u=e(107),c=e(126),d=e(128),p={},f=!1,h=0,m={topAbort:"abort",topAnimationEnd:c("animationend")||"animationend",topAnimationIteration:c("animationiteration")||"animationiteration",topAnimationStart:c("animationstart")||"animationstart",topBlur:"blur",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topChange:"change",topClick:"click",topCompositionEnd:"compositionend",topCompositionStart:"compositionstart",topCompositionUpdate:"compositionupdate",topContextMenu:"contextmenu",topCopy:"copy",topCut:"cut",topDoubleClick:"dblclick",topDrag:"drag",topDragEnd:"dragend",topDragEnter:"dragenter",topDragExit:"dragexit",topDragLeave:"dragleave",topDragOver:"dragover",topDragStart:"dragstart",topDrop:"drop",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topFocus:"focus",topInput:"input",topKeyDown:"keydown",topKeyPress:"keypress",topKeyUp:"keyup",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topMouseDown:"mousedown",topMouseMove:"mousemove",topMouseOut:"mouseout",topMouseOver:"mouseover",topMouseUp:"mouseup",topPaste:"paste",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topScroll:"scroll",topSeeked:"seeked",topSeeking:"seeking",topSelectionChange:"selectionchange",topStalled:"stalled",topSuspend:"suspend",topTextInput:"textInput",topTimeUpdate:"timeupdate",topTouchCancel:"touchcancel",topTouchEnd:"touchend",topTouchMove:"touchmove",topTouchStart:"touchstart",topTransitionEnd:c("transitionend")||"transitionend",topVolumeChange:"volumechange",topWaiting:"waiting",topWheel:"wheel"},v="_reactListenersID"+String(Math.random()).slice(2),g=o({},l,{ReactEventListener:null,injection:{injectReactEventListener:function(e){e.setHandleTopLevel(g.handleTopLevel),g.ReactEventListener=e}},setEnabled:function(e){g.ReactEventListener&&g.ReactEventListener.setEnabled(e)},isEnabled:function(){return!(!g.ReactEventListener||!g.ReactEventListener.isEnabled())},listenTo:function(e,t){for(var n=t,r=i(n),o=s.registrationNameDependencies[e],l=a.topLevelTypes,u=0;u<o.length;u++){var c=o[u];r.hasOwnProperty(c)&&r[c]||(c===l.topWheel?d("wheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"wheel",n):d("mousewheel")?g.ReactEventListener.trapBubbledEvent(l.topWheel,"mousewheel",n):g.ReactEventListener.trapBubbledEvent(l.topWheel,"DOMMouseScroll",n):c===l.topScroll?d("scroll",!0)?g.ReactEventListener.trapCapturedEvent(l.topScroll,"scroll",n):g.ReactEventListener.trapBubbledEvent(l.topScroll,"scroll",g.ReactEventListener.WINDOW_HANDLE):c===l.topFocus||c===l.topBlur?(d("focus",!0)?(g.ReactEventListener.trapCapturedEvent(l.topFocus,"focus",n),g.ReactEventListener.trapCapturedEvent(l.topBlur,"blur",n)):d("focusin")&&(g.ReactEventListener.trapBubbledEvent(l.topFocus,"focusin",n),g.ReactEventListener.trapBubbledEvent(l.topBlur,"focusout",n)),r[l.topBlur]=!0,r[l.topFocus]=!0):m.hasOwnProperty(c)&&g.ReactEventListener.trapBubbledEvent(c,m[c],n),r[c]=!0)}},trapBubbledEvent:function(e,t,n){return g.ReactEventListener.trapBubbledEvent(e,t,n)},trapCapturedEvent:function(e,t,n){return g.ReactEventListener.trapCapturedEvent(e,t,n)},supportsEventPageXY:function(){if(!document.createEvent)return!1;var e=document.createEvent("MouseEvent");return null!=e&&"pageX"in e},ensureScrollValueMonitoring:function(){if(void 0===r&&(r=g.supportsEventPageXY()),!r&&!f){var e=u.refreshScrollValues;g.ReactEventListener.monitorScrollValue(e),f=!0}}});t.exports=g},{107:107,126:126,128:128,16:16,162:162,18:18,59:59}],28:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i){var r=void 0===e[n];null!=t&&r&&(e[n]=o(t,!0))}var r=e(80),o=e(127),a=(e(23),e(136)),s=e(137);e(161),"undefined"!=typeof n&&n.env,1;var l={instantiateChildren:function(e,t,n,r){if(null==e)return null;var o={};return s(e,i,o),o},updateChildren:function(e,t,n,i,s,l,u,c,d){if(t||e){var p,f;for(p in t)if(t.hasOwnProperty(p)){f=e&&e[p];var h=f&&f._currentElement,m=t[p];if(null!=f&&a(h,m))r.receiveComponent(f,m,s,c),t[p]=f;else{f&&(i[p]=r.getHostNode(f),r.unmountComponent(f,!1));var v=o(m,!0);t[p]=v;var g=r.mountComponent(v,s,l,u,c,d);n.push(g)}}for(p in e)!e.hasOwnProperty(p)||t&&t.hasOwnProperty(p)||(f=e[p],i[p]=r.getHostNode(f),r.unmountComponent(f,!1))}},unmountChildren:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];r.unmountComponent(i,t)}}};t.exports=l}).call(this,void 0)},{127:127,136:136,137:137,161:161,23:23,80:80}],29:[function(e,t,n){"use strict";function i(e){return(""+e).replace(_,"$&/")}function r(e,t){this.func=e,this.context=t,this.count=0}function o(e,t,n){var i=e.func,r=e.context;i.call(r,t,e.count++)}function a(e,t,n){if(null==e)return e;var i=r.getPooled(t,n);g(e,o,i),r.release(i)}function s(e,t,n,i){this.result=e,this.keyPrefix=t,this.func=n,this.context=i,this.count=0}function l(e,t,n){var r=e.result,o=e.keyPrefix,a=e.func,s=e.context,l=a.call(s,t,e.count++);Array.isArray(l)?u(l,r,n,v.thatReturnsArgument):null!=l&&(m.isValidElement(l)&&(l=m.cloneAndReplaceKey(l,o+(!l.key||t&&t.key===l.key?"":i(l.key)+"/")+n)),r.push(l))}function u(e,t,n,r,o){var a="";null!=n&&(a=i(n)+"/");var u=s.getPooled(t,a,r,o);g(e,l,u),s.release(u)}function c(e,t,n){if(null==e)return e;var i=[];return u(e,i,null,t,n),i}function d(e,t,n){return null}function p(e,t){return g(e,d,null)}function f(e){var t=[];return u(e,t,null,v.thatReturnsArgument),t}var h=e(25),m=e(56),v=e(146),g=e(137),b=h.twoArgumentPooler,y=h.fourArgumentPooler,_=/\/+/g;r.prototype.destructor=function(){this.func=null,this.context=null,this.count=0},h.addPoolingTo(r,b),s.prototype.destructor=function(){this.result=null,this.keyPrefix=null,this.func=null,this.context=null,this.count=0},h.addPoolingTo(s,y);var w={forEach:a,map:c,mapIntoWithKeyPrefixInternal:u,count:p,toArray:f};t.exports=w},{137:137,146:146,25:25,56:56}],30:[function(e,t,n){"use strict";function i(e,t){var n=C.hasOwnProperty(t)?C[t]:null;k.hasOwnProperty(t)&&(n!==_.OVERRIDE_BASE?d("73",t):void 0),e&&(n!==_.DEFINE_MANY&&n!==_.DEFINE_MANY_MERGED?d("74",t):void 0)}function r(e,t){if(t){"function"==typeof t?d("75"):void 0,h.isValidElement(t)?d("76"):void 0;var n=e.prototype,r=n.__reactAutoBindPairs;t.hasOwnProperty(y)&&E.mixins(e,t.mixins);for(var o in t)if(t.hasOwnProperty(o)&&o!==y){var a=t[o],u=n.hasOwnProperty(o);if(i(u,o),E.hasOwnProperty(o))E[o](e,a);else{var c=C.hasOwnProperty(o),p="function"==typeof a,f=p&&!c&&!u&&t.autobind!==!1;if(f)r.push(o,a),n[o]=a;else if(u){var m=C[o];!c||m!==_.DEFINE_MANY_MERGED&&m!==_.DEFINE_MANY?d("77",m,o):void 0,m===_.DEFINE_MANY_MERGED?n[o]=s(n[o],a):m===_.DEFINE_MANY&&(n[o]=l(n[o],a))}else n[o]=a}}}}function o(e,t){if(t)for(var n in t){var i=t[n];if(t.hasOwnProperty(n)){var r=n in E;r?d("78",n):void 0;var o=n in e;o?d("79",n):void 0,e[n]=i}}}function a(e,t){e&&t&&"object"==typeof e&&"object"==typeof t?void 0:d("80");for(var n in t)t.hasOwnProperty(n)&&(void 0!==e[n]?d("81",n):void 0,e[n]=t[n]);return e}function s(e,t){return function(){var n=e.apply(this,arguments),i=t.apply(this,arguments);if(null==n)return i;if(null==i)return n;var r={};return a(r,n),a(r,i),r}}function l(e,t){return function(){e.apply(this,arguments),t.apply(this,arguments)}}function u(e,t){var n=t.bind(e);return n}function c(e){for(var t=e.__reactAutoBindPairs,n=0;n<t.length;n+=2){var i=t[n],r=t[n+1];e[i]=u(e,r)}}var d=e(132),p=e(162),f=e(31),h=e(56),m=(e(75),e(74),e(72)),v=e(147),g=(e(154),e(157)),b=e(158),y=(e(161),b({mixins:null})),_=g({DEFINE_ONCE:null,DEFINE_MANY:null,OVERRIDE_BASE:null,DEFINE_MANY_MERGED:null}),w=[],C={mixins:_.DEFINE_MANY,statics:_.DEFINE_MANY,propTypes:_.DEFINE_MANY,contextTypes:_.DEFINE_MANY,childContextTypes:_.DEFINE_MANY,getDefaultProps:_.DEFINE_MANY_MERGED,getInitialState:_.DEFINE_MANY_MERGED,getChildContext:_.DEFINE_MANY_MERGED,render:_.DEFINE_ONCE,componentWillMount:_.DEFINE_MANY,componentDidMount:_.DEFINE_MANY,componentWillReceiveProps:_.DEFINE_MANY,shouldComponentUpdate:_.DEFINE_ONCE,componentWillUpdate:_.DEFINE_MANY,
componentDidUpdate:_.DEFINE_MANY,componentWillUnmount:_.DEFINE_MANY,updateComponent:_.OVERRIDE_BASE},E={displayName:function(e,t){e.displayName=t},mixins:function(e,t){if(t)for(var n=0;n<t.length;n++)r(e,t[n])},childContextTypes:function(e,t){e.childContextTypes=p({},e.childContextTypes,t)},contextTypes:function(e,t){e.contextTypes=p({},e.contextTypes,t)},getDefaultProps:function(e,t){e.getDefaultProps?e.getDefaultProps=s(e.getDefaultProps,t):e.getDefaultProps=t},propTypes:function(e,t){e.propTypes=p({},e.propTypes,t)},statics:function(e,t){o(e,t)},autobind:function(){}},k={replaceState:function(e,t){this.updater.enqueueReplaceState(this,e),t&&this.updater.enqueueCallback(this,t,"replaceState")},isMounted:function(){return this.updater.isMounted(this)}},T=function(){};p(T.prototype,f.prototype,k);var x={createClass:function(e){var t=function(e,n,i){this.__reactAutoBindPairs.length&&c(this),this.props=e,this.context=n,this.refs=v,this.updater=i||m,this.state=null;var r=this.getInitialState?this.getInitialState():null;"object"!=typeof r||Array.isArray(r)?d("82",t.displayName||"ReactCompositeComponent"):void 0,this.state=r};t.prototype=new T,t.prototype.constructor=t,t.prototype.__reactAutoBindPairs=[],w.forEach(r.bind(null,t)),r(t,e),t.getDefaultProps&&(t.defaultProps=t.getDefaultProps()),t.prototype.render?void 0:d("83");for(var n in C)t.prototype[n]||(t.prototype[n]=null);return t},injection:{injectMixin:function(e){w.push(e)}}};t.exports=x},{132:132,147:147,154:154,157:157,158:158,161:161,162:162,31:31,56:56,72:72,74:74,75:75}],31:[function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=a,this.updater=n||o}var r=e(132),o=e(72),a=(e(110),e(147));e(154),e(161),i.prototype.isReactComponent={},i.prototype.setState=function(e,t){"object"!=typeof e&&"function"!=typeof e&&null!=e?r("85"):void 0,this.updater.enqueueSetState(this,e),t&&this.updater.enqueueCallback(this,t,"setState")},i.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this),e&&this.updater.enqueueCallback(this,e,"forceUpdate")},t.exports=i},{110:110,132:132,147:147,154:154,161:161,72:72}],32:[function(e,t,n){"use strict";var i=e(7),r=e(45),o={processChildrenUpdates:r.dangerouslyProcessChildrenUpdates,replaceNodeWithMarkup:i.dangerouslyReplaceNodeWithMarkup};t.exports=o},{45:45,7:7}],33:[function(e,t,n){"use strict";var i=e(132),r=(e(154),!1),o={replaceNodeWithMarkup:null,processChildrenUpdates:null,injection:{injectEnvironment:function(e){r?i("104"):void 0,o.replaceNodeWithMarkup=e.replaceNodeWithMarkup,o.processChildrenUpdates=e.processChildrenUpdates,r=!0}}};t.exports=o},{132:132,154:154}],34:[function(e,t,n){"use strict";function i(e){}function r(e,t){}function o(e){return!(!e.prototype||!e.prototype.isReactComponent)}function a(e){return!(!e.prototype||!e.prototype.isPureReactComponent)}var s=e(132),l=e(162),u=e(33),c=e(35),d=e(56),p=e(58),f=e(65),h=(e(66),e(71)),m=(e(75),e(80)),v=e(111),g=e(147),b=(e(154),e(160)),y=e(136),_=(e(161),{ImpureClass:0,PureClass:1,StatelessFunctional:2});i.prototype.render=function(){var e=f.get(this)._currentElement.type,t=e(this.props,this.context,this.updater);return r(e,t),t};var w=1,C={construct:function(e){this._currentElement=e,this._rootNodeID=0,this._compositeType=null,this._instance=null,this._hostParent=null,this._hostContainerInfo=null,this._updateBatchNumber=null,this._pendingElement=null,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._renderedNodeType=null,this._renderedComponent=null,this._context=null,this._mountOrder=0,this._topLevelWrapper=null,this._pendingCallbacks=null,this._calledComponentWillUnmount=!1},mountComponent:function(e,t,n,l){this._context=l,this._mountOrder=w++,this._hostParent=t,this._hostContainerInfo=n;var u,c=this._currentElement.props,p=this._processContext(l),h=this._currentElement.type,m=e.getUpdateQueue(),v=o(h),b=this._constructComponent(v,c,p,m);v||null!=b&&null!=b.render?a(h)?this._compositeType=_.PureClass:this._compositeType=_.ImpureClass:(u=b,r(h,u),null===b||b===!1||d.isValidElement(b)?void 0:s("105",h.displayName||h.name||"Component"),b=new i(h),this._compositeType=_.StatelessFunctional),b.props=c,b.context=p,b.refs=g,b.updater=m,this._instance=b,f.set(b,this);var y=b.state;void 0===y&&(b.state=y=null),"object"!=typeof y||Array.isArray(y)?s("106",this.getName()||"ReactCompositeComponent"):void 0,this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1;var C;return C=b.unstable_handleError?this.performInitialMountWithErrorHandling(u,t,n,e,l):this.performInitialMount(u,t,n,e,l),b.componentDidMount&&e.getReactMountReady().enqueue(b.componentDidMount,b),C},_constructComponent:function(e,t,n,i){return this._constructComponentWithoutOwner(e,t,n,i)},_constructComponentWithoutOwner:function(e,t,n,i){var r=this._currentElement.type;return e?new r(t,n,i):r(t,n,i)},performInitialMountWithErrorHandling:function(e,t,n,i,r){var o,a=i.checkpoint();try{o=this.performInitialMount(e,t,n,i,r)}catch(s){i.rollback(a),this._instance.unstable_handleError(s),this._pendingStateQueue&&(this._instance.state=this._processPendingState(this._instance.props,this._instance.context)),a=i.checkpoint(),this._renderedComponent.unmountComponent(!0),i.rollback(a),o=this.performInitialMount(e,t,n,i,r)}return o},performInitialMount:function(e,t,n,i,r){var o=this._instance,a=0;o.componentWillMount&&(o.componentWillMount(),this._pendingStateQueue&&(o.state=this._processPendingState(o.props,o.context))),void 0===e&&(e=this._renderValidatedComponent());var s=h.getType(e);this._renderedNodeType=s;var l=this._instantiateReactComponent(e,s!==h.EMPTY);this._renderedComponent=l;var u=m.mountComponent(l,i,t,n,this._processChildContext(r),a);return u},getHostNode:function(){return m.getHostNode(this._renderedComponent)},unmountComponent:function(e){if(this._renderedComponent){var t=this._instance;if(t.componentWillUnmount&&!t._calledComponentWillUnmount)if(t._calledComponentWillUnmount=!0,e){var n=this.getName()+".componentWillUnmount()";p.invokeGuardedCallback(n,t.componentWillUnmount.bind(t))}else t.componentWillUnmount();this._renderedComponent&&(m.unmountComponent(this._renderedComponent,e),this._renderedNodeType=null,this._renderedComponent=null,this._instance=null),this._pendingStateQueue=null,this._pendingReplaceState=!1,this._pendingForceUpdate=!1,this._pendingCallbacks=null,this._pendingElement=null,this._context=null,this._rootNodeID=0,this._topLevelWrapper=null,f.remove(t)}},_maskContext:function(e){var t=this._currentElement.type,n=t.contextTypes;if(!n)return g;var i={};for(var r in n)i[r]=e[r];return i},_processContext:function(e){var t=this._maskContext(e);return t},_processChildContext:function(e){var t,n=this._currentElement.type,i=this._instance;if(i.getChildContext&&(t=i.getChildContext()),t){"object"!=typeof n.childContextTypes?s("107",this.getName()||"ReactCompositeComponent"):void 0;for(var r in t)r in n.childContextTypes?void 0:s("108",this.getName()||"ReactCompositeComponent",r);return l({},e,t)}return e},_checkContextTypes:function(e,t,n){v(e,t,n,this.getName(),null,this._debugID)},receiveComponent:function(e,t,n){var i=this._currentElement,r=this._context;this._pendingElement=null,this.updateComponent(t,i,e,r,n)},performUpdateIfNecessary:function(e){null!=this._pendingElement?m.receiveComponent(this,this._pendingElement,e,this._context):null!==this._pendingStateQueue||this._pendingForceUpdate?this.updateComponent(e,this._currentElement,this._currentElement,this._context,this._context):this._updateBatchNumber=null},updateComponent:function(e,t,n,i,r){var o=this._instance;null==o?s("136",this.getName()||"ReactCompositeComponent"):void 0;var a,l=!1;this._context===r?a=o.context:(a=this._processContext(r),l=!0);var u=t.props,c=n.props;t!==n&&(l=!0),l&&o.componentWillReceiveProps&&o.componentWillReceiveProps(c,a);var d=this._processPendingState(c,a),p=!0;this._pendingForceUpdate||(o.shouldComponentUpdate?p=o.shouldComponentUpdate(c,d,a):this._compositeType===_.PureClass&&(p=!b(u,c)||!b(o.state,d))),this._updateBatchNumber=null,p?(this._pendingForceUpdate=!1,this._performComponentUpdate(n,c,d,a,e,r)):(this._currentElement=n,this._context=r,o.props=c,o.state=d,o.context=a)},_processPendingState:function(e,t){var n=this._instance,i=this._pendingStateQueue,r=this._pendingReplaceState;if(this._pendingReplaceState=!1,this._pendingStateQueue=null,!i)return n.state;if(r&&1===i.length)return i[0];for(var o=l({},r?i[0]:n.state),a=r?1:0;a<i.length;a++){var s=i[a];l(o,"function"==typeof s?s.call(n,o,e,t):s)}return o},_performComponentUpdate:function(e,t,n,i,r,o){var a,s,l,u=this._instance,c=Boolean(u.componentDidUpdate);c&&(a=u.props,s=u.state,l=u.context),u.componentWillUpdate&&u.componentWillUpdate(t,n,i),this._currentElement=e,this._context=o,u.props=t,u.state=n,u.context=i,this._updateRenderedComponent(r,o),c&&r.getReactMountReady().enqueue(u.componentDidUpdate.bind(u,a,s,l),u)},_updateRenderedComponent:function(e,t){var n=this._renderedComponent,i=n._currentElement,r=this._renderValidatedComponent(),o=0;if(y(i,r))m.receiveComponent(n,r,e,this._processChildContext(t));else{var a=m.getHostNode(n);m.unmountComponent(n,!1);var s=h.getType(r);this._renderedNodeType=s;var l=this._instantiateReactComponent(r,s!==h.EMPTY);this._renderedComponent=l;var u=m.mountComponent(l,e,this._hostParent,this._hostContainerInfo,this._processChildContext(t),o);this._replaceNodeWithMarkup(a,u,n)}},_replaceNodeWithMarkup:function(e,t,n){u.replaceNodeWithMarkup(e,t,n)},_renderValidatedComponentWithoutOwnerOrContext:function(){var e,t=this._instance;return e=t.render()},_renderValidatedComponent:function(){var e;if(this._compositeType!==_.StatelessFunctional){c.current=this;try{e=this._renderValidatedComponentWithoutOwnerOrContext()}finally{c.current=null}}else e=this._renderValidatedComponentWithoutOwnerOrContext();return null===e||e===!1||d.isValidElement(e)?void 0:s("109",this.getName()||"ReactCompositeComponent"),e},attachRef:function(e,t){var n=this.getPublicInstance();null==n?s("110"):void 0;var i=t.getPublicInstance(),r=n.refs===g?n.refs={}:n.refs;r[e]=i},detachRef:function(e){var t=this.getPublicInstance().refs;delete t[e]},getName:function(){var e=this._currentElement.type,t=this._instance&&this._instance.constructor;return e.displayName||t&&t.displayName||e.name||t&&t.name||null},getPublicInstance:function(){var e=this._instance;return this._compositeType===_.StatelessFunctional?null:e},_instantiateReactComponent:null},E={Mixin:C};t.exports=E},{111:111,132:132,136:136,147:147,154:154,160:160,161:161,162:162,33:33,35:35,56:56,58:58,65:65,66:66,71:71,75:75,80:80}],35:[function(e,t,n){"use strict";var i={current:null};t.exports=i},{}],36:[function(e,t,n){"use strict";var i=e(40),r=e(55),o=e(68),a=e(80),s=e(88),l=e(89),u=e(115),c=e(122),d=e(133);e(161),r.inject();var p={findDOMNode:u,render:o.render,unmountComponentAtNode:o.unmountComponentAtNode,version:l,unstable_batchedUpdates:s.batchedUpdates,unstable_renderSubtreeIntoContainer:d};"undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.inject&&__REACT_DEVTOOLS_GLOBAL_HOOK__.inject({ComponentTree:{getClosestInstanceFromNode:i.getClosestInstanceFromNode,getNodeFromInstance:function(e){return e._renderedComponent&&(e=c(e)),e?i.getNodeFromInstance(e):null}},Mount:o,Reconciler:a}),t.exports=p},{115:115,122:122,133:133,161:161,40:40,55:55,68:68,80:80,88:88,89:89}],37:[function(e,t,n){"use strict";var i=e(14),r={getHostProps:i.getHostProps};t.exports=r},{14:14}],38:[function(e,t,n){"use strict";function i(e){if(e){var t=e._currentElement._owner||null;if(t){var n=t.getName();if(n)return" This DOM node was rendered by `"+n+"`."}}return""}function r(e,t){t&&(X[e._tag]&&(null!=t.children||null!=t.dangerouslySetInnerHTML?m("137",e._tag,e._currentElement._owner?" Check the render method of "+e._currentElement._owner.getName()+".":""):void 0),null!=t.dangerouslySetInnerHTML&&(null!=t.children?m("60"):void 0,"object"==typeof t.dangerouslySetInnerHTML&&V in t.dangerouslySetInnerHTML?void 0:m("61")),null!=t.style&&"object"!=typeof t.style?m("62",i(e)):void 0)}function o(e,t,n,i){if(!(i instanceof L)){var r=e._hostContainerInfo,o=r._node&&r._node.nodeType===q,s=o?r._node:r._ownerDocument;$(t,s),i.getReactMountReady().enqueue(a,{inst:e,registrationName:t,listener:n})}}function a(){var e=this;k.putListener(e.inst,e.registrationName,e.listener)}function s(){var e=this;I.postMountWrapper(e)}function l(){var e=this;N.postMountWrapper(e)}function u(){var e=this;M.postMountWrapper(e)}function c(){var e=this;e._rootNodeID?void 0:m("63");var t=U(e);switch(t?void 0:m("64"),e._tag){case"iframe":case"object":e._wrapperState.listeners=[x.trapBubbledEvent(E.topLevelTypes.topLoad,"load",t)];break;case"video":case"audio":e._wrapperState.listeners=[];for(var n in K)K.hasOwnProperty(n)&&e._wrapperState.listeners.push(x.trapBubbledEvent(E.topLevelTypes[n],K[n],t));break;case"source":e._wrapperState.listeners=[x.trapBubbledEvent(E.topLevelTypes.topError,"error",t)];break;case"img":e._wrapperState.listeners=[x.trapBubbledEvent(E.topLevelTypes.topError,"error",t),x.trapBubbledEvent(E.topLevelTypes.topLoad,"load",t)];break;case"form":e._wrapperState.listeners=[x.trapBubbledEvent(E.topLevelTypes.topReset,"reset",t),x.trapBubbledEvent(E.topLevelTypes.topSubmit,"submit",t)];break;case"input":case"select":case"textarea":e._wrapperState.listeners=[x.trapBubbledEvent(E.topLevelTypes.topInvalid,"invalid",t)]}}function d(){A.postUpdateWrapper(this)}function p(e){ee.call(Z,e)||(J.test(e)?void 0:m("65",e),Z[e]=!0)}function f(e,t){return e.indexOf("-")>=0||null!=t.is}function h(e){var t=e.type;p(t),this._currentElement=e,this._tag=t.toLowerCase(),this._namespaceURI=null,this._renderedChildren=null,this._previousStyle=null,this._previousStyleCopy=null,this._hostNode=null,this._hostParent=null,this._rootNodeID=0,this._domID=0,this._hostContainerInfo=null,this._wrapperState=null,this._topLevelWrapper=null,this._flags=0}var m=e(132),v=e(162),g=e(1),b=e(4),y=e(8),_=e(9),w=e(10),C=e(11),E=e(16),k=e(17),T=e(18),x=e(27),S=e(37),P=e(39),O=e(40),I=e(46),M=e(47),A=e(48),N=e(52),j=(e(66),e(69)),L=e(84),D=(e(146),e(114)),R=(e(154),e(128),e(158)),F=(e(160),e(138),e(161),P),B=k.deleteListener,U=O.getNodeFromInstance,$=x.listenTo,H=T.registrationNameModules,z={string:!0,number:!0},W=R({style:null}),V=R({__html:null}),G={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null},q=11,K={topAbort:"abort",topCanPlay:"canplay",topCanPlayThrough:"canplaythrough",topDurationChange:"durationchange",topEmptied:"emptied",topEncrypted:"encrypted",topEnded:"ended",topError:"error",topLoadedData:"loadeddata",topLoadedMetadata:"loadedmetadata",topLoadStart:"loadstart",topPause:"pause",topPlay:"play",topPlaying:"playing",topProgress:"progress",topRateChange:"ratechange",topSeeked:"seeked",topSeeking:"seeking",topStalled:"stalled",topSuspend:"suspend",topTimeUpdate:"timeupdate",topVolumeChange:"volumechange",topWaiting:"waiting"},Y={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Q={listing:!0,pre:!0,textarea:!0},X=v({menuitem:!0},Y),J=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,Z={},ee={}.hasOwnProperty,te=1;h.displayName="ReactDOMComponent",h.Mixin={mountComponent:function(e,t,n,i){this._rootNodeID=te++,this._domID=n._idCounter++,this._hostParent=t,this._hostContainerInfo=n;var o=this._currentElement.props;switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":this._wrapperState={listeners:null},e.getReactMountReady().enqueue(c,this);break;case"button":o=S.getHostProps(this,o,t);break;case"input":I.mountWrapper(this,o,t),o=I.getHostProps(this,o),e.getReactMountReady().enqueue(c,this);break;case"option":M.mountWrapper(this,o,t),o=M.getHostProps(this,o);break;case"select":A.mountWrapper(this,o,t),o=A.getHostProps(this,o),e.getReactMountReady().enqueue(c,this);break;case"textarea":N.mountWrapper(this,o,t),o=N.getHostProps(this,o),e.getReactMountReady().enqueue(c,this)}r(this,o);var a,d;null!=t?(a=t._namespaceURI,d=t._tag):n._tag&&(a=n._namespaceURI,d=n._tag),(null==a||a===_.svg&&"foreignobject"===d)&&(a=_.html),a===_.html&&("svg"===this._tag?a=_.svg:"math"===this._tag&&(a=_.mathml)),this._namespaceURI=a;var p;if(e.useCreateElement){var f,h=n._ownerDocument;if(a===_.html)if("script"===this._tag){var m=h.createElement("div"),v=this._currentElement.type;m.innerHTML="<"+v+"></"+v+">",f=m.removeChild(m.firstChild)}else f=o.is?h.createElement(this._currentElement.type,o.is):h.createElement(this._currentElement.type);else f=h.createElementNS(a,this._currentElement.type);O.precacheNode(this,f),this._flags|=F.hasCachedChildNodes,this._hostParent||C.setAttributeForRoot(f),this._updateDOMProperties(null,o,e);var b=y(f);this._createInitialChildren(e,o,i,b),p=b}else{var w=this._createOpenTagMarkupAndPutListeners(e,o),E=this._createContentMarkup(e,o,i);p=!E&&Y[this._tag]?w+"/>":w+">"+E+"</"+this._currentElement.type+">"}switch(this._tag){case"input":e.getReactMountReady().enqueue(s,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"textarea":e.getReactMountReady().enqueue(l,this),o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"select":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"button":o.autoFocus&&e.getReactMountReady().enqueue(g.focusDOMComponent,this);break;case"option":e.getReactMountReady().enqueue(u,this)}return p},_createOpenTagMarkupAndPutListeners:function(e,t){var n="<"+this._currentElement.type;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i];if(null!=r)if(H.hasOwnProperty(i))r&&o(this,i,r,e);else{i===W&&(r&&(r=this._previousStyleCopy=v({},t.style)),r=b.createMarkupForStyles(r,this));var a=null;null!=this._tag&&f(this._tag,t)?G.hasOwnProperty(i)||(a=C.createMarkupForCustomAttribute(i,r)):a=C.createMarkupForProperty(i,r),a&&(n+=" "+a)}}return e.renderToStaticMarkup?n:(this._hostParent||(n+=" "+C.createMarkupForRoot()),n+=" "+C.createMarkupForID(this._domID))},_createContentMarkup:function(e,t,n){var i="",r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&(i=r.__html);else{var o=z[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)i=D(o);else if(null!=a){var s=this.mountChildren(a,e,n);i=s.join("")}}return Q[this._tag]&&"\n"===i.charAt(0)?"\n"+i:i},_createInitialChildren:function(e,t,n,i){var r=t.dangerouslySetInnerHTML;if(null!=r)null!=r.__html&&y.queueHTML(i,r.__html);else{var o=z[typeof t.children]?t.children:null,a=null!=o?null:t.children;if(null!=o)y.queueText(i,o);else if(null!=a)for(var s=this.mountChildren(a,e,n),l=0;l<s.length;l++)y.queueChild(i,s[l])}},receiveComponent:function(e,t,n){var i=this._currentElement;this._currentElement=e,this.updateComponent(t,i,e,n)},updateComponent:function(e,t,n,i){var o=t.props,a=this._currentElement.props;switch(this._tag){case"button":o=S.getHostProps(this,o),a=S.getHostProps(this,a);break;case"input":o=I.getHostProps(this,o),a=I.getHostProps(this,a);break;case"option":o=M.getHostProps(this,o),a=M.getHostProps(this,a);break;case"select":o=A.getHostProps(this,o),a=A.getHostProps(this,a);break;case"textarea":o=N.getHostProps(this,o),a=N.getHostProps(this,a)}switch(r(this,a),this._updateDOMProperties(o,a,e),this._updateDOMChildren(o,a,e,i),this._tag){case"input":I.updateWrapper(this);break;case"textarea":N.updateWrapper(this);break;case"select":e.getReactMountReady().enqueue(d,this)}},_updateDOMProperties:function(e,t,n){var i,r,a;for(i in e)if(!t.hasOwnProperty(i)&&e.hasOwnProperty(i)&&null!=e[i])if(i===W){var s=this._previousStyleCopy;for(r in s)s.hasOwnProperty(r)&&(a=a||{},a[r]="");this._previousStyleCopy=null}else H.hasOwnProperty(i)?e[i]&&B(this,i):f(this._tag,e)?G.hasOwnProperty(i)||C.deleteValueForAttribute(U(this),i):(w.properties[i]||w.isCustomAttribute(i))&&C.deleteValueForProperty(U(this),i);for(i in t){var l=t[i],u=i===W?this._previousStyleCopy:null!=e?e[i]:void 0;if(t.hasOwnProperty(i)&&l!==u&&(null!=l||null!=u))if(i===W)if(l?l=this._previousStyleCopy=v({},l):this._previousStyleCopy=null,u){for(r in u)!u.hasOwnProperty(r)||l&&l.hasOwnProperty(r)||(a=a||{},a[r]="");for(r in l)l.hasOwnProperty(r)&&u[r]!==l[r]&&(a=a||{},a[r]=l[r])}else a=l;else if(H.hasOwnProperty(i))l?o(this,i,l,n):u&&B(this,i);else if(f(this._tag,t))G.hasOwnProperty(i)||C.setValueForAttribute(U(this),i,l);else if(w.properties[i]||w.isCustomAttribute(i)){var c=U(this);null!=l?C.setValueForProperty(c,i,l):C.deleteValueForProperty(c,i)}}a&&b.setValueForStyles(U(this),a,this)},_updateDOMChildren:function(e,t,n,i){var r=z[typeof e.children]?e.children:null,o=z[typeof t.children]?t.children:null,a=e.dangerouslySetInnerHTML&&e.dangerouslySetInnerHTML.__html,s=t.dangerouslySetInnerHTML&&t.dangerouslySetInnerHTML.__html,l=null!=r?null:e.children,u=null!=o?null:t.children,c=null!=r||null!=a,d=null!=o||null!=s;null!=l&&null==u?this.updateChildren(null,n,i):c&&!d&&this.updateTextContent(""),null!=o?r!==o&&this.updateTextContent(""+o):null!=s?a!==s&&this.updateMarkup(""+s):null!=u&&this.updateChildren(u,n,i)},getHostNode:function(){return U(this)},unmountComponent:function(e){switch(this._tag){case"audio":case"form":case"iframe":case"img":case"link":case"object":case"source":case"video":var t=this._wrapperState.listeners;if(t)for(var n=0;n<t.length;n++)t[n].remove();break;case"html":case"head":case"body":m("66",this._tag)}this.unmountChildren(e),O.uncacheNode(this),k.deleteAllListeners(this),this._rootNodeID=0,this._domID=0,this._wrapperState=null},getPublicInstance:function(){return U(this)}},v(h.prototype,h.Mixin,j.Mixin),t.exports=h},{1:1,10:10,11:11,114:114,128:128,132:132,138:138,146:146,154:154,158:158,16:16,160:160,161:161,162:162,17:17,18:18,27:27,37:37,39:39,4:4,40:40,46:46,47:47,48:48,52:52,66:66,69:69,8:8,84:84,9:9}],39:[function(e,t,n){"use strict";var i={hasCachedChildNodes:1};t.exports=i},{}],40:[function(e,t,n){"use strict";function i(e){for(var t;t=e._renderedComponent;)e=t;return e}function r(e,t){var n=i(e);n._hostNode=t,t[m]=n}function o(e){var t=e._hostNode;t&&(delete t[m],e._hostNode=null)}function a(e,t){if(!(e._flags&h.hasCachedChildNodes)){var n=e._renderedChildren,o=t.firstChild;e:for(var a in n)if(n.hasOwnProperty(a)){var s=n[a],l=i(s)._domID;if(0!==l){for(;null!==o;o=o.nextSibling)if(1===o.nodeType&&o.getAttribute(f)===String(l)||8===o.nodeType&&o.nodeValue===" react-text: "+l+" "||8===o.nodeType&&o.nodeValue===" react-empty: "+l+" "){r(s,o);continue e}c("32",l)}}e._flags|=h.hasCachedChildNodes}}function s(e){if(e[m])return e[m];for(var t=[];!e[m];){if(t.push(e),!e.parentNode)return null;e=e.parentNode}for(var n,i;e&&(i=e[m]);e=t.pop())n=i,t.length&&a(i,e);return n}function l(e){var t=s(e);return null!=t&&t._hostNode===e?t:null}function u(e){if(void 0===e._hostNode?c("33"):void 0,e._hostNode)return e._hostNode;for(var t=[];!e._hostNode;)t.push(e),e._hostParent?void 0:c("34"),e=e._hostParent;for(;t.length;e=t.pop())a(e,e._hostNode);return e._hostNode}var c=e(132),d=e(10),p=e(39),f=(e(154),d.ID_ATTRIBUTE_NAME),h=p,m="__reactInternalInstance$"+Math.random().toString(36).slice(2),v={getClosestInstanceFromNode:s,getInstanceFromNode:l,getNodeFromInstance:u,precacheChildNodes:a,precacheNode:r,uncacheNode:o};t.exports=v},{10:10,132:132,154:154,39:39}],41:[function(e,t,n){"use strict";function i(e,t){var n={_topLevelWrapper:e,_idCounter:1,_ownerDocument:t?t.nodeType===r?t:t.ownerDocument:null,_node:t,_tag:t?t.nodeName.toLowerCase():null,_namespaceURI:t?t.namespaceURI:null};return n}var r=(e(138),9);t.exports=i},{138:138}],42:[function(e,t,n){"use strict";var i=e(162),r=e(8),o=e(40),a=function(e){this._currentElement=null,this._hostNode=null,this._hostParent=null,this._hostContainerInfo=null,this._domID=0};i(a.prototype,{mountComponent:function(e,t,n,i){var a=n._idCounter++;this._domID=a,this._hostParent=t,this._hostContainerInfo=n;var s=" react-empty: "+this._domID+" ";if(e.useCreateElement){var l=n._ownerDocument,u=l.createComment(s);return o.precacheNode(this,u),r(u)}return e.renderToStaticMarkup?"":"<!--"+s+"-->"},receiveComponent:function(){},getHostNode:function(){return o.getNodeFromInstance(this)},unmountComponent:function(){o.uncacheNode(this)}}),t.exports=a},{162:162,40:40,8:8}],43:[function(e,t,n){"use strict";var i=e(56),r=i.createFactory,o={a:r("a"),abbr:r("abbr"),address:r("address"),area:r("area"),article:r("article"),aside:r("aside"),audio:r("audio"),b:r("b"),base:r("base"),bdi:r("bdi"),bdo:r("bdo"),big:r("big"),blockquote:r("blockquote"),body:r("body"),br:r("br"),button:r("button"),canvas:r("canvas"),caption:r("caption"),cite:r("cite"),code:r("code"),col:r("col"),colgroup:r("colgroup"),data:r("data"),datalist:r("datalist"),dd:r("dd"),del:r("del"),details:r("details"),dfn:r("dfn"),dialog:r("dialog"),div:r("div"),dl:r("dl"),dt:r("dt"),em:r("em"),embed:r("embed"),fieldset:r("fieldset"),figcaption:r("figcaption"),figure:r("figure"),footer:r("footer"),form:r("form"),h1:r("h1"),h2:r("h2"),h3:r("h3"),h4:r("h4"),h5:r("h5"),h6:r("h6"),head:r("head"),header:r("header"),hgroup:r("hgroup"),hr:r("hr"),html:r("html"),i:r("i"),iframe:r("iframe"),img:r("img"),input:r("input"),ins:r("ins"),kbd:r("kbd"),keygen:r("keygen"),label:r("label"),legend:r("legend"),li:r("li"),link:r("link"),main:r("main"),map:r("map"),mark:r("mark"),menu:r("menu"),menuitem:r("menuitem"),meta:r("meta"),meter:r("meter"),nav:r("nav"),noscript:r("noscript"),object:r("object"),ol:r("ol"),optgroup:r("optgroup"),option:r("option"),output:r("output"),p:r("p"),param:r("param"),picture:r("picture"),pre:r("pre"),progress:r("progress"),q:r("q"),rp:r("rp"),rt:r("rt"),ruby:r("ruby"),s:r("s"),samp:r("samp"),script:r("script"),section:r("section"),select:r("select"),small:r("small"),source:r("source"),span:r("span"),strong:r("strong"),style:r("style"),sub:r("sub"),summary:r("summary"),sup:r("sup"),table:r("table"),tbody:r("tbody"),td:r("td"),textarea:r("textarea"),tfoot:r("tfoot"),th:r("th"),thead:r("thead"),time:r("time"),title:r("title"),tr:r("tr"),track:r("track"),u:r("u"),ul:r("ul"),var:r("var"),video:r("video"),wbr:r("wbr"),circle:r("circle"),clipPath:r("clipPath"),defs:r("defs"),ellipse:r("ellipse"),g:r("g"),image:r("image"),line:r("line"),linearGradient:r("linearGradient"),mask:r("mask"),path:r("path"),pattern:r("pattern"),polygon:r("polygon"),polyline:r("polyline"),radialGradient:r("radialGradient"),rect:r("rect"),stop:r("stop"),svg:r("svg"),text:r("text"),tspan:r("tspan")};t.exports=o},{56:56}],44:[function(e,t,n){"use strict";var i={useCreateElement:!0};t.exports=i},{}],45:[function(e,t,n){"use strict";var i=e(7),r=e(40),o={dangerouslyProcessChildrenUpdates:function(e,t){var n=r.getNodeFromInstance(e);i.processUpdates(n,t)}};t.exports=o},{40:40,7:7}],46:[function(e,t,n){"use strict";function i(){this._rootNodeID&&p.updateWrapper(this)}function r(e){var t=this._currentElement.props,n=u.executeOnChange(t,e);d.asap(i,this);var r=t.name;if("radio"===t.type&&null!=r){for(var a=c.getNodeFromInstance(this),s=a;s.parentNode;)s=s.parentNode;for(var l=s.querySelectorAll("input[name="+JSON.stringify(""+r)+'][type="radio"]'),p=0;p<l.length;p++){var f=l[p];if(f!==a&&f.form===a.form){var h=c.getInstanceFromNode(f);h?void 0:o("90"),d.asap(i,h)}}}return n}var o=e(132),a=e(162),s=e(14),l=e(11),u=e(24),c=e(40),d=e(88),p=(e(154),e(161),{getHostProps:function(e,t){var n=u.getValue(t),i=u.getChecked(t),r=a({type:void 0,step:void 0,min:void 0,max:void 0},s.getHostProps(e,t),{defaultChecked:void 0,defaultValue:void 0,value:null!=n?n:e._wrapperState.initialValue,checked:null!=i?i:e._wrapperState.initialChecked,onChange:e._wrapperState.onChange});return r},mountWrapper:function(e,t){var n=t.defaultValue;e._wrapperState={initialChecked:null!=t.checked?t.checked:t.defaultChecked,initialValue:null!=t.value?t.value:n,listeners:null,onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=t.checked;null!=n&&l.setValueForProperty(c.getNodeFromInstance(e),"checked",n||!1);var i=c.getNodeFromInstance(e),r=u.getValue(t);if(null!=r){var o=""+r;o!==i.value&&(i.value=o)}else null==t.value&&null!=t.defaultValue&&(i.defaultValue=""+t.defaultValue),null==t.checked&&null!=t.defaultChecked&&(i.defaultChecked=!!t.defaultChecked)},postMountWrapper:function(e){var t=e._currentElement.props,n=c.getNodeFromInstance(e);switch(t.type){case"submit":case"reset":break;case"color":case"date":case"datetime":case"datetime-local":case"month":case"time":case"week":n.value="",n.value=n.defaultValue;break;default:n.value=n.value}var i=n.name;""!==i&&(n.name=""),n.defaultChecked=!n.defaultChecked,n.defaultChecked=!n.defaultChecked,""!==i&&(n.name=i)}});t.exports=p},{11:11,132:132,14:14,154:154,161:161,162:162,24:24,40:40,88:88}],47:[function(e,t,n){"use strict";function i(e){var t="";return o.forEach(e,function(e){null!=e&&("string"==typeof e||"number"==typeof e?t+=e:l||(l=!0))}),t}var r=e(162),o=e(29),a=e(40),s=e(48),l=(e(161),!1),u={mountWrapper:function(e,t,n){var r=null;if(null!=n){var o=n;"optgroup"===o._tag&&(o=o._hostParent),null!=o&&"select"===o._tag&&(r=s.getSelectValueContext(o))}var a=null;if(null!=r){var l;if(l=null!=t.value?t.value+"":i(t.children),a=!1,Array.isArray(r)){for(var u=0;u<r.length;u++)if(""+r[u]===l){a=!0;break}}else a=""+r===l}e._wrapperState={selected:a}},postMountWrapper:function(e){var t=e._currentElement.props;if(null!=t.value){var n=a.getNodeFromInstance(e);n.setAttribute("value",t.value)}},getHostProps:function(e,t){var n=r({selected:void 0,children:void 0},t);null!=e._wrapperState.selected&&(n.selected=e._wrapperState.selected);var o=i(t.children);return o&&(n.children=o),n}};t.exports=u},{161:161,162:162,29:29,40:40,48:48}],48:[function(e,t,n){"use strict";function i(){if(this._rootNodeID&&this._wrapperState.pendingUpdate){this._wrapperState.pendingUpdate=!1;var e=this._currentElement.props,t=l.getValue(e);null!=t&&r(this,Boolean(e.multiple),t)}}function r(e,t,n){var i,r,o=u.getNodeFromInstance(e).options;if(t){for(i={},r=0;r<n.length;r++)i[""+n[r]]=!0;for(r=0;r<o.length;r++){var a=i.hasOwnProperty(o[r].value);o[r].selected!==a&&(o[r].selected=a)}}else{for(i=""+n,r=0;r<o.length;r++)if(o[r].value===i)return void(o[r].selected=!0);o.length&&(o[0].selected=!0)}}function o(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return this._rootNodeID&&(this._wrapperState.pendingUpdate=!0),c.asap(i,this),n}var a=e(162),s=e(14),l=e(24),u=e(40),c=e(88),d=(e(161),!1),p={getHostProps:function(e,t){return a({},s.getHostProps(e,t),{onChange:e._wrapperState.onChange,value:void 0})},mountWrapper:function(e,t){var n=l.getValue(t);e._wrapperState={pendingUpdate:!1,initialValue:null!=n?n:t.defaultValue,listeners:null,onChange:o.bind(e),wasMultiple:Boolean(t.multiple)},void 0===t.value||void 0===t.defaultValue||d||(d=!0)},getSelectValueContext:function(e){return e._wrapperState.initialValue},postUpdateWrapper:function(e){var t=e._currentElement.props;e._wrapperState.initialValue=void 0;var n=e._wrapperState.wasMultiple;e._wrapperState.wasMultiple=Boolean(t.multiple);var i=l.getValue(t);null!=i?(e._wrapperState.pendingUpdate=!1,r(e,Boolean(t.multiple),i)):n!==Boolean(t.multiple)&&(null!=t.defaultValue?r(e,Boolean(t.multiple),t.defaultValue):r(e,Boolean(t.multiple),t.multiple?[]:""))}};t.exports=p},{14:14,161:161,162:162,24:24,40:40,88:88}],49:[function(e,t,n){"use strict";function i(e,t,n,i){return e===n&&t===i}function r(e){var t=document.selection,n=t.createRange(),i=n.text.length,r=n.duplicate();r.moveToElementText(e),r.setEndPoint("EndToStart",n);var o=r.text.length,a=o+i;return{start:o,end:a}}function o(e){var t=window.getSelection&&window.getSelection();if(!t||0===t.rangeCount)return null;var n=t.anchorNode,r=t.anchorOffset,o=t.focusNode,a=t.focusOffset,s=t.getRangeAt(0);try{s.startContainer.nodeType,s.endContainer.nodeType}catch(e){return null}var l=i(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),u=l?0:s.toString().length,c=s.cloneRange();
c.selectNodeContents(e),c.setEnd(s.startContainer,s.startOffset);var d=i(c.startContainer,c.startOffset,c.endContainer,c.endOffset),p=d?0:c.toString().length,f=p+u,h=document.createRange();h.setStart(n,r),h.setEnd(o,a);var m=h.collapsed;return{start:m?f:p,end:m?p:f}}function a(e,t){var n,i,r=document.selection.createRange().duplicate();void 0===t.end?(n=t.start,i=n):t.start>t.end?(n=t.end,i=t.start):(n=t.start,i=t.end),r.moveToElementText(e),r.moveStart("character",n),r.setEndPoint("EndToStart",r),r.moveEnd("character",i-n),r.select()}function s(e,t){if(window.getSelection){var n=window.getSelection(),i=e[c()].length,r=Math.min(t.start,i),o=void 0===t.end?r:Math.min(t.end,i);if(!n.extend&&r>o){var a=o;o=r,r=a}var s=u(e,r),l=u(e,o);if(s&&l){var d=document.createRange();d.setStart(s.node,s.offset),n.removeAllRanges(),r>o?(n.addRange(d),n.extend(l.node,l.offset)):(d.setEnd(l.node,l.offset),n.addRange(d))}}}var l=e(140),u=e(124),c=e(125),d=l.canUseDOM&&"selection"in document&&!("getSelection"in window),p={getOffsets:d?r:o,setOffsets:d?a:s};t.exports=p},{124:124,125:125,140:140}],50:[function(e,t,n){"use strict";var i=e(55),r=e(83),o=e(89);i.inject();var a={renderToString:r.renderToString,renderToStaticMarkup:r.renderToStaticMarkup,version:o};t.exports=a},{55:55,83:83,89:89}],51:[function(e,t,n){"use strict";var i=e(132),r=e(162),o=e(7),a=e(8),s=e(40),l=e(114),u=(e(154),e(138),function(e){this._currentElement=e,this._stringText=""+e,this._hostNode=null,this._hostParent=null,this._domID=0,this._mountIndex=0,this._closingComment=null,this._commentNodes=null});r(u.prototype,{mountComponent:function(e,t,n,i){var r=n._idCounter++,o=" react-text: "+r+" ",u=" /react-text ";if(this._domID=r,this._hostParent=t,e.useCreateElement){var c=n._ownerDocument,d=c.createComment(o),p=c.createComment(u),f=a(c.createDocumentFragment());return a.queueChild(f,a(d)),this._stringText&&a.queueChild(f,a(c.createTextNode(this._stringText))),a.queueChild(f,a(p)),s.precacheNode(this,d),this._closingComment=p,f}var h=l(this._stringText);return e.renderToStaticMarkup?h:"<!--"+o+"-->"+h+"<!--"+u+"-->"},receiveComponent:function(e,t){if(e!==this._currentElement){this._currentElement=e;var n=""+e;if(n!==this._stringText){this._stringText=n;var i=this.getHostNode();o.replaceDelimitedText(i[0],i[1],n)}}},getHostNode:function(){var e=this._commentNodes;if(e)return e;if(!this._closingComment)for(var t=s.getNodeFromInstance(this),n=t.nextSibling;;){if(null==n?i("67",this._domID):void 0,8===n.nodeType&&" /react-text "===n.nodeValue){this._closingComment=n;break}n=n.nextSibling}return e=[this._hostNode,this._closingComment],this._commentNodes=e,e},unmountComponent:function(){this._closingComment=null,this._commentNodes=null,s.uncacheNode(this)}}),t.exports=u},{114:114,132:132,138:138,154:154,162:162,40:40,7:7,8:8}],52:[function(e,t,n){"use strict";function i(){this._rootNodeID&&d.updateWrapper(this)}function r(e){var t=this._currentElement.props,n=l.executeOnChange(t,e);return c.asap(i,this),n}var o=e(132),a=e(162),s=e(14),l=e(24),u=e(40),c=e(88),d=(e(154),e(161),{getHostProps:function(e,t){null!=t.dangerouslySetInnerHTML?o("91"):void 0;var n=a({},s.getHostProps(e,t),{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue,onChange:e._wrapperState.onChange});return n},mountWrapper:function(e,t){var n=l.getValue(t),i=n;if(null==n){var a=t.defaultValue,s=t.children;null!=s&&(null!=a?o("92"):void 0,Array.isArray(s)&&(s.length<=1?void 0:o("93"),s=s[0]),a=""+s),null==a&&(a=""),i=a}e._wrapperState={initialValue:""+i,listeners:null,onChange:r.bind(e)}},updateWrapper:function(e){var t=e._currentElement.props,n=u.getNodeFromInstance(e),i=l.getValue(t);if(null!=i){var r=""+i;r!==n.value&&(n.value=r),null==t.defaultValue&&(n.defaultValue=r)}null!=t.defaultValue&&(n.defaultValue=t.defaultValue)},postMountWrapper:function(e){var t=u.getNodeFromInstance(e);t.value=t.textContent}});t.exports=d},{132:132,14:14,154:154,161:161,162:162,24:24,40:40,88:88}],53:[function(e,t,n){"use strict";function i(e,t){"_hostNode"in e?void 0:l("33"),"_hostNode"in t?void 0:l("33");for(var n=0,i=e;i;i=i._hostParent)n++;for(var r=0,o=t;o;o=o._hostParent)r++;for(;n-r>0;)e=e._hostParent,n--;for(;r-n>0;)t=t._hostParent,r--;for(var a=n;a--;){if(e===t)return e;e=e._hostParent,t=t._hostParent}return null}function r(e,t){"_hostNode"in e?void 0:l("35"),"_hostNode"in t?void 0:l("35");for(;t;){if(t===e)return!0;t=t._hostParent}return!1}function o(e){return"_hostNode"in e?void 0:l("36"),e._hostParent}function a(e,t,n){for(var i=[];e;)i.push(e),e=e._hostParent;var r;for(r=i.length;r-- >0;)t(i[r],!1,n);for(r=0;r<i.length;r++)t(i[r],!0,n)}function s(e,t,n,r,o){for(var a=e&&t?i(e,t):null,s=[];e&&e!==a;)s.push(e),e=e._hostParent;for(var l=[];t&&t!==a;)l.push(t),t=t._hostParent;var u;for(u=0;u<s.length;u++)n(s[u],!0,r);for(u=l.length;u-- >0;)n(l[u],!1,o)}var l=e(132);e(154),t.exports={isAncestor:r,getLowestCommonAncestor:i,getParentInstance:o,traverseTwoPhase:a,traverseEnterLeave:s}},{132:132,154:154}],54:[function(e,t,n){"use strict";function i(){this.reinitializeTransaction()}var r=e(162),o=e(88),a=e(106),s=e(146),l={initialize:s,close:function(){p.isBatchingUpdates=!1}},u={initialize:s,close:o.flushBatchedUpdates.bind(o)},c=[u,l];r(i.prototype,a.Mixin,{getTransactionWrappers:function(){return c}});var d=new i,p={isBatchingUpdates:!1,batchedUpdates:function(e,t,n,i,r,o){var a=p.isBatchingUpdates;p.isBatchingUpdates=!0,a?e(t,n,i,r,o):d.perform(e,null,t,n,i,r,o)}};t.exports=p},{106:106,146:146,162:162,88:88}],55:[function(e,t,n){"use strict";function i(){C||(C=!0,g.EventEmitter.injectReactEventListener(v),g.EventPluginHub.injectEventPluginOrder(a),g.EventPluginUtils.injectComponentTree(d),g.EventPluginUtils.injectTreeTraversal(f),g.EventPluginHub.injectEventPluginsByName({SimpleEventPlugin:w,EnterLeaveEventPlugin:s,ChangeEventPlugin:o,SelectEventPlugin:_,BeforeInputEventPlugin:r}),g.HostComponent.injectGenericComponentClass(c),g.HostComponent.injectTextComponentClass(h),g.DOMProperty.injectDOMPropertyConfig(l),g.DOMProperty.injectDOMPropertyConfig(y),g.EmptyComponent.injectEmptyComponentFactory(function(e){return new p(e)}),g.Updates.injectReconcileTransaction(b),g.Updates.injectBatchingStrategy(m),g.Component.injectEnvironment(u))}var r=e(2),o=e(6),a=e(13),s=e(15),l=e(22),u=e(32),c=e(38),d=e(40),p=e(42),f=e(53),h=e(51),m=e(54),v=e(60),g=e(63),b=e(79),y=e(90),_=e(91),w=e(92),C=!1;t.exports={inject:i}},{13:13,15:15,2:2,22:22,32:32,38:38,40:40,42:42,51:51,53:53,54:54,6:6,60:60,63:63,79:79,90:90,91:91,92:92}],56:[function(e,t,n){"use strict";function i(e){return void 0!==e.ref}function r(e){return void 0!==e.key}var o=e(162),a=e(35),s=(e(161),e(110),Object.prototype.hasOwnProperty),l="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,u={key:!0,ref:!0,__self:!0,__source:!0},c=function(e,t,n,i,r,o,a){var s={$$typeof:l,type:e,key:t,ref:n,props:a,_owner:o};return s};c.createElement=function(e,t,n){var o,l={},d=null,p=null,f=null,h=null;if(null!=t){i(t)&&(p=t.ref),r(t)&&(d=""+t.key),f=void 0===t.__self?null:t.__self,h=void 0===t.__source?null:t.__source;for(o in t)s.call(t,o)&&!u.hasOwnProperty(o)&&(l[o]=t[o])}var m=arguments.length-2;if(1===m)l.children=n;else if(m>1){for(var v=Array(m),g=0;g<m;g++)v[g]=arguments[g+2];l.children=v}if(e&&e.defaultProps){var b=e.defaultProps;for(o in b)void 0===l[o]&&(l[o]=b[o])}return c(e,d,p,f,h,a.current,l)},c.createFactory=function(e){var t=c.createElement.bind(null,e);return t.type=e,t},c.cloneAndReplaceKey=function(e,t){var n=c(e.type,t,e.ref,e._self,e._source,e._owner,e.props);return n},c.cloneElement=function(e,t,n){var l,d=o({},e.props),p=e.key,f=e.ref,h=e._self,m=e._source,v=e._owner;if(null!=t){i(t)&&(f=t.ref,v=a.current),r(t)&&(p=""+t.key);var g;e.type&&e.type.defaultProps&&(g=e.type.defaultProps);for(l in t)s.call(t,l)&&!u.hasOwnProperty(l)&&(void 0===t[l]&&void 0!==g?d[l]=g[l]:d[l]=t[l])}var b=arguments.length-2;if(1===b)d.children=n;else if(b>1){for(var y=Array(b),_=0;_<b;_++)y[_]=arguments[_+2];d.children=y}return c(e.type,p,f,h,m,v,d)},c.isValidElement=function(e){return"object"==typeof e&&null!==e&&e.$$typeof===l},c.REACT_ELEMENT_TYPE=l,t.exports=c},{110:110,161:161,162:162,35:35}],57:[function(e,t,n){"use strict";var i,r={injectEmptyComponentFactory:function(e){i=e}},o={create:function(e){return i(e)}};o.injection=r,t.exports=o},{}],58:[function(e,t,n){"use strict";function i(e,t,n,i){try{return t(n,i)}catch(e){return void(null===r&&(r=e))}}var r=null,o={invokeGuardedCallback:i,invokeGuardedCallbackWithCatch:i,rethrowCaughtError:function(){if(r){var e=r;throw r=null,e}}};t.exports=o},{}],59:[function(e,t,n){"use strict";function i(e){r.enqueueEvents(e),r.processEventQueue(!1)}var r=e(17),o={handleTopLevel:function(e,t,n,o){var a=r.extractEvents(e,t,n,o);i(a)}};t.exports=o},{17:17}],60:[function(e,t,n){"use strict";function i(e){for(;e._hostParent;)e=e._hostParent;var t=d.getNodeFromInstance(e),n=t.parentNode;return d.getClosestInstanceFromNode(n)}function r(e,t){this.topLevelType=e,this.nativeEvent=t,this.ancestors=[]}function o(e){var t=f(e.nativeEvent),n=d.getClosestInstanceFromNode(t),r=n;do e.ancestors.push(r),r=r&&i(r);while(r);for(var o=0;o<e.ancestors.length;o++)n=e.ancestors[o],m._handleTopLevel(e.topLevelType,n,e.nativeEvent,f(e.nativeEvent))}function a(e){var t=h(window);e(t)}var s=e(162),l=e(139),u=e(140),c=e(25),d=e(40),p=e(88),f=e(121),h=e(151);s(r.prototype,{destructor:function(){this.topLevelType=null,this.nativeEvent=null,this.ancestors.length=0}}),c.addPoolingTo(r,c.twoArgumentPooler);var m={_enabled:!0,_handleTopLevel:null,WINDOW_HANDLE:u.canUseDOM?window:null,setHandleTopLevel:function(e){m._handleTopLevel=e},setEnabled:function(e){m._enabled=!!e},isEnabled:function(){return m._enabled},trapBubbledEvent:function(e,t,n){var i=n;return i?l.listen(i,t,m.dispatchEvent.bind(null,e)):null},trapCapturedEvent:function(e,t,n){var i=n;return i?l.capture(i,t,m.dispatchEvent.bind(null,e)):null},monitorScrollValue:function(e){var t=a.bind(null,e);l.listen(window,"scroll",t)},dispatchEvent:function(e,t){if(m._enabled){var n=r.getPooled(e,t);try{p.batchedUpdates(o,n)}finally{r.release(n)}}}};t.exports=m},{121:121,139:139,140:140,151:151,162:162,25:25,40:40,88:88}],61:[function(e,t,n){"use strict";var i={logTopLevelRenders:!1};t.exports=i},{}],62:[function(e,t,n){"use strict";function i(e){return l?void 0:a("111",e.type),new l(e)}function r(e){return new c(e)}function o(e){return e instanceof c}var a=e(132),s=e(162),l=(e(154),null),u={},c=null,d={injectGenericComponentClass:function(e){l=e},injectTextComponentClass:function(e){c=e},injectComponentClasses:function(e){s(u,e)}},p={createInternalComponent:i,createInstanceForText:r,isTextComponent:o,injection:d};t.exports=p},{132:132,154:154,162:162}],63:[function(e,t,n){"use strict";var i=e(10),r=e(17),o=e(19),a=e(33),s=e(30),l=e(57),u=e(27),c=e(62),d=e(88),p={Component:a.injection,Class:s.injection,DOMProperty:i.injection,EmptyComponent:l.injection,EventPluginHub:r.injection,EventPluginUtils:o.injection,EventEmitter:u.injection,HostComponent:c.injection,Updates:d.injection};t.exports=p},{10:10,17:17,19:19,27:27,30:30,33:33,57:57,62:62,88:88}],64:[function(e,t,n){"use strict";function i(e){return o(document.documentElement,e)}var r=e(49),o=e(143),a=e(148),s=e(149),l={hasSelectionCapabilities:function(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&"text"===e.type||"textarea"===t||"true"===e.contentEditable)},getSelectionInformation:function(){var e=s();return{focusedElem:e,selectionRange:l.hasSelectionCapabilities(e)?l.getSelection(e):null}},restoreSelection:function(e){var t=s(),n=e.focusedElem,r=e.selectionRange;t!==n&&i(n)&&(l.hasSelectionCapabilities(n)&&l.setSelection(n,r),a(n))},getSelection:function(e){var t;if("selectionStart"in e)t={start:e.selectionStart,end:e.selectionEnd};else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var n=document.selection.createRange();n.parentElement()===e&&(t={start:-n.moveStart("character",-e.value.length),end:-n.moveEnd("character",-e.value.length)})}else t=r.getOffsets(e);return t||{start:0,end:0}},setSelection:function(e,t){var n=t.start,i=t.end;if(void 0===i&&(i=n),"selectionStart"in e)e.selectionStart=n,e.selectionEnd=Math.min(i,e.value.length);else if(document.selection&&e.nodeName&&"input"===e.nodeName.toLowerCase()){var o=e.createTextRange();o.collapse(!0),o.moveStart("character",n),o.moveEnd("character",i-n),o.select()}else r.setOffsets(e,t)}};t.exports=l},{143:143,148:148,149:149,49:49}],65:[function(e,t,n){"use strict";var i={remove:function(e){e._reactInternalInstance=void 0},get:function(e){return e._reactInternalInstance},has:function(e){return void 0!==e._reactInternalInstance},set:function(e,t){e._reactInternalInstance=t}};t.exports=i},{}],66:[function(e,t,n){"use strict";var i=null;t.exports={debugTool:i}},{}],67:[function(e,t,n){"use strict";var i=e(109),r=/\/?>/,o=/^<\!\-\-/,a={CHECKSUM_ATTR_NAME:"data-react-checksum",addChecksumToMarkup:function(e){var t=i(e);return o.test(e)?e:e.replace(r," "+a.CHECKSUM_ATTR_NAME+'="'+t+'"$&')},canReuseMarkup:function(e,t){var n=t.getAttribute(a.CHECKSUM_ATTR_NAME);n=n&&parseInt(n,10);var r=i(e);return r===n}};t.exports=a},{109:109}],68:[function(e,t,n){"use strict";function i(e,t){for(var n=Math.min(e.length,t.length),i=0;i<n;i++)if(e.charAt(i)!==t.charAt(i))return i;return e.length===t.length?-1:n}function r(e){return e?e.nodeType===j?e.documentElement:e.firstChild:null}function o(e){return e.getAttribute&&e.getAttribute(M)||""}function a(e,t,n,i,r){var o;if(w.logTopLevelRenders){var a=e._currentElement.props,s=a.type;o="React mount: "+("string"==typeof s?s:s.displayName||s.name),console.time(o)}var l=k.mountComponent(e,n,null,b(e,t),r,0);o&&console.timeEnd(o),e._renderedComponent._topLevelWrapper=e,B._mountImageIntoNode(l,t,e,i,n)}function s(e,t,n,i){var r=x.ReactReconcileTransaction.getPooled(!n&&y.useCreateElement);r.perform(a,null,e,t,r,n,i),x.ReactReconcileTransaction.release(r)}function l(e,t,n){for(k.unmountComponent(e,n),t.nodeType===j&&(t=t.documentElement);t.lastChild;)t.removeChild(t.lastChild)}function u(e){var t=r(e);if(t){var n=g.getInstanceFromNode(t);return!(!n||!n._hostParent)}}function c(e){return!(!e||e.nodeType!==N&&e.nodeType!==j&&e.nodeType!==L)}function d(e){var t=r(e),n=t&&g.getInstanceFromNode(t);return n&&!n._hostParent?n:null}function p(e){var t=d(e);return t?t._hostContainerInfo._topLevelWrapper:null}var f=e(132),h=e(8),m=e(10),v=e(27),g=(e(35),e(40)),b=e(41),y=e(44),_=e(56),w=e(61),C=e(65),E=(e(66),e(67)),k=e(80),T=e(87),x=e(88),S=e(147),P=e(127),O=(e(154),e(134)),I=e(136),M=(e(161),m.ID_ATTRIBUTE_NAME),A=m.ROOT_ATTRIBUTE_NAME,N=1,j=9,L=11,D={},R=1,F=function(){this.rootID=R++};F.prototype.isReactComponent={},F.prototype.render=function(){return this.props};var B={TopLevelWrapper:F,_instancesByReactRootID:D,scrollMonitor:function(e,t){t()},_updateRootComponent:function(e,t,n,i,r){return B.scrollMonitor(i,function(){T.enqueueElementInternal(e,t,n),r&&T.enqueueCallbackInternal(e,r)}),e},_renderNewRootComponent:function(e,t,n,i){c(t)?void 0:f("37"),v.ensureScrollValueMonitoring();var r=P(e,!1);x.batchedUpdates(s,r,t,n,i);var o=r._instance.rootID;return D[o]=r,r},renderSubtreeIntoContainer:function(e,t,n,i){return null!=e&&C.has(e)?void 0:f("38"),B._renderSubtreeIntoContainer(e,t,n,i)},_renderSubtreeIntoContainer:function(e,t,n,i){T.validateCallback(i,"ReactDOM.render"),_.isValidElement(t)?void 0:f("39","string"==typeof t?" Instead of passing a string like 'div', pass React.createElement('div') or <div />.":"function"==typeof t?" Instead of passing a class like Foo, pass React.createElement(Foo) or <Foo />.":null!=t&&void 0!==t.props?" This may be caused by unintentionally loading two independent copies of React.":"");var a,s=_(F,null,null,null,null,null,t);if(e){var l=C.get(e);a=l._processChildContext(l._context)}else a=S;var c=p(n);if(c){var d=c._currentElement,h=d.props;if(I(h,t)){var m=c._renderedComponent.getPublicInstance(),v=i&&function(){i.call(m)};return B._updateRootComponent(c,s,a,n,v),m}B.unmountComponentAtNode(n)}var g=r(n),b=g&&!!o(g),y=u(n),w=b&&!c&&!y,E=B._renderNewRootComponent(s,n,w,a)._renderedComponent.getPublicInstance();return i&&i.call(E),E},render:function(e,t,n){return B._renderSubtreeIntoContainer(null,e,t,n)},unmountComponentAtNode:function(e){c(e)?void 0:f("40");var t=p(e);return t?(delete D[t._instance.rootID],x.batchedUpdates(l,t,e,!1),!0):(u(e),1===e.nodeType&&e.hasAttribute(A),!1)},_mountImageIntoNode:function(e,t,n,o,a){if(c(t)?void 0:f("41"),o){var s=r(t);if(E.canReuseMarkup(e,s))return void g.precacheNode(n,s);var l=s.getAttribute(E.CHECKSUM_ATTR_NAME);s.removeAttribute(E.CHECKSUM_ATTR_NAME);var u=s.outerHTML;s.setAttribute(E.CHECKSUM_ATTR_NAME,l);var d=e,p=i(d,u),m=" (client) "+d.substring(p-20,p+20)+"\n (server) "+u.substring(p-20,p+20);t.nodeType===j?f("42",m):void 0}if(t.nodeType===j?f("43"):void 0,a.useCreateElement){for(;t.lastChild;)t.removeChild(t.lastChild);h.insertTreeBefore(t,e,null)}else O(t,e),g.precacheNode(n,t.firstChild)}};t.exports=B},{10:10,127:127,132:132,134:134,136:136,147:147,154:154,161:161,27:27,35:35,40:40,41:41,44:44,56:56,61:61,65:65,66:66,67:67,8:8,80:80,87:87,88:88}],69:[function(e,t,n){"use strict";function i(e,t,n){return{type:p.INSERT_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:n,afterNode:t}}function r(e,t,n){return{type:p.MOVE_EXISTING,content:null,fromIndex:e._mountIndex,fromNode:f.getHostNode(e),toIndex:n,afterNode:t}}function o(e,t){return{type:p.REMOVE_NODE,content:null,fromIndex:e._mountIndex,fromNode:t,toIndex:null,afterNode:null}}function a(e){return{type:p.SET_MARKUP,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function s(e){return{type:p.TEXT_CONTENT,content:e,fromIndex:null,fromNode:null,toIndex:null,afterNode:null}}function l(e,t){return t&&(e=e||[],e.push(t)),e}function u(e,t){d.processChildrenUpdates(e,t)}var c=e(132),d=e(33),p=(e(65),e(66),e(70)),f=(e(35),e(80)),h=e(28),m=(e(146),e(116)),v=(e(154),{Mixin:{_reconcilerInstantiateChildren:function(e,t,n){return h.instantiateChildren(e,t,n)},_reconcilerUpdateChildren:function(e,t,n,i,r,o){var a,s=0;return a=m(t,s),h.updateChildren(e,a,n,i,r,this,this._hostContainerInfo,o,s),a},mountChildren:function(e,t,n){var i=this._reconcilerInstantiateChildren(e,t,n);this._renderedChildren=i;var r=[],o=0;for(var a in i)if(i.hasOwnProperty(a)){var s=i[a],l=0,u=f.mountComponent(s,t,this,this._hostContainerInfo,n,l);s._mountIndex=o++,r.push(u)}return r},updateTextContent:function(e){var t=this._renderedChildren;h.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var i=[s(e)];u(this,i)},updateMarkup:function(e){var t=this._renderedChildren;h.unmountChildren(t,!1);for(var n in t)t.hasOwnProperty(n)&&c("118");var i=[a(e)];u(this,i)},updateChildren:function(e,t,n){this._updateChildren(e,t,n)},_updateChildren:function(e,t,n){var i=this._renderedChildren,r={},o=[],a=this._reconcilerUpdateChildren(i,e,o,r,t,n);if(a||i){var s,c=null,d=0,p=0,h=0,m=null;for(s in a)if(a.hasOwnProperty(s)){var v=i&&i[s],g=a[s];v===g?(c=l(c,this.moveChild(v,m,d,p)),p=Math.max(v._mountIndex,p),v._mountIndex=d):(v&&(p=Math.max(v._mountIndex,p)),c=l(c,this._mountChildAtIndex(g,o[h],m,d,t,n)),h++),d++,m=f.getHostNode(g)}for(s in r)r.hasOwnProperty(s)&&(c=l(c,this._unmountChild(i[s],r[s])));c&&u(this,c),this._renderedChildren=a}},unmountChildren:function(e){var t=this._renderedChildren;h.unmountChildren(t,e),this._renderedChildren=null},moveChild:function(e,t,n,i){if(e._mountIndex<i)return r(e,t,n)},createChild:function(e,t,n){return i(n,t,e._mountIndex)},removeChild:function(e,t){return o(e,t)},_mountChildAtIndex:function(e,t,n,i,r,o){return e._mountIndex=i,this.createChild(e,n,t)},_unmountChild:function(e,t){var n=this.removeChild(e,t);return e._mountIndex=null,n}}});t.exports=v},{116:116,132:132,146:146,154:154,28:28,33:33,35:35,65:65,66:66,70:70,80:80}],70:[function(e,t,n){"use strict";var i=e(157),r=i({INSERT_MARKUP:null,MOVE_EXISTING:null,REMOVE_NODE:null,SET_MARKUP:null,TEXT_CONTENT:null});t.exports=r},{157:157}],71:[function(e,t,n){"use strict";var i=e(132),r=e(56),o=(e(154),{HOST:0,COMPOSITE:1,EMPTY:2,getType:function(e){return null===e||e===!1?o.EMPTY:r.isValidElement(e)?"function"==typeof e.type?o.COMPOSITE:o.HOST:void i("26",e)}});t.exports=o},{132:132,154:154,56:56}],72:[function(e,t,n){"use strict";function i(e,t){}var r=(e(161),{isMounted:function(e){return!1},enqueueCallback:function(e,t){},enqueueForceUpdate:function(e){i(e,"forceUpdate")},enqueueReplaceState:function(e,t){i(e,"replaceState")},enqueueSetState:function(e,t){i(e,"setState")}});t.exports=r},{161:161}],73:[function(e,t,n){"use strict";var i=e(132),r=(e(154),{isValidOwner:function(e){return!(!e||"function"!=typeof e.attachRef||"function"!=typeof e.detachRef)},addComponentAsRefTo:function(e,t,n){r.isValidOwner(n)?void 0:i("119"),n.attachRef(t,e)},removeComponentAsRefFrom:function(e,t,n){r.isValidOwner(n)?void 0:i("120");var o=n.getPublicInstance();o&&o.refs[t]===e.getPublicInstance()&&n.detachRef(t)}});t.exports=r},{132:132,154:154}],74:[function(e,t,n){"use strict";var i={};t.exports=i},{}],75:[function(e,t,n){"use strict";var i=e(157),r=i({prop:null,context:null,childContext:null});t.exports=r},{157:157}],76:[function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function r(e){this.message=e,this.stack=""}function o(e){function t(t,n,i,o,a,s,l){if(o=o||x,s=s||i,null==n[i]){var u=C[a];return t?new r("Required "+u+" `"+s+"` was not specified in "+("`"+o+"`.")):null}return e(n,i,o,a,s)}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}function a(e){function t(t,n,i,o,a,s){var l=t[n],u=b(l);if(u!==e){var c=C[o],d=y(l);return new r("Invalid "+c+" `"+a+"` of type "+("`"+d+"` supplied to `"+i+"`, expected ")+("`"+e+"`."))}return null}return o(t)}function s(){return o(k.thatReturns(null))}function l(e){function t(t,n,i,o,a){if("function"!=typeof e)return new r("Property `"+a+"` of component `"+i+"` has invalid PropType notation inside arrayOf.");var s=t[n];if(!Array.isArray(s)){var l=C[o],u=b(s);return new r("Invalid "+l+" `"+a+"` of type "+("`"+u+"` supplied to `"+i+"`, expected an array."))}for(var c=0;c<s.length;c++){var d=e(s,c,i,o,a+"["+c+"]",E);if(d instanceof Error)return d}return null}return o(t)}function u(){function e(e,t,n,i,o){var a=e[t];if(!w.isValidElement(a)){var s=C[i],l=b(a);return new r("Invalid "+s+" `"+o+"` of type "+("`"+l+"` supplied to `"+n+"`, expected a single ReactElement."))}return null}return o(e)}function c(e){function t(t,n,i,o,a){if(!(t[n]instanceof e)){var s=C[o],l=e.name||x,u=_(t[n]);return new r("Invalid "+s+" `"+a+"` of type "+("`"+u+"` supplied to `"+i+"`, expected ")+("instance of `"+l+"`."))}return null}return o(t)}function d(e){function t(t,n,o,a,s){for(var l=t[n],u=0;u<e.length;u++)if(i(l,e[u]))return null;var c=C[a],d=JSON.stringify(e);return new r("Invalid "+c+" `"+s+"` of value `"+l+"` "+("supplied to `"+o+"`, expected one of "+d+"."))}return Array.isArray(e)?o(t):k.thatReturnsNull}function p(e){function t(t,n,i,o,a){if("function"!=typeof e)return new r("Property `"+a+"` of component `"+i+"` has invalid PropType notation inside objectOf.");var s=t[n],l=b(s);if("object"!==l){var u=C[o];return new r("Invalid "+u+" `"+a+"` of type "+("`"+l+"` supplied to `"+i+"`, expected an object."))}for(var c in s)if(s.hasOwnProperty(c)){var d=e(s,c,i,o,a+"."+c,E);if(d instanceof Error)return d}return null}return o(t)}function f(e){function t(t,n,i,o,a){for(var s=0;s<e.length;s++){var l=e[s];if(null==l(t,n,i,o,a,E))return null}var u=C[o];return new r("Invalid "+u+" `"+a+"` supplied to "+("`"+i+"`."))}return Array.isArray(e)?o(t):k.thatReturnsNull}function h(){function e(e,t,n,i,o){if(!v(e[t])){var a=C[i];return new r("Invalid "+a+" `"+o+"` supplied to "+("`"+n+"`, expected a ReactNode."))}return null}return o(e)}function m(e){function t(t,n,i,o,a){var s=t[n],l=b(s);if("object"!==l){var u=C[o];return new r("Invalid "+u+" `"+a+"` of type `"+l+"` "+("supplied to `"+i+"`, expected `object`."))}for(var c in e){var d=e[c];if(d){var p=d(s,c,i,o,a+"."+c,E);if(p)return p}}return null}return o(t)}function v(e){switch(typeof e){case"number":case"string":case"undefined":return!0;case"boolean":return!e;case"object":if(Array.isArray(e))return e.every(v);if(null===e||w.isValidElement(e))return!0;var t=T(e);if(!t)return!1;var n,i=t.call(e);if(t!==e.entries){for(;!(n=i.next()).done;)if(!v(n.value))return!1}else for(;!(n=i.next()).done;){var r=n.value;if(r&&!v(r[1]))return!1}return!0;default:return!1}}function g(e,t){return"symbol"===e||"Symbol"===t["@@toStringTag"]||"function"==typeof Symbol&&t instanceof Symbol}function b(e){var t=typeof e;return Array.isArray(e)?"array":e instanceof RegExp?"object":g(t,e)?"symbol":t}function y(e){var t=b(e);if("object"===t){if(e instanceof Date)return"date";if(e instanceof RegExp)return"regexp"}return t}function _(e){return e.constructor&&e.constructor.name?e.constructor.name:x}var w=e(56),C=e(74),E=e(77),k=e(146),T=e(123),x=(e(161),"<<anonymous>>"),S={array:a("array"),bool:a("boolean"),func:a("function"),number:a("number"),object:a("object"),string:a("string"),symbol:a("symbol"),any:s(),arrayOf:l,element:u(),instanceOf:c,node:h(),objectOf:p,oneOf:d,oneOfType:f,shape:m};r.prototype=Error.prototype,t.exports=S},{123:123,146:146,161:161,56:56,74:74,77:77}],77:[function(e,t,n){"use strict";var i="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";t.exports=i},{}],78:[function(e,t,n){"use strict";function i(e,t,n){this.props=e,this.context=t,this.refs=l,this.updater=n||s}function r(){}var o=e(162),a=e(31),s=e(72),l=e(147);r.prototype=a.prototype,i.prototype=new r,i.prototype.constructor=i,o(i.prototype,a.prototype),i.prototype.isPureReactComponent=!0,t.exports=i},{147:147,162:162,31:31,72:72}],79:[function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=!1,this.reactMountReady=o.getPooled(null),this.useCreateElement=e}var r=e(162),o=e(5),a=e(25),s=e(27),l=e(64),u=(e(66),e(106)),c=e(87),d={initialize:l.getSelectionInformation,close:l.restoreSelection},p={initialize:function(){var e=s.isEnabled();return s.setEnabled(!1),e},close:function(e){s.setEnabled(e)}},f={initialize:function(){this.reactMountReady.reset()},close:function(){this.reactMountReady.notifyAll()}},h=[d,p,f],m={getTransactionWrappers:function(){return h},getReactMountReady:function(){return this.reactMountReady},getUpdateQueue:function(){return c},checkpoint:function(){return this.reactMountReady.checkpoint()},rollback:function(e){this.reactMountReady.rollback(e)},destructor:function(){o.release(this.reactMountReady),this.reactMountReady=null}};r(i.prototype,u.Mixin,m),a.addPoolingTo(i),t.exports=i},{106:106,162:162,25:25,27:27,5:5,64:64,66:66,87:87}],80:[function(e,t,n){"use strict";function i(){r.attachRefs(this,this._currentElement)}var r=e(81),o=(e(66),e(161),{mountComponent:function(e,t,n,r,o,a){var s=e.mountComponent(t,n,r,o,a);return e._currentElement&&null!=e._currentElement.ref&&t.getReactMountReady().enqueue(i,e),s},getHostNode:function(e){return e.getHostNode()},unmountComponent:function(e,t){r.detachRefs(e,e._currentElement),e.unmountComponent(t)},receiveComponent:function(e,t,n,o){var a=e._currentElement;if(t!==a||o!==e._context){var s=r.shouldUpdateRefs(a,t);s&&r.detachRefs(e,a),e.receiveComponent(t,n,o),s&&e._currentElement&&null!=e._currentElement.ref&&n.getReactMountReady().enqueue(i,e)}},performUpdateIfNecessary:function(e,t,n){e._updateBatchNumber===n&&e.performUpdateIfNecessary(t)}});t.exports=o},{161:161,66:66,81:81}],81:[function(e,t,n){"use strict";function i(e,t,n){"function"==typeof e?e(t.getPublicInstance()):o.addComponentAsRefTo(t,e,n)}function r(e,t,n){"function"==typeof e?e(null):o.removeComponentAsRefFrom(t,e,n)}var o=e(73),a={};a.attachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&i(n,e,t._owner)}},a.shouldUpdateRefs=function(e,t){var n=null===e||e===!1,i=null===t||t===!1;return n||i||t.ref!==e.ref||"string"==typeof t.ref&&t._owner!==e._owner},a.detachRefs=function(e,t){if(null!==t&&t!==!1){var n=t.ref;null!=n&&r(n,e,t._owner)}},t.exports=a},{73:73}],82:[function(e,t,n){"use strict";var i={isBatchingUpdates:!1,batchedUpdates:function(e){}};t.exports=i},{}],83:[function(e,t,n){"use strict";function i(e,t){var n;try{return h.injection.injectBatchingStrategy(p),n=f.getPooled(t),g++,n.perform(function(){var i=v(e,!0),r=d.mountComponent(i,n,null,s(),m,0);return t||(r=c.addChecksumToMarkup(r)),r},null)}finally{g--,f.release(n),g||h.injection.injectBatchingStrategy(l)}}function r(e){return u.isValidElement(e)?void 0:a("46"),i(e,!1)}function o(e){return u.isValidElement(e)?void 0:a("47"),i(e,!0)}var a=e(132),s=e(41),l=e(54),u=e(56),c=(e(66),e(67)),d=e(80),p=e(82),f=e(84),h=e(88),m=e(147),v=e(127),g=(e(154),0);t.exports={renderToString:r,renderToStaticMarkup:o}},{127:127,132:132,147:147,154:154,41:41,54:54,56:56,66:66,67:67,80:80,82:82,84:84,88:88}],84:[function(e,t,n){"use strict";function i(e){this.reinitializeTransaction(),this.renderToStaticMarkup=e,this.useCreateElement=!1,this.updateQueue=new s(this)}var r=e(162),o=e(25),a=e(106),s=(e(66),e(85)),l=[],u={enqueue:function(){}},c={getTransactionWrappers:function(){return l},getReactMountReady:function(){return u},getUpdateQueue:function(){return this.updateQueue},destructor:function(){},checkpoint:function(){},rollback:function(){}};r(i.prototype,a.Mixin,c),o.addPoolingTo(i),t.exports=i},{106:106,162:162,25:25,66:66,85:85}],85:[function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){}var o=e(87),a=(e(106),e(161),function(){function e(t){i(this,e),this.transaction=t}return e.prototype.isMounted=function(e){return!1},e.prototype.enqueueCallback=function(e,t,n){this.transaction.isInTransaction()&&o.enqueueCallback(e,t,n)},e.prototype.enqueueForceUpdate=function(e){this.transaction.isInTransaction()?o.enqueueForceUpdate(e):r(e,"forceUpdate")},e.prototype.enqueueReplaceState=function(e,t){this.transaction.isInTransaction()?o.enqueueReplaceState(e,t):r(e,"replaceState")},e.prototype.enqueueSetState=function(e,t){this.transaction.isInTransaction()?o.enqueueSetState(e,t):r(e,"setState")},e}());t.exports=a},{106:106,161:161,87:87}],86:[function(e,t,n){"use strict";var i=e(162),r=e(36),o=e(50),a=e(26),s=i({__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:r,__SECRET_DOM_SERVER_DO_NOT_USE_OR_YOU_WILL_BE_FIRED:o},a);t.exports=s},{162:162,26:26,36:36,50:50}],87:[function(e,t,n){"use strict";function i(e){l.enqueueUpdate(e)}function r(e){var t=typeof e;if("object"!==t)return t;var n=e.constructor&&e.constructor.name||t,i=Object.keys(e);return i.length>0&&i.length<20?n+" (keys: "+i.join(", ")+")":n}function o(e,t){var n=s.get(e);return n?n:null}var a=e(132),s=(e(35),e(65)),l=(e(66),e(88)),u=(e(154),e(161),{isMounted:function(e){var t=s.get(e);return!!t&&!!t._renderedComponent},enqueueCallback:function(e,t,n){u.validateCallback(t,n);var r=o(e);return r?(r._pendingCallbacks?r._pendingCallbacks.push(t):r._pendingCallbacks=[t],void i(r)):null},enqueueCallbackInternal:function(e,t){e._pendingCallbacks?e._pendingCallbacks.push(t):e._pendingCallbacks=[t],i(e)},enqueueForceUpdate:function(e){var t=o(e,"forceUpdate");t&&(t._pendingForceUpdate=!0,i(t))},enqueueReplaceState:function(e,t){var n=o(e,"replaceState");n&&(n._pendingStateQueue=[t],n._pendingReplaceState=!0,i(n))},enqueueSetState:function(e,t){var n=o(e,"setState");if(n){var r=n._pendingStateQueue||(n._pendingStateQueue=[]);r.push(t),i(n)}},enqueueElementInternal:function(e,t,n){e._pendingElement=t,e._context=n,i(e)},validateCallback:function(e,t){e&&"function"!=typeof e?a("122",t,r(e)):void 0}});t.exports=u},{132:132,154:154,161:161,35:35,65:65,66:66,88:88}],88:[function(e,t,n){"use strict";function i(){S.ReactReconcileTransaction&&w?void 0:c("123")}function r(){this.reinitializeTransaction(),this.dirtyComponentsLength=null,
this.callbackQueue=p.getPooled(),this.reconcileTransaction=S.ReactReconcileTransaction.getPooled(!0)}function o(e,t,n,r,o,a){i(),w.batchedUpdates(e,t,n,r,o,a)}function a(e,t){return e._mountOrder-t._mountOrder}function s(e){var t=e.dirtyComponentsLength;t!==g.length?c("124",t,g.length):void 0,g.sort(a),b++;for(var n=0;n<t;n++){var i=g[n],r=i._pendingCallbacks;i._pendingCallbacks=null;var o;if(h.logTopLevelRenders){var s=i;i._currentElement.props===i._renderedComponent._currentElement&&(s=i._renderedComponent),o="React update: "+s.getName(),console.time(o)}if(m.performUpdateIfNecessary(i,e.reconcileTransaction,b),o&&console.timeEnd(o),r)for(var l=0;l<r.length;l++)e.callbackQueue.enqueue(r[l],i.getPublicInstance())}}function l(e){return i(),w.isBatchingUpdates?(g.push(e),void(null==e._updateBatchNumber&&(e._updateBatchNumber=b+1))):void w.batchedUpdates(l,e)}function u(e,t){w.isBatchingUpdates?void 0:c("125"),y.enqueue(e,t),_=!0}var c=e(132),d=e(162),p=e(5),f=e(25),h=e(61),m=e(80),v=e(106),g=(e(154),[]),b=0,y=p.getPooled(),_=!1,w=null,C={initialize:function(){this.dirtyComponentsLength=g.length},close:function(){this.dirtyComponentsLength!==g.length?(g.splice(0,this.dirtyComponentsLength),T()):g.length=0}},E={initialize:function(){this.callbackQueue.reset()},close:function(){this.callbackQueue.notifyAll()}},k=[C,E];d(r.prototype,v.Mixin,{getTransactionWrappers:function(){return k},destructor:function(){this.dirtyComponentsLength=null,p.release(this.callbackQueue),this.callbackQueue=null,S.ReactReconcileTransaction.release(this.reconcileTransaction),this.reconcileTransaction=null},perform:function(e,t,n){return v.Mixin.perform.call(this,this.reconcileTransaction.perform,this.reconcileTransaction,e,t,n)}}),f.addPoolingTo(r);var T=function(){for(;g.length||_;){if(g.length){var e=r.getPooled();e.perform(s,null,e),r.release(e)}if(_){_=!1;var t=y;y=p.getPooled(),t.notifyAll(),p.release(t)}}},x={injectReconcileTransaction:function(e){e?void 0:c("126"),S.ReactReconcileTransaction=e},injectBatchingStrategy:function(e){e?void 0:c("127"),"function"!=typeof e.batchedUpdates?c("128"):void 0,"boolean"!=typeof e.isBatchingUpdates?c("129"):void 0,w=e}},S={ReactReconcileTransaction:null,batchedUpdates:o,enqueueUpdate:l,flushBatchedUpdates:T,injection:x,asap:u};t.exports=S},{106:106,132:132,154:154,162:162,25:25,5:5,61:61,80:80}],89:[function(e,t,n){"use strict";t.exports="15.3.2"},{}],90:[function(e,t,n){"use strict";var i={xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace"},r={accentHeight:"accent-height",accumulate:0,additive:0,alignmentBaseline:"alignment-baseline",allowReorder:"allowReorder",alphabetic:0,amplitude:0,arabicForm:"arabic-form",ascent:0,attributeName:"attributeName",attributeType:"attributeType",autoReverse:"autoReverse",azimuth:0,baseFrequency:"baseFrequency",baseProfile:"baseProfile",baselineShift:"baseline-shift",bbox:0,begin:0,bias:0,by:0,calcMode:"calcMode",capHeight:"cap-height",clip:0,clipPath:"clip-path",clipRule:"clip-rule",clipPathUnits:"clipPathUnits",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",contentScriptType:"contentScriptType",contentStyleType:"contentStyleType",cursor:0,cx:0,cy:0,d:0,decelerate:0,descent:0,diffuseConstant:"diffuseConstant",direction:0,display:0,divisor:0,dominantBaseline:"dominant-baseline",dur:0,dx:0,dy:0,edgeMode:"edgeMode",elevation:0,enableBackground:"enable-background",end:0,exponent:0,externalResourcesRequired:"externalResourcesRequired",fill:0,fillOpacity:"fill-opacity",fillRule:"fill-rule",filter:0,filterRes:"filterRes",filterUnits:"filterUnits",floodColor:"flood-color",floodOpacity:"flood-opacity",focusable:0,fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",format:0,from:0,fx:0,fy:0,g1:0,g2:0,glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",glyphRef:"glyphRef",gradientTransform:"gradientTransform",gradientUnits:"gradientUnits",hanging:0,horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",ideographic:0,imageRendering:"image-rendering",in:0,in2:0,intercept:0,k:0,k1:0,k2:0,k3:0,k4:0,kernelMatrix:"kernelMatrix",kernelUnitLength:"kernelUnitLength",kerning:0,keyPoints:"keyPoints",keySplines:"keySplines",keyTimes:"keyTimes",lengthAdjust:"lengthAdjust",letterSpacing:"letter-spacing",lightingColor:"lighting-color",limitingConeAngle:"limitingConeAngle",local:0,markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",markerHeight:"markerHeight",markerUnits:"markerUnits",markerWidth:"markerWidth",mask:0,maskContentUnits:"maskContentUnits",maskUnits:"maskUnits",mathematical:0,mode:0,numOctaves:"numOctaves",offset:0,opacity:0,operator:0,order:0,orient:0,orientation:0,origin:0,overflow:0,overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pathLength:"pathLength",patternContentUnits:"patternContentUnits",patternTransform:"patternTransform",patternUnits:"patternUnits",pointerEvents:"pointer-events",points:0,pointsAtX:"pointsAtX",pointsAtY:"pointsAtY",pointsAtZ:"pointsAtZ",preserveAlpha:"preserveAlpha",preserveAspectRatio:"preserveAspectRatio",primitiveUnits:"primitiveUnits",r:0,radius:0,refX:"refX",refY:"refY",renderingIntent:"rendering-intent",repeatCount:"repeatCount",repeatDur:"repeatDur",requiredExtensions:"requiredExtensions",requiredFeatures:"requiredFeatures",restart:0,result:0,rotate:0,rx:0,ry:0,scale:0,seed:0,shapeRendering:"shape-rendering",slope:0,spacing:0,specularConstant:"specularConstant",specularExponent:"specularExponent",speed:0,spreadMethod:"spreadMethod",startOffset:"startOffset",stdDeviation:"stdDeviation",stemh:0,stemv:0,stitchTiles:"stitchTiles",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",string:0,stroke:0,strokeDasharray:"stroke-dasharray",strokeDashoffset:"stroke-dashoffset",strokeLinecap:"stroke-linecap",strokeLinejoin:"stroke-linejoin",strokeMiterlimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",surfaceScale:"surfaceScale",systemLanguage:"systemLanguage",tableValues:"tableValues",targetX:"targetX",targetY:"targetY",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",textLength:"textLength",to:0,transform:0,u1:0,u2:0,underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicode:0,unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",values:0,vectorEffect:"vector-effect",version:0,vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",viewBox:"viewBox",viewTarget:"viewTarget",visibility:0,widths:0,wordSpacing:"word-spacing",writingMode:"writing-mode",x:0,xHeight:"x-height",x1:0,x2:0,xChannelSelector:"xChannelSelector",xlinkActuate:"xlink:actuate",xlinkArcrole:"xlink:arcrole",xlinkHref:"xlink:href",xlinkRole:"xlink:role",xlinkShow:"xlink:show",xlinkTitle:"xlink:title",xlinkType:"xlink:type",xmlBase:"xml:base",xmlns:0,xmlnsXlink:"xmlns:xlink",xmlLang:"xml:lang",xmlSpace:"xml:space",y:0,y1:0,y2:0,yChannelSelector:"yChannelSelector",z:0,zoomAndPan:"zoomAndPan"},o={Properties:{},DOMAttributeNamespaces:{xlinkActuate:i.xlink,xlinkArcrole:i.xlink,xlinkHref:i.xlink,xlinkRole:i.xlink,xlinkShow:i.xlink,xlinkTitle:i.xlink,xlinkType:i.xlink,xmlBase:i.xml,xmlLang:i.xml,xmlSpace:i.xml},DOMAttributeNames:{}};Object.keys(r).forEach(function(e){o.Properties[e]=0,r[e]&&(o.DOMAttributeNames[e]=r[e])}),t.exports=o},{}],91:[function(e,t,n){"use strict";function i(e){if("selectionStart"in e&&u.hasSelectionCapabilities(e))return{start:e.selectionStart,end:e.selectionEnd};if(window.getSelection){var t=window.getSelection();return{anchorNode:t.anchorNode,anchorOffset:t.anchorOffset,focusNode:t.focusNode,focusOffset:t.focusOffset}}if(document.selection){var n=document.selection.createRange();return{parentElement:n.parentElement(),text:n.text,top:n.boundingTop,left:n.boundingLeft}}}function r(e,t){if(w||null==b||b!==d())return null;var n=i(b);if(!_||!h(_,n)){_=n;var r=c.getPooled(g.select,y,e,t);return r.type="select",r.target=b,a.accumulateTwoPhaseDispatches(r),r}return null}var o=e(16),a=e(20),s=e(140),l=e(40),u=e(64),c=e(97),d=e(149),p=e(129),f=e(158),h=e(160),m=o.topLevelTypes,v=s.canUseDOM&&"documentMode"in document&&document.documentMode<=11,g={select:{phasedRegistrationNames:{bubbled:f({onSelect:null}),captured:f({onSelectCapture:null})},dependencies:[m.topBlur,m.topContextMenu,m.topFocus,m.topKeyDown,m.topKeyUp,m.topMouseDown,m.topMouseUp,m.topSelectionChange]}},b=null,y=null,_=null,w=!1,C=!1,E=f({onSelect:null}),k={eventTypes:g,extractEvents:function(e,t,n,i){if(!C)return null;var o=t?l.getNodeFromInstance(t):window;switch(e){case m.topFocus:(p(o)||"true"===o.contentEditable)&&(b=o,y=t,_=null);break;case m.topBlur:b=null,y=null,_=null;break;case m.topMouseDown:w=!0;break;case m.topContextMenu:case m.topMouseUp:return w=!1,r(n,i);case m.topSelectionChange:if(v)break;case m.topKeyDown:case m.topKeyUp:return r(n,i)}return null},didPutListener:function(e,t,n){t===E&&(C=!0)}};t.exports=k},{129:129,140:140,149:149,158:158,16:16,160:160,20:20,40:40,64:64,97:97}],92:[function(e,t,n){"use strict";function i(e){return"."+e._rootNodeID}var r=e(132),o=e(16),a=e(139),s=e(20),l=e(40),u=e(93),c=e(94),d=e(97),p=e(98),f=e(100),h=e(101),m=e(96),v=e(102),g=e(103),b=e(104),y=e(105),_=e(146),w=e(118),C=(e(154),e(158)),E=o.topLevelTypes,k={abort:{phasedRegistrationNames:{bubbled:C({onAbort:!0}),captured:C({onAbortCapture:!0})}},animationEnd:{phasedRegistrationNames:{bubbled:C({onAnimationEnd:!0}),captured:C({onAnimationEndCapture:!0})}},animationIteration:{phasedRegistrationNames:{bubbled:C({onAnimationIteration:!0}),captured:C({onAnimationIterationCapture:!0})}},animationStart:{phasedRegistrationNames:{bubbled:C({onAnimationStart:!0}),captured:C({onAnimationStartCapture:!0})}},blur:{phasedRegistrationNames:{bubbled:C({onBlur:!0}),captured:C({onBlurCapture:!0})}},canPlay:{phasedRegistrationNames:{bubbled:C({onCanPlay:!0}),captured:C({onCanPlayCapture:!0})}},canPlayThrough:{phasedRegistrationNames:{bubbled:C({onCanPlayThrough:!0}),captured:C({onCanPlayThroughCapture:!0})}},click:{phasedRegistrationNames:{bubbled:C({onClick:!0}),captured:C({onClickCapture:!0})}},contextMenu:{phasedRegistrationNames:{bubbled:C({onContextMenu:!0}),captured:C({onContextMenuCapture:!0})}},copy:{phasedRegistrationNames:{bubbled:C({onCopy:!0}),captured:C({onCopyCapture:!0})}},cut:{phasedRegistrationNames:{bubbled:C({onCut:!0}),captured:C({onCutCapture:!0})}},doubleClick:{phasedRegistrationNames:{bubbled:C({onDoubleClick:!0}),captured:C({onDoubleClickCapture:!0})}},drag:{phasedRegistrationNames:{bubbled:C({onDrag:!0}),captured:C({onDragCapture:!0})}},dragEnd:{phasedRegistrationNames:{bubbled:C({onDragEnd:!0}),captured:C({onDragEndCapture:!0})}},dragEnter:{phasedRegistrationNames:{bubbled:C({onDragEnter:!0}),captured:C({onDragEnterCapture:!0})}},dragExit:{phasedRegistrationNames:{bubbled:C({onDragExit:!0}),captured:C({onDragExitCapture:!0})}},dragLeave:{phasedRegistrationNames:{bubbled:C({onDragLeave:!0}),captured:C({onDragLeaveCapture:!0})}},dragOver:{phasedRegistrationNames:{bubbled:C({onDragOver:!0}),captured:C({onDragOverCapture:!0})}},dragStart:{phasedRegistrationNames:{bubbled:C({onDragStart:!0}),captured:C({onDragStartCapture:!0})}},drop:{phasedRegistrationNames:{bubbled:C({onDrop:!0}),captured:C({onDropCapture:!0})}},durationChange:{phasedRegistrationNames:{bubbled:C({onDurationChange:!0}),captured:C({onDurationChangeCapture:!0})}},emptied:{phasedRegistrationNames:{bubbled:C({onEmptied:!0}),captured:C({onEmptiedCapture:!0})}},encrypted:{phasedRegistrationNames:{bubbled:C({onEncrypted:!0}),captured:C({onEncryptedCapture:!0})}},ended:{phasedRegistrationNames:{bubbled:C({onEnded:!0}),captured:C({onEndedCapture:!0})}},error:{phasedRegistrationNames:{bubbled:C({onError:!0}),captured:C({onErrorCapture:!0})}},focus:{phasedRegistrationNames:{bubbled:C({onFocus:!0}),captured:C({onFocusCapture:!0})}},input:{phasedRegistrationNames:{bubbled:C({onInput:!0}),captured:C({onInputCapture:!0})}},invalid:{phasedRegistrationNames:{bubbled:C({onInvalid:!0}),captured:C({onInvalidCapture:!0})}},keyDown:{phasedRegistrationNames:{bubbled:C({onKeyDown:!0}),captured:C({onKeyDownCapture:!0})}},keyPress:{phasedRegistrationNames:{bubbled:C({onKeyPress:!0}),captured:C({onKeyPressCapture:!0})}},keyUp:{phasedRegistrationNames:{bubbled:C({onKeyUp:!0}),captured:C({onKeyUpCapture:!0})}},load:{phasedRegistrationNames:{bubbled:C({onLoad:!0}),captured:C({onLoadCapture:!0})}},loadedData:{phasedRegistrationNames:{bubbled:C({onLoadedData:!0}),captured:C({onLoadedDataCapture:!0})}},loadedMetadata:{phasedRegistrationNames:{bubbled:C({onLoadedMetadata:!0}),captured:C({onLoadedMetadataCapture:!0})}},loadStart:{phasedRegistrationNames:{bubbled:C({onLoadStart:!0}),captured:C({onLoadStartCapture:!0})}},mouseDown:{phasedRegistrationNames:{bubbled:C({onMouseDown:!0}),captured:C({onMouseDownCapture:!0})}},mouseMove:{phasedRegistrationNames:{bubbled:C({onMouseMove:!0}),captured:C({onMouseMoveCapture:!0})}},mouseOut:{phasedRegistrationNames:{bubbled:C({onMouseOut:!0}),captured:C({onMouseOutCapture:!0})}},mouseOver:{phasedRegistrationNames:{bubbled:C({onMouseOver:!0}),captured:C({onMouseOverCapture:!0})}},mouseUp:{phasedRegistrationNames:{bubbled:C({onMouseUp:!0}),captured:C({onMouseUpCapture:!0})}},paste:{phasedRegistrationNames:{bubbled:C({onPaste:!0}),captured:C({onPasteCapture:!0})}},pause:{phasedRegistrationNames:{bubbled:C({onPause:!0}),captured:C({onPauseCapture:!0})}},play:{phasedRegistrationNames:{bubbled:C({onPlay:!0}),captured:C({onPlayCapture:!0})}},playing:{phasedRegistrationNames:{bubbled:C({onPlaying:!0}),captured:C({onPlayingCapture:!0})}},progress:{phasedRegistrationNames:{bubbled:C({onProgress:!0}),captured:C({onProgressCapture:!0})}},rateChange:{phasedRegistrationNames:{bubbled:C({onRateChange:!0}),captured:C({onRateChangeCapture:!0})}},reset:{phasedRegistrationNames:{bubbled:C({onReset:!0}),captured:C({onResetCapture:!0})}},scroll:{phasedRegistrationNames:{bubbled:C({onScroll:!0}),captured:C({onScrollCapture:!0})}},seeked:{phasedRegistrationNames:{bubbled:C({onSeeked:!0}),captured:C({onSeekedCapture:!0})}},seeking:{phasedRegistrationNames:{bubbled:C({onSeeking:!0}),captured:C({onSeekingCapture:!0})}},stalled:{phasedRegistrationNames:{bubbled:C({onStalled:!0}),captured:C({onStalledCapture:!0})}},submit:{phasedRegistrationNames:{bubbled:C({onSubmit:!0}),captured:C({onSubmitCapture:!0})}},suspend:{phasedRegistrationNames:{bubbled:C({onSuspend:!0}),captured:C({onSuspendCapture:!0})}},timeUpdate:{phasedRegistrationNames:{bubbled:C({onTimeUpdate:!0}),captured:C({onTimeUpdateCapture:!0})}},touchCancel:{phasedRegistrationNames:{bubbled:C({onTouchCancel:!0}),captured:C({onTouchCancelCapture:!0})}},touchEnd:{phasedRegistrationNames:{bubbled:C({onTouchEnd:!0}),captured:C({onTouchEndCapture:!0})}},touchMove:{phasedRegistrationNames:{bubbled:C({onTouchMove:!0}),captured:C({onTouchMoveCapture:!0})}},touchStart:{phasedRegistrationNames:{bubbled:C({onTouchStart:!0}),captured:C({onTouchStartCapture:!0})}},transitionEnd:{phasedRegistrationNames:{bubbled:C({onTransitionEnd:!0}),captured:C({onTransitionEndCapture:!0})}},volumeChange:{phasedRegistrationNames:{bubbled:C({onVolumeChange:!0}),captured:C({onVolumeChangeCapture:!0})}},waiting:{phasedRegistrationNames:{bubbled:C({onWaiting:!0}),captured:C({onWaitingCapture:!0})}},wheel:{phasedRegistrationNames:{bubbled:C({onWheel:!0}),captured:C({onWheelCapture:!0})}}},T={topAbort:k.abort,topAnimationEnd:k.animationEnd,topAnimationIteration:k.animationIteration,topAnimationStart:k.animationStart,topBlur:k.blur,topCanPlay:k.canPlay,topCanPlayThrough:k.canPlayThrough,topClick:k.click,topContextMenu:k.contextMenu,topCopy:k.copy,topCut:k.cut,topDoubleClick:k.doubleClick,topDrag:k.drag,topDragEnd:k.dragEnd,topDragEnter:k.dragEnter,topDragExit:k.dragExit,topDragLeave:k.dragLeave,topDragOver:k.dragOver,topDragStart:k.dragStart,topDrop:k.drop,topDurationChange:k.durationChange,topEmptied:k.emptied,topEncrypted:k.encrypted,topEnded:k.ended,topError:k.error,topFocus:k.focus,topInput:k.input,topInvalid:k.invalid,topKeyDown:k.keyDown,topKeyPress:k.keyPress,topKeyUp:k.keyUp,topLoad:k.load,topLoadedData:k.loadedData,topLoadedMetadata:k.loadedMetadata,topLoadStart:k.loadStart,topMouseDown:k.mouseDown,topMouseMove:k.mouseMove,topMouseOut:k.mouseOut,topMouseOver:k.mouseOver,topMouseUp:k.mouseUp,topPaste:k.paste,topPause:k.pause,topPlay:k.play,topPlaying:k.playing,topProgress:k.progress,topRateChange:k.rateChange,topReset:k.reset,topScroll:k.scroll,topSeeked:k.seeked,topSeeking:k.seeking,topStalled:k.stalled,topSubmit:k.submit,topSuspend:k.suspend,topTimeUpdate:k.timeUpdate,topTouchCancel:k.touchCancel,topTouchEnd:k.touchEnd,topTouchMove:k.touchMove,topTouchStart:k.touchStart,topTransitionEnd:k.transitionEnd,topVolumeChange:k.volumeChange,topWaiting:k.waiting,topWheel:k.wheel};for(var x in T)T[x].dependencies=[x];var S=C({onClick:null}),P={},O={eventTypes:k,extractEvents:function(e,t,n,i){var o=T[e];if(!o)return null;var a;switch(e){case E.topAbort:case E.topCanPlay:case E.topCanPlayThrough:case E.topDurationChange:case E.topEmptied:case E.topEncrypted:case E.topEnded:case E.topError:case E.topInput:case E.topInvalid:case E.topLoad:case E.topLoadedData:case E.topLoadedMetadata:case E.topLoadStart:case E.topPause:case E.topPlay:case E.topPlaying:case E.topProgress:case E.topRateChange:case E.topReset:case E.topSeeked:case E.topSeeking:case E.topStalled:case E.topSubmit:case E.topSuspend:case E.topTimeUpdate:case E.topVolumeChange:case E.topWaiting:a=d;break;case E.topKeyPress:if(0===w(n))return null;case E.topKeyDown:case E.topKeyUp:a=f;break;case E.topBlur:case E.topFocus:a=p;break;case E.topClick:if(2===n.button)return null;case E.topContextMenu:case E.topDoubleClick:case E.topMouseDown:case E.topMouseMove:case E.topMouseOut:case E.topMouseOver:case E.topMouseUp:a=h;break;case E.topDrag:case E.topDragEnd:case E.topDragEnter:case E.topDragExit:case E.topDragLeave:case E.topDragOver:case E.topDragStart:case E.topDrop:a=m;break;case E.topTouchCancel:case E.topTouchEnd:case E.topTouchMove:case E.topTouchStart:a=v;break;case E.topAnimationEnd:case E.topAnimationIteration:case E.topAnimationStart:a=u;break;case E.topTransitionEnd:a=g;break;case E.topScroll:a=b;break;case E.topWheel:a=y;break;case E.topCopy:case E.topCut:case E.topPaste:a=c}a?void 0:r("86",e);var l=a.getPooled(o,t,n,i);return s.accumulateTwoPhaseDispatches(l),l},didPutListener:function(e,t,n){if(t===S){var r=i(e),o=l.getNodeFromInstance(e);P[r]||(P[r]=a.listen(o,"click",_))}},willDeleteListener:function(e,t){if(t===S){var n=i(e);P[n].remove(),delete P[n]}}};t.exports=O},{100:100,101:101,102:102,103:103,104:104,105:105,118:118,132:132,139:139,146:146,154:154,158:158,16:16,20:20,40:40,93:93,94:94,96:96,97:97,98:98}],93:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(97),o={animationName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,o),t.exports=i},{97:97}],94:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(97),o={clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}};r.augmentClass(i,o),t.exports=i},{97:97}],95:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(97),o={data:null};r.augmentClass(i,o),t.exports=i},{97:97}],96:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(101),o={dataTransfer:null};r.augmentClass(i,o),t.exports=i},{101:101}],97:[function(e,t,n){"use strict";function i(e,t,n,i){this.dispatchConfig=e,this._targetInst=t,this.nativeEvent=n;var r=this.constructor.Interface;for(var o in r)if(r.hasOwnProperty(o)){var s=r[o];s?this[o]=s(n):"target"===o?this.target=i:this[o]=n[o]}var l=null!=n.defaultPrevented?n.defaultPrevented:n.returnValue===!1;return l?this.isDefaultPrevented=a.thatReturnsTrue:this.isDefaultPrevented=a.thatReturnsFalse,this.isPropagationStopped=a.thatReturnsFalse,this}var r=e(162),o=e(25),a=e(146),s=(e(161),"function"==typeof Proxy,["dispatchConfig","_targetInst","nativeEvent","isDefaultPrevented","isPropagationStopped","_dispatchListeners","_dispatchInstances"]),l={type:null,target:null,currentTarget:a.thatReturnsNull,eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:null,isTrusted:null};r(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=a.thatReturnsTrue)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=a.thatReturnsTrue)},persist:function(){this.isPersistent=a.thatReturnsTrue},isPersistent:a.thatReturnsFalse,destructor:function(){var e=this.constructor.Interface;for(var t in e)this[t]=null;for(var n=0;n<s.length;n++)this[s[n]]=null}}),i.Interface=l,i.augmentClass=function(e,t){var n=this,i=function(){};i.prototype=n.prototype;var a=new i;r(a,e.prototype),e.prototype=a,e.prototype.constructor=e,e.Interface=r({},n.Interface,t),e.augmentClass=n.augmentClass,o.addPoolingTo(e,o.fourArgumentPooler)},o.addPoolingTo(i,o.fourArgumentPooler),t.exports=i},{146:146,161:161,162:162,25:25}],98:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(104),o={relatedTarget:null};r.augmentClass(i,o),t.exports=i},{104:104}],99:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(97),o={data:null};r.augmentClass(i,o),t.exports=i},{97:97}],100:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(104),o=e(118),a=e(119),s=e(120),l={key:a,location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:s,charCode:function(e){return"keypress"===e.type?o(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?o(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}};r.augmentClass(i,l),t.exports=i},{104:104,118:118,119:119,120:120}],101:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(104),o=e(107),a=e(120),s={screenX:null,screenY:null,clientX:null,clientY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:a,button:function(e){var t=e.button;return"which"in e?t:2===t?2:4===t?1:0},buttons:null,relatedTarget:function(e){return e.relatedTarget||(e.fromElement===e.srcElement?e.toElement:e.fromElement)},pageX:function(e){return"pageX"in e?e.pageX:e.clientX+o.currentScrollLeft},pageY:function(e){return"pageY"in e?e.pageY:e.clientY+o.currentScrollTop}};r.augmentClass(i,s),t.exports=i},{104:104,107:107,120:120}],102:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(104),o=e(120),a={touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:o};r.augmentClass(i,a),t.exports=i},{104:104,120:120}],103:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(97),o={propertyName:null,elapsedTime:null,pseudoElement:null};r.augmentClass(i,o),t.exports=i},{97:97}],104:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(97),o=e(121),a={view:function(e){if(e.view)return e.view;var t=o(e);if(t.window===t)return t;var n=t.ownerDocument;return n?n.defaultView||n.parentWindow:window},detail:function(e){return e.detail||0}};r.augmentClass(i,a),t.exports=i},{121:121,97:97}],105:[function(e,t,n){"use strict";function i(e,t,n,i){return r.call(this,e,t,n,i)}var r=e(101),o={deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:null,deltaMode:null};r.augmentClass(i,o),t.exports=i},{101:101}],106:[function(e,t,n){"use strict";var i=e(132),r=(e(154),{reinitializeTransaction:function(){this.transactionWrappers=this.getTransactionWrappers(),this.wrapperInitData?this.wrapperInitData.length=0:this.wrapperInitData=[],this._isInTransaction=!1},_isInTransaction:!1,getTransactionWrappers:null,isInTransaction:function(){return!!this._isInTransaction},perform:function(e,t,n,r,o,a,s,l){this.isInTransaction()?i("27"):void 0;var u,c;try{this._isInTransaction=!0,u=!0,this.initializeAll(0),c=e.call(t,n,r,o,a,s,l),u=!1}finally{try{if(u)try{this.closeAll(0)}catch(e){}else this.closeAll(0)}finally{this._isInTransaction=!1}}return c},initializeAll:function(e){for(var t=this.transactionWrappers,n=e;n<t.length;n++){var i=t[n];try{this.wrapperInitData[n]=o.OBSERVED_ERROR,this.wrapperInitData[n]=i.initialize?i.initialize.call(this):null}finally{if(this.wrapperInitData[n]===o.OBSERVED_ERROR)try{this.initializeAll(n+1)}catch(e){}}}},closeAll:function(e){this.isInTransaction()?void 0:i("28");for(var t=this.transactionWrappers,n=e;n<t.length;n++){var r,a=t[n],s=this.wrapperInitData[n];try{r=!0,s!==o.OBSERVED_ERROR&&a.close&&a.close.call(this,s),r=!1}finally{if(r)try{this.closeAll(n+1)}catch(e){}}}this.wrapperInitData.length=0}}),o={Mixin:r,OBSERVED_ERROR:{}};t.exports=o},{132:132,154:154}],107:[function(e,t,n){"use strict";var i={currentScrollLeft:0,currentScrollTop:0,refreshScrollValues:function(e){i.currentScrollLeft=e.x,i.currentScrollTop=e.y}};t.exports=i},{}],108:[function(e,t,n){"use strict";function i(e,t){return null==t?r("30"):void 0,null==e?t:Array.isArray(e)?Array.isArray(t)?(e.push.apply(e,t),e):(e.push(t),e):Array.isArray(t)?[e].concat(t):[e,t]}var r=e(132);e(154),t.exports=i},{132:132,154:154}],109:[function(e,t,n){"use strict";function i(e){for(var t=1,n=0,i=0,o=e.length,a=o&-4;i<a;){for(var s=Math.min(i+4096,a);i<s;i+=4)n+=(t+=e.charCodeAt(i))+(t+=e.charCodeAt(i+1))+(t+=e.charCodeAt(i+2))+(t+=e.charCodeAt(i+3));t%=r,n%=r}for(;i<o;i++)n+=t+=e.charCodeAt(i);return t%=r,n%=r,t|n<<16}var r=65521;t.exports=i},{}],110:[function(e,t,n){"use strict";var i=!1;t.exports=i},{}],111:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i,l,u){for(var c in e)if(e.hasOwnProperty(c)){var d;try{"function"!=typeof e[c]?r("84",i||"React class",o[n],c):void 0,d=e[c](t,c,i,n,null,a)}catch(e){d=e}d instanceof Error&&!(d.message in s)&&(s[d.message]=!0)}}var r=e(132),o=e(74),a=e(77);e(154),e(161),"undefined"!=typeof n&&n.env,1;var s={};t.exports=i}).call(this,void 0)},{132:132,154:154,161:161,74:74,77:77}],112:[function(e,t,n){"use strict";var i=function(e){return"undefined"!=typeof MSApp&&MSApp.execUnsafeLocalFunction?function(t,n,i,r){MSApp.execUnsafeLocalFunction(function(){return e(t,n,i,r)})}:e};t.exports=i},{}],113:[function(e,t,n){"use strict";function i(e,t,n){var i=null==t||"boolean"==typeof t||""===t;if(i)return"";var r=isNaN(t);return r||0===t||o.hasOwnProperty(e)&&o[e]?""+t:("string"==typeof t&&(t=t.trim()),t+"px")}var r=e(3),o=(e(161),r.isUnitlessNumber);t.exports=i},{161:161,3:3}],114:[function(e,t,n){"use strict";function i(e){var t=""+e,n=o.exec(t);if(!n)return t;var i,r="",a=0,s=0;for(a=n.index;a<t.length;a++){switch(t.charCodeAt(a)){case 34:i="&quot;";break;case 38:i="&amp;";break;case 39:i="&#x27;";break;case 60:i="&lt;";break;case 62:i="&gt;";break;default:continue}s!==a&&(r+=t.substring(s,a)),s=a+1,r+=i}return s!==a?r+t.substring(s,a):r}function r(e){return"boolean"==typeof e||"number"==typeof e?""+e:i(e)}var o=/["'&<>]/;t.exports=r},{}],115:[function(e,t,n){"use strict";function i(e){if(null==e)return null;if(1===e.nodeType)return e;var t=a.get(e);return t?(t=s(t),t?o.getNodeFromInstance(t):null):void("function"==typeof e.render?r("44"):r("45",Object.keys(e)))}var r=e(132),o=(e(35),e(40)),a=e(65),s=e(122);e(154),e(161),t.exports=i},{122:122,132:132,154:154,161:161,35:35,40:40,65:65}],116:[function(e,t,n){(function(n){"use strict";function i(e,t,n,i){if(e&&"object"==typeof e){var r=e,o=void 0===r[n];o&&null!=t&&(r[n]=t)}}function r(e,t){if(null==e)return e;var n={};return o(e,i,n),n}var o=(e(23),e(137));e(161),"undefined"!=typeof n&&n.env,t.exports=r}).call(this,void 0)},{137:137,161:161,23:23}],117:[function(e,t,n){"use strict";function i(e,t,n){Array.isArray(e)?e.forEach(t,n):e&&t.call(n,e)}t.exports=i},{}],118:[function(e,t,n){"use strict";function i(e){var t,n=e.keyCode;return"charCode"in e?(t=e.charCode,0===t&&13===n&&(t=13)):t=n,t>=32||13===t?t:0}t.exports=i},{}],119:[function(e,t,n){"use strict";function i(e){if(e.key){var t=o[e.key]||e.key;if("Unidentified"!==t)return t}if("keypress"===e.type){var n=r(e);return 13===n?"Enter":String.fromCharCode(n)}return"keydown"===e.type||"keyup"===e.type?a[e.keyCode]||"Unidentified":""}var r=e(118),o={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},a={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"};t.exports=i},{118:118}],120:[function(e,t,n){"use strict";function i(e){var t=this,n=t.nativeEvent;if(n.getModifierState)return n.getModifierState(e);var i=o[e];return!!i&&!!n[i]}function r(e){return i}var o={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};t.exports=r},{}],121:[function(e,t,n){"use strict";function i(e){var t=e.target||e.srcElement||window;return t.correspondingUseElement&&(t=t.correspondingUseElement),3===t.nodeType?t.parentNode:t}t.exports=i},{}],122:[function(e,t,n){"use strict";function i(e){for(var t;(t=e._renderedNodeType)===r.COMPOSITE;)e=e._renderedComponent;return t===r.HOST?e._renderedComponent:t===r.EMPTY?null:void 0}var r=e(71);t.exports=i},{71:71}],123:[function(e,t,n){"use strict";function i(e){var t=e&&(r&&e[r]||e[o]);if("function"==typeof t)return t}var r="function"==typeof Symbol&&Symbol.iterator,o="@@iterator";t.exports=i},{}],124:[function(e,t,n){"use strict";function i(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function r(e){for(;e;){if(e.nextSibling)return e.nextSibling;e=e.parentNode}}function o(e,t){for(var n=i(e),o=0,a=0;n;){if(3===n.nodeType){if(a=o+n.textContent.length,o<=t&&a>=t)return{node:n,offset:t-o};o=a}n=i(r(n))}}t.exports=o},{}],125:[function(e,t,n){"use strict";function i(){return!o&&r.canUseDOM&&(o="textContent"in document.documentElement?"textContent":"innerText"),o}var r=e(140),o=null;t.exports=i},{140:140}],126:[function(e,t,n){"use strict";function i(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n["ms"+e]="MS"+t,n["O"+e]="o"+t.toLowerCase(),n}function r(e){if(s[e])return s[e];if(!a[e])return e;var t=a[e];for(var n in t)if(t.hasOwnProperty(n)&&n in l)return s[e]=t[n];return""}var o=e(140),a={animationend:i("Animation","AnimationEnd"),animationiteration:i("Animation","AnimationIteration"),animationstart:i("Animation","AnimationStart"),transitionend:i("Transition","TransitionEnd")},s={},l={};o.canUseDOM&&(l=document.createElement("div").style,"AnimationEvent"in window||(delete a.animationend.animation,delete a.animationiteration.animation,
delete a.animationstart.animation),"TransitionEvent"in window||delete a.transitionend.transition),t.exports=r},{140:140}],127:[function(e,t,n){"use strict";function i(e){if(e){var t=e.getName();if(t)return" Check the render method of `"+t+"`."}return""}function r(e){return"function"==typeof e&&"undefined"!=typeof e.prototype&&"function"==typeof e.prototype.mountComponent&&"function"==typeof e.prototype.receiveComponent}function o(e,t){var n;if(null===e||e===!1)n=u.create(o);else if("object"==typeof e){var s=e;!s||"function"!=typeof s.type&&"string"!=typeof s.type?a("130",null==s.type?s.type:typeof s.type,i(s._owner)):void 0,"string"==typeof s.type?n=c.createInternalComponent(s):r(s.type)?(n=new s.type(s),n.getHostNode||(n.getHostNode=n.getNativeNode)):n=new d(s)}else"string"==typeof e||"number"==typeof e?n=c.createInstanceForText(e):a("131",typeof e);return n._mountIndex=0,n._mountImage=null,n}var a=e(132),s=e(162),l=e(34),u=e(57),c=e(62),d=(e(154),e(161),function(e){this.construct(e)});s(d.prototype,l.Mixin,{_instantiateReactComponent:o}),t.exports=o},{132:132,154:154,161:161,162:162,34:34,57:57,62:62}],128:[function(e,t,n){"use strict";function i(e,t){if(!o.canUseDOM||t&&!("addEventListener"in document))return!1;var n="on"+e,i=n in document;if(!i){var a=document.createElement("div");a.setAttribute(n,"return;"),i="function"==typeof a[n]}return!i&&r&&"wheel"===e&&(i=document.implementation.hasFeature("Events.wheel","3.0")),i}var r,o=e(140);o.canUseDOM&&(r=document.implementation&&document.implementation.hasFeature&&document.implementation.hasFeature("","")!==!0),t.exports=i},{140:140}],129:[function(e,t,n){"use strict";function i(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!r[e.type]:"textarea"===t}var r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};t.exports=i},{}],130:[function(e,t,n){"use strict";function i(e){return o.isValidElement(e)?void 0:r("143"),e}var r=e(132),o=e(56);e(154),t.exports=i},{132:132,154:154,56:56}],131:[function(e,t,n){"use strict";function i(e){return'"'+r(e)+'"'}var r=e(114);t.exports=i},{114:114}],132:[function(e,t,n){"use strict";function i(e){for(var t=arguments.length-1,n="Minified React error #"+e+"; visit http://facebook.github.io/react/docs/error-decoder.html?invariant="+e,i=0;i<t;i++)n+="&args[]="+encodeURIComponent(arguments[i+1]);n+=" for the full message or use the non-minified dev environment for full errors and additional helpful warnings.";var r=new Error(n);throw r.name="Invariant Violation",r.framesToPop=1,r}t.exports=i},{}],133:[function(e,t,n){"use strict";var i=e(68);t.exports=i.renderSubtreeIntoContainer},{68:68}],134:[function(e,t,n){"use strict";var i,r=e(140),o=e(9),a=/^[ \r\n\t\f]/,s=/<(!--|link|noscript|meta|script|style)[ \r\n\t\f\/>]/,l=e(112),u=l(function(e,t){if(e.namespaceURI!==o.svg||"innerHTML"in e)e.innerHTML=t;else{i=i||document.createElement("div"),i.innerHTML="<svg>"+t+"</svg>";for(var n=i.firstChild;n.firstChild;)e.appendChild(n.firstChild)}});if(r.canUseDOM){var c=document.createElement("div");c.innerHTML=" ",""===c.innerHTML&&(u=function(e,t){if(e.parentNode&&e.parentNode.replaceChild(e,e),a.test(t)||"<"===t[0]&&s.test(t)){e.innerHTML=String.fromCharCode(65279)+t;var n=e.firstChild;1===n.data.length?e.removeChild(n):n.deleteData(0,1)}else e.innerHTML=t}),c=null}t.exports=u},{112:112,140:140,9:9}],135:[function(e,t,n){"use strict";var i=e(140),r=e(114),o=e(134),a=function(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t};i.canUseDOM&&("textContent"in document.documentElement||(a=function(e,t){o(e,r(t))})),t.exports=a},{114:114,134:134,140:140}],136:[function(e,t,n){"use strict";function i(e,t){var n=null===e||e===!1,i=null===t||t===!1;if(n||i)return n===i;var r=typeof e,o=typeof t;return"string"===r||"number"===r?"string"===o||"number"===o:"object"===o&&e.type===t.type&&e.key===t.key}t.exports=i},{}],137:[function(e,t,n){"use strict";function i(e,t){return e&&"object"==typeof e&&null!=e.key?u.escape(e.key):t.toString(36)}function r(e,t,n,o){var p=typeof e;if("undefined"!==p&&"boolean"!==p||(e=null),null===e||"string"===p||"number"===p||s.isValidElement(e))return n(o,e,""===t?c+i(e,0):t),1;var f,h,m=0,v=""===t?c:t+d;if(Array.isArray(e))for(var g=0;g<e.length;g++)f=e[g],h=v+i(f,g),m+=r(f,h,n,o);else{var b=l(e);if(b){var y,_=b.call(e);if(b!==e.entries)for(var w=0;!(y=_.next()).done;)f=y.value,h=v+i(f,w++),m+=r(f,h,n,o);else for(;!(y=_.next()).done;){var C=y.value;C&&(f=C[1],h=v+u.escape(C[0])+d+i(f,0),m+=r(f,h,n,o))}}else if("object"===p){var E="",k=String(e);a("31","[object Object]"===k?"object with keys {"+Object.keys(e).join(", ")+"}":k,E)}}return m}function o(e,t,n){return null==e?0:r(e,"",t,n)}var a=e(132),s=(e(35),e(56)),l=e(123),u=(e(154),e(23)),c=(e(161),"."),d=":";t.exports=o},{123:123,132:132,154:154,161:161,23:23,35:35,56:56}],138:[function(e,t,n){"use strict";var i=(e(162),e(146)),r=(e(161),i);t.exports=r},{146:146,161:161,162:162}],139:[function(e,t,n){"use strict";var i=e(146),r={listen:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!1),{remove:function(){e.removeEventListener(t,n,!1)}}):e.attachEvent?(e.attachEvent("on"+t,n),{remove:function(){e.detachEvent("on"+t,n)}}):void 0},capture:function(e,t,n){return e.addEventListener?(e.addEventListener(t,n,!0),{remove:function(){e.removeEventListener(t,n,!0)}}):{remove:i}},registerDefault:function(){}};t.exports=r},{146:146}],140:[function(e,t,n){"use strict";var i=!("undefined"==typeof window||!window.document||!window.document.createElement),r={canUseDOM:i,canUseWorkers:"undefined"!=typeof Worker,canUseEventListeners:i&&!(!window.addEventListener&&!window.attachEvent),canUseViewport:i&&!!window.screen,isInWorker:!i};t.exports=r},{}],141:[function(e,t,n){"use strict";function i(e){return e.replace(r,function(e,t){return t.toUpperCase()})}var r=/-(.)/g;t.exports=i},{}],142:[function(e,t,n){"use strict";function i(e){return r(e.replace(o,"ms-"))}var r=e(141),o=/^-ms-/;t.exports=i},{141:141}],143:[function(e,t,n){"use strict";function i(e,t){return!(!e||!t)&&(e===t||!r(e)&&(r(t)?i(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}var r=e(156);t.exports=i},{156:156}],144:[function(e,t,n){"use strict";function i(e){var t=e.length;if(Array.isArray(e)||"object"!=typeof e&&"function"!=typeof e?a(!1):void 0,"number"!=typeof t?a(!1):void 0,0===t||t-1 in e?void 0:a(!1),"function"==typeof e.callee?a(!1):void 0,e.hasOwnProperty)try{return Array.prototype.slice.call(e)}catch(e){}for(var n=Array(t),i=0;i<t;i++)n[i]=e[i];return n}function r(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"length"in e&&!("setInterval"in e)&&"number"!=typeof e.nodeType&&(Array.isArray(e)||"callee"in e||"item"in e)}function o(e){return r(e)?Array.isArray(e)?e.slice():i(e):[e]}var a=e(154);t.exports=o},{154:154}],145:[function(e,t,n){"use strict";function i(e){var t=e.match(c);return t&&t[1].toLowerCase()}function r(e,t){var n=u;u?void 0:l(!1);var r=i(e),o=r&&s(r);if(o){n.innerHTML=o[1]+e+o[2];for(var c=o[0];c--;)n=n.lastChild}else n.innerHTML=e;var d=n.getElementsByTagName("script");d.length&&(t?void 0:l(!1),a(d).forEach(t));for(var p=Array.from(n.childNodes);n.lastChild;)n.removeChild(n.lastChild);return p}var o=e(140),a=e(144),s=e(150),l=e(154),u=o.canUseDOM?document.createElement("div"):null,c=/^\s*<(\w+)/;t.exports=r},{140:140,144:144,150:150,154:154}],146:[function(e,t,n){"use strict";function i(e){return function(){return e}}var r=function(){};r.thatReturns=i,r.thatReturnsFalse=i(!1),r.thatReturnsTrue=i(!0),r.thatReturnsNull=i(null),r.thatReturnsThis=function(){return this},r.thatReturnsArgument=function(e){return e},t.exports=r},{}],147:[function(e,t,n){"use strict";var i={};t.exports=i},{}],148:[function(e,t,n){"use strict";function i(e){try{e.focus()}catch(e){}}t.exports=i},{}],149:[function(e,t,n){"use strict";function i(){if("undefined"==typeof document)return null;try{return document.activeElement||document.body}catch(e){return document.body}}t.exports=i},{}],150:[function(e,t,n){"use strict";function i(e){return a?void 0:o(!1),p.hasOwnProperty(e)||(e="*"),s.hasOwnProperty(e)||("*"===e?a.innerHTML="<link />":a.innerHTML="<"+e+"></"+e+">",s[e]=!a.firstChild),s[e]?p[e]:null}var r=e(140),o=e(154),a=r.canUseDOM?document.createElement("div"):null,s={},l=[1,'<select multiple="true">',"</select>"],u=[1,"<table>","</table>"],c=[3,"<table><tbody><tr>","</tr></tbody></table>"],d=[1,'<svg xmlns="http://www.w3.org/2000/svg">',"</svg>"],p={"*":[1,"?<div>","</div>"],area:[1,"<map>","</map>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],legend:[1,"<fieldset>","</fieldset>"],param:[1,"<object>","</object>"],tr:[2,"<table><tbody>","</tbody></table>"],optgroup:l,option:l,caption:u,colgroup:u,tbody:u,tfoot:u,thead:u,td:c,th:c},f=["circle","clipPath","defs","ellipse","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","text","tspan"];f.forEach(function(e){p[e]=d,s[e]=!0}),t.exports=i},{140:140,154:154}],151:[function(e,t,n){"use strict";function i(e){return e===window?{x:window.pageXOffset||document.documentElement.scrollLeft,y:window.pageYOffset||document.documentElement.scrollTop}:{x:e.scrollLeft,y:e.scrollTop}}t.exports=i},{}],152:[function(e,t,n){"use strict";function i(e){return e.replace(r,"-$1").toLowerCase()}var r=/([A-Z])/g;t.exports=i},{}],153:[function(e,t,n){"use strict";function i(e){return r(e).replace(o,"-ms-")}var r=e(152),o=/^ms-/;t.exports=i},{152:152}],154:[function(e,t,n){"use strict";function i(e,t,n,i,r,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}}t.exports=i},{}],155:[function(e,t,n){"use strict";function i(e){return!(!e||!("function"==typeof Node?e instanceof Node:"object"==typeof e&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName))}t.exports=i},{}],156:[function(e,t,n){"use strict";function i(e){return r(e)&&3==e.nodeType}var r=e(155);t.exports=i},{155:155}],157:[function(e,t,n){"use strict";var i=e(154),r=function(e){var t,n={};e instanceof Object&&!Array.isArray(e)?void 0:i(!1);for(t in e)e.hasOwnProperty(t)&&(n[t]=t);return n};t.exports=r},{154:154}],158:[function(e,t,n){"use strict";var i=function(e){var t;for(t in e)if(e.hasOwnProperty(t))return t;return null};t.exports=i},{}],159:[function(e,t,n){"use strict";function i(e){var t={};return function(n){return t.hasOwnProperty(n)||(t[n]=e.call(this,n)),t[n]}}t.exports=i},{}],160:[function(e,t,n){"use strict";function i(e,t){return e===t?0!==e||1/e===1/t:e!==e&&t!==t}function r(e,t){if(i(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(var a=0;a<n.length;a++)if(!o.call(t,n[a])||!i(e[n[a]],t[n[a]]))return!1;return!0}var o=Object.prototype.hasOwnProperty;t.exports=r},{}],161:[function(e,t,n){"use strict";var i=e(146),r=i;t.exports=r},{146:146}],162:[function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}function r(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;var i=Object.getOwnPropertyNames(t).map(function(e){return t[e]});if("0123456789"!==i.join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(e){return!1}}var o=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;t.exports=r()?Object.assign:function(e,t){for(var n,r,s=i(e),l=1;l<arguments.length;l++){n=Object(arguments[l]);for(var u in n)o.call(n,u)&&(s[u]=n[u]);if(Object.getOwnPropertySymbols){r=Object.getOwnPropertySymbols(n);for(var c=0;c<r.length;c++)a.call(n,r[c])&&(s[r[c]]=n[r[c]])}}return s}},{}]},{},[86])(86)}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e(require("react"));else if("function"==typeof define&&define.amd)define("react-dom",["react"],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ReactDOM=e(t.React)}}(function(e){return e.__SECRET_DOM_DO_NOT_USE_OR_YOU_WILL_BE_FIRED}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("redux",[],t):"object"==typeof exports?exports.Redux=t():e.Redux=t()}(this,function(){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.compose=t.applyMiddleware=t.bindActionCreators=t.combineReducers=t.createStore=void 0;var r=n(2),o=i(r),a=n(7),s=i(a),l=n(6),u=i(l),c=n(5),d=i(c),p=n(1),f=i(p),h=n(3);i(h),t.createStore=o.default,t.combineReducers=s.default,t.bindActionCreators=u.default,t.applyMiddleware=d.default,t.compose=f.default},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(){if(0===t.length)return arguments.length>0?arguments[0]:void 0;var e=t[t.length-1],n=t.slice(0,-1);return n.reduceRight(function(e,t){return t(e)},e.apply(void 0,arguments))}}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){function i(){h===f&&(h=f.slice())}function o(){return p}function l(e){if("function"!=typeof e)throw Error("Expected listener to be a function.");var t=!0;return i(),h.push(e),function(){if(t){t=!1,i();var n=h.indexOf(e);h.splice(n,1)}}}function u(e){if(!(0,a.default)(e))throw Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===e.type)throw Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(m)throw Error("Reducers may not dispatch actions.");try{m=!0,p=d(p,e)}finally{m=!1}for(var t=f=h,n=0;t.length>n;n++)t[n]();return e}function c(e){if("function"!=typeof e)throw Error("Expected the nextReducer to be a function.");d=e,u({type:s.INIT})}if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw Error("Expected the enhancer to be a function.");return n(r)(e,t)}if("function"!=typeof e)throw Error("Expected the reducer to be a function.");var d=e,p=t,f=[],h=f,m=!1;return u({type:s.INIT}),{dispatch:u,subscribe:l,getState:o,replaceReducer:c}}t.__esModule=!0,t.ActionTypes=void 0,t.default=r;var o=n(4),a=i(o),s=t.ActionTypes={INIT:"@@redux/INIT"}},function(e,t){"use strict";function n(e){"undefined"!=typeof console&&"function"==typeof console.error&&console.error(e);try{throw Error(e)}catch(e){}}t.__esModule=!0,t.default=n},function(e,t,n){function i(e){if(!o(e)||c.call(e)!=a||r(e))return!1;var t=s;if("function"==typeof e.constructor&&(t=d(e)),null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}var r=n(8),o=n(9),a="[object Object]",s=Object.prototype,l=Function.prototype.toString,u=l.call(Object),c=s.toString,d=Object.getPrototypeOf;e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return function(e){return function(n,i,r){var a=e(n,i,r),l=a.dispatch,u=[],c={getState:a.getState,dispatch:function(e){return l(e)}};return u=t.map(function(e){return e(c)}),l=s.default.apply(void 0,u)(a.dispatch),o({},a,{dispatch:l})}}}var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.__esModule=!0,t.default=r;var a=n(1),s=i(a)},function(e,t){"use strict";function n(e,t){return function(){return t(e.apply(void 0,arguments))}}function i(e,t){if("function"==typeof e)return n(e,t);if("object"!=typeof e||null===e)throw Error("bindActionCreators expected an object or a function, instead received "+(null===e?"null":typeof e)+'. Did you write "import ActionCreators from" instead of "import * as ActionCreators from"?');for(var i=Object.keys(e),r={},o=0;i.length>o;o++){var a=i[o],s=e[a];"function"==typeof s&&(r[a]=n(s,t))}return r}t.__esModule=!0,t.default=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t&&t.type,i=n&&'"'+n+'"'||"an action";return'Reducer "'+e+'" returned undefined handling '+i+". To ignore an action, you must explicitly return the previous state."}function o(e){Object.keys(e).forEach(function(t){var n=e[t],i=n(void 0,{type:s.ActionTypes.INIT});if(void 0===i)throw Error('Reducer "'+t+'" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined.');var r="@@redux/PROBE_UNKNOWN_ACTION_"+Math.random().toString(36).substring(7).split("").join(".");if(void 0===n(void 0,{type:r}))throw Error('Reducer "'+t+'" returned undefined when probed with a random type. '+("Don't try to handle "+s.ActionTypes.INIT+' or other actions in "redux/*" ')+"namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined.")})}function a(e){for(var t=Object.keys(e),n={},i=0;t.length>i;i++){var a=t[i];"function"==typeof e[a]&&(n[a]=e[a])}var s,l=Object.keys(n);try{o(n)}catch(e){s=e}return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];if(s)throw s;for(var i=!1,o={},a=0;l.length>a;a++){var u=l[a],c=n[u],d=e[u],p=c(d,t);if(void 0===p){var f=r(u,t);throw Error(f)}o[u]=p,i=i||p!==d}return i?o:e}}t.__esModule=!0,t.default=a;var s=n(2),l=n(4),u=(i(l),n(3));i(u)},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n}])}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("redux")):"function"==typeof define&&define.amd?define("react-redux",["react","redux"],t):"object"==typeof exports?exports.ReactRedux=t(require("react"),require("redux")):e.ReactRedux=t(e.React,e.Redux)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.connect=t.Provider=void 0;var r=n(3),o=i(r),a=n(4),s=i(a);t.Provider=o.default,t.connect=s.default},function(t,n){t.exports=e},function(e,t,n){"use strict";t.__esModule=!0;var i=n(1);t.default=i.PropTypes.shape({subscribe:i.PropTypes.func.isRequired,dispatch:i.PropTypes.func.isRequired,getState:i.PropTypes.func.isRequired})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(){d||(d=!0,"undefined"!=typeof console&&"function"==typeof console.error&&console.error("<Provider> does not support changing `store` on the fly. It is most likely that you see this error because you updated to Redux 2.x and React Redux 2.x which no longer hot reload reducers automatically. See https://github.com/rackt/react-redux/releases/tag/v2.0.0 for the migration instructions."))}t.__esModule=!0,t.default=void 0;var l=n(1),u=n(2),c=i(u),d=!1,p=function(e){function t(n,i){r(this,t);var a=o(this,e.call(this,n,i));return a.store=n.store,a}return a(t,e),t.prototype.getChildContext=function(){return{store:this.store}},t.prototype.render=function(){var e=this.props.children;return l.Children.only(e)},t}(l.Component);t.default=p,p.prototype.componentWillReceiveProps=function(e){var t=this.store,n=e.store;t!==n&&s()},p.propTypes={store:c.default.isRequired,children:l.PropTypes.element.isRequired},p.childContextTypes={store:c.default.isRequired}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return e.displayName||e.name||"Component"}function l(e,t){return(0,E.default)((0,y.default)(e),"`%sToProps` must return an object. Instead received %s.",t?"mapDispatch":"mapState",e),e}function u(e,t,n){function i(e,t,n){var i=b(e,t,n);return(0,E.default)((0,y.default)(i),"`mergeProps` must return an object. Instead received %s.",i),i}var u=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],p=Boolean(e),h=e||k,v=(0,y.default)(t)?(0,g.default)(t):t||T,b=n||x,_=b!==x,C=u.pure,P=void 0===C||C,O=u.withRef,I=void 0!==O&&O,M=S++;return function(e){var t=function(t){function n(e,i){r(this,n);var a=o(this,t.call(this,e,i));a.version=M,a.store=e.store||i.store,(0,E.default)(a.store,'Could not find "store" in either the context or '+('props of "'+a.constructor.displayName+'". ')+"Either wrap the root component in a <Provider>, "+('or explicitly pass "store" as a prop to "'+a.constructor.displayName+'".'));var s=a.store.getState();return a.state={storeState:s},a.clearCache(),a}return a(n,t),n.prototype.shouldComponentUpdate=function(){return!P||this.haveOwnPropsChanged||this.hasStoreStateChanged},n.prototype.computeStateProps=function(e,t){if(!this.finalMapStateToProps)return this.configureFinalMapState(e,t);var n=e.getState(),i=this.doStatePropsDependOnOwnProps?this.finalMapStateToProps(n,t):this.finalMapStateToProps(n);return l(i)},n.prototype.configureFinalMapState=function(e,t){var n=h(e.getState(),t),i="function"==typeof n;return this.finalMapStateToProps=i?n:h,this.doStatePropsDependOnOwnProps=1!==this.finalMapStateToProps.length,i?this.computeStateProps(e,t):l(n)},n.prototype.computeDispatchProps=function(e,t){if(!this.finalMapDispatchToProps)return this.configureFinalMapDispatch(e,t);var n=e.dispatch,i=this.doDispatchPropsDependOnOwnProps?this.finalMapDispatchToProps(n,t):this.finalMapDispatchToProps(n);return l(i,!0)},n.prototype.configureFinalMapDispatch=function(e,t){var n=v(e.dispatch,t),i="function"==typeof n;return this.finalMapDispatchToProps=i?n:v,this.doDispatchPropsDependOnOwnProps=1!==this.finalMapDispatchToProps.length,i?this.computeDispatchProps(e,t):l(n,!0)},n.prototype.updateStatePropsIfNeeded=function(){var e=this.computeStateProps(this.store,this.props);return(!this.stateProps||!(0,m.default)(e,this.stateProps))&&(this.stateProps=e,!0)},n.prototype.updateDispatchPropsIfNeeded=function(){var e=this.computeDispatchProps(this.store,this.props);return(!this.dispatchProps||!(0,m.default)(e,this.dispatchProps))&&(this.dispatchProps=e,!0)},n.prototype.updateMergedPropsIfNeeded=function(){var e=i(this.stateProps,this.dispatchProps,this.props);return!(this.mergedProps&&_&&(0,m.default)(e,this.mergedProps))&&(this.mergedProps=e,!0)},n.prototype.isSubscribed=function(){return"function"==typeof this.unsubscribe},n.prototype.trySubscribe=function(){p&&!this.unsubscribe&&(this.unsubscribe=this.store.subscribe(this.handleChange.bind(this)),this.handleChange())},n.prototype.tryUnsubscribe=function(){this.unsubscribe&&(this.unsubscribe(),this.unsubscribe=null)},n.prototype.componentDidMount=function(){this.trySubscribe()},n.prototype.componentWillReceiveProps=function(e){P&&(0,m.default)(e,this.props)||(this.haveOwnPropsChanged=!0)},n.prototype.componentWillUnmount=function(){this.tryUnsubscribe(),this.clearCache()},n.prototype.clearCache=function(){this.dispatchProps=null,this.stateProps=null,this.mergedProps=null,this.haveOwnPropsChanged=!0,this.hasStoreStateChanged=!0,this.renderedElement=null,this.finalMapDispatchToProps=null,this.finalMapStateToProps=null},n.prototype.handleChange=function(){if(this.unsubscribe){var e=this.state.storeState,t=this.store.getState();P&&e===t||(this.hasStoreStateChanged=!0,this.setState({storeState:t}))}},n.prototype.getWrappedInstance=function(){return(0,E.default)(I,"To access the wrapped instance, you need to specify { withRef: true } as the fourth argument of the connect() call."),this.refs.wrappedInstance},n.prototype.render=function(){var t=this.haveOwnPropsChanged,n=this.hasStoreStateChanged,i=this.renderedElement;this.haveOwnPropsChanged=!1,this.hasStoreStateChanged=!1;var r=!0,o=!0;P&&i&&(r=n||t&&this.doStatePropsDependOnOwnProps,o=t&&this.doDispatchPropsDependOnOwnProps);var a=!1,s=!1;r&&(a=this.updateStatePropsIfNeeded()),o&&(s=this.updateDispatchPropsIfNeeded());var l=!0;return l=!!(a||s||t)&&this.updateMergedPropsIfNeeded(),!l&&i?i:(I?this.renderedElement=(0,d.createElement)(e,c({},this.mergedProps,{ref:"wrappedInstance"})):this.renderedElement=(0,d.createElement)(e,this.mergedProps),this.renderedElement)},n}(d.Component);return t.displayName="Connect("+s(e)+")",t.WrappedComponent=e,t.contextTypes={store:f.default},t.propTypes={store:f.default},t.prototype.componentWillUpdate=function(){this.version!==M&&(this.version=M,this.trySubscribe(),this.clearCache())},(0,w.default)(t,e)}}var c=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.__esModule=!0,t.default=u;var d=n(1),p=n(2),f=i(p),h=n(5),m=i(h),v=n(6),g=i(v),b=n(11),y=i(b),_=n(7),w=i(_),C=n(8),E=i(C),k=function(e){return{}},T=function(e){return{dispatch:e}},x=function(e,t,n){return c({},n,e,t)},S=0},function(e,t){"use strict";function n(e,t){if(e===t)return!0;var n=Object.keys(e),i=Object.keys(t);if(n.length!==i.length)return!1;for(var r=Object.prototype.hasOwnProperty,o=0;o<n.length;o++)if(!r.call(t,n[o])||e[n[o]]!==t[n[o]])return!1;return!0}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function i(e){return function(t){return(0,r.bindActionCreators)(e,t)}}t.__esModule=!0,t.default=i;var r=n(12)},function(e,t){"use strict";var n={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,mixins:!0,propTypes:!0,type:!0},i={name:!0,length:!0,prototype:!0,caller:!0,arguments:!0,arity:!0};e.exports=function(e,t){for(var r=Object.getOwnPropertyNames(t),o=0;o<r.length;++o)n[r[o]]||i[r[o]]||(e[r[o]]=t[r[o]]);return e}},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,a,s){if(void 0===t)throw new Error("invariant requires an error message argument");if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=i},function(e,t){function n(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}e.exports=n},function(e,t){function n(e){return!!e&&"object"==typeof e}e.exports=n},function(e,t,n){function i(e){if(!o(e)||c.call(e)!=a||r(e))return!1;var t=s;if("function"==typeof e.constructor&&(t=d(e)),null===t)return!0;var n=t.constructor;return"function"==typeof n&&n instanceof n&&l.call(n)==u}var r=n(9),o=n(10),a="[object Object]",s=Object.prototype,l=Function.prototype.toString,u=l.call(Object),c=s.toString,d=Object.getPrototypeOf;e.exports=i},function(e,n){e.exports=t}])}),define("storymaps-react/tpl/builder/overviewPanel/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.TOGGLE_ORGANIZE="TOGGLE_ORGANIZE",e.CHANGE_SELECTED_ITEM="CHANGE_SELECTED_ITEM",e.UPDATE_ITEMS="UPDATE_ITEMS",e.UPDATE_ORDER="UPDATE_ORDER"}),define("storymaps-react/tpl/builder/overviewPanel/reducer",["module","exports","./actionTypes"],function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case o.CHANGE_SELECTED_ITEM:return Object.assign({},e,{selectedItem:t.value});case o.TOGGLE_ORGANIZE:return Object.assign({},e,{organize:!e.organize});case o.UPDATE_ITEMS:return Object.assign({},e,{items:t.value});case o.UPDATE_ORDER:return Object.assign({},e,{order:t.value});default:return e}}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n);t.default=r,e.exports=t.default}),define("storymaps-react/tpl/builder/overviewPanel/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(){return{type:s.TOGGLE_ORGANIZE,value:null}}function r(e){return{type:s.CHANGE_SELECTED_ITEM,value:e}}function o(e){return{type:s.UPDATE_ITEMS,value:e}}function a(e){return{type:s.UPDATE_ORDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.toggleOrganize=i,e.changeSelectedItem=r,e.updateItems=o,e.updateOrder=a;var s=n(t)}),function(e){"use strict";"function"==typeof define&&define.amd?define("lib/Sortable/Sortable",e):"undefined"!=typeof module&&"undefined"!=typeof module.exports?module.exports=e():"undefined"!=typeof Package?Sortable=e():window.Sortable=e()}(function(){"use strict";function e(e,t){if(!e||!e.nodeType||1!==e.nodeType)throw"Sortable: `el` must be HTMLElement, and not "+{}.toString.call(e);this.el=e,this.options=t=g({},t),e[R]=this;var n={group:Math.random(),sort:!0,disabled:!1,store:null,handle:null,scroll:!0,scrollSensitivity:30,scrollSpeed:10,draggable:/[uo]l/i.test(e.nodeName)?"li":">*",ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",ignore:"a, img",filter:null,animation:0,setData:function(e,t){e.setData("Text",t.textContent)},dropBubble:!1,dragoverBubble:!1,dataIdAttr:"data-id",delay:0,forceFallback:!1,fallbackClass:"sortable-fallback",fallbackOnBody:!1};for(var i in n)!(i in t)&&(t[i]=n[i]);q(t);for(var o in this)"_"===o.charAt(0)&&(this[o]=this[o].bind(this));this.nativeDraggable=!t.forceFallback&&$,r(e,"mousedown",this._onTapStart),r(e,"touchstart",this._onTapStart),this.nativeDraggable&&(r(e,"dragover",this),r(e,"dragenter",this)),V.push(this._onDragOver),t.store&&this.sort(t.store.get(this))}function t(e){w&&w.state!==e&&(s(w,"display",e?"none":""),!e&&w.state&&C.insertBefore(w,b),w.state=e)}function n(e,t,n){if(e){
n=n||B,t=t.split(".");var i=t.shift().toUpperCase(),r=new RegExp("\\s("+t.join("|")+")(?=\\s)","g");do if(">*"===i&&e.parentNode===n||(""===i||e.nodeName.toUpperCase()==i)&&(!t.length||((" "+e.className+" ").match(r)||[]).length==t.length))return e;while(e!==n&&(e=e.parentNode))}return null}function i(e){e.dataTransfer&&(e.dataTransfer.dropEffect="move"),e.preventDefault()}function r(e,t,n){e.addEventListener(t,n,!1)}function o(e,t,n){e.removeEventListener(t,n,!1)}function a(e,t,n){if(e)if(e.classList)e.classList[n?"add":"remove"](t);else{var i=(" "+e.className+" ").replace(D," ").replace(" "+t+" "," ");e.className=(i+(n?" "+t:"")).replace(D," ")}}function s(e,t,n){var i=e&&e.style;if(i){if(void 0===n)return B.defaultView&&B.defaultView.getComputedStyle?n=B.defaultView.getComputedStyle(e,""):e.currentStyle&&(n=e.currentStyle),void 0===t?n:n[t];t in i||(t="-webkit-"+t),i[t]=n+("string"==typeof n?"":"px")}}function l(e,t,n){if(e){var i=e.getElementsByTagName(t),r=0,o=i.length;if(n)for(;r<o;r++)n(i[r],r);return i}return[]}function u(e,t,n,i,r,o,a){var s=B.createEvent("Event"),l=(e||t[R]).options,u="on"+n.charAt(0).toUpperCase()+n.substr(1);s.initEvent(n,!0,!0),s.to=t,s.from=r||t,s.item=i||t,s.clone=w,s.oldIndex=o,s.newIndex=a,t.dispatchEvent(s),l[u]&&l[u].call(e,s)}function c(e,t,n,i,r,o){var a,s,l=e[R],u=l.options.onMove;return a=B.createEvent("Event"),a.initEvent("move",!0,!0),a.to=t,a.from=e,a.dragged=n,a.draggedRect=i,a.related=r||t,a.relatedRect=o||t.getBoundingClientRect(),e.dispatchEvent(a),u&&(s=u.call(l,a)),s}function d(e){e.draggable=!1}function p(){z=!1}function f(e,t){var n=e.lastElementChild,i=n.getBoundingClientRect();return(t.clientY-(i.top+i.height)>5||t.clientX-(i.right+i.width)>5)&&n}function h(e){for(var t=e.tagName+e.className+e.src+e.href+e.textContent,n=t.length,i=0;n--;)i+=t.charCodeAt(n);return i.toString(36)}function m(e){var t=0;if(!e||!e.parentNode)return-1;for(;e&&(e=e.previousElementSibling);)"TEMPLATE"!==e.nodeName.toUpperCase()&&t++;return t}function v(e,t){var n,i;return function(){void 0===n&&(n=arguments,i=this,setTimeout(function(){1===n.length?e.call(i,n[0]):e.apply(i,n),n=void 0},t))}}function g(e,t){if(e&&t)for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e}var b,y,_,w,C,E,k,T,x,S,P,O,I,M,A,N,j,L={},D=/\s+/g,R="Sortable"+(new Date).getTime(),F=window,B=F.document,U=F.parseInt,$=!!("draggable"in B.createElement("div")),H=function(e){return e=B.createElement("x"),e.style.cssText="pointer-events:auto","auto"===e.style.pointerEvents}(),z=!1,W=Math.abs,V=([].slice,[]),G=v(function(e,t,n){if(n&&t.scroll){var i,r,o,a,s=t.scrollSensitivity,l=t.scrollSpeed,u=e.clientX,c=e.clientY,d=window.innerWidth,p=window.innerHeight;if(T!==n&&(k=t.scroll,T=n,k===!0)){k=n;do if(k.offsetWidth<k.scrollWidth||k.offsetHeight<k.scrollHeight)break;while(k=k.parentNode)}k&&(i=k,r=k.getBoundingClientRect(),o=(W(r.right-u)<=s)-(W(r.left-u)<=s),a=(W(r.bottom-c)<=s)-(W(r.top-c)<=s)),o||a||(o=(d-u<=s)-(u<=s),a=(p-c<=s)-(c<=s),(o||a)&&(i=F)),L.vx===o&&L.vy===a&&L.el===i||(L.el=i,L.vx=o,L.vy=a,clearInterval(L.pid),i&&(L.pid=setInterval(function(){i===F?F.scrollTo(F.pageXOffset+o*l,F.pageYOffset+a*l):(a&&(i.scrollTop+=a*l),o&&(i.scrollLeft+=o*l))},24)))}},30),q=function(e){var t=e.group;t&&"object"==typeof t||(t=e.group={name:t}),["pull","put"].forEach(function(e){e in t||(t[e]=!0)}),e.groups=" "+t.name+(t.put.join?" "+t.put.join(" "):"")+" "};return e.prototype={constructor:e,_onTapStart:function(e){var t=this,i=this.el,r=this.options,o=e.type,a=e.touches&&e.touches[0],s=(a||e).target,l=s,c=r.filter;if(!("mousedown"===o&&0!==e.button||r.disabled)&&(s=n(s,r.draggable,i))){if(O=m(s),"function"==typeof c){if(c.call(this,e,s,this))return u(t,l,"filter",s,i,O),void e.preventDefault()}else if(c&&(c=c.split(",").some(function(e){if(e=n(l,e.trim(),i))return u(t,e,"filter",s,i,O),!0})))return void e.preventDefault();r.handle&&!n(l,r.handle,i)||this._prepareDragStart(e,a,s)}},_prepareDragStart:function(e,t,n){var i,o=this,s=o.el,u=o.options,c=s.ownerDocument;n&&!b&&n.parentNode===s&&(A=e,C=s,b=n,y=b.parentNode,E=b.nextSibling,M=u.group,i=function(){o._disableDelayedDrag(),b.draggable=!0,a(b,o.options.chosenClass,!0),o._triggerDragStart(t)},u.ignore.split(",").forEach(function(e){l(b,e.trim(),d)}),r(c,"mouseup",o._onDrop),r(c,"touchend",o._onDrop),r(c,"touchcancel",o._onDrop),u.delay?(r(c,"mouseup",o._disableDelayedDrag),r(c,"touchend",o._disableDelayedDrag),r(c,"touchcancel",o._disableDelayedDrag),r(c,"mousemove",o._disableDelayedDrag),r(c,"touchmove",o._disableDelayedDrag),o._dragStartTimer=setTimeout(i,u.delay)):i())},_disableDelayedDrag:function(){var e=this.el.ownerDocument;clearTimeout(this._dragStartTimer),o(e,"mouseup",this._disableDelayedDrag),o(e,"touchend",this._disableDelayedDrag),o(e,"touchcancel",this._disableDelayedDrag),o(e,"mousemove",this._disableDelayedDrag),o(e,"touchmove",this._disableDelayedDrag)},_triggerDragStart:function(e){e?(A={target:b,clientX:e.clientX,clientY:e.clientY},this._onDragStart(A,"touch")):this.nativeDraggable?(r(b,"dragend",this),r(C,"dragstart",this._onDragStart)):this._onDragStart(A,!0);try{B.selection?B.selection.empty():window.getSelection().removeAllRanges()}catch(e){}},_dragStarted:function(){C&&b&&(a(b,this.options.ghostClass,!0),e.active=this,u(this,C,"start",b,C,O))},_emulateDragOver:function(){if(N){if(this._lastX===N.clientX&&this._lastY===N.clientY)return;this._lastX=N.clientX,this._lastY=N.clientY,H||s(_,"display","none");var e=B.elementFromPoint(N.clientX,N.clientY),t=e,n=" "+this.options.group.name,i=V.length;if(t)do{if(t[R]&&t[R].options.groups.indexOf(n)>-1){for(;i--;)V[i]({clientX:N.clientX,clientY:N.clientY,target:e,rootEl:t});break}e=t}while(t=t.parentNode);H||s(_,"display","")}},_onTouchMove:function(t){if(A){e.active||this._dragStarted(),this._appendGhost();var n=t.touches?t.touches[0]:t,i=n.clientX-A.clientX,r=n.clientY-A.clientY,o=t.touches?"translate3d("+i+"px,"+r+"px,0)":"translate("+i+"px,"+r+"px)";j=!0,N=n,s(_,"webkitTransform",o),s(_,"mozTransform",o),s(_,"msTransform",o),s(_,"transform",o),t.preventDefault()}},_appendGhost:function(){if(!_){var e,t=b.getBoundingClientRect(),n=s(b),i=this.options;_=b.cloneNode(!0),a(_,i.ghostClass,!1),a(_,i.fallbackClass,!0),s(_,"top",t.top-U(n.marginTop,10)),s(_,"left",t.left-U(n.marginLeft,10)),s(_,"width",t.width),s(_,"height",t.height),s(_,"opacity","0.8"),s(_,"position","fixed"),s(_,"zIndex","100000"),s(_,"pointerEvents","none"),i.fallbackOnBody&&B.body.appendChild(_)||C.appendChild(_),e=_.getBoundingClientRect(),s(_,"width",2*t.width-e.width),s(_,"height",2*t.height-e.height)}},_onDragStart:function(e,t){var n=e.dataTransfer,i=this.options;this._offUpEvents(),"clone"==M.pull&&(w=b.cloneNode(!0),s(w,"display","none"),C.insertBefore(w,b)),t?("touch"===t?(r(B,"touchmove",this._onTouchMove),r(B,"touchend",this._onDrop),r(B,"touchcancel",this._onDrop)):(r(B,"mousemove",this._onTouchMove),r(B,"mouseup",this._onDrop)),this._loopId=setInterval(this._emulateDragOver,50)):(n&&(n.effectAllowed="move",i.setData&&i.setData.call(this,n,b)),r(B,"drop",this),setTimeout(this._dragStarted,0))},_onDragOver:function(e){var i,r,o,a=this.el,l=this.options,u=l.group,d=u.put,h=M===u,m=l.sort;if(void 0!==e.preventDefault&&(e.preventDefault(),!l.dragoverBubble&&e.stopPropagation()),j=!0,M&&!l.disabled&&(h?m||(o=!C.contains(b)):M.pull&&d&&(M.name===u.name||d.indexOf&&~d.indexOf(M.name)))&&(void 0===e.rootEl||e.rootEl===this.el)){if(G(e,l,this.el),z)return;if(i=n(e.target,l.draggable,a),r=b.getBoundingClientRect(),o)return t(!0),void(w||E?C.insertBefore(b,w||E):m||C.appendChild(b));if(0===a.children.length||a.children[0]===_||a===e.target&&(i=f(a,e))){if(i){if(i.animated)return;g=i.getBoundingClientRect()}t(h),c(C,a,b,r,i,g)!==!1&&(b.contains(a)||(a.appendChild(b),y=a),this._animate(r,b),i&&this._animate(g,i))}else if(i&&!i.animated&&i!==b&&void 0!==i.parentNode[R]){x!==i&&(x=i,S=s(i),P=s(i.parentNode));var v,g=i.getBoundingClientRect(),k=g.right-g.left,T=g.bottom-g.top,O=/left|right|inline/.test(S.cssFloat+S.display)||"flex"==P.display&&0===P["flex-direction"].indexOf("row"),I=i.offsetWidth>b.offsetWidth,A=i.offsetHeight>b.offsetHeight,N=(O?(e.clientX-g.left)/k:(e.clientY-g.top)/T)>.5,L=i.nextElementSibling,D=c(C,a,b,r,i,g);if(D!==!1){if(z=!0,setTimeout(p,30),t(h),1===D||D===-1)v=1===D;else if(O){var F=b.offsetTop,B=i.offsetTop;v=F===B?i.previousElementSibling===b&&!I||N&&I:B>F}else v=L!==b&&!A||N&&A;b.contains(a)||(v&&!L?a.appendChild(b):i.parentNode.insertBefore(b,v?L:i)),y=b.parentNode,this._animate(r,b),this._animate(g,i)}}}},_animate:function(e,t){var n=this.options.animation;if(n){var i=t.getBoundingClientRect();s(t,"transition","none"),s(t,"transform","translate3d("+(e.left-i.left)+"px,"+(e.top-i.top)+"px,0)"),t.offsetWidth,s(t,"transition","all "+n+"ms"),s(t,"transform","translate3d(0,0,0)"),clearTimeout(t.animated),t.animated=setTimeout(function(){s(t,"transition",""),s(t,"transform",""),t.animated=!1},n)}},_offUpEvents:function(){var e=this.el.ownerDocument;o(B,"touchmove",this._onTouchMove),o(e,"mouseup",this._onDrop),o(e,"touchend",this._onDrop),o(e,"touchcancel",this._onDrop)},_onDrop:function(t){var n=this.el,i=this.options;clearInterval(this._loopId),clearInterval(L.pid),clearTimeout(this._dragStartTimer),o(B,"mousemove",this._onTouchMove),this.nativeDraggable&&(o(B,"drop",this),o(n,"dragstart",this._onDragStart)),this._offUpEvents(),t&&(j&&(t.preventDefault(),!i.dropBubble&&t.stopPropagation()),_&&_.parentNode.removeChild(_),b&&(this.nativeDraggable&&o(b,"dragend",this),d(b),a(b,this.options.ghostClass,!1),a(b,this.options.chosenClass,!1),C!==y?(I=m(b),I>=0&&(u(null,y,"sort",b,C,O,I),u(this,C,"sort",b,C,O,I),u(null,y,"add",b,C,O,I),u(this,C,"remove",b,C,O,I))):(w&&w.parentNode.removeChild(w),b.nextSibling!==E&&(I=m(b),I>=0&&(u(this,C,"update",b,C,O,I),u(this,C,"sort",b,C,O,I)))),e.active&&(null!==I&&I!==-1||(I=O),u(this,C,"end",b,C,O,I),this.save())),C=b=y=_=E=w=k=T=A=N=j=I=x=S=M=e.active=null)},handleEvent:function(e){var t=e.type;"dragover"===t||"dragenter"===t?b&&(this._onDragOver(e),i(e)):"drop"!==t&&"dragend"!==t||this._onDrop(e)},toArray:function(){for(var e,t=[],i=this.el.children,r=0,o=i.length,a=this.options;r<o;r++)e=i[r],n(e,a.draggable,this.el)&&t.push(e.getAttribute(a.dataIdAttr)||h(e));return t},sort:function(e){var t={},i=this.el;this.toArray().forEach(function(e,r){var o=i.children[r];n(o,this.options.draggable,i)&&(t[e]=o)},this),e.forEach(function(e){t[e]&&(i.removeChild(t[e]),i.appendChild(t[e]))})},save:function(){var e=this.options.store;e&&e.set(this)},closest:function(e,t){return n(e,t||this.options.draggable,this.el)},option:function(e,t){var n=this.options;return void 0===t?n[e]:(n[e]=t,void("group"===e&&q(n)))},destroy:function(){var e=this.el;e[R]=null,o(e,"mousedown",this._onTapStart),o(e,"touchstart",this._onTapStart),this.nativeDraggable&&(o(e,"dragover",this),o(e,"dragenter",this)),Array.prototype.forEach.call(e.querySelectorAll("[draggable]"),function(e){e.removeAttribute("draggable")}),V.splice(V.indexOf(this._onDragOver),1),this._onDrop(),this.el=e=null}},e.utils={on:r,off:o,css:s,find:l,is:function(e,t){return!!n(e,t,e)},extend:g,throttle:v,closest:n,toggleClass:a,index:m},e.create=function(t,n){return new e(t,n)},e.version="1.4.2",e}),!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("react"),require("react-dom")):"function"==typeof define&&define.amd?define("react-bootstrap",["react","react-dom"],t):"object"==typeof exports?exports.ReactBootstrap=t(require("react"),require("react-dom")):e.ReactBootstrap=t(e.React,e.ReactDOM)}(this,function(e,t){return function(e){function t(i){if(n[i])return n[i].exports;var r=n[i]={exports:{},id:i,loaded:!1};return e[i].call(r.exports,r,r.exports,t),r.loaded=!0,r.exports}var n={};return t.m=e,t.c=n,t.p="",t(0)}([function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0,t.utils=t.Well=t.Tooltip=t.Thumbnail=t.Tabs=t.TabPane=t.Table=t.TabContent=t.TabContainer=t.Tab=t.SplitButton=t.SafeAnchor=t.Row=t.ResponsiveEmbed=t.Radio=t.ProgressBar=t.Popover=t.PanelGroup=t.Panel=t.Pagination=t.Pager=t.PageItem=t.PageHeader=t.OverlayTrigger=t.Overlay=t.NavItem=t.NavDropdown=t.NavbarBrand=t.Navbar=t.Nav=t.ModalTitle=t.ModalHeader=t.ModalFooter=t.ModalBody=t.Modal=t.MenuItem=t.Media=t.ListGroupItem=t.ListGroup=t.Label=t.Jumbotron=t.InputGroup=t.Image=t.HelpBlock=t.Grid=t.Glyphicon=t.FormGroup=t.FormControl=t.Form=t.Fade=t.DropdownButton=t.Dropdown=t.Collapse=t.Col=t.ControlLabel=t.Clearfix=t.Checkbox=t.CarouselItem=t.Carousel=t.ButtonToolbar=t.ButtonGroup=t.Button=t.BreadcrumbItem=t.Breadcrumb=t.Badge=t.Alert=t.Accordion=void 0;var o=n(118),a=r(o),s=n(119),l=r(s),u=n(120),c=r(u),d=n(121),p=r(d),f=n(75),h=r(f),m=n(31),v=r(m),g=n(76),b=r(g),y=n(122),_=r(y),w=n(123),C=r(w),E=n(77),k=r(E),T=n(125),x=r(T),S=n(126),P=r(S),O=n(128),I=r(O),M=n(127),A=r(M),N=n(49),j=r(N),L=n(38),D=r(L),R=n(129),F=r(R),B=n(39),U=r(B),$=n(131),H=r($),z=n(132),W=r(z),V=n(135),G=r(V),q=n(50),K=r(q),Y=n(79),Q=r(Y),X=n(136),J=r(X),Z=n(137),ee=r(Z),te=n(138),ne=r(te),ie=n(141),re=r(ie),oe=n(142),ae=r(oe),se=n(143),le=r(se),ue=n(80),ce=r(ue),de=n(51),pe=r(de),fe=n(150),he=r(fe),me=n(151),ve=r(me),ge=n(81),be=r(ge),ye=n(82),_e=r(ye),we=n(83),Ce=r(we),Ee=n(84),ke=r(Ee),Te=n(85),xe=r(Te),Se=n(154),Pe=r(Se),Oe=n(87),Ie=r(Oe),Me=n(153),Ae=r(Me),Ne=n(86),je=r(Ne),Le=n(88),De=r(Le),Re=n(158),Fe=r(Re),Be=n(159),Ue=r(Be),$e=n(160),He=r($e),ze=n(161),We=r(ze),Ve=n(162),Ge=r(Ve),qe=n(164),Ke=r(qe),Ye=n(90),Qe=r(Ye),Xe=n(165),Je=r(Xe),Ze=n(166),et=r(Ze),tt=n(167),nt=r(tt),it=n(168),rt=r(it),ot=n(169),at=r(ot),st=n(15),lt=r(st),ut=n(170),ct=r(ut),dt=n(172),pt=r(dt),ft=n(52),ht=r(ft),mt=n(53),vt=r(mt),gt=n(173),bt=r(gt),yt=n(91),_t=r(yt),wt=n(174),Ct=r(wt),Et=n(175),kt=r(Et),Tt=n(176),xt=r(Tt),St=n(177),Pt=r(St),Ot=n(181),It=i(Ot);t.Accordion=a.default,t.Alert=l.default,t.Badge=c.default,t.Breadcrumb=p.default,t.BreadcrumbItem=h.default,t.Button=v.default,t.ButtonGroup=b.default,t.ButtonToolbar=_.default,t.Carousel=C.default,t.CarouselItem=k.default,t.Checkbox=x.default,t.Clearfix=P.default,t.ControlLabel=I.default,t.Col=A.default,t.Collapse=j.default,t.Dropdown=D.default,t.DropdownButton=F.default,t.Fade=U.default,t.Form=H.default,t.FormControl=W.default,t.FormGroup=G.default,t.Glyphicon=K.default,t.Grid=Q.default,t.HelpBlock=J.default,t.Image=ee.default,t.InputGroup=ne.default,t.Jumbotron=re.default,t.Label=ae.default,t.ListGroup=le.default,t.ListGroupItem=ce.default,t.Media=pe.default,t.MenuItem=he.default,t.Modal=ve.default,t.ModalBody=be.default,t.ModalFooter=_e.default,t.ModalHeader=Ce.default,t.ModalTitle=ke.default,t.Nav=xe.default,t.Navbar=Pe.default,t.NavbarBrand=Ie.default,t.NavDropdown=Ae.default,t.NavItem=je.default,t.Overlay=De.default,t.OverlayTrigger=Fe.default,t.PageHeader=Ue.default,t.PageItem=He.default,t.Pager=We.default,t.Pagination=Ge.default,t.Panel=Ke.default,t.PanelGroup=Qe.default,t.Popover=Je.default,t.ProgressBar=et.default,t.Radio=nt.default,t.ResponsiveEmbed=rt.default,t.Row=at.default,t.SafeAnchor=lt.default,t.SplitButton=ct.default,t.Tab=pt.default,t.TabContainer=ht.default,t.TabContent=vt.default,t.Table=bt.default,t.TabPane=_t.default,t.Tabs=Ct.default,t.Thumbnail=kt.default,t.Tooltip=xt.default,t.Well=Pt.default,t.utils=It},function(t,n){t.exports=e},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(184),o=i(r),a=n(183),s=i(a),l=n(54),u=i(l);t.default=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":(0,u.default)(t)));e.prototype=(0,s.default)(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(o.default?(0,o.default)(e,t):e.__proto__=t)}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(54),o=i(r);t.default=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==("undefined"==typeof t?"undefined":(0,o.default)(t))&&"function"!=typeof t?e:t}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(93),o=i(r);t.default=o.default||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}},function(e,t){"use strict";t.__esModule=!0,t.default=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}},function(e,t,n){var i,r;!function(){"use strict";function n(){for(var e=[],t=0;t<arguments.length;t++){var i=arguments[t];if(i){var r=typeof i;if("string"===r||"number"===r)e.push(i);else if(Array.isArray(i))e.push(n.apply(null,i));else if("object"===r)for(var a in i)o.call(i,a)&&i[a]&&e.push(a)}}return e.join(" ")}var o={}.hasOwnProperty;"undefined"!=typeof e&&e.exports?e.exports=n:(i=[],r=function(){return n}.apply(t,i),!(void 0!==r&&(e.exports=r)))}()},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n[n.length-1];return"function"==typeof r?e.apply(void 0,n):function(t){return e.apply(void 0,n.concat([t]))}}}function o(e,t){return null==e.bsClass?(0,g.default)(!1):void 0,e.bsClass+(t?"-"+t:"")}function a(e){var t,n=(t={},t[o(e)]=!0,t);if(e.bsSize){var i=y.SIZE_MAP[e.bsSize]||e.bsSize;n[o(e,i)]=!0}return e.bsStyle&&(n[o(e,e.bsStyle)]=!0),n}function s(e){return{bsClass:e.bsClass,bsSize:e.bsSize,bsStyle:e.bsStyle,bsRole:e.bsRole}}function l(e){return"bsClass"===e||"bsSize"===e||"bsStyle"===e||"bsRole"===e}function u(e){var t={};return(0,f.default)(e).forEach(function(e){var n=e[0],i=e[1];l(n)||(t[n]=i)}),[s(e),t]}function c(e,t){var n={};t.forEach(function(e){n[e]=!0});var i={};return(0,f.default)(e).forEach(function(e){var t=e[0],r=e[1];l(t)||n[t]||(i[t]=r)}),[s(e),i]}function d(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];_(n,e)}t.__esModule=!0,t._curry=t.bsSizes=t.bsStyles=t.bsClass=void 0;var p=n(94),f=i(p),h=n(5),m=i(h);t.prefix=o,t.getClassSet=a,t.splitBsProps=u,t.splitBsPropsAndOmit=c,t.addStyle=d;var v=n(71),g=i(v),b=n(1),y=n(11),_=(t.bsClass=r(function(e,t){var n=t.propTypes||(t.propTypes={}),i=t.defaultProps||(t.defaultProps={});return n.bsClass=b.PropTypes.string,i.bsClass=e,t}),t.bsStyles=r(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var i=n.STYLES||[],r=n.propTypes||{};e.forEach(function(e){i.indexOf(e)===-1&&i.push(e)});var o=b.PropTypes.oneOf(i);if(n.STYLES=o._values=i,n.propTypes=(0,m.default)({},r,{bsStyle:o}),void 0!==t){var a=n.defaultProps||(n.defaultProps={});a.bsStyle=t}return n}));t.bsSizes=r(function(e,t,n){"string"!=typeof t&&(n=t,t=void 0);var i=n.SIZES||[],r=n.propTypes||{};e.forEach(function(e){i.indexOf(e)===-1&&i.push(e)});var o=[];i.forEach(function(e){var t=y.SIZE_MAP[e];t&&t!==e&&o.push(t),o.push(e)});var a=b.PropTypes.oneOf(o);return a._values=o,n.SIZES=i,n.propTypes=(0,m.default)({},r,{bsSize:a}),void 0!==t&&(n.defaultProps||(n.defaultProps={}),n.defaultProps.bsSize=t),n}),t._curry=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){var a=e[t],l="undefined"==typeof a?"undefined":o(a);return s.default.isValidElement(a)?new Error("Invalid "+i+" `"+r+"` of type ReactElement "+("supplied to `"+n+"`, expected an element type (a string ")+"or a ReactClass)."):"function"!==l&&"string"!==l?new Error("Invalid "+i+" `"+r+"` of value `"+a+"` "+("supplied to `"+n+"`, expected an element type (a string ")+"or a ReactClass)."):null}t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=n(1),s=i(a),l=n(47),u=i(l);t.default=(0,u.default)(r)},function(e,t){"use strict";function n(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter(function(e){return null!=e}).reduce(function(e,t){if("function"!=typeof t)throw new Error("Invalid Argument Type, must only provide functions, undefined, or null.");return null===e?t:function(){for(var n=arguments.length,i=Array(n),r=0;r<n;r++)i[r]=arguments[r];e.apply(this,i),t.apply(this,i)}},null)}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.Size={LARGE:"large",SMALL:"small",XSMALL:"xsmall"},t.SIZE_MAP={large:"lg",medium:"md",small:"sm",xsmall:"xs",lg:"lg",md:"md",sm:"sm",xs:"xs"},t.DEVICE_SIZES=["lg","md","sm","xs"],t.State={SUCCESS:"success",WARNING:"warning",DANGER:"danger",INFO:"info"},t.Style={DEFAULT:"default",PRIMARY:"primary",LINK:"link",INVERSE:"inverse"}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i=0;return f.default.Children.map(e,function(e){return f.default.isValidElement(e)?t.call(n,e,i++):e})}function o(e,t,n){var i=0;f.default.Children.forEach(e,function(e){f.default.isValidElement(e)&&t.call(n,e,i++)})}function a(e){var t=0;return f.default.Children.forEach(e,function(e){f.default.isValidElement(e)&&++t}),t}function s(e,t,n){var i=0,r=[];return f.default.Children.forEach(e,function(e){f.default.isValidElement(e)&&t.call(n,e,i++)&&r.push(e)}),r}function l(e,t,n){var i=0,r=void 0;return f.default.Children.forEach(e,function(e){r||f.default.isValidElement(e)&&t.call(n,e,i++)&&(r=e)}),r}function u(e,t,n){var i=0,r=!0;return f.default.Children.forEach(e,function(e){r&&f.default.isValidElement(e)&&(t.call(n,e,i++)||(r=!1))}),r}function c(e,t,n){var i=0,r=!1;return f.default.Children.forEach(e,function(e){r||f.default.isValidElement(e)&&t.call(n,e,i++)&&(r=!0)}),r}function d(e){var t=[];return f.default.Children.forEach(e,function(e){f.default.isValidElement(e)&&t.push(e)}),t}t.__esModule=!0;var p=n(1),f=i(p);t.default={map:r,forEach:o,count:a,find:l,filter:s,every:u,some:c,toArray:d},e.exports=t.default},function(e,n){e.exports=t},function(e,t,n){"use strict";var i=function(){};e.exports=i},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return!e||"#"===e.trim()}t.__esModule=!0;var o=n(5),a=i(o),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(1),v=i(m),g=n(9),b=i(g),y={href:v.default.PropTypes.string,onClick:v.default.PropTypes.func,disabled:v.default.PropTypes.bool,role:v.default.PropTypes.string,tabIndex:v.default.PropTypes.oneOfType([v.default.PropTypes.number,v.default.PropTypes.string]),componentClass:b.default},_={componentClass:"a"},w=function(e){function t(n,i){(0,c.default)(this,t);var r=(0,p.default)(this,e.call(this,n,i));return r.handleClick=r.handleClick.bind(r),r}return(0,h.default)(t,e),t.prototype.handleClick=function(e){var t=this.props,n=t.disabled,i=t.href,o=t.onClick;return(n||r(i))&&e.preventDefault(),n?void e.stopPropagation():void(o&&o(e))},t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.disabled,i=(0,l.default)(e,["componentClass","disabled"]);return r(i.href)&&(i.role=i.role||"button",i.href=i.href||""),n&&(i.tabIndex=-1,i.style=(0,a.default)({pointerEvents:"none"},i.style)),v.default.createElement(t,(0,a.default)({},i,{onClick:this.handleClick}))},t}(v.default.Component);w.propTypes=y,w.defaultProps=_,t.default=w,e.exports=t.default},function(e,t){var n=e.exports={version:"2.4.0"};"number"==typeof __e&&(__e=n)},function(e,t,n){var i=n(64)("wks"),r=n(41),o=n(19).Symbol,a="function"==typeof o,s=e.exports=function(e){return i[e]||(i[e]=a&&o[e]||(a?o:r)("Symbol."+e))};s.store=i},function(e,t,n){var i=n(19),r=n(16),o=n(56),a=n(27),s="prototype",l=function(e,t,n){var u,c,d,p=e&l.F,f=e&l.G,h=e&l.S,m=e&l.P,v=e&l.B,g=e&l.W,b=f?r:r[t]||(r[t]={}),y=b[s],_=f?i:h?i[t]:(i[t]||{})[s];f&&(n=t);for(u in n)c=!p&&_&&void 0!==_[u],c&&u in b||(d=c?_[u]:n[u],b[u]=f&&"function"!=typeof _[u]?n[u]:v&&c?o(d,i):g&&_[u]==d?function(e){var t=function(t,n,i){if(this instanceof e){switch(arguments.length){case 0:return new e;case 1:return new e(t);case 2:return new e(t,n)}return new e(t,n,i)}return e.apply(this,arguments)};return t[s]=e[s],t}(d):m&&"function"==typeof d?o(Function.call,d):d,m&&((b.virtual||(b.virtual={}))[u]=d,e&l.R&&y&&!y[u]&&a(y,u,d)))};l.F=1,l.G=2,l.S=4,l.P=8,l.B=16,l.W=32,l.U=64,l.R=128,e.exports=l},function(e,t){var n=e.exports="undefined"!=typeof window&&window.Math==Math?window:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")();"number"==typeof __g&&(__g=n)},function(e,t,n){var i=n(97),r=n(57);e.exports=function(e){return i(r(e))}},function(e,t){var n={}.hasOwnProperty;e.exports=function(e,t){return n.call(e,t)}},function(e,t,n){var i=n(25),r=n(96),o=n(67),a=Object.defineProperty;t.f=n(26)?Object.defineProperty:function(e,t,n){if(i(e),t=o(t,!0),i(n),r)try{return a(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(e[t]=n.value),e}},function(e,t){"use strict";e.exports=!("undefined"==typeof window||!window.document||!window.document.createElement)},function(e,t,n){e.exports={default:n(192),__esModule:!0}},function(e,t,n){var i=n(33);e.exports=function(e){if(!i(e))throw TypeError(e+" is not an object!");return e}},function(e,t,n){e.exports=!n(32)(function(){return 7!=Object.defineProperty({},"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(22),r=n(36);e.exports=n(26)?function(e,t,n){return i.f(e,t,r(1,n))}:function(e,t,n){return e[t]=n,e}},function(e,t,n){var i=n(101),r=n(58);e.exports=Object.keys||function(e){return i(e,r)}},function(e,t){"use strict";function n(e){return e&&e.ownerDocument||document}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t,n){"use strict";var i=n(23),r=function(){var e=i&&document.documentElement;return e&&e.contains?function(e,t){return e.contains(t)}:e&&e.compareDocumentPosition?function(e,t){return e===t||!!(16&e.compareDocumentPosition(t))}:function(e,t){if(t)do if(t===e)return!0;while(t=t.parentNode);return!1}}();e.exports=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(24),o=i(r),a=n(6),s=i(a),l=n(5),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(1),y=i(b),_=n(9),w=i(_),C=n(8),E=n(11),k=n(15),T=i(k),x={active:y.default.PropTypes.bool,disabled:y.default.PropTypes.bool,block:y.default.PropTypes.bool,onClick:y.default.PropTypes.func,componentClass:w.default,href:y.default.PropTypes.string,type:y.default.PropTypes.oneOf(["button","reset","submit"])},S={active:!1,block:!1,disabled:!1},P=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.renderAnchor=function(e,t){return y.default.createElement(T.default,(0,u.default)({},e,{className:(0,g.default)(t,e.disabled&&"disabled")}))},t.prototype.renderButton=function(e,t){var n=e.componentClass,i=(0,s.default)(e,["componentClass"]),r=n||"button";return y.default.createElement(r,(0,u.default)({},i,{type:i.type||"button",className:t}))},t.prototype.render=function(){var e,t=this.props,n=t.active,i=t.block,r=t.className,o=(0,s.default)(t,["active","block","className"]),a=(0,C.splitBsProps)(o),l=a[0],c=a[1],d=(0,u.default)({},(0,C.getClassSet)(l),(e={active:n},e[(0,C.prefix)(l,"block")]=i,e)),p=(0,g.default)(r,d);return c.href?this.renderAnchor(c,p):this.renderButton(c,p)},t}(y.default.Component);P.propTypes=x,P.defaultProps=S,t.default=(0,C.bsClass)("btn",(0,C.bsSizes)([E.Size.LARGE,E.Size.SMALL,E.Size.XSMALL],(0,C.bsStyles)([].concat((0,o.default)(E.State),[E.Style.DEFAULT,E.Style.PRIMARY,E.Style.LINK]),E.Style.DEFAULT,P))),e.exports=t.default},function(e,t){e.exports=function(e){try{return!!e()}catch(e){return!0}}},function(e,t){e.exports=function(e){return"object"==typeof e?null!==e:"function"==typeof e}},function(e,t){e.exports={}},function(e,t){t.f={}.propertyIsEnumerable},function(e,t){e.exports=function(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,s.default)(o.default.findDOMNode(e))};var r=n(13),o=i(r),a=n(29),s=i(a);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(5),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(106),g=i(v),b=n(30),y=i(b),_=n(72),w=i(_),C=n(1),E=i(C),k=n(13),T=i(k),x=n(45),S=i(x),P=n(9),O=i(P),I=n(46),M=i(I),A=n(48),N=i(A),j=n(14),L=(i(j),n(76)),D=i(L),R=n(130),F=i(R),B=n(78),U=i(B),$=n(8),H=n(10),z=i(H),W=n(178),V=n(12),G=i(V),q=U.default.defaultProps.bsRole,K=F.default.defaultProps.bsRole,Y={dropup:E.default.PropTypes.bool,id:(0,M.default)(E.default.PropTypes.oneOfType([E.default.PropTypes.string,E.default.PropTypes.number])),componentClass:O.default,children:(0,S.default)((0,W.requiredRoles)(q,K),(0,W.exclusiveRoles)(K)),disabled:E.default.PropTypes.bool,pullRight:E.default.PropTypes.bool,open:E.default.PropTypes.bool,onClose:E.default.PropTypes.func,onToggle:E.default.PropTypes.func,onSelect:E.default.PropTypes.func,role:E.default.PropTypes.string},Q={componentClass:D.default},X=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handleClick=r.handleClick.bind(r),r.handleKeyDown=r.handleKeyDown.bind(r),r.handleClose=r.handleClose.bind(r),r._focusInDropdown=!1,r.lastOpenEventType=null,r}return(0,f.default)(t,e),t.prototype.componentDidMount=function(){this.focusNextOnOpen()},t.prototype.componentWillUpdate=function(e){!e.open&&this.props.open&&(this._focusInDropdown=(0,y.default)(T.default.findDOMNode(this.menu),(0,g.default)(document)))},t.prototype.componentDidUpdate=function(e){var t=this.props.open,n=e.open;t&&!n&&this.focusNextOnOpen(),!t&&n&&this._focusInDropdown&&(this._focusInDropdown=!1,this.focus())},t.prototype.handleClick=function(){this.props.disabled||this.toggleOpen("click")},t.prototype.handleKeyDown=function(e){if(!this.props.disabled)switch(e.keyCode){case w.default.codes.down:this.props.open?this.menu.focusNext&&this.menu.focusNext():this.toggleOpen("keydown"),e.preventDefault();break;case w.default.codes.esc:case w.default.codes.tab:this.handleClose(e)}},t.prototype.toggleOpen=function(e){var t=!this.props.open;t&&(this.lastOpenEventType=e),this.props.onToggle&&this.props.onToggle(t)},t.prototype.handleClose=function(){this.props.open&&this.toggleOpen(null)},t.prototype.focusNextOnOpen=function(){var e=this.menu;e.focusNext&&("keydown"!==this.lastOpenEventType&&"menuitem"!==this.props.role||e.focusNext())},t.prototype.focus=function(){var e=T.default.findDOMNode(this.toggle);e&&e.focus&&e.focus()},t.prototype.renderToggle=function(e,t){var n=this,i=function(e){n.toggle=e};return"string"==typeof e.ref||(i=(0,z.default)(e.ref,i)),(0,C.cloneElement)(e,(0,s.default)({},t,{ref:i,bsClass:(0,$.prefix)(t,"toggle"),onClick:(0,z.default)(e.props.onClick,this.handleClick),onKeyDown:(0,z.default)(e.props.onKeyDown,this.handleKeyDown)}))},t.prototype.renderMenu=function(e,t){var n=this,i=t.id,r=t.onClose,a=t.onSelect,l=(0,o.default)(t,["id","onClose","onSelect"]),u=function(e){n.menu=e};return"string"==typeof e.ref||(u=(0,z.default)(e.ref,u)),(0,C.cloneElement)(e,(0,s.default)({},l,{ref:u,labelledBy:i,bsClass:(0,$.prefix)(l,"menu"),onClose:(0,z.default)(e.props.onClose,r,this.handleClose),onSelect:(0,z.default)(e.props.onSelect,a,this.handleClose)}))},t.prototype.render=function(){var e,t=this,n=this.props,i=n.componentClass,r=n.id,a=n.dropup,l=n.disabled,u=n.pullRight,c=n.open,d=n.onClose,p=n.onSelect,f=n.role,h=n.bsClass,v=n.className,g=n.children,b=(0,
o.default)(n,["componentClass","id","dropup","disabled","pullRight","open","onClose","onSelect","role","bsClass","className","children"]);delete b.onToggle;var y=(e={},e[h]=!0,e.open=c,e.disabled=l,e);return a&&(y[h]=!1,y.dropup=!0),E.default.createElement(i,(0,s.default)({},b,{className:(0,m.default)(v,y)}),G.default.map(g,function(e){switch(e.props.bsRole){case q:return t.renderToggle(e,{id:r,disabled:l,open:c,role:f,bsClass:h});case K:return t.renderMenu(e,{id:r,open:c,pullRight:u,bsClass:h,onClose:d,onSelect:p});default:return e}}))},t}(E.default.Component);X.propTypes=Y,X.defaultProps=Q,(0,$.bsClass)("dropdown",X);var J=(0,N.default)(X,{open:"onToggle"});J.Toggle=U.default,J.Menu=F.default,t.default=J,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(7),f=i(p),h=n(1),m=i(h),v=n(115),g=i(v),b={in:m.default.PropTypes.bool,unmountOnExit:m.default.PropTypes.bool,transitionAppear:m.default.PropTypes.bool,timeout:m.default.PropTypes.number,onEnter:m.default.PropTypes.func,onEntering:m.default.PropTypes.func,onEntered:m.default.PropTypes.func,onExit:m.default.PropTypes.func,onExiting:m.default.PropTypes.func,onExited:m.default.PropTypes.func},y={in:!1,timeout:300,unmountOnExit:!1,transitionAppear:!1},_=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){return m.default.createElement(g.default,(0,o.default)({},this.props,{className:(0,f.default)(this.props.className,"fade"),enteredClassName:"in",enteringClassName:"in"}))},t}(m.default.Component);_.propTypes=b,_.defaultProps=y,t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=t.propTypes,i={},r={};return(0,a.default)(e).forEach(function(e){var t=e[0],o=e[1];n[t]?i[t]=o:r[t]=o}),[i,r]}t.__esModule=!0;var o=n(94),a=i(o);t.default=r,e.exports=t.default},function(e,t){var n=0,i=Math.random();e.exports=function(e){return"Symbol(".concat(void 0===e?"":e,")_",(++n+i).toString(36))}},function(e,t){"use strict";e.exports=function(e){return e===e.window?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}},function(e,t,n){"use strict";var i=n(111),r=n(244),o=n(239),a=n(240),s=Object.prototype.hasOwnProperty;e.exports=function(e,t,n){var l="",u=t;if("string"==typeof t){if(void 0===n)return e.style[i(t)]||o(e).getPropertyValue(r(t));(u={})[t]=n}for(var c in u)s.call(u,c)&&(u[c]||0===u[c]?l+=r(c)+":"+u[c]+";":a(e,r(c)));e.style.cssText+=";"+l}},function(e,t,n){var i,r,o;!function(n,a){r=[t],i=a,o="function"==typeof i?i.apply(t,r):i,!(void 0!==o&&(e.exports=o))}(this,function(e){var t=e;t.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},t._extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}})},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){function e(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];var r=null;return n.forEach(function(e){if(null==r){var n=e.apply(void 0,t);null!=n&&(r=n)}}),r}for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];return(0,a.default)(e)}t.__esModule=!0,t.default=r;var o=n(47),a=i(o)},function(e,t){"use strict";function n(e){return function(t,n,i,r,o){var a=i||"<<anonymous>>",s=o||n;if(null==t[n])return new Error("The "+r+" `"+s+"` is required to make "+("`"+a+"` accessible for users of assistive ")+"technologies such as screen readers.");for(var l=arguments.length,u=Array(l>5?l-5:0),c=5;c<l;c++)u[c-5]=arguments[c];return e.apply(void 0,[t,n,i,r,o].concat(u))}}t.__esModule=!0,t.default=n},function(e,t){"use strict";function n(e){function t(t,n,i,r,o,a){var s=r||"<<anonymous>>",l=a||i;if(null==n[i])return t?new Error("Required "+o+" `"+l+"` was not specified "+("in `"+s+"`.")):null;for(var u=arguments.length,c=Array(u>6?u-6:0),d=6;d<u;d++)c[d-6]=arguments[d];return e.apply(void 0,[n,i,s,o,l].concat(c))}var n=t.bind(null,!1);return n.isRequired=t.bind(null,!0),n}t.__esModule=!0,t.default=n},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){n&&(e._notifying=!0,n.call.apply(n,[e,i].concat(r)),e._notifying=!1),e._values[t]=i,e.isMounted()&&e.forceUpdate()}t.__esModule=!0;var o=n(252),a=i(o),s={shouldComponentUpdate:function(){return!this._notifying}};t.default=(0,a.default)([s],r),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){e.offsetHeight}function o(e,t){var n=t["offset"+(0,T.default)(e)],i=P[e];return n+parseInt((0,y.default)(t,i[0]),10)+parseInt((0,y.default)(t,i[1]),10)}t.__esModule=!0;var a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(43),y=i(b),_=n(1),w=i(_),C=n(115),E=i(C),k=n(92),T=i(k),x=n(10),S=i(x),P={height:["marginTop","marginBottom"],width:["marginLeft","marginRight"]},O={in:w.default.PropTypes.bool,unmountOnExit:w.default.PropTypes.bool,transitionAppear:w.default.PropTypes.bool,timeout:w.default.PropTypes.number,onEnter:w.default.PropTypes.func,onEntering:w.default.PropTypes.func,onEntered:w.default.PropTypes.func,onExit:w.default.PropTypes.func,onExiting:w.default.PropTypes.func,onExited:w.default.PropTypes.func,dimension:w.default.PropTypes.oneOfType([w.default.PropTypes.oneOf(["height","width"]),w.default.PropTypes.func]),getDimensionValue:w.default.PropTypes.func,role:w.default.PropTypes.string},I={in:!1,timeout:300,unmountOnExit:!1,transitionAppear:!1,dimension:"height",getDimensionValue:o},M=function(e){function t(n,i){(0,d.default)(this,t);var r=(0,f.default)(this,e.call(this,n,i));return r.handleEnter=r.handleEnter.bind(r),r.handleEntering=r.handleEntering.bind(r),r.handleEntered=r.handleEntered.bind(r),r.handleExit=r.handleExit.bind(r),r.handleExiting=r.handleExiting.bind(r),r}return(0,m.default)(t,e),t.prototype.handleEnter=function(e){var t=this._dimension();e.style[t]="0"},t.prototype.handleEntering=function(e){var t=this._dimension();e.style[t]=this._getScrollDimensionValue(e,t)},t.prototype.handleEntered=function(e){var t=this._dimension();e.style[t]=null},t.prototype.handleExit=function(e){var t=this._dimension();e.style[t]=this.props.getDimensionValue(t,e)+"px",r(e)},t.prototype.handleExiting=function(e){var t=this._dimension();e.style[t]="0"},t.prototype._dimension=function(){return"function"==typeof this.props.dimension?this.props.dimension():this.props.dimension},t.prototype._getScrollDimensionValue=function(e,t){return e["scroll"+(0,T.default)(t)]+"px"},t.prototype.render=function(){var e=this.props,t=e.onEnter,n=e.onEntering,i=e.onEntered,r=e.onExit,o=e.onExiting,a=e.className,l=(0,u.default)(e,["onEnter","onEntering","onEntered","onExit","onExiting","className"]);delete l.dimension,delete l.getDimensionValue;var c=(0,S.default)(this.handleEnter,t),d=(0,S.default)(this.handleEntering,n),p=(0,S.default)(this.handleEntered,i),f=(0,S.default)(this.handleExit,r),h=(0,S.default)(this.handleExiting,o),m={width:"width"===this._dimension()};return w.default.createElement(E.default,(0,s.default)({},l,{"aria-expanded":l.role?l.in:null,className:(0,g.default)(a,m),exitedClassName:"collapse",exitingClassName:"collapsing",enteredClassName:"collapse in",enteringClassName:"collapsing",onEnter:c,onEntering:d,onEntered:p,onExit:f,onExiting:h}))},t}(w.default.Component);M.propTypes=O,M.defaultProps=I,t.default=M,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y={glyph:g.default.PropTypes.string.isRequired},_=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.glyph,i=t.className,r=(0,s.default)(t,["glyph","className"]),a=(0,b.splitBsProps)(r),l=a[0],u=a[1],c=(0,o.default)({},(0,b.getClassSet)(l),(e={},e[(0,b.prefix)(l,n)]=!0,e));return g.default.createElement("span",(0,o.default)({},u,{className:(0,m.default)(i,c)}))},t}(g.default.Component);_.propTypes=y,t.default=(0,b.bsClass)("glyphicon",_),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(144),w=i(_),C=n(145),E=i(C),k=n(146),T=i(k),x=n(147),S=i(x),P=n(148),O=i(P),I=n(149),M=i(I),A=n(8),N={componentClass:y.default},j={componentClass:"div"},L=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,A.splitBsProps)(i),a=r[0],l=r[1],u=(0,A.getClassSet)(a);return g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);L.propTypes=N,L.defaultProps=j,L.Heading=E.default,L.Body=w.default,L.Left=T.default,L.Right=M.default,L.List=S.default,L.ListItem=O.default,t.default=(0,A.bsClass)("media",L),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(1),f=i(p),h=n(48),m=i(h),v="tab",g="pane",b=p.PropTypes.oneOfType([p.PropTypes.string,p.PropTypes.number]),y={id:function(e){var t=null;if(!e.generateChildId){for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];t=b.apply(void 0,[e].concat(i)),t||e.id||(t=new Error("In order to properly initialize Tabs in a way that is accessible to assistive technologies (such as screen readers) an `id` or a `generateChildId` prop to TabContainer is required"))}return t},generateChildId:p.PropTypes.func,onSelect:p.PropTypes.func,activeKey:p.PropTypes.any},_={$bs_tabContainer:f.default.PropTypes.shape({activeKey:p.PropTypes.any,onSelect:p.PropTypes.func.isRequired,getTabId:p.PropTypes.func.isRequired,getPaneId:p.PropTypes.func.isRequired})},w=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.activeKey,n=e.onSelect,i=e.generateChildId,r=e.id,o=i||function(e,t){return r?r+"-"+t+"-"+e:null};return{$bs_tabContainer:{activeKey:t,onSelect:n,getTabId:function(e){return o(e,v)},getPaneId:function(e){return o(e,g)}}}},t.prototype.render=function(){var e=this.props,t=e.children,n=(0,o.default)(e,["children"]);return delete n.generateChildId,delete n.onSelect,delete n.activeKey,f.default.cloneElement(f.default.Children.only(t),n)},t}(f.default.Component);w.propTypes=y,w.childContextTypes=_,t.default=(0,m.default)(w,{activeKey:"onSelect"}),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={componentClass:y.default,animation:v.PropTypes.oneOfType([v.PropTypes.bool,y.default]),unmountOnExit:v.PropTypes.bool},C={componentClass:"div",animation:!0,unmountOnExit:!1},E={$bs_tabContainer:v.PropTypes.shape({activeKey:v.PropTypes.any})},k={$bs_tabContent:v.PropTypes.shape({bsClass:v.PropTypes.string,animation:v.PropTypes.oneOfType([v.PropTypes.bool,y.default]),activeKey:v.PropTypes.any,unmountOnExit:v.PropTypes.bool,onPaneEnter:v.PropTypes.func.isRequired,onPaneExited:v.PropTypes.func.isRequired,exiting:v.PropTypes.bool.isRequired})},T=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handlePaneEnter=r.handlePaneEnter.bind(r),r.handlePaneExited=r.handlePaneExited.bind(r),r.state={activeKey:null,activeChild:null},r}return(0,f.default)(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.bsClass,n=e.animation,i=e.unmountOnExit,r=this.state.activeKey,o=this.getContainerActiveKey(),a=null!=r?r:o,s=null!=r&&r!==o;return{$bs_tabContent:{bsClass:t,animation:n,activeKey:a,unmountOnExit:i,onPaneEnter:this.handlePaneEnter,onPaneExited:this.handlePaneExited,exiting:s}}},t.prototype.componentWillReceiveProps=function(e){!e.animation&&this.state.activeChild&&this.setState({activeKey:null,activeChild:null})},t.prototype.componentWillUnmount=function(){this.isUnmounted=!0},t.prototype.handlePaneEnter=function(e,t){return!!this.props.animation&&t===this.getContainerActiveKey()&&(this.setState({activeKey:t,activeChild:e}),!0)},t.prototype.handlePaneExited=function(e){this.isUnmounted||this.setState(function(t){var n=t.activeChild;return n!==e?null:{activeKey:null,activeChild:null}})},t.prototype.getContainerActiveKey=function(){var e=this.context.$bs_tabContainer;return e&&e.activeKey},t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsPropsAndOmit)(i,["animation","unmountOnExit"]),a=r[0],l=r[1];return g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,(0,_.prefix)(a,"content"))}))},t}(g.default.Component);T.propTypes=w,T.defaultProps=C,T.contextTypes=E,T.childContextTypes=k,t.default=(0,_.bsClass)("tab",T),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(186),o=i(r),a=n(185),s=i(a),l="function"==typeof s.default&&"symbol"==typeof o.default?function(e){return typeof e}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default?"symbol":typeof e};t.default="function"==typeof s.default&&"symbol"===l(o.default)?function(e){return"undefined"==typeof e?"undefined":l(e)}:function(e){return e&&"function"==typeof s.default&&e.constructor===s.default?"symbol":"undefined"==typeof e?"undefined":l(e)}},function(e,t){var n={}.toString;e.exports=function(e){return n.call(e).slice(8,-1)}},function(e,t,n){var i=n(195);e.exports=function(e,t,n){if(i(e),void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},function(e,t){e.exports=function(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}},function(e,t){e.exports="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(",")},function(e,t){e.exports=!0},function(e,t,n){var i=n(25),r=n(211),o=n(58),a=n(63)("IE_PROTO"),s=function(){},l="prototype",u=function(){var e,t=n(95)("iframe"),i=o.length,r="<",a=">";for(t.style.display="none",n(201).appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write(r+"script"+a+"document.F=Object"+r+"/script"+a),e.close(),u=e.F;i--;)delete u[l][o[i]];return u()};e.exports=Object.create||function(e,t){var n;return null!==e?(s[l]=i(e),n=new s,s[l]=null,n[a]=e):n=u(),void 0===t?n:r(n,t)}},function(e,t){t.f=Object.getOwnPropertySymbols},function(e,t,n){var i=n(22).f,r=n(21),o=n(17)("toStringTag");e.exports=function(e,t,n){e&&!r(e=n?e:e.prototype,o)&&i(e,o,{configurable:!0,value:t})}},function(e,t,n){var i=n(64)("keys"),r=n(41);e.exports=function(e){return i[e]||(i[e]=r(e))}},function(e,t,n){var i=n(19),r="__core-js_shared__",o=i[r]||(i[r]={});e.exports=function(e){return o[e]||(o[e]={})}},function(e,t){var n=Math.ceil,i=Math.floor;e.exports=function(e){return isNaN(e=+e)?0:(e>0?i:n)(e)}},function(e,t,n){var i=n(57);e.exports=function(e){return Object(i(e))}},function(e,t,n){var i=n(33);e.exports=function(e,t){if(!i(e))return e;var n,r;if(t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;if("function"==typeof(n=e.valueOf)&&!i(r=n.call(e)))return r;if(!t&&"function"==typeof(n=e.toString)&&!i(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")}},function(e,t,n){var i=n(19),r=n(16),o=n(59),a=n(69),s=n(22).f;e.exports=function(e){var t=r.Symbol||(r.Symbol=o?{}:i.Symbol||{});"_"==e.charAt(0)||e in t||s(t,e,{value:a.f(e)})}},function(e,t,n){t.f=n(17)},function(e,t,n){"use strict";var i=n(23),r=function(){};i&&(r=function(){return document.addEventListener?function(e,t,n,i){return e.addEventListener(t,n,i||!1)}:document.attachEvent?function(e,t,n){return e.attachEvent("on"+t,n)}:void 0}()),e.exports=r},function(e,t,n){"use strict";var i=function(e,t,n,i,r,o,a,s){if(!e){var l;if(void 0===t)l=new Error("Minified exception occurred; use the non-minified dev environment for the full error message and additional helpful warnings.");else{var u=[n,i,r,o,a,s],c=0;l=new Error(t.replace(/%s/g,function(){return u[c++]})),l.name="Invariant Violation"}throw l.framesToPop=1,l}};e.exports=i},function(e,t){t=e.exports=function(e){if(e&&"object"==typeof e){var t=e.which||e.keyCode||e.charCode;t&&(e=t)}if("number"==typeof e)return o[e];var r=String(e),a=n[r.toLowerCase()];if(a)return a;var a=i[r.toLowerCase()];return a?a:1===r.length?r.charCodeAt(0):void 0};var n=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},i=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(r=97;r<123;r++)n[String.fromCharCode(r)]=r-32;for(var r=48;r<58;r++)n[r-48]=r;for(r=1;r<13;r++)n["f"+r]=r+111;for(r=0;r<10;r++)n["numpad "+r]=r+96;var o=t.names=t.title={};for(r in n)o[n[r]]=r;for(var a in i)n[a]=i[a]},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return e="function"==typeof e?e():e,a.default.findDOMNode(e)||t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var o=n(13),a=i(o);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n,i,r){var a=e[t],l="undefined"==typeof a?"undefined":o(a);return s.default.isValidElement(a)?new Error("Invalid "+i+" `"+r+"` of type ReactElement "+("supplied to `"+n+"`, expected a ReactComponent or a ")+"DOMElement. You can usually obtain a ReactComponent or DOMElement from a ReactElement by attaching a ref to it."):"object"===l&&"function"==typeof a.render||1===a.nodeType?null:new Error("Invalid "+i+" `"+r+"` of value `"+a+"` "+("supplied to `"+n+"`, expected a ReactComponent or a ")+"DOMElement.")}t.__esModule=!0;var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol?"symbol":typeof e},a=n(1),s=i(a),l=n(47),u=i(l);t.default=(0,u.default)(r)},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(15),y=i(b),_={active:g.default.PropTypes.bool,href:g.default.PropTypes.string,title:g.default.PropTypes.node,target:g.default.PropTypes.string},w={active:!1},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.active,n=e.href,i=e.title,r=e.target,a=e.className,l=(0,s.default)(e,["active","href","title","target","className"]),u={href:n,title:i,target:r};return g.default.createElement("li",{className:(0,m.default)(a,{active:t})},t?g.default.createElement("span",l):g.default.createElement(y.default,(0,o.default)({},l,u)))},t}(g.default.Component);C.propTypes=_,C.defaultProps=w,t.default=C,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(45),y=i(b),_=n(31),w=i(_),C=n(8),E={vertical:g.default.PropTypes.bool,justified:g.default.PropTypes.bool,block:(0,y.default)(g.default.PropTypes.bool,function(e){var t=e.block,n=e.vertical;return t&&!n?new Error("`block` requires `vertical` to be set to have any effect"):null})},k={block:!1,justified:!1,vertical:!1},T=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.block,i=t.justified,r=t.vertical,a=t.className,l=(0,s.default)(t,["block","justified","vertical","className"]),u=(0,C.splitBsProps)(l),c=u[0],d=u[1],p=(0,o.default)({},(0,C.getClassSet)(c),(e={},e[(0,C.prefix)(c)]=!r,e[(0,C.prefix)(c,"vertical")]=r,e[(0,C.prefix)(c,"justified")]=i,e[(0,C.prefix)(w.default.defaultProps,"block")]=n,e));return g.default.createElement("div",(0,o.default)({},d,{className:(0,m.default)(a,p)}))},t}(g.default.Component);T.propTypes=E,T.defaultProps=k,t.default=(0,C.bsClass)("btn-group",T),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(13),y=i(b),_=n(179),w=i(_),C={direction:g.default.PropTypes.oneOf(["prev","next"]),onAnimateOutEnd:g.default.PropTypes.func,active:g.default.PropTypes.bool,animateIn:g.default.PropTypes.bool,animateOut:g.default.PropTypes.bool,index:g.default.PropTypes.number},E={active:!1,animateIn:!1,animateOut:!1},k=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handleAnimateOutEnd=r.handleAnimateOutEnd.bind(r),r.state={direction:null},r.isUnmounted=!1,r}return(0,f.default)(t,e),t.prototype.componentWillReceiveProps=function(e){this.props.active!==e.active&&this.setState({direction:null})},t.prototype.componentDidUpdate=function(e){var t=this,n=this.props.active,i=e.active;!n&&i&&w.default.addEndEventListener(y.default.findDOMNode(this),this.handleAnimateOutEnd),n!==i&&setTimeout(function(){return t.startAnimation()},20)},t.prototype.componentWillUnmount=function(){this.isUnmounted=!0},t.prototype.handleAnimateOutEnd=function(){this.isUnmounted||this.props.onAnimateOutEnd&&this.props.onAnimateOutEnd(this.props.index)},t.prototype.startAnimation=function(){this.isUnmounted||this.setState({direction:"prev"===this.props.direction?"right":"left"})},t.prototype.render=function(){var e=this.props,t=e.direction,n=e.active,i=e.animateIn,r=e.animateOut,a=e.className,l=(0,s.default)(e,["direction","active","animateIn","animateOut","className"]);delete l.onAnimateOutEnd,delete l.index;var u={item:!0,active:n&&!i||r};return t&&n&&i&&(u[t]=!0),this.state.direction&&(i||r)&&(u[this.state.direction]=!0),g.default.createElement("div",(0,o.default)({},l,{className:(0,m.default)(a,u)}))},t}(g.default.Component);k.propTypes=C,k.defaultProps=E,t.default=k,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(1),m=i(h),v=n(7),g=i(v),b=n(31),y=i(b),_=n(15),w=i(_),C=n(8),E={noCaret:m.default.PropTypes.bool,open:m.default.PropTypes.bool,title:m.default.PropTypes.string,useAnchor:m.default.PropTypes.bool},k={open:!1,useAnchor:!1,bsRole:"toggle"},T=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.noCaret,n=e.open,i=e.useAnchor,r=e.bsClass,a=e.className,l=e.children,u=(0,s.default)(e,["noCaret","open","useAnchor","bsClass","className","children"]);delete u.bsRole;var c=i?w.default:y.default,d=!t;return m.default.createElement(c,(0,o.default)({},u,{role:"button",className:(0,g.default)(a,r),"aria-haspopup":!0,"aria-expanded":n}),l||u.title,d&&" ",d&&m.default.createElement("span",{className:"caret"}))},t}(m.default.Component);T.propTypes=E,T.defaultProps=k,t.default=(0,C.bsClass)("dropdown-toggle",T),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={fluid:g.default.PropTypes.bool,componentClass:y.default},C={componentClass:"div",fluid:!1},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.fluid,n=e.componentClass,i=e.className,r=(0,s.default)(e,["fluid","componentClass","className"]),a=(0,_.splitBsProps)(r),l=a[0],u=a[1],c=(0,_.prefix)(l,t&&"fluid");return g.default.createElement(n,(0,o.default)({},u,{className:(0,m.default)(i,c)}))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("container",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(24),o=i(r),a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(1),y=i(b),_=n(8),w=n(11),C={active:y.default.PropTypes.any,disabled:y.default.PropTypes.any,header:y.default.PropTypes.node,listItem:y.default.PropTypes.bool,onClick:y.default.PropTypes.func,href:y.default.PropTypes.string,type:y.default.PropTypes.string},E={listItem:!1},k=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.renderHeader=function(e,t){return y.default.isValidElement(e)?(0,b.cloneElement)(e,{className:(0,g.default)(e.props.className,t)}):y.default.createElement("h4",{className:t},e)},t.prototype.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.className,r=e.header,o=e.listItem,a=e.children,l=(0,u.default)(e,["active","disabled","className","header","listItem","children"]),c=(0,_.splitBsProps)(l),d=c[0],p=c[1],f=(0,s.default)({},(0,_.getClassSet)(d),{active:t,disabled:n}),h=void 0;return p.href?h="a":p.onClick?(h="button",p.type=p.type||"button"):h=o?"li":"span",p.className=(0,g.default)(i,f),r?y.default.createElement(h,p,this.renderHeader(r,(0,_.prefix)(d,"heading")),y.default.createElement("p",{className:(0,_.prefix)(d,"text")},a)):y.default.createElement(h,p,a)},t}(y.default.Component);k.propTypes=C,k.defaultProps=E,t.default=(0,_.bsClass)("list-group-item",(0,_.bsStyles)((0,o.default)(w.State),k)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("div",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("modal-body",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("div",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("modal-footer",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=n(10),_=i(y),w={"aria-label":g.default.PropTypes.string,closeButton:g.default.PropTypes.bool,onHide:g.default.PropTypes.func},C={"aria-label":"Close",closeButton:!1},E={$bs_modal:g.default.PropTypes.shape({onHide:g.default.PropTypes.func})},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e["aria-label"],n=e.closeButton,i=e.onHide,r=e.className,a=e.children,l=(0,s.default)(e,["aria-label","closeButton","onHide","className","children"]),u=this.context.$bs_modal,c=(0,b.splitBsProps)(l),d=c[0],p=c[1],f=(0,b.getClassSet)(d);return g.default.createElement("div",(0,o.default)({},p,{className:(0,m.default)(r,f)}),n&&g.default.createElement("button",{type:"button",className:"close","aria-label":t,onClick:(0,_.default)(u.onHide,i)},g.default.createElement("span",{"aria-hidden":"true"},"")),a)},t}(g.default.Component);k.propTypes=w,k.defaultProps=C,k.contextTypes=E,t.default=(0,b.bsClass)("modal-header",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("h4",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("modal-title",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(72),g=i(v),b=n(1),y=i(b),_=n(13),w=i(_),C=n(45),E=i(C),k=n(14),T=(i(k),n(8)),x=n(10),S=i(x),P=n(12),O=i(P),I={activeKey:y.default.PropTypes.any,activeHref:y.default.PropTypes.string,stacked:y.default.PropTypes.bool,justified:(0,E.default)(y.default.PropTypes.bool,function(e){var t=e.justified,n=e.navbar;return t&&n?Error("justified navbar `Nav`s are not supported"):null}),onSelect:y.default.PropTypes.func,role:y.default.PropTypes.string,navbar:y.default.PropTypes.bool,pullRight:y.default.PropTypes.bool,pullLeft:y.default.PropTypes.bool},M={justified:!1,pullRight:!1,pullLeft:!1,stacked:!1},A={$bs_navbar:y.default.PropTypes.shape({bsClass:y.default.PropTypes.string}),$bs_tabContainer:y.default.PropTypes.shape({activeKey:y.default.PropTypes.any,onSelect:y.default.PropTypes.func.isRequired,getTabId:y.default.PropTypes.func.isRequired,getPaneId:y.default.PropTypes.func.isRequired})},N=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.componentDidUpdate=function(){var e=this;if(this._needsRefocus){this._needsRefocus=!1;var t=this.props.children,n=this.getActiveProps(),i=n.activeKey,r=n.activeHref,o=O.default.find(t,function(t){return e.isActive(t,i,r)}),a=O.default.toArray(t),s=a.indexOf(o),l=w.default.findDOMNode(this).children,u=l&&l[s];u&&u.firstChild&&u.firstChild.focus()}},t.prototype.handleTabKeyDown=function(e,t){var n=void 0;switch(t.keyCode){case g.default.codes.left:case g.default.codes.up:n=this.getNextActiveChild(-1);break;case g.default.codes.right:case g.default.codes.down:n=this.getNextActiveChild(1);break;default:return}t.preventDefault(),
e&&n&&n.props.eventKey&&e(n.props.eventKey),this._needsRefocus=!0},t.prototype.getNextActiveChild=function(e){var t=this,n=this.props.children,i=n.filter(function(e){return e.props.eventKey&&!e.props.disabled}),r=this.getActiveProps(),o=r.activeKey,a=r.activeHref,s=O.default.find(n,function(e){return t.isActive(e,o,a)}),l=i.indexOf(s);if(l===-1)return i[0];var u=l+e,c=i.length;return u>=c?u=0:u<0&&(u=c-1),i[u]},t.prototype.getActiveProps=function(){var e=this.context.$bs_tabContainer;return e?e:this.props},t.prototype.isActive=function(e,t,n){var i=e.props;return!!(i.active||null!=t&&i.eventKey===t||n&&i.href===n)||i.active},t.prototype.getTabProps=function(e,t,n,i,r){var o=this;if(!t&&"tablist"!==n)return null;var a=e.props,s=a.id,l=a["aria-controls"],u=a.eventKey,c=a.role,d=a.onKeyDown,p=a.tabIndex;return t&&(s=t.getTabId(u),l=t.getPaneId(u)),"tablist"===n&&(c=c||"tab",d=(0,S.default)(function(e){return o.handleTabKeyDown(r,e)},d),p=i?p:-1),{id:s,role:c,onKeyDown:d,"aria-controls":l,tabIndex:p}},t.prototype.render=function(){var e,t=this,n=this.props,i=n.stacked,r=n.justified,a=n.onSelect,l=n.role,u=n.navbar,c=n.pullRight,d=n.pullLeft,p=n.className,f=n.children,h=(0,s.default)(n,["stacked","justified","onSelect","role","navbar","pullRight","pullLeft","className","children"]),v=this.context.$bs_tabContainer,g=l||(v?"tablist":null),_=this.getActiveProps(),w=_.activeKey,C=_.activeHref;delete h.activeKey,delete h.activeHref;var E=(0,T.splitBsProps)(h),k=E[0],x=E[1],P=(0,o.default)({},(0,T.getClassSet)(k),(e={},e[(0,T.prefix)(k,"stacked")]=i,e[(0,T.prefix)(k,"justified")]=r,e)),I=null!=u?u:this.context.$bs_navbar,M=void 0,A=void 0;if(I){var N=this.context.$bs_navbar||{bsClass:"navbar"};P[(0,T.prefix)(N,"nav")]=!0,A=(0,T.prefix)(N,"right"),M=(0,T.prefix)(N,"left")}else A="pull-right",M="pull-left";return P[A]=c,P[M]=d,y.default.createElement("ul",(0,o.default)({},x,{role:g,className:(0,m.default)(p,P)}),O.default.map(f,function(e){var n=t.isActive(e,w,C),i=(0,S.default)(e.props.onSelect,a,v&&v.onSelect);return(0,b.cloneElement)(e,(0,o.default)({},t.getTabProps(e,v,g,n,i),{active:n,activeKey:w,activeHref:C,onSelect:i}))}))},t}(y.default.Component);N.propTypes=I,N.defaultProps=M,N.contextTypes=A,t.default=(0,T.bsClass)("nav",(0,T.bsStyles)(["tabs","pills"],N)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(15),y=i(b),_=n(10),w=i(_),C={active:g.default.PropTypes.bool,disabled:g.default.PropTypes.bool,role:g.default.PropTypes.string,href:g.default.PropTypes.string,onClick:g.default.PropTypes.func,onSelect:g.default.PropTypes.func,eventKey:g.default.PropTypes.any},E={active:!1,disabled:!1},k=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handleClick=r.handleClick.bind(r),r}return(0,f.default)(t,e),t.prototype.handleClick=function(e){this.props.onSelect&&(e.preventDefault(),this.props.disabled||this.props.onSelect(this.props.eventKey,e))},t.prototype.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.onClick,r=e.className,a=e.style,l=(0,s.default)(e,["active","disabled","onClick","className","style"]);return delete l.onSelect,delete l.eventKey,delete l.activeKey,delete l.activeHref,l.role?"tab"===l.role&&(l["aria-selected"]=t):"#"===l.href&&(l.role="button"),g.default.createElement("li",{role:"presentation",className:(0,m.default)(r,{active:t,disabled:n}),style:a},g.default.createElement(y.default,(0,o.default)({},l,{disabled:n,onClick:(0,w.default)(i,this.handleClick)})))},t}(g.default.Component);k.propTypes=C,k.defaultProps=E,t.default=k,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y={$bs_navbar:g.default.PropTypes.shape({bsClass:g.default.PropTypes.string})},_=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,s.default)(e,["className","children"]),r=this.context.$bs_navbar||{bsClass:"navbar"},a=(0,b.prefix)(r,"brand");return g.default.isValidElement(n)?g.default.cloneElement(n,{className:(0,m.default)(n.props.className,t,a)}):g.default.createElement("span",(0,o.default)({},i,{className:(0,m.default)(t,a)}),n)},t}(g.default.Component);_.contextTypes=y,t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(247),y=i(b),_=n(9),w=i(_),C=n(39),E=i(C),k=(0,f.default)({},y.default.propTypes,{show:g.default.PropTypes.bool,rootClose:g.default.PropTypes.bool,onHide:g.default.PropTypes.func,animation:g.default.PropTypes.oneOfType([g.default.PropTypes.bool,w.default]),onEnter:g.default.PropTypes.func,onEntering:g.default.PropTypes.func,onEntered:g.default.PropTypes.func,onExit:g.default.PropTypes.func,onExiting:g.default.PropTypes.func,onExited:g.default.PropTypes.func}),T={animation:E.default,rootClose:!1,show:!1},x=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.animation,n=e.children,i=(0,o.default)(e,["animation","children"]),r=t===!0?E.default:t||null,a=void 0;return a=r?n:(0,v.cloneElement)(n,{className:(0,m.default)(n.props.className,"in")}),g.default.createElement(y.default,(0,f.default)({},i,{transition:r}),a)},t}(g.default.Component);x.propTypes=k,x.defaultProps=T,t.default=x,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(15),y=i(b),_=n(10),w=i(_),C={disabled:g.default.PropTypes.bool,previous:g.default.PropTypes.bool,next:g.default.PropTypes.bool,onClick:g.default.PropTypes.func,onSelect:g.default.PropTypes.func,eventKey:g.default.PropTypes.any},E={disabled:!1,previous:!1,next:!1},k=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handleSelect=r.handleSelect.bind(r),r}return(0,f.default)(t,e),t.prototype.handleSelect=function(e){var t=this.props,n=t.disabled,i=t.onSelect,r=t.eventKey;(i||n)&&e.preventDefault(),n||i&&i(r,e)},t.prototype.render=function(){var e=this.props,t=e.disabled,n=e.previous,i=e.next,r=e.onClick,a=e.className,l=e.style,u=(0,s.default)(e,["disabled","previous","next","onClick","className","style"]);return delete u.onSelect,delete u.eventKey,g.default.createElement("li",{className:(0,m.default)(a,{disabled:t,previous:n,next:i}),style:l},g.default.createElement(y.default,(0,o.default)({},u,{disabled:t,onClick:(0,w.default)(r,this.handleSelect)})))},t}(g.default.Component);k.propTypes=C,k.defaultProps=E,t.default=k,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(93),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(1),y=i(b),_=n(8),w=n(10),C=i(w),E=n(12),k=i(E),T={accordion:y.default.PropTypes.bool,activeKey:y.default.PropTypes.any,defaultActiveKey:y.default.PropTypes.any,onSelect:y.default.PropTypes.func,role:y.default.PropTypes.string},x={accordion:!1},S=function(e){function t(n,i){(0,d.default)(this,t);var r=(0,f.default)(this,e.call(this,n,i));return r.handleSelect=r.handleSelect.bind(r),r.state={activeKey:n.defaultActiveKey},r}return(0,m.default)(t,e),t.prototype.handleSelect=function(e,t){t.preventDefault(),this.props.onSelect&&this.props.onSelect(e,t),this.state.activeKey===e&&(e=null),this.setState({activeKey:e})},t.prototype.render=function(){var e=this,t=this.props,n=t.accordion,i=t.activeKey,r=t.className,a=t.children,l=(0,u.default)(t,["accordion","activeKey","className","children"]),c=(0,_.splitBsPropsAndOmit)(l,["defaultActiveKey","onSelect"]),d=c[0],p=c[1],f=void 0;n&&(f=null!=i?i:this.state.activeKey,p.role=p.role||"tablist");var h=(0,_.getClassSet)(d);return y.default.createElement("div",(0,o.default)({},p,{className:(0,g.default)(r,h)}),k.default.map(a,function(t){var i={bsStyle:t.props.bsStyle||d.bsStyle};return n&&(0,s.default)(i,{headerRole:"tab",panelRole:"tabpanel",collapsible:!0,expanded:t.props.eventKey===f,onSelect:(0,C.default)(e.handleSelect,t.props.onSelect)}),(0,b.cloneElement)(t,i)}))},t}(y.default.Component);S.propTypes=T,S.defaultProps=x,t.default=(0,_.bsClass)("panel-group",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(14),w=(i(_),n(8)),C=n(10),E=i(C),k=n(39),T=i(k),x={eventKey:v.PropTypes.any,animation:v.PropTypes.oneOfType([v.PropTypes.bool,y.default]),id:v.PropTypes.string,"aria-labelledby":v.PropTypes.string,bsClass:g.default.PropTypes.string,onEnter:v.PropTypes.func,onEntering:v.PropTypes.func,onEntered:v.PropTypes.func,onExit:v.PropTypes.func,onExiting:v.PropTypes.func,onExited:v.PropTypes.func,unmountOnExit:v.PropTypes.bool},S={$bs_tabContainer:v.PropTypes.shape({getId:v.PropTypes.func,unmountOnExit:v.PropTypes.bool}),$bs_tabContent:v.PropTypes.shape({bsClass:v.PropTypes.string,animation:v.PropTypes.oneOfType([v.PropTypes.bool,y.default]),activeKey:v.PropTypes.any,unmountOnExit:v.PropTypes.bool,onPaneEnter:v.PropTypes.func.isRequired,onPaneExited:v.PropTypes.func.isRequired,exiting:v.PropTypes.bool.isRequired})},P={$bs_tabContainer:v.PropTypes.oneOf([null])},O=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handleEnter=r.handleEnter.bind(r),r.handleExited=r.handleExited.bind(r),r.in=!1,r}return(0,f.default)(t,e),t.prototype.getChildContext=function(){return{$bs_tabContainer:null}},t.prototype.componentDidMount=function(){this.shouldBeIn()&&this.handleEnter()},t.prototype.componentDidUpdate=function(){this.in?this.shouldBeIn()||this.handleExited():this.shouldBeIn()&&this.handleEnter()},t.prototype.componentWillUnmount=function(){this.in&&this.handleExited()},t.prototype.handleEnter=function(){var e=this.context.$bs_tabContent;e&&(this.in=e.onPaneEnter(this,this.props.eventKey))},t.prototype.handleExited=function(){var e=this.context.$bs_tabContent;e&&(e.onPaneExited(this),this.in=!1)},t.prototype.getAnimation=function(){if(null!=this.props.animation)return this.props.animation;var e=this.context.$bs_tabContent;return e&&e.animation},t.prototype.isActive=function(){var e=this.context.$bs_tabContent,t=e&&e.activeKey;return this.props.eventKey===t},t.prototype.shouldBeIn=function(){return this.getAnimation()&&this.isActive()},t.prototype.render=function(){var e=this.props,t=e.eventKey,n=e.className,i=e.onEnter,r=e.onEntering,a=e.onEntered,l=e.onExit,u=e.onExiting,c=e.onExited,d=e.unmountOnExit,p=(0,s.default)(e,["eventKey","className","onEnter","onEntering","onEntered","onExit","onExiting","onExited","unmountOnExit"]),f=this.context,h=f.$bs_tabContent,v=f.$bs_tabContainer,b=(0,w.splitBsPropsAndOmit)(p,["animation"]),y=b[0],_=b[1],C=this.isActive(),k=this.getAnimation(),x=null!=d?d:h&&h.unmountOnExit;if(!C&&!k&&x)return null;var S=k===!0?T.default:k||null;h&&(y.bsClass=(0,w.prefix)(h,"pane"));var P=(0,o.default)({},(0,w.getClassSet)(y),{active:C});v&&(_.id=v.getPaneId(t),_["aria-labelledby"]=v.getTabId(t));var O=g.default.createElement("div",(0,o.default)({},_,{role:"tabpanel","aria-hidden":!C,className:(0,m.default)(n,P)}));if(S){var I=h&&h.exiting;return g.default.createElement(S,{in:C&&!I,onEnter:(0,E.default)(this.handleEnter,i),onEntering:r,onEntered:a,onExit:l,onExiting:u,onExited:(0,E.default)(this.handleExited,c),unmountOnExit:x},O)}return O},t}(g.default.Component);O.propTypes=x,O.contextTypes=S,O.childContextTypes=P,t.default=(0,w.bsClass)("tab-pane",O),e.exports=t.default},function(e,t){"use strict";function n(e){return""+e.charAt(0).toUpperCase()+e.slice(1)}t.__esModule=!0,t.default=n,e.exports=t.default},function(e,t,n){e.exports={default:n(188),__esModule:!0}},function(e,t,n){e.exports={default:n(190),__esModule:!0}},function(e,t,n){var i=n(33),r=n(19).document,o=i(r)&&i(r.createElement);e.exports=function(e){return o?r.createElement(e):{}}},function(e,t,n){e.exports=!n(26)&&!n(32)(function(){return 7!=Object.defineProperty(n(95)("div"),"a",{get:function(){return 7}}).a})},function(e,t,n){var i=n(55);e.exports=Object("z").propertyIsEnumerable(0)?Object:function(e){return"String"==i(e)?e.split(""):Object(e)}},function(e,t,n){"use strict";var i=n(59),r=n(18),o=n(103),a=n(27),s=n(21),l=n(34),u=n(205),c=n(62),d=n(213),p=n(17)("iterator"),f=!([].keys&&"next"in[].keys()),h="@@iterator",m="keys",v="values",g=function(){return this};e.exports=function(e,t,n,b,y,_,w){u(n,t,b);var C,E,k,T=function(e){if(!f&&e in O)return O[e];switch(e){case m:return function(){return new n(this,e)};case v:return function(){return new n(this,e)}}return function(){return new n(this,e)}},x=t+" Iterator",S=y==v,P=!1,O=e.prototype,I=O[p]||O[h]||y&&O[y],M=I||T(y),A=y?S?T("entries"):M:void 0,N="Array"==t?O.entries||I:I;if(N&&(k=d(N.call(new e)),k!==Object.prototype&&(c(k,x,!0),i||s(k,p)||a(k,p,g))),S&&I&&I.name!==v&&(P=!0,M=function(){return I.call(this)}),i&&!w||!f&&!P&&O[p]||a(O,p,M),l[t]=M,l[x]=g,y)if(C={values:S?M:T(v),keys:_?M:T(m),entries:A},w)for(E in C)E in O||o(O,E,C[E]);else r(r.P+r.F*(f||P),t,C);return C}},function(e,t,n){var i=n(35),r=n(36),o=n(20),a=n(67),s=n(21),l=n(96),u=Object.getOwnPropertyDescriptor;t.f=n(26)?u:function(e,t){if(e=o(e),t=a(t,!0),l)try{return u(e,t)}catch(e){}if(s(e,t))return r(!i.f.call(e,t),e[t])}},function(e,t,n){var i=n(101),r=n(58).concat("length","prototype");t.f=Object.getOwnPropertyNames||function(e){return i(e,r)}},function(e,t,n){var i=n(21),r=n(20),o=n(197)(!1),a=n(63)("IE_PROTO");e.exports=function(e,t){var n,s=r(e),l=0,u=[];for(n in s)n!=a&&i(s,n)&&u.push(n);for(;t.length>l;)i(s,n=t[l++])&&(~o(u,n)||u.push(n));return u}},function(e,t,n){var i=n(28),r=n(20),o=n(35).f;e.exports=function(e){return function(t){for(var n,a=r(t),s=i(a),l=s.length,u=0,c=[];l>u;)o.call(a,n=s[u++])&&c.push(e?[n,a[n]]:a[n]);return c}}},function(e,t,n){e.exports=n(27)},function(e,t,n){var i=n(65),r=Math.min;e.exports=function(e){return e>0?r(i(e),9007199254740991):0}},function(e,t,n){"use strict";var i=n(215)(!0);n(98)(String,"String",function(e){this._t=String(e),this._i=0},function(){var e,t=this._t,n=this._i;return n>=t.length?{value:void 0,done:!0}:(e=i(t,n),this._i+=e.length,{value:e,done:!1})})},function(e,t,n){"use strict";function i(){var e=void 0===arguments[0]?document:arguments[0];try{return e.activeElement}catch(e){}}var r=n(44);t.__esModule=!0,t.default=i;var o=n(29);r.interopRequireDefault(o),e.exports=t.default},function(e,t){"use strict";e.exports=function(e,t){return e.classList?!!t&&e.classList.contains(t):(" "+e.className+" ").indexOf(" "+t+" ")!==-1}},function(e,t,n){"use strict";var i=n(23),r=function(){};i&&(r=function(){return document.addEventListener?function(e,t,n,i){return e.removeEventListener(t,n,i||!1)}:document.attachEvent?function(e,t,n){return e.detachEvent("on"+t,n)}:void 0}()),e.exports=r},function(e,t,n){"use strict";var i=n(30),r=n(42),o=n(29);e.exports=function(e){var t=o(e),n=r(t),a=t&&t.documentElement,s={top:0,left:0,height:0,width:0};if(t)return i(a,e)?(void 0!==e.getBoundingClientRect&&(s=e.getBoundingClientRect()),(s.width||s.height)&&(s={top:s.top+(n.pageYOffset||a.scrollTop)-(a.clientTop||0),left:s.left+(n.pageXOffset||a.scrollLeft)-(a.clientLeft||0),width:(null==s.width?e.offsetWidth:s.width)||0,height:(null==s.height?e.offsetHeight:s.height)||0}),s):s}},function(e,t,n){"use strict";var i=n(42);e.exports=function(e,t){var n=i(e);return void 0===t?n?"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop:e.scrollTop:void(n?n.scrollTo("pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft,t):e.scrollTop=t)}},function(e,t,n){"use strict";var i=n(242),r=/^-ms-/;e.exports=function(e){return i(e.replace(r,"ms-"))}},function(e,t,n){"use strict";var i,r=n(23);e.exports=function(e){if((!i||e)&&r){var t=document.createElement("div");t.style.position="absolute",t.style.top="-9999px",t.style.width="50px",t.style.height="50px",t.style.overflow="scroll",document.body.appendChild(t),i=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return i}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(1),o=i(r),a=n(13),s=i(a),l=n(74),u=i(l),c=n(37),d=i(c),p=n(73),f=i(p),h=o.default.createClass({displayName:"Portal",propTypes:{container:o.default.PropTypes.oneOfType([u.default,o.default.PropTypes.func])},componentDidMount:function(){this._renderOverlay()},componentDidUpdate:function(){this._renderOverlay()},componentWillReceiveProps:function(e){this._overlayTarget&&e.container!==this.props.container&&(this._portalContainerNode.removeChild(this._overlayTarget),this._portalContainerNode=(0,f.default)(e.container,(0,d.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},componentWillUnmount:function(){this._unrenderOverlay(),this._unmountOverlayTarget()},_mountOverlayTarget:function(){this._overlayTarget||(this._overlayTarget=document.createElement("div"),this._portalContainerNode=(0,f.default)(this.props.container,(0,d.default)(this).body),this._portalContainerNode.appendChild(this._overlayTarget))},_unmountOverlayTarget:function(){this._overlayTarget&&(this._portalContainerNode.removeChild(this._overlayTarget),this._overlayTarget=null),this._portalContainerNode=null},_renderOverlay:function(){var e=this.props.children?o.default.Children.only(this.props.children):null;null!==e?(this._mountOverlayTarget(),this._overlayInstance=s.default.unstable_renderSubtreeIntoContainer(this,e,this._overlayTarget)):(this._unrenderOverlay(),this._unmountOverlayTarget())},_unrenderOverlay:function(){this._overlayTarget&&(s.default.unmountComponentAtNode(this._overlayTarget),this._overlayInstance=null)},render:function(){return null},getMountNode:function(){return this._overlayTarget},getOverlayDOMNode:function(){if(!this.isMounted())throw new Error("getOverlayDOMNode(): A component must be mounted to have a DOM node.");return this._overlayInstance?s.default.findDOMNode(this._overlayInstance):null}});t.default=h,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(e){return 0===e.button}function l(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(30),d=i(c),p=n(1),f=i(p),h=n(13),m=i(h),v=n(116),g=i(v),b=n(37),y=i(b),_=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.handleMouseCapture=function(e){i.preventMouseRootClose=l(e)||!s(e)||(0,d.default)(m.default.findDOMNode(i),e.target)},i.handleMouse=function(){!i.preventMouseRootClose&&i.props.onRootClose&&i.props.onRootClose()},i.handleKeyUp=function(e){27===e.keyCode&&i.props.onRootClose&&i.props.onRootClose()},i.preventMouseRootClose=!1,i}return a(t,e),u(t,[{key:"componentDidMount",value:function(){this.props.disabled||this.addEventListeners()}},{key:"componentDidUpdate",value:function(e){!this.props.disabled&&e.disabled?this.addEventListeners():this.props.disabled&&!e.disabled&&this.removeEventListeners()}},{key:"componentWillUnmount",value:function(){this.props.disabled||this.removeEventListeners()}},{key:"addEventListeners",value:function(){var e=this.props.event,t=(0,y.default)(this);this.documentMouseCaptureListener=(0,g.default)(t,e,this.handleMouseCapture,!0),this.documentMouseListener=(0,g.default)(t,e,this.handleMouse),this.documentKeyupListener=(0,g.default)(t,"keyup",this.handleKeyUp)}},{key:"removeEventListeners",value:function(){this.documentMouseCaptureListener&&this.documentMouseCaptureListener.remove(),this.documentMouseListener&&this.documentMouseListener.remove(),this.documentKeyupListener&&this.documentKeyupListener.remove()}},{key:"render",value:function(){return this.props.children}}]),t}(f.default.Component);t.default=_,_.displayName="RootCloseWrapper",_.propTypes={onRootClose:f.default.PropTypes.func,children:f.default.PropTypes.element,disabled:f.default.PropTypes.bool,event:f.default.PropTypes.oneOf(["click","mousedown"])},_.defaultProps={event:"click"},e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(){}Object.defineProperty(t,"__esModule",{value:!0}),t.EXITING=t.ENTERED=t.ENTERING=t.EXITED=t.UNMOUNTED=void 0;var u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(1),p=i(d),f=n(13),h=i(f),m=n(241),v=i(m),g=n(70),b=i(g),y=n(7),_=i(y),w=v.default.end,C=t.UNMOUNTED=0,E=t.EXITED=1,k=t.ENTERING=2,T=t.ENTERED=3,x=t.EXITING=4,S=function(e){function t(e,n){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n)),r=void 0;return r=e.in?e.transitionAppear?E:T:e.unmountOnExit?C:E,i.state={status:r},i.nextCallback=null,i}return s(t,e),c(t,[{key:"componentDidMount",value:function(){this.props.transitionAppear&&this.props.in&&this.performEnter(this.props)}},{key:"componentWillReceiveProps",value:function(e){e.in&&this.props.unmountOnExit?this.state.status===C&&this.setState({status:E}):this._needsUpdate=!0}},{key:"componentDidUpdate",value:function(){var e=this.state.status;return this.props.unmountOnExit&&e===E?void(this.props.in?this.performEnter(this.props):this.setState({status:C})):void(this._needsUpdate&&(this._needsUpdate=!1,this.props.in?e===x?this.performEnter(this.props):e===E&&this.performEnter(this.props):e!==k&&e!==T||this.performExit(this.props)))}},{key:"componentWillUnmount",value:function(){this.cancelNextCallback()}},{key:"performEnter",value:function(e){var t=this;this.cancelNextCallback();var n=h.default.findDOMNode(this);e.onEnter(n),this.safeSetState({status:k},function(){t.props.onEntering(n),t.onTransitionEnd(n,function(){t.safeSetState({status:T},function(){t.props.onEntered(n)})})})}},{key:"performExit",value:function(e){var t=this;this.cancelNextCallback();var n=h.default.findDOMNode(this);e.onExit(n),this.safeSetState({status:x},function(){t.props.onExiting(n),t.onTransitionEnd(n,function(){t.safeSetState({status:E},function(){t.props.onExited(n)})})})}},{key:"cancelNextCallback",value:function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)}},{key:"safeSetState",value:function(e,t){this.setState(e,this.setNextCallback(t))}},{key:"setNextCallback",value:function(e){var t=this,n=!0;return this.nextCallback=function(i){n&&(n=!1,t.nextCallback=null,e(i))},this.nextCallback.cancel=function(){n=!1},this.nextCallback}},{key:"onTransitionEnd",value:function(e,t){this.setNextCallback(t),e?((0,b.default)(e,w,this.nextCallback),setTimeout(this.nextCallback,this.props.timeout)):setTimeout(this.nextCallback,0)}},{key:"render",value:function(){var e=this.state.status;if(e===C)return null;var n=this.props,i=n.children,o=n.className,a=r(n,["children","className"]);Object.keys(t.propTypes).forEach(function(e){return delete a[e]});var s=void 0;e===E?s=this.props.exitedClassName:e===k?s=this.props.enteringClassName:e===T?s=this.props.enteredClassName:e===x&&(s=this.props.exitingClassName);var l=p.default.Children.only(i);return p.default.cloneElement(l,u({},a,{className:(0,_.default)(l.props.className,o,s)}))}}]),t}(p.default.Component);S.propTypes={in:p.default.PropTypes.bool,unmountOnExit:p.default.PropTypes.bool,transitionAppear:p.default.PropTypes.bool,timeout:p.default.PropTypes.number,exitedClassName:p.default.PropTypes.string,exitingClassName:p.default.PropTypes.string,enteredClassName:p.default.PropTypes.string,enteringClassName:p.default.PropTypes.string,onEnter:p.default.PropTypes.func,onEntering:p.default.PropTypes.func,onEntered:p.default.PropTypes.func,onExit:p.default.PropTypes.func,onExiting:p.default.PropTypes.func,onExited:p.default.PropTypes.func},S.displayName="Transition",S.defaultProps={in:!1,unmountOnExit:!1,transitionAppear:!1,timeout:5e3,onEnter:l,onEntering:l,onEntered:l,onExit:l,onExiting:l,onExited:l},t.default=S},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){return(0,o.default)(e,t,n,i),{remove:function(){(0,s.default)(e,t,n,i)}}};var r=n(70),o=i(r),a=n(108),s=i(a);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return e&&"body"===e.tagName.toLowerCase()}function o(e){var t=(0,c.default)(e),n=(0,l.default)(t),i=n.innerWidth;if(!i){var r=t.documentElement.getBoundingClientRect();i=r.right-Math.abs(r.left)}return t.body.clientWidth<i}function a(e){var t=(0,l.default)(e);return t||r(e)?o(e):e.scrollHeight>e.clientHeight}Object.defineProperty(t,"__esModule",{value:!0}),t.default=a;var s=n(42),l=i(s),u=n(29),c=i(u);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(1),f=i(p),h=n(90),m=i(h),v=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){return f.default.createElement(m.default,(0,o.default)({},this.props,{accordion:!0}),this.props.children)},t}(f.default.Component);t.default=v,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(24),o=i(r),a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(1),y=i(b),_=n(8),w=n(11),C={onDismiss:y.default.PropTypes.func,closeLabel:y.default.PropTypes.string},E={closeLabel:"Close alert"},k=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.renderDismissButton=function(e){return y.default.createElement("button",{type:"button",className:"close",onClick:e,"aria-hidden":"true",tabIndex:"-1"},y.default.createElement("span",null,""))},t.prototype.renderSrOnlyDismissButton=function(e,t){return y.default.createElement("button",{type:"button",className:"close sr-only",onClick:e},t)},t.prototype.render=function(){var e,t=this.props,n=t.onDismiss,i=t.closeLabel,r=t.className,o=t.children,a=(0,u.default)(t,["onDismiss","closeLabel","className","children"]),l=(0,_.splitBsProps)(a),c=l[0],d=l[1],p=!!n,f=(0,s.default)({},(0,_.getClassSet)(c),(e={},e[(0,_.prefix)(c,"dismissable")]=p,e));return y.default.createElement("div",(0,s.default)({},d,{role:"alert",className:(0,g.default)(r,f)}),p&&this.renderDismissButton(n),o,p&&this.renderSrOnlyDismissButton(n,i))},t}(y.default.Component);k.propTypes=C,k.defaultProps=E,t.default=(0,_.bsStyles)((0,o.default)(w.State),w.State.INFO,(0,_.bsClass)("alert",k)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y={pullRight:g.default.PropTypes.bool},_={pullRight:!1},w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.hasContent=function(e){var t=!1;return g.default.Children.forEach(e,function(e){t||(e||0===e)&&(t=!0)}),t},t.prototype.render=function(){var e=this.props,t=e.pullRight,n=e.className,i=e.children,r=(0,s.default)(e,["pullRight","className","children"]),a=(0,b.splitBsProps)(r),l=a[0],u=a[1],c=(0,o.default)({},(0,b.getClassSet)(l),{"pull-right":t,hidden:!this.hasContent(i)});return g.default.createElement("span",(0,o.default)({},u,{className:(0,m.default)(n,c)}),i)},t}(g.default.Component);w.propTypes=y,w.defaultProps=_,t.default=(0,b.bsClass)("badge",w),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(75),y=i(b),_=n(8),w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,_.splitBsProps)(n),r=i[0],a=i[1],l=(0,_.getClassSet)(r);return g.default.createElement("ol",(0,o.default)({},a,{role:"navigation","aria-label":"breadcrumbs",className:(0,m.default)(t,l)}))},t}(g.default.Component);w.Item=y.default,t.default=(0,_.bsClass)("breadcrumb",w),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(31),y=i(b),_=n(8),w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,_.splitBsProps)(n),r=i[0],a=i[1],l=(0,_.getClassSet)(r);return g.default.createElement("div",(0,o.default)({},a,{role:"toolbar",className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,_.bsClass)("btn-toolbar",(0,_.bsSizes)(y.default.SIZES,w)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(124),y=i(b),_=n(77),w=i(_),C=n(50),E=i(C),k=n(15),T=i(k),x=n(8),S=n(12),P=i(S),O={slide:g.default.PropTypes.bool,indicators:g.default.PropTypes.bool,interval:g.default.PropTypes.number,controls:g.default.PropTypes.bool,
pauseOnHover:g.default.PropTypes.bool,wrap:g.default.PropTypes.bool,onSelect:g.default.PropTypes.func,onSlideEnd:g.default.PropTypes.func,activeIndex:g.default.PropTypes.number,defaultActiveIndex:g.default.PropTypes.number,direction:g.default.PropTypes.oneOf(["prev","next"]),prevIcon:g.default.PropTypes.node,nextIcon:g.default.PropTypes.node},I={slide:!0,interval:5e3,pauseOnHover:!0,wrap:!0,indicators:!0,controls:!0,prevIcon:g.default.createElement(E.default,{glyph:"chevron-left"}),nextIcon:g.default.createElement(E.default,{glyph:"chevron-right"})},M=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));r.handleMouseOver=r.handleMouseOver.bind(r),r.handleMouseOut=r.handleMouseOut.bind(r),r.handlePrev=r.handlePrev.bind(r),r.handleNext=r.handleNext.bind(r),r.handleItemAnimateOutEnd=r.handleItemAnimateOutEnd.bind(r);var o=n.defaultActiveIndex;return r.state={activeIndex:null!=o?o:0,previousActiveIndex:null,direction:null},r.isUnmounted=!1,r}return(0,f.default)(t,e),t.prototype.componentWillReceiveProps=function(e){var t=this.getActiveIndex();null!=e.activeIndex&&e.activeIndex!==t&&(clearTimeout(this.timeout),this.setState({previousActiveIndex:t,direction:null!=e.direction?e.direction:this.getDirection(t,e.activeIndex)}))},t.prototype.componentDidMount=function(){this.waitForNext()},t.prototype.componentWillUnmount=function(){clearTimeout(this.timeout),this.isUnmounted=!0},t.prototype.handleMouseOver=function(){this.props.pauseOnHover&&this.pause()},t.prototype.handleMouseOut=function(){this.isPaused&&this.play()},t.prototype.handlePrev=function(e){var t=this.getActiveIndex()-1;if(t<0){if(!this.props.wrap)return;t=P.default.count(this.props.children)-1}this.select(t,e,"prev")},t.prototype.handleNext=function(e){var t=this.getActiveIndex()+1,n=P.default.count(this.props.children);if(t>n-1){if(!this.props.wrap)return;t=0}this.select(t,e,"next")},t.prototype.handleItemAnimateOutEnd=function(){var e=this;this.setState({previousActiveIndex:null,direction:null},function(){e.waitForNext(),e.props.onSlideEnd&&e.props.onSlideEnd()})},t.prototype.getActiveIndex=function(){var e=this.props.activeIndex;return null!=e?e:this.state.activeIndex},t.prototype.getDirection=function(e,t){return e===t?null:e>t?"prev":"next"},t.prototype.select=function(e,t,n){if(clearTimeout(this.timeout),!this.isUnmounted){var i=this.getActiveIndex();n=n||this.getDirection(i,e);var r=this.props.onSelect;if(r&&(r.length>1?(t?(t.persist(),t.direction=n):t={direction:n},r(e,t)):r(e)),null==this.props.activeIndex&&e!==i){if(null!=this.state.previousActiveIndex)return;this.setState({activeIndex:e,previousActiveIndex:i,direction:n})}}},t.prototype.waitForNext=function(){var e=this.props,t=e.slide,n=e.interval,i=e.activeIndex;!this.isPaused&&t&&n&&null==i&&(this.timeout=setTimeout(this.handleNext,n))},t.prototype.pause=function(){this.isPaused=!0,clearTimeout(this.timeout)},t.prototype.play=function(){this.isPaused=!1,this.waitForNext()},t.prototype.renderIndicators=function(e,t,n){var i=this,r=[];return P.default.forEach(e,function(e,n){r.push(g.default.createElement("li",{key:n,className:n===t?"active":null,onClick:function(e){return i.select(n,e)}})," ")}),g.default.createElement("ol",{className:(0,x.prefix)(n,"indicators")},r)},t.prototype.renderControls=function(e,t,n,i,r,o){var a=(0,x.prefix)(o,"control"),s=P.default.count(t);return[(e||0!==n)&&g.default.createElement(T.default,{key:"prev",className:(0,m.default)(a,"left"),onClick:this.handlePrev},i),(e||n!==s-1)&&g.default.createElement(T.default,{key:"next",className:(0,m.default)(a,"right"),onClick:this.handleNext},r)]},t.prototype.render=function(){var e=this,t=this.props,n=t.slide,i=t.indicators,r=t.controls,a=t.wrap,l=t.prevIcon,u=t.nextIcon,c=t.className,d=t.children,p=(0,s.default)(t,["slide","indicators","controls","wrap","prevIcon","nextIcon","className","children"]),f=this.state,h=f.previousActiveIndex,b=f.direction,y=(0,x.splitBsPropsAndOmit)(p,["interval","pauseOnHover","onSelect","onSlideEnd","activeIndex","defaultActiveIndex","direction"]),_=y[0],w=y[1],C=this.getActiveIndex(),E=(0,o.default)({},(0,x.getClassSet)(_),{slide:n});return g.default.createElement("div",(0,o.default)({},w,{className:(0,m.default)(c,E),onMouseOver:this.handleMouseOver,onMouseOut:this.handleMouseOut}),i&&this.renderIndicators(d,C,_),g.default.createElement("div",{className:(0,x.prefix)(_,"inner")},P.default.map(d,function(t,i){var r=i===C,o=n&&i===h;return(0,v.cloneElement)(t,{active:r,index:i,animateOut:o,animateIn:r&&null!=h&&n,direction:b,onAnimateOutEnd:o?e.handleItemAnimateOutEnd:null})})),r&&this.renderControls(a,d,C,l,u,_))},t}(g.default.Component);M.propTypes=O,M.defaultProps=I,M.Caption=y.default,M.Item=w.default,t.default=(0,x.bsClass)("carousel",M),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("carousel-caption",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(14),y=(i(b),n(8)),_={inline:g.default.PropTypes.bool,disabled:g.default.PropTypes.bool,validationState:g.default.PropTypes.oneOf(["success","warning","error"]),inputRef:g.default.PropTypes.func},w={inline:!1,disabled:!1},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.inline,n=e.disabled,i=e.validationState,r=e.inputRef,a=e.className,l=e.style,u=e.children,c=(0,s.default)(e,["inline","disabled","validationState","inputRef","className","style","children"]),d=(0,y.splitBsProps)(c),p=d[0],f=d[1],h=g.default.createElement("input",(0,o.default)({},f,{ref:r,type:"checkbox",disabled:n}));if(t){var v,b=(v={},v[(0,y.prefix)(p,"inline")]=!0,v.disabled=n,v);return g.default.createElement("label",{className:(0,m.default)(a,b),style:l},h,u)}var _=(0,o.default)({},(0,y.getClassSet)(p),{disabled:n});return i&&(_["has-"+i]=!0),g.default.createElement("div",{className:(0,m.default)(a,_),style:l},g.default.createElement("label",null,h,u))},t}(g.default.Component);C.propTypes=_,C.defaultProps=w,t.default=(0,y.bsClass)("checkbox",C),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w=n(92),C=i(w),E=n(11),k={componentClass:y.default,visibleXsBlock:g.default.PropTypes.bool,visibleSmBlock:g.default.PropTypes.bool,visibleMdBlock:g.default.PropTypes.bool,visibleLgBlock:g.default.PropTypes.bool},T={componentClass:"div"},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return E.DEVICE_SIZES.forEach(function(e){var t="visible"+(0,C.default)(e)+"Block";l[t]&&(u["visible-"+e+"-block"]=!0),delete l[t]}),g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);x.propTypes=k,x.defaultProps=T,t.default=(0,_.bsClass)("clearfix",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w=n(11),C={componentClass:y.default,xs:g.default.PropTypes.number,sm:g.default.PropTypes.number,md:g.default.PropTypes.number,lg:g.default.PropTypes.number,xsHidden:g.default.PropTypes.bool,smHidden:g.default.PropTypes.bool,mdHidden:g.default.PropTypes.bool,lgHidden:g.default.PropTypes.bool,xsOffset:g.default.PropTypes.number,smOffset:g.default.PropTypes.number,mdOffset:g.default.PropTypes.number,lgOffset:g.default.PropTypes.number,xsPush:g.default.PropTypes.number,smPush:g.default.PropTypes.number,mdPush:g.default.PropTypes.number,lgPush:g.default.PropTypes.number,xsPull:g.default.PropTypes.number,smPull:g.default.PropTypes.number,mdPull:g.default.PropTypes.number,lgPull:g.default.PropTypes.number},E={componentClass:"div"},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=[];return w.DEVICE_SIZES.forEach(function(e){function t(t,n){var i=""+e+t,r=l[i];null!=r&&u.push((0,_.prefix)(a,""+e+n+"-"+r)),delete l[i]}t("",""),t("Offset","-offset"),t("Push","-push"),t("Pull","-pull");var n=e+"Hidden";l[n]&&u.push("hidden-"+e),delete l[n]}),g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);k.propTypes=C,k.defaultProps=E,t.default=(0,_.bsClass)("col",k),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(14),y=(i(b),n(8)),_={htmlFor:g.default.PropTypes.string,srOnly:g.default.PropTypes.bool},w={srOnly:!1},C={$bs_formGroup:g.default.PropTypes.object},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,i=n.htmlFor,r=void 0===i?t:i,a=n.srOnly,l=n.className,u=(0,s.default)(n,["htmlFor","srOnly","className"]),c=(0,y.splitBsProps)(u),d=c[0],p=c[1],f=(0,o.default)({},(0,y.getClassSet)(d),{"sr-only":a});return g.default.createElement("label",(0,o.default)({},p,{htmlFor:r,className:(0,m.default)(l,f)}))},t}(g.default.Component);E.propTypes=_,E.defaultProps=w,E.contextTypes=C,t.default=(0,y.bsClass)("control-label",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(1),m=i(h),v=n(38),g=i(v),b=n(40),y=i(b),_=(0,f.default)({},g.default.propTypes,{bsStyle:m.default.PropTypes.string,bsSize:m.default.PropTypes.string,title:m.default.PropTypes.node.isRequired,noCaret:m.default.PropTypes.bool,children:m.default.PropTypes.node}),w=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsSize,n=e.bsStyle,i=e.title,r=e.children,a=(0,o.default)(e,["bsSize","bsStyle","title","children"]),s=(0,y.default)(a,g.default.ControlledComponent),l=s[0],u=s[1];return m.default.createElement(g.default,(0,f.default)({},l,{bsSize:t,bsStyle:n}),m.default.createElement(g.default.Toggle,(0,f.default)({},u,{bsSize:t,bsStyle:n}),i),m.default.createElement(g.default.Menu,null,r))},t}(m.default.Component);w.propTypes=_,t.default=w,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(182),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(72),y=i(b),_=n(1),w=i(_),C=n(13),E=i(C),k=n(114),T=i(k),x=n(8),S=n(10),P=i(S),O=n(12),I=i(O),M={open:w.default.PropTypes.bool,pullRight:w.default.PropTypes.bool,onClose:w.default.PropTypes.func,labelledBy:w.default.PropTypes.oneOfType([w.default.PropTypes.string,w.default.PropTypes.number]),onSelect:w.default.PropTypes.func},A={bsRole:"menu",pullRight:!1},N=function(e){function t(n){(0,d.default)(this,t);var i=(0,f.default)(this,e.call(this,n));return i.handleKeyDown=i.handleKeyDown.bind(i),i}return(0,m.default)(t,e),t.prototype.handleKeyDown=function(e){switch(e.keyCode){case y.default.codes.down:this.focusNext(),e.preventDefault();break;case y.default.codes.up:this.focusPrevious(),e.preventDefault();break;case y.default.codes.esc:case y.default.codes.tab:this.props.onClose(e)}},t.prototype.getItemsAndActiveIndex=function(){var e=this.getFocusableMenuItems(),t=e.indexOf(document.activeElement);return{items:e,activeIndex:t}},t.prototype.getFocusableMenuItems=function(){var e=E.default.findDOMNode(this);return e?(0,u.default)(e.querySelectorAll('[tabIndex="-1"]')):[]},t.prototype.focusNext=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;if(0!==t.length){var i=n===t.length-1?0:n+1;t[i].focus()}},t.prototype.focusPrevious=function(){var e=this.getItemsAndActiveIndex(),t=e.items,n=e.activeIndex;if(0!==t.length){var i=0===n?t.length-1:n-1;t[i].focus()}},t.prototype.render=function(){var e,t=this,n=this.props,i=n.open,r=n.pullRight,a=n.onClose,l=n.labelledBy,u=n.onSelect,c=n.className,d=n.children,p=(0,s.default)(n,["open","pullRight","onClose","labelledBy","onSelect","className","children"]),f=(0,x.splitBsProps)(p),h=f[0],m=f[1],v=(0,o.default)({},(0,x.getClassSet)(h),(e={},e[(0,x.prefix)(h,"right")]=r,e));return w.default.createElement(T.default,{disabled:!i,onRootClose:a},w.default.createElement("ul",(0,o.default)({},m,{role:"menu",className:(0,g.default)(c,v),"aria-labelledby":l}),I.default.map(d,function(e){return w.default.cloneElement(e,{onKeyDown:(0,P.default)(e.props.onKeyDown,t.handleKeyDown),onSelect:(0,P.default)(e.props.onSelect,u)})})))},t}(w.default.Component);N.propTypes=M,N.defaultProps=A,t.default=(0,x.bsClass)("dropdown-menu",N),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={horizontal:g.default.PropTypes.bool,inline:g.default.PropTypes.bool,componentClass:y.default},C={horizontal:!1,inline:!1,componentClass:"form"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.horizontal,n=e.inline,i=e.componentClass,r=e.className,a=(0,s.default)(e,["horizontal","inline","componentClass","className"]),l=(0,_.splitBsProps)(a),u=l[0],c=l[1],d=[];return t&&d.push((0,_.prefix)(u,"horizontal")),n&&d.push((0,_.prefix)(u,"inline")),g.default.createElement(i,(0,o.default)({},c,{className:(0,m.default)(r,d)}))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("form",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(14),w=(i(_),n(133)),C=i(w),E=n(134),k=i(E),T=n(8),x={componentClass:y.default,type:g.default.PropTypes.string,id:g.default.PropTypes.string},S={componentClass:"input"},P={$bs_formGroup:g.default.PropTypes.object},O=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.context.$bs_formGroup,t=e&&e.controlId,n=this.props,i=n.componentClass,r=n.type,a=n.id,l=void 0===a?t:a,u=n.className,c=(0,s.default)(n,["componentClass","type","id","className"]),d=(0,T.splitBsProps)(c),p=d[0],f=d[1],h=void 0;return"file"!==r&&(h=(0,T.getClassSet)(p)),g.default.createElement(i,(0,o.default)({},f,{type:r,id:l,className:(0,m.default)(u,h)}))},t}(g.default.Component);O.propTypes=x,O.defaultProps=S,O.contextTypes=P,O.Feedback=C.default,O.Static=k.default,t.default=(0,T.bsClass)("form-control",O),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(5),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(50),y=i(b),_=n(8),w={bsRole:"feedback"},C={$bs_formGroup:g.default.PropTypes.object},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.getGlyph=function(e){switch(e){case"success":return"ok";case"warning":return"warning-sign";case"error":return"remove";default:return null}},t.prototype.renderDefaultFeedback=function(e,t,n,i){var r=this.getGlyph(e&&e.validationState);return r?g.default.createElement(y.default,(0,s.default)({},i,{glyph:r,className:(0,m.default)(t,n)})):null},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,o.default)(e,["className","children"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);if(!n)return this.renderDefaultFeedback(this.context.$bs_formGroup,t,u,l);var c=g.default.Children.only(n);return g.default.cloneElement(c,(0,s.default)({},l,{className:(0,m.default)(c.props.className,t,u)}))},t}(g.default.Component);E.defaultProps=w,E.contextTypes=C,t.default=(0,_.bsClass)("form-control-feedback",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"p"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("form-control-static",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=n(11),_=n(12),w=i(_),C={controlId:g.default.PropTypes.string,validationState:g.default.PropTypes.oneOf(["success","warning","error"])},E={$bs_formGroup:g.default.PropTypes.object.isRequired},k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.controlId,n=e.validationState;return{$bs_formGroup:{controlId:t,validationState:n}}},t.prototype.hasFeedback=function(e){var t=this;return w.default.some(e,function(e){return"feedback"===e.props.bsRole||e.props.children&&t.hasFeedback(e.props.children)})},t.prototype.render=function(){var e=this.props,t=e.validationState,n=e.className,i=e.children,r=(0,s.default)(e,["validationState","className","children"]),a=(0,b.splitBsPropsAndOmit)(r,["controlId"]),l=a[0],u=a[1],c=(0,o.default)({},(0,b.getClassSet)(l),{"has-feedback":this.hasFeedback(i)});return t&&(c["has-"+t]=!0),g.default.createElement("div",(0,o.default)({},u,{className:(0,m.default)(n,c)}),i)},t}(g.default.Component);k.propTypes=C,k.childContextTypes=E,t.default=(0,b.bsClass)("form-group",(0,b.bsSizes)([y.Size.LARGE,y.Size.SMALL],k)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("span",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("help-block",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y={responsive:g.default.PropTypes.bool,rounded:g.default.PropTypes.bool,circle:g.default.PropTypes.bool,thumbnail:g.default.PropTypes.bool},_={responsive:!1,rounded:!1,circle:!1,thumbnail:!1},w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.responsive,i=t.rounded,r=t.circle,a=t.thumbnail,l=t.className,u=(0,s.default)(t,["responsive","rounded","circle","thumbnail","className"]),c=(0,b.splitBsProps)(u),d=c[0],p=c[1],f=(e={},e[(0,b.prefix)(d,"responsive")]=n,e[(0,b.prefix)(d,"rounded")]=i,e[(0,b.prefix)(d,"circle")]=r,e[(0,b.prefix)(d,"thumbnail")]=a,e);return g.default.createElement("img",(0,o.default)({},p,{className:(0,m.default)(l,f)}))},t}(g.default.Component);w.propTypes=y,w.defaultProps=_,t.default=(0,b.bsClass)("img",w),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(139),y=i(b),_=n(140),w=i(_),C=n(8),E=n(11),k=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,C.splitBsProps)(n),r=i[0],a=i[1],l=(0,C.getClassSet)(r);return g.default.createElement("span",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);k.Addon=y.default,k.Button=w.default,t.default=(0,C.bsClass)("input-group",(0,C.bsSizes)([E.Size.LARGE,E.Size.SMALL],k)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("span",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("input-group-addon",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("span",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("input-group-btn",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(1),m=i(h),v=n(7),g=i(v),b=n(9),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return m.default.createElement(t,(0,o.default)({},l,{className:(0,g.default)(n,u)}))},t}(m.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("jumbotron",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(24),o=i(r),a=n(5),s=i(a),l=n(6),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(1),y=i(b),_=n(8),w=n(11),C=function(e){function t(){return(0,d.default)(this,t),(0,f.default)(this,e.apply(this,arguments))}return(0,m.default)(t,e),t.prototype.hasContent=function(e){var t=!1;return y.default.Children.forEach(e,function(e){t||(e||0===e)&&(t=!0)}),t},t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,u.default)(e,["className","children"]),r=(0,_.splitBsProps)(i),o=r[0],a=r[1],l=(0,s.default)({},(0,_.getClassSet)(o),{hidden:!this.hasContent(n)});return y.default.createElement("span",(0,s.default)({},a,{className:(0,g.default)(t,l)}),n)},t}(y.default.Component);t.default=(0,_.bsClass)("label",(0,_.bsStyles)([].concat((0,o.default)(w.State),[w.Style.DEFAULT,w.Style.PRIMARY]),w.Style.DEFAULT,C)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){return e?T.default.some(e,function(e){return e.type!==C.default||e.props.href||e.props.onClick})?"div":"ul":"div"}t.__esModule=!0;var o=n(5),a=i(o),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(7),v=i(m),g=n(1),b=i(g),y=n(9),_=i(y),w=n(80),C=i(w),E=n(8),k=n(12),T=i(k),x={componentClass:_.default},S=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,e.apply(this,arguments))}return(0,h.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=e.componentClass,i=void 0===n?r(t):n,o=e.className,s=(0,l.default)(e,["children","componentClass","className"]),u=(0,E.splitBsProps)(s),c=u[0],d=u[1],p=(0,E.getClassSet)(c),f="ul"===i&&T.default.every(t,function(e){return e.type===C.default});return b.default.createElement(i,(0,a.default)({},d,{className:(0,v.default)(o,p)}),f?T.default.map(t,function(e){return(0,g.cloneElement)(e,{listItem:!0})}):t)},t}(b.default.Component);S.propTypes=x,t.default=(0,E.bsClass)("list-group",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("media-body",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"h4"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("media-heading",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(51),y=i(b),_=n(8),w={align:g.default.PropTypes.oneOf(["top","middle","bottom"])},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.align,n=e.className,i=(0,s.default)(e,["align","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return t&&(u[(0,_.prefix)(y.default.defaultProps,t)]=!0),g.default.createElement("div",(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);C.propTypes=w,t.default=(0,_.bsClass)("media-left",C),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("ul",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("media-list",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("li",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("media",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(51),y=i(b),_=n(8),w={align:g.default.PropTypes.oneOf(["top","middle","bottom"])},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.align,n=e.className,i=(0,s.default)(e,["align","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return t&&(u[(0,_.prefix)(y.default.defaultProps,t)]=!0),g.default.createElement("div",(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);C.propTypes=w,t.default=(0,_.bsClass)("media-right",C),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(45),y=i(b),_=n(15),w=i(_),C=n(8),E=n(10),k=i(E),T={active:g.default.PropTypes.bool,disabled:g.default.PropTypes.bool,divider:(0,y.default)(g.default.PropTypes.bool,function(e){var t=e.divider,n=e.children;return t&&n?new Error("Children will not be rendered for dividers"):null}),eventKey:g.default.PropTypes.any,header:g.default.PropTypes.bool,href:g.default.PropTypes.string,onClick:g.default.PropTypes.func,onSelect:g.default.PropTypes.func},x={divider:!1,disabled:!1,header:!1},S=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handleClick=r.handleClick.bind(r),r}return(0,f.default)(t,e),t.prototype.handleClick=function(e){
var t=this.props,n=t.href,i=t.disabled,r=t.onSelect,o=t.eventKey;n&&!i||e.preventDefault(),i||r&&r(o,e)},t.prototype.render=function(){var e=this.props,t=e.active,n=e.disabled,i=e.divider,r=e.header,a=e.onClick,l=e.className,u=e.style,c=(0,s.default)(e,["active","disabled","divider","header","onClick","className","style"]),d=(0,C.splitBsPropsAndOmit)(c,["eventKey","onSelect"]),p=d[0],f=d[1];return i?(f.children=void 0,g.default.createElement("li",(0,o.default)({},f,{role:"separator",className:(0,m.default)(l,"divider"),style:u}))):r?g.default.createElement("li",(0,o.default)({},f,{role:"heading",className:(0,m.default)(l,(0,C.prefix)(p,"header")),style:u})):g.default.createElement("li",{role:"presentation",className:(0,m.default)(l,{active:t,disabled:n}),style:u},g.default.createElement(w.default,(0,o.default)({},f,{role:"menuitem",tabIndex:"-1",onClick:(0,k.default)(a,this.handleClick)})))},t}(g.default.Component);S.propTypes=T,S.defaultProps=x,t.default=(0,C.bsClass)("dropdown",S),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(7),m=i(h),v=n(234),g=i(v),b=n(29),y=i(b),_=n(23),w=i(_),C=n(112),E=i(C),k=n(1),T=i(k),x=n(13),S=i(x),P=n(245),O=i(P),I=n(117),M=i(I),A=n(9),N=i(A),j=n(39),L=i(j),D=n(81),R=i(D),F=n(152),B=i(F),U=n(82),$=i(U),H=n(83),z=i(H),W=n(84),V=i(W),G=n(8),q=n(10),K=i(q),Y=n(40),Q=i(Y),X=n(11),J=(0,f.default)({},O.default.propTypes,B.default.propTypes,{backdrop:T.default.PropTypes.oneOf(["static",!0,!1]),keyboard:T.default.PropTypes.bool,animation:T.default.PropTypes.bool,dialogComponentClass:N.default,autoFocus:T.default.PropTypes.bool,enforceFocus:T.default.PropTypes.bool,show:T.default.PropTypes.bool,onHide:T.default.PropTypes.func,onEnter:T.default.PropTypes.func,onEntering:T.default.PropTypes.func,onEntered:T.default.PropTypes.func,onExit:T.default.PropTypes.func,onExiting:T.default.PropTypes.func,onExited:T.default.PropTypes.func,container:O.default.propTypes.container}),Z=(0,f.default)({},O.default.defaultProps,{animation:!0,dialogComponentClass:B.default}),ee={$bs_modal:T.default.PropTypes.shape({onHide:T.default.PropTypes.func})},te=function(e){function t(n,i){(0,s.default)(this,t);var r=(0,u.default)(this,e.call(this,n,i));return r.handleEntering=r.handleEntering.bind(r),r.handleExited=r.handleExited.bind(r),r.handleWindowResize=r.handleWindowResize.bind(r),r.handleDialogClick=r.handleDialogClick.bind(r),r.state={style:{}},r}return(0,d.default)(t,e),t.prototype.getChildContext=function(){return{$bs_modal:{onHide:this.props.onHide}}},t.prototype.componentWillUnmount=function(){this.handleExited()},t.prototype.handleEntering=function(){g.default.on(window,"resize",this.handleWindowResize),this.updateStyle()},t.prototype.handleExited=function(){g.default.off(window,"resize",this.handleWindowResize)},t.prototype.handleWindowResize=function(){this.updateStyle()},t.prototype.handleDialogClick=function(e){e.target===e.currentTarget&&this.props.onHide()},t.prototype.updateStyle=function(){if(w.default){var e=this._modal.getDialogElement(),t=e.scrollHeight,n=(0,y.default)(e),i=(0,M.default)(S.default.findDOMNode(this.props.container||n.body)),r=t>n.documentElement.clientHeight;this.setState({style:{paddingRight:i&&!r?(0,E.default)():void 0,paddingLeft:!i&&r?(0,E.default)():void 0}})}},t.prototype.render=function(){var e=this,n=this.props,i=n.backdrop,r=n.animation,a=n.show,s=n.dialogComponentClass,l=n.className,u=n.style,c=n.children,d=n.onEntering,p=n.onExited,h=(0,o.default)(n,["backdrop","animation","show","dialogComponentClass","className","style","children","onEntering","onExited"]),v=(0,Q.default)(h,O.default),g=v[0],b=v[1],y=a&&!r&&"in";return T.default.createElement(O.default,(0,f.default)({},g,{ref:function(t){e._modal=t},show:a,onEntering:(0,K.default)(d,this.handleEntering),onExited:(0,K.default)(p,this.handleExited),backdrop:i,backdropClassName:(0,m.default)((0,G.prefix)(h,"backdrop"),y),containerClassName:(0,G.prefix)(h,"open"),transition:r?L.default:void 0,dialogTransitionTimeout:t.TRANSITION_DURATION,backdropTransitionTimeout:t.BACKDROP_TRANSITION_DURATION}),T.default.createElement(s,(0,f.default)({},b,{style:(0,f.default)({},this.state.style,u),className:(0,m.default)(l,y),onClick:i===!0?this.handleDialogClick:null}),c))},t}(T.default.Component);te.propTypes=J,te.defaultProps=Z,te.childContextTypes=ee,te.Body=R.default,te.Header=z.default,te.Title=V.default,te.Footer=$.default,te.Dialog=B.default,te.TRANSITION_DURATION=300,te.BACKDROP_TRANSITION_DURATION=150,t.default=(0,G.bsClass)("modal",(0,G.bsSizes)([X.Size.LARGE,X.Size.SMALL],te)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=n(11),_={dialogClassName:g.default.PropTypes.string},w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.dialogClassName,i=t.className,r=t.style,a=t.children,l=(0,s.default)(t,["dialogClassName","className","style","children"]),u=(0,b.splitBsProps)(l),c=u[0],d=u[1],p=(0,b.prefix)(c),f=(0,o.default)({display:"block"},r),h=(0,o.default)({},(0,b.getClassSet)(c),(e={},e[p]=!1,e[(0,b.prefix)(c,"dialog")]=!0,e));return g.default.createElement("div",(0,o.default)({},d,{tabIndex:"-1",role:"dialog",style:f,className:(0,m.default)(i,p)}),g.default.createElement("div",{className:(0,m.default)(n,h)},g.default.createElement("div",{className:(0,b.prefix)(c,"content"),role:"document"},a)))},t}(g.default.Component);w.propTypes=_,t.default=(0,b.bsClass)("modal",(0,b.bsSizes)([y.Size.LARGE,y.Size.SMALL],w)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(38),y=i(b),_=n(40),w=i(_),C=n(12),E=i(C),k=(0,f.default)({},y.default.propTypes,{title:g.default.PropTypes.node.isRequired,noCaret:g.default.PropTypes.bool,active:g.default.PropTypes.bool,children:g.default.PropTypes.node}),T=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.isActive=function(e,t,n){var i=e.props,r=this;return!!(i.active||null!=t&&i.eventKey===t||n&&i.href===n)||!!E.default.some(i.children,function(e){return r.isActive(e,t,n)})||i.active},t.prototype.render=function(){var e=this,t=this.props,n=t.title,i=t.activeKey,r=t.activeHref,a=t.className,s=t.style,l=t.children,u=(0,o.default)(t,["title","activeKey","activeHref","className","style","children"]),c=this.isActive(this,i,r);delete u.active,delete u.eventKey;var d=(0,w.default)(u,y.default.ControlledComponent),p=d[0],h=d[1];return g.default.createElement(y.default,(0,f.default)({},p,{componentClass:"li",className:(0,m.default)(a,{active:c}),style:s}),g.default.createElement(y.default.Toggle,(0,f.default)({},h,{useAnchor:!0}),n),g.default.createElement(y.default.Menu,null,E.default.map(l,function(t){return g.default.cloneElement(t,{active:e.isActive(t,i,r)})})))},t}(g.default.Component);T.propTypes=k,t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i=function(e,n){var i=e.componentClass,r=e.className,o=e.pullRight,s=e.pullLeft,u=(0,l.default)(e,["componentClass","className","pullRight","pullLeft"]),c=n.$bs_navbar,d=void 0===c?{bsClass:"navbar"}:c;return b.default.createElement(i,(0,a.default)({},u,{className:(0,v.default)(r,(0,N.prefix)(d,t),o&&(0,N.prefix)(d,"right"),s&&(0,N.prefix)(d,"left"))}))};return i.displayName=n,i.propTypes={componentClass:_.default,pullRight:b.default.PropTypes.bool,pullLeft:b.default.PropTypes.bool},i.defaultProps={componentClass:e,pullRight:!1,pullLeft:!1},i.contextTypes={$bs_navbar:g.PropTypes.shape({bsClass:g.PropTypes.string})},i}t.__esModule=!0;var o=n(5),a=i(o),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(7),v=i(m),g=n(1),b=i(g),y=n(9),_=i(y),w=n(48),C=i(w),E=n(79),k=i(E),T=n(87),x=i(T),S=n(155),P=i(S),O=n(156),I=i(O),M=n(157),A=i(M),N=n(8),j=n(11),L={fixedTop:b.default.PropTypes.bool,fixedBottom:b.default.PropTypes.bool,staticTop:b.default.PropTypes.bool,inverse:b.default.PropTypes.bool,fluid:b.default.PropTypes.bool,componentClass:_.default,onToggle:b.default.PropTypes.func,expanded:b.default.PropTypes.bool,role:b.default.PropTypes.string},D={componentClass:"nav",fixedTop:!1,fixedBottom:!1,staticTop:!1,inverse:!1,fluid:!1},R={$bs_navbar:g.PropTypes.shape({bsClass:g.PropTypes.string,expanded:g.PropTypes.bool,onToggle:g.PropTypes.func.isRequired})},F=function(e){function t(n,i){(0,c.default)(this,t);var r=(0,p.default)(this,e.call(this,n,i));return r.handleToggle=r.handleToggle.bind(r),r}return(0,h.default)(t,e),t.prototype.getChildContext=function(){var e=this.props,t=e.bsClass,n=e.expanded;return{$bs_navbar:{bsClass:t,expanded:n,onToggle:this.handleToggle}}},t.prototype.handleToggle=function(){var e=this.props,t=e.onToggle,n=e.expanded;t(!n)},t.prototype.render=function(){var e,t=this.props,n=t.componentClass,i=t.fixedTop,r=t.fixedBottom,o=t.staticTop,s=t.inverse,u=t.fluid,c=t.className,d=t.children,p=(0,l.default)(t,["componentClass","fixedTop","fixedBottom","staticTop","inverse","fluid","className","children"]),f=(0,N.splitBsPropsAndOmit)(p,["expanded","onToggle"]),h=f[0],m=f[1];void 0===m.role&&"nav"!==n&&(m.role="navigation"),s&&(h.bsStyle=j.Style.INVERSE);var g=(0,a.default)({},(0,N.getClassSet)(h),(e={},e[(0,N.prefix)(h,"fixed-top")]=i,e[(0,N.prefix)(h,"fixed-bottom")]=r,e[(0,N.prefix)(h,"static-top")]=o,e));return b.default.createElement(n,(0,a.default)({},m,{className:(0,v.default)(c,g)}),b.default.createElement(k.default,{fluid:u},d))},t}(b.default.Component);F.propTypes=L,F.defaultProps=D,F.childContextTypes=R,(0,N.bsClass)("navbar",F);var B=(0,C.default)(F,{expanded:"onToggle"});B.Brand=x.default,B.Header=I.default,B.Toggle=A.default,B.Collapse=P.default,B.Form=r("div","form","NavbarForm"),B.Text=r("p","text","NavbarText"),B.Link=r("a","link","NavbarLink"),t.default=(0,N.bsStyles)([j.Style.DEFAULT,j.Style.INVERSE],j.Style.DEFAULT,B),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(1),m=i(h),v=n(49),g=i(v),b=n(8),y={$bs_navbar:h.PropTypes.shape({bsClass:h.PropTypes.string,expanded:h.PropTypes.bool})},_=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.children,n=(0,s.default)(e,["children"]),i=this.context.$bs_navbar||{bsClass:"navbar"},r=(0,b.prefix)(i,"collapse");return m.default.createElement(g.default,(0,o.default)({in:i.expanded},n),m.default.createElement("div",{className:r},t))},t}(m.default.Component);_.contextTypes=y,t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y={$bs_navbar:g.default.PropTypes.shape({bsClass:g.default.PropTypes.string})},_=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=this.context.$bs_navbar||{bsClass:"navbar"},r=(0,b.prefix)(i,"header");return g.default.createElement("div",(0,o.default)({},n,{className:(0,m.default)(t,r)}))},t}(g.default.Component);_.contextTypes=y,t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=n(10),_=i(y),w={onClick:v.PropTypes.func,children:v.PropTypes.node},C={$bs_navbar:v.PropTypes.shape({bsClass:v.PropTypes.string,expanded:v.PropTypes.bool,onToggle:v.PropTypes.func.isRequired})},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.onClick,n=e.className,i=e.children,r=(0,s.default)(e,["onClick","className","children"]),a=this.context.$bs_navbar||{bsClass:"navbar"},l=(0,o.default)({type:"button"},r,{onClick:(0,_.default)(t,a.onToggle),className:(0,m.default)(n,(0,b.prefix)(a,"toggle"),!a.expanded&&"collapsed")});return i?g.default.createElement("button",l,i):g.default.createElement("button",l,g.default.createElement("span",{className:"sr-only"},"Toggle navigation"),g.default.createElement("span",{className:"icon-bar"}),g.default.createElement("span",{className:"icon-bar"}),g.default.createElement("span",{className:"icon-bar"}))},t}(g.default.Component);E.propTypes=w,E.contextTypes=C,t.default=E,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){return Array.isArray(t)?t.indexOf(e)>=0:e===t}t.__esModule=!0;var o=n(6),a=i(o),s=n(2),l=i(s),u=n(4),c=i(u),d=n(3),p=i(d),f=n(5),h=i(f),m=n(30),v=i(m),g=n(1),b=i(g),y=n(13),_=i(y),w=n(14),C=(i(w),n(88)),E=i(C),k=n(10),T=i(k),x=b.default.PropTypes.oneOf(["click","hover","focus"]),S=(0,h.default)({},E.default.propTypes,{trigger:b.default.PropTypes.oneOfType([x,b.default.PropTypes.arrayOf(x)]),delay:b.default.PropTypes.number,delayShow:b.default.PropTypes.number,delayHide:b.default.PropTypes.number,defaultOverlayShown:b.default.PropTypes.bool,overlay:b.default.PropTypes.node.isRequired,onBlur:b.default.PropTypes.func,onClick:b.default.PropTypes.func,onFocus:b.default.PropTypes.func,onMouseOut:b.default.PropTypes.func,onMouseOver:b.default.PropTypes.func,target:b.default.PropTypes.oneOf([null]),onHide:b.default.PropTypes.oneOf([null]),show:b.default.PropTypes.oneOf([null])}),P={defaultOverlayShown:!1,trigger:["hover","focus"]},O=function(e){function t(n,i){(0,l.default)(this,t);var r=(0,c.default)(this,e.call(this,n,i));return r.handleToggle=r.handleToggle.bind(r),r.handleDelayedShow=r.handleDelayedShow.bind(r),r.handleDelayedHide=r.handleDelayedHide.bind(r),r.handleHide=r.handleHide.bind(r),r.handleMouseOver=function(e){return r.handleMouseOverOut(r.handleDelayedShow,e)},r.handleMouseOut=function(e){return r.handleMouseOverOut(r.handleDelayedHide,e)},r._mountNode=null,r.state={show:n.defaultOverlayShown},r}return(0,p.default)(t,e),t.prototype.componentDidMount=function(){this._mountNode=document.createElement("div"),this.renderOverlay()},t.prototype.componentDidUpdate=function(){this.renderOverlay()},t.prototype.componentWillUnmount=function(){_.default.unmountComponentAtNode(this._mountNode),this._mountNode=null,clearTimeout(this._hoverShowDelay),clearTimeout(this._hoverHideDelay)},t.prototype.handleToggle=function(){this.state.show?this.hide():this.show()},t.prototype.handleDelayedShow=function(){var e=this;if(null!=this._hoverHideDelay)return clearTimeout(this._hoverHideDelay),void(this._hoverHideDelay=null);if(!this.state.show&&null==this._hoverShowDelay){var t=null!=this.props.delayShow?this.props.delayShow:this.props.delay;return t?void(this._hoverShowDelay=setTimeout(function(){e._hoverShowDelay=null,e.show()},t)):void this.show()}},t.prototype.handleDelayedHide=function(){var e=this;if(null!=this._hoverShowDelay)return clearTimeout(this._hoverShowDelay),void(this._hoverShowDelay=null);if(this.state.show&&null==this._hoverHideDelay){var t=null!=this.props.delayHide?this.props.delayHide:this.props.delay;return t?void(this._hoverHideDelay=setTimeout(function(){e._hoverHideDelay=null,e.hide()},t)):void this.hide()}},t.prototype.handleMouseOverOut=function(e,t){var n=t.currentTarget,i=t.relatedTarget||t.nativeEvent.toElement;i&&(i===n||(0,v.default)(n,i))||e(t)},t.prototype.handleHide=function(){this.hide()},t.prototype.show=function(){this.setState({show:!0})},t.prototype.hide=function(){this.setState({show:!1})},t.prototype.makeOverlay=function(e,t){return b.default.createElement(E.default,(0,h.default)({},t,{show:this.state.show,onHide:this.handleHide,target:this}),e)},t.prototype.renderOverlay=function(){_.default.unstable_renderSubtreeIntoContainer(this,this._overlay,this._mountNode)},t.prototype.render=function(){var e=this.props,t=e.trigger,n=e.overlay,i=e.children,o=e.onBlur,s=e.onClick,l=e.onFocus,u=e.onMouseOut,c=e.onMouseOver,d=(0,a.default)(e,["trigger","overlay","children","onBlur","onClick","onFocus","onMouseOut","onMouseOver"]);delete d.delay,delete d.delayShow,delete d.delayHide,delete d.defaultOverlayShown;var p=b.default.Children.only(i),f=p.props,h={"aria-describedby":n.props.id};return h.onClick=(0,T.default)(f.onClick,s),r("click",t)&&(h.onClick=(0,T.default)(h.onClick,this.handleToggle)),r("hover",t)&&(h.onMouseOver=(0,T.default)(f.onMouseOver,c,this.handleMouseOver),h.onMouseOut=(0,T.default)(f.onMouseOut,u,this.handleMouseOut)),r("focus",t)&&(h.onFocus=(0,T.default)(f.onFocus,l,this.handleDelayedShow),h.onBlur=(0,T.default)(f.onBlur,o,this.handleDelayedHide)),this._overlay=this.makeOverlay(n,d),(0,g.cloneElement)(p,h)},t}(b.default.Component);O.propTypes=S,O.defaultProps=P,t.default=O,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=e.children,i=(0,s.default)(e,["className","children"]),r=(0,b.splitBsProps)(i),a=r[0],l=r[1],u=(0,b.getClassSet)(a);return g.default.createElement("div",(0,o.default)({},l,{className:(0,m.default)(t,u)}),g.default.createElement("h1",null,n))},t}(g.default.Component);t.default=(0,b.bsClass)("page-header",y),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(89),o=i(r),a=n(180),s=i(a);t.default=s.default.wrapper(o.default,"`<PageItem>`","`<Pager.Item>`"),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(89),y=i(b),_=n(8),w=n(10),C=i(w),E=n(12),k=i(E),T={onSelect:g.default.PropTypes.func},x=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.onSelect,n=e.className,i=e.children,r=(0,s.default)(e,["onSelect","className","children"]),a=(0,_.splitBsProps)(r),l=a[0],u=a[1],c=(0,_.getClassSet)(l);return g.default.createElement("ul",(0,o.default)({},u,{className:(0,m.default)(n,c)}),k.default.map(i,function(e){return(0,v.cloneElement)(e,{onSelect:(0,C.default)(e.props.onSelect,t)})}))},t}(g.default.Component);x.propTypes=T,x.Item=y.default,t.default=(0,_.bsClass)("pager",x),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(5),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(163),w=i(_),C=n(8),E={activePage:g.default.PropTypes.number,items:g.default.PropTypes.number,maxButtons:g.default.PropTypes.number,boundaryLinks:g.default.PropTypes.bool,ellipsis:g.default.PropTypes.oneOfType([g.default.PropTypes.bool,g.default.PropTypes.node]),first:g.default.PropTypes.oneOfType([g.default.PropTypes.bool,g.default.PropTypes.node]),last:g.default.PropTypes.oneOfType([g.default.PropTypes.bool,g.default.PropTypes.node]),prev:g.default.PropTypes.oneOfType([g.default.PropTypes.bool,g.default.PropTypes.node]),next:g.default.PropTypes.oneOfType([g.default.PropTypes.bool,g.default.PropTypes.node]),onSelect:g.default.PropTypes.func,buttonComponentClass:y.default},k={activePage:1,items:1,maxButtons:0,first:!1,last:!1,prev:!1,next:!1,ellipsis:!0,boundaryLinks:!1},T=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.renderPageButtons=function(e,t,n,i,r,o){var a=[],l=void 0,u=void 0,c=void 0;if(n){var d=e-parseInt(n/2,10);l=d>2?d:1,c=l+n<t,c?u=l+n-1:(u=t,l=t-n+1,l<1&&(l=1))}else l=1,u=t;for(var p=l;p<=u;p++)a.push(g.default.createElement(w.default,(0,s.default)({},o,{key:p,eventKey:p,active:p===e}),p));return i&&r&&1!==l&&(a.unshift(g.default.createElement(w.default,{key:"ellipsisFirst",disabled:!0,componentClass:o.componentClass},g.default.createElement("span",{"aria-label":"More"},r===!0?"":r))),a.unshift(g.default.createElement(w.default,(0,s.default)({},o,{key:1,eventKey:1,active:!1}),"1"))),n&&c&&r&&(a.push(g.default.createElement(w.default,{key:"ellipsis",disabled:!0,componentClass:o.componentClass},g.default.createElement("span",{"aria-label":"More"},r===!0?"":r))),i&&u!==t&&a.push(g.default.createElement(w.default,(0,s.default)({},o,{key:t,eventKey:t,active:!1}),t))),a},t.prototype.render=function(){var e=this.props,t=e.activePage,n=e.items,i=e.maxButtons,r=e.boundaryLinks,a=e.ellipsis,l=e.first,u=e.last,c=e.prev,d=e.next,p=e.onSelect,f=e.buttonComponentClass,h=e.className,v=(0,o.default)(e,["activePage","items","maxButtons","boundaryLinks","ellipsis","first","last","prev","next","onSelect","buttonComponentClass","className"]),b=(0,C.splitBsProps)(v),y=b[0],_=b[1],E=(0,C.getClassSet)(y),k={onSelect:p,componentClass:f};return g.default.createElement("ul",(0,s.default)({},_,{className:(0,m.default)(h,E)}),l&&g.default.createElement(w.default,(0,s.default)({},k,{eventKey:1,disabled:1===t}),g.default.createElement("span",{"aria-label":"First"},l===!0?"":l)),c&&g.default.createElement(w.default,(0,s.default)({},k,{eventKey:t-1,disabled:1===t}),g.default.createElement("span",{"aria-label":"Previous"},c===!0?"":c)),this.renderPageButtons(t,n,i,r,a,k),d&&g.default.createElement(w.default,(0,s.default)({},k,{eventKey:t+1,disabled:t>=n}),g.default.createElement("span",{"aria-label":"Next"},d===!0?"":d)),u&&g.default.createElement(w.default,(0,s.default)({},k,{eventKey:n,disabled:t>=n}),g.default.createElement("span",{"aria-label":"Last"},u===!0?"":u)))},t}(g.default.Component);T.propTypes=E,T.defaultProps=k,t.default=(0,C.bsClass)("pagination",T),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(15),w=i(_),C=n(10),E=i(C),k={componentClass:y.default,className:g.default.PropTypes.string,eventKey:g.default.PropTypes.any,onSelect:g.default.PropTypes.func,disabled:g.default.PropTypes.bool,active:g.default.PropTypes.bool,onClick:g.default.PropTypes.func},T={componentClass:w.default,active:!1,disabled:!1},x=function(e){function t(n,i){(0,u.default)(this,t);var r=(0,d.default)(this,e.call(this,n,i));return r.handleClick=r.handleClick.bind(r),r}return(0,f.default)(t,e),t.prototype.handleClick=function(e){var t=this.props,n=t.disabled,i=t.onSelect,r=t.eventKey;n||i&&i(r,e)},t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.active,i=e.disabled,r=e.onClick,a=e.className,l=e.style,u=(0,s.default)(e,["componentClass","active","disabled","onClick","className","style"]);return t===w.default&&delete u.eventKey,delete u.onSelect,g.default.createElement("li",{className:(0,m.default)(a,{active:n,disabled:i}),style:l},g.default.createElement(t,(0,o.default)({},u,{disabled:i,onClick:(0,E.default)(r,this.handleClick)})))},t}(g.default.Component);x.propTypes=k,x.defaultProps=T,t.default=x,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(24),o=i(r),a=n(6),s=i(a),l=n(5),u=i(l),c=n(2),d=i(c),p=n(4),f=i(p),h=n(3),m=i(h),v=n(7),g=i(v),b=n(1),y=i(b),_=n(49),w=i(_),C=n(8),E=n(11),k={collapsible:y.default.PropTypes.bool,onSelect:y.default.PropTypes.func,header:y.default.PropTypes.node,id:y.default.PropTypes.oneOfType([y.default.PropTypes.string,y.default.PropTypes.number]),footer:y.default.PropTypes.node,defaultExpanded:y.default.PropTypes.bool,expanded:y.default.PropTypes.bool,eventKey:y.default.PropTypes.any,headerRole:y.default.PropTypes.string,panelRole:y.default.PropTypes.string,onEnter:y.default.PropTypes.func,onEntering:y.default.PropTypes.func,onEntered:y.default.PropTypes.func,onExit:y.default.PropTypes.func,onExiting:y.default.PropTypes.func,onExited:y.default.PropTypes.func},T={defaultExpanded:!1},x=function(e){function t(n,i){(0,d.default)(this,t);var r=(0,f.default)(this,e.call(this,n,i));return r.handleClickTitle=r.handleClickTitle.bind(r),r.state={expanded:r.props.defaultExpanded},r}return(0,m.default)(t,e),t.prototype.handleClickTitle=function(e){e.persist(),e.selected=!0,this.props.onSelect?this.props.onSelect(this.props.eventKey,e):e.preventDefault(),e.selected&&this.setState({expanded:!this.state.expanded})},t.prototype.shouldRenderFill=function(e){return y.default.isValidElement(e)&&null!=e.props.fill},t.prototype.renderHeader=function(e,t,n,i,r,o){var a=(0,C.prefix)(o,"title");return e?y.default.isValidElement(t)?(0,b.cloneElement)(t,{className:(0,g.default)(t.props.className,a),children:this.renderAnchor(t.props.children,n,i,r)}):y.default.createElement("h4",{role:"presentation",className:a},this.renderAnchor(t,n,i,r)):y.default.isValidElement(t)?(0,b.cloneElement)(t,{className:(0,g.default)(t.props.className,a)}):t},t.prototype.renderAnchor=function(e,t,n,i){return y.default.createElement("a",{role:n,href:t&&"#"+t,onClick:this.handleClickTitle,"aria-controls":t,"aria-expanded":i,"aria-selected":i},e)},t.prototype.renderCollapsibleBody=function(e,t,n,i,r,o){return y.default.createElement(w.default,(0,u.default)({in:t},o),y.default.createElement("div",{id:e,role:n,className:(0,C.prefix)(r,"collapse"),"aria-hidden":!t},this.renderBody(i,r)))},t.prototype.renderBody=function(e,t){function n(){r.length&&(i.push(y.default.createElement("div",{key:i.length,className:o},r)),r=[])}var i=[],r=[],o=(0,C.prefix)(t,"body");return y.default.Children.toArray(e).forEach(function(e){return y.default.isValidElement(e)&&e.props.fill?(n(),void i.push((0,b.cloneElement)(e,{fill:void 0}))):void r.push(e)}),n(),i},t.prototype.render=function(){var e=this.props,t=e.collapsible,n=e.header,i=e.id,r=e.footer,o=e.expanded,a=e.headerRole,l=e.panelRole,c=e.className,d=e.children,p=e.onEnter,f=e.onEntering,h=e.onEntered,m=e.onExit,v=e.onExiting,b=e.onExited,_=(0,s.default)(e,["collapsible","header","id","footer","expanded","headerRole","panelRole","className","children","onEnter","onEntering","onEntered","onExit","onExiting","onExited"]),w=(0,C.splitBsPropsAndOmit)(_,["defaultExpanded","eventKey","onSelect"]),E=w[0],k=w[1],T=null!=o?o:this.state.expanded,x=(0,C.getClassSet)(E);return y.default.createElement("div",(0,u.default)({},k,{className:(0,g.default)(c,x),id:t?null:i}),n&&y.default.createElement("div",{className:(0,C.prefix)(E,"heading")},this.renderHeader(t,n,i,a,T,E)),t?this.renderCollapsibleBody(i,T,l,d,E,{onEnter:p,onEntering:f,onEntered:h,onExit:m,onExiting:v,onExited:b}):this.renderBody(d,E),r&&y.default.createElement("div",{className:(0,C.prefix)(E,"footer")},r))},t}(y.default.Component);x.propTypes=k,x.defaultProps=T,t.default=(0,C.bsClass)("panel",(0,C.bsStyles)([].concat((0,o.default)(E.State),[E.Style.DEFAULT,E.Style.PRIMARY]),E.Style.DEFAULT,x)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(46),y=i(b),_=n(8),w={id:(0,y.default)(g.default.PropTypes.oneOfType([g.default.PropTypes.string,g.default.PropTypes.number])),placement:g.default.PropTypes.oneOf(["top","right","bottom","left"]),positionTop:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string]),positionLeft:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string]),arrowOffsetTop:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string]),arrowOffsetLeft:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string]),title:g.default.PropTypes.node},C={placement:"right"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,i=t.positionTop,r=t.positionLeft,a=t.arrowOffsetTop,l=t.arrowOffsetLeft,u=t.title,c=t.className,d=t.style,p=t.children,f=(0,s.default)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","title","className","style","children"]),h=(0,_.splitBsProps)(f),v=h[0],b=h[1],y=(0,o.default)({},(0,_.getClassSet)(v),(e={},e[n]=!0,e)),w=(0,o.default)({display:"block",top:i,left:r},d),C={top:a,left:l};return g.default.createElement("div",(0,o.default)({},b,{role:"tooltip",className:(0,m.default)(c,y),style:w}),g.default.createElement("div",{className:"arrow",style:C}),u&&g.default.createElement("h3",{className:(0,_.prefix)(v,"title")},u),g.default.createElement("div",{className:(0,_.prefix)(v,"content")},p))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("popover",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i=e[t];if(!i)return null;var r=null;return w.default.Children.forEach(i,function(e){if(!r&&e.type!==O){var t=w.default.isValidElement(e)?e.type.displayName||e.type.name||e.type:e;r=new Error("Children of "+n+" can contain only ProgressBar "+("components. Found "+t+"."))}}),r}function o(e,t,n){var i=(e-t)/(n-t)*100;return Math.round(i*x)/x}t.__esModule=!0;var a=n(24),s=i(a),l=n(5),u=i(l),c=n(6),d=i(c),p=n(2),f=i(p),h=n(4),m=i(h),v=n(3),g=i(v),b=n(7),y=i(b),_=n(1),w=i(_),C=n(8),E=n(11),k=n(12),T=i(k),x=1e3,S={min:_.PropTypes.number,now:_.PropTypes.number,max:_.PropTypes.number,label:_.PropTypes.node,srOnly:_.PropTypes.bool,striped:_.PropTypes.bool,active:_.PropTypes.bool,children:r,isChild:_.PropTypes.bool},P={min:0,max:100,active:!1,isChild:!1,srOnly:!1,striped:!1},O=function(e){function t(){return(0,f.default)(this,t),(0,m.default)(this,e.apply(this,arguments))}return(0,g.default)(t,e),t.prototype.renderProgressBar=function(e){var t,n=e.min,i=e.now,r=e.max,a=e.label,s=e.srOnly,l=e.striped,c=e.active,p=e.className,f=e.style,h=(0,d.default)(e,["min","now","max","label","srOnly","striped","active","className","style"]),m=(0,C.splitBsProps)(h),v=m[0],g=m[1],b=(0,u.default)({},(0,C.getClassSet)(v),(t={active:c},t[(0,C.prefix)(v,"striped")]=c||l,t));return w.default.createElement("div",(0,u.default)({},g,{role:"progressbar",className:(0,y.default)(p,b),style:(0,u.default)({width:o(i,n,r)+"%"},f),"aria-valuenow":i,"aria-valuemin":n,"aria-valuemax":r}),s?w.default.createElement("span",{className:"sr-only"},a):a)},t.prototype.render=function(){var e=this.props,t=e.isChild,n=(0,d.default)(e,["isChild"]);if(t)return this.renderProgressBar(n);var i=n.min,r=n.now,o=n.max,a=n.label,s=n.srOnly,l=n.striped,c=n.active,p=n.bsClass,f=n.bsStyle,h=n.className,m=n.children,v=(0,d.default)(n,["min","now","max","label","srOnly","striped","active","bsClass","bsStyle","className","children"]);return w.default.createElement("div",(0,u.default)({},v,{className:(0,y.default)(h,"progress")}),m?T.default.map(m,function(e){return(0,_.cloneElement)(e,{isChild:!0})}):this.renderProgressBar({min:i,now:r,max:o,label:a,srOnly:s,striped:l,active:c,bsClass:p,bsStyle:f
}))},t}(w.default.Component);O.propTypes=S,O.defaultProps=P,t.default=(0,C.bsClass)("progress-bar",(0,C.bsStyles)((0,s.default)(E.State),O)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(14),y=(i(b),n(8)),_={inline:g.default.PropTypes.bool,disabled:g.default.PropTypes.bool,validationState:g.default.PropTypes.oneOf(["success","warning","error"]),inputRef:g.default.PropTypes.func},w={inline:!1,disabled:!1},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.inline,n=e.disabled,i=e.validationState,r=e.inputRef,a=e.className,l=e.style,u=e.children,c=(0,s.default)(e,["inline","disabled","validationState","inputRef","className","style","children"]),d=(0,y.splitBsProps)(c),p=d[0],f=d[1],h=g.default.createElement("input",(0,o.default)({},f,{ref:r,type:"radio",disabled:n}));if(t){var v,b=(v={},v[(0,y.prefix)(p,"inline")]=!0,v.disabled=n,v);return g.default.createElement("label",{className:(0,m.default)(a,b),style:l},h,u)}var _=(0,o.default)({},(0,y.getClassSet)(p),{disabled:n});return i&&(_["has-"+i]=!0),g.default.createElement("div",{className:(0,m.default)(a,_),style:l},g.default.createElement("label",null,h,u))},t}(g.default.Component);C.propTypes=_,C.defaultProps=w,t.default=(0,y.bsClass)("radio",C),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(14),y=(i(b),n(8)),_={children:v.PropTypes.element.isRequired,a16by9:v.PropTypes.bool,a4by3:v.PropTypes.bool},w={a16by9:!1,a4by3:!1},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.a16by9,i=t.a4by3,r=t.className,a=t.children,l=(0,s.default)(t,["a16by9","a4by3","className","children"]),u=(0,y.splitBsProps)(l),c=u[0],d=u[1],p=(0,o.default)({},(0,y.getClassSet)(c),(e={},e[(0,y.prefix)(c,"16by9")]=n,e[(0,y.prefix)(c,"4by3")]=i,e));return g.default.createElement("div",{className:(0,m.default)(p)},(0,v.cloneElement)(a,(0,o.default)({},d,{className:(0,m.default)(r,(0,y.prefix)(c,"item"))})))},t}(g.default.Component);C.propTypes=_,C.defaultProps=w,t.default=(0,y.bsClass)("embed-responsive",C),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(9),y=i(b),_=n(8),w={componentClass:y.default},C={componentClass:"div"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.componentClass,n=e.className,i=(0,s.default)(e,["componentClass","className"]),r=(0,_.splitBsProps)(i),a=r[0],l=r[1],u=(0,_.getClassSet)(a);return g.default.createElement(t,(0,o.default)({},l,{className:(0,m.default)(n,u)}))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("row",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(6),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(5),f=i(p),h=n(1),m=i(h),v=n(31),g=i(v),b=n(38),y=i(b),_=n(171),w=i(_),C=n(40),E=i(C),k=(0,f.default)({},y.default.propTypes,{bsStyle:m.default.PropTypes.string,bsSize:m.default.PropTypes.string,href:m.default.PropTypes.string,onClick:m.default.PropTypes.func,title:m.default.PropTypes.node.isRequired,toggleLabel:m.default.PropTypes.string,children:m.default.PropTypes.node}),T=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.bsSize,n=e.bsStyle,i=e.title,r=e.toggleLabel,a=e.children,s=(0,o.default)(e,["bsSize","bsStyle","title","toggleLabel","children"]),l=(0,E.default)(s,y.default.ControlledComponent),u=l[0],c=l[1];return m.default.createElement(y.default,(0,f.default)({},u,{bsSize:t,bsStyle:n}),m.default.createElement(g.default,(0,f.default)({},c,{disabled:s.disabled,bsSize:t,bsStyle:n}),i),m.default.createElement(w.default,{"aria-label":r||i,bsSize:t,bsStyle:n}),m.default.createElement(y.default.Menu,null,a))},t}(m.default.Component);T.propTypes=k,T.Toggle=w.default,t.default=T,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(1),f=i(p),h=n(78),m=i(h),v=function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.render=function(){return f.default.createElement(m.default,(0,o.default)({},this.props,{useAnchor:!1,noCaret:!1}))},t}(f.default.Component);v.defaultProps=m.default.defaultProps,t.default=v,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(2),o=i(r),a=n(4),s=i(a),l=n(3),u=i(l),c=n(5),d=i(c),p=n(1),f=i(p),h=n(52),m=i(h),v=n(53),g=i(v),b=n(91),y=i(b),_=(0,d.default)({},y.default.propTypes,{disabled:f.default.PropTypes.bool,title:f.default.PropTypes.node,tabClassName:f.default.PropTypes.string}),w=function(e){function t(){return(0,o.default)(this,t),(0,s.default)(this,e.apply(this,arguments))}return(0,u.default)(t,e),t.prototype.render=function(){var e=(0,d.default)({},this.props);return delete e.title,delete e.disabled,delete e.tabClassName,f.default.createElement(y.default,e)},t}(f.default.Component);w.propTypes=_,w.Container=m.default,w.Content=g.default,w.Pane=y.default,t.default=w,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y={striped:g.default.PropTypes.bool,bordered:g.default.PropTypes.bool,condensed:g.default.PropTypes.bool,hover:g.default.PropTypes.bool,responsive:g.default.PropTypes.bool},_={bordered:!1,condensed:!1,hover:!1,responsive:!1,striped:!1},w=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.striped,i=t.bordered,r=t.condensed,a=t.hover,l=t.responsive,u=t.className,c=(0,s.default)(t,["striped","bordered","condensed","hover","responsive","className"]),d=(0,b.splitBsProps)(c),p=d[0],f=d[1],h=(0,o.default)({},(0,b.getClassSet)(p),(e={},e[(0,b.prefix)(p,"striped")]=n,e[(0,b.prefix)(p,"bordered")]=i,e[(0,b.prefix)(p,"condensed")]=r,e[(0,b.prefix)(p,"hover")]=a,e)),v=g.default.createElement("table",(0,o.default)({},f,{className:(0,m.default)(u,h)}));return l?g.default.createElement("div",{className:(0,b.prefix)(p,"responsive")},v):v},t}(g.default.Component);w.propTypes=y,w.defaultProps=_,t.default=(0,b.bsClass)("table",w),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=void 0;return M.default.forEach(e,function(e){null==t&&(t=e.props.eventKey)}),t}t.__esModule=!0;var o=n(5),a=i(o),s=n(6),l=i(s),u=n(2),c=i(u),d=n(4),p=i(d),f=n(3),h=i(f),m=n(1),v=i(m),g=n(46),b=i(g),y=n(48),_=i(y),w=n(85),C=i(w),E=n(86),k=i(E),T=n(52),x=i(T),S=n(53),P=i(S),O=n(8),I=n(12),M=i(I),A=x.default.ControlledComponent,N={activeKey:v.default.PropTypes.any,bsStyle:v.default.PropTypes.oneOf(["tabs","pills"]),animation:v.default.PropTypes.bool,id:(0,b.default)(v.default.PropTypes.oneOfType([v.default.PropTypes.string,v.default.PropTypes.number])),onSelect:v.default.PropTypes.func,unmountOnExit:v.default.PropTypes.bool},j={bsStyle:"tabs",animation:!0,unmountOnExit:!1},L=function(e){function t(){return(0,c.default)(this,t),(0,p.default)(this,e.apply(this,arguments))}return(0,h.default)(t,e),t.prototype.renderTab=function(e){var t=e.props,n=t.title,i=t.eventKey,r=t.disabled,o=t.tabClassName;return null==n?null:v.default.createElement(k.default,{eventKey:i,disabled:r,className:o},n)},t.prototype.render=function(){var e=this.props,t=e.id,n=e.onSelect,i=e.animation,o=e.unmountOnExit,s=e.bsClass,u=e.className,c=e.style,d=e.children,p=e.activeKey,f=void 0===p?r(d):p,h=(0,l.default)(e,["id","onSelect","animation","unmountOnExit","bsClass","className","style","children","activeKey"]);return v.default.createElement(A,{id:t,activeKey:f,onSelect:n,className:u,style:c},v.default.createElement("div",null,v.default.createElement(C.default,(0,a.default)({},h,{role:"tablist"}),M.default.map(d,this.renderTab)),v.default.createElement(P.default,{bsClass:s,animation:i,unmountOnExit:o},d)))},t}(v.default.Component);L.propTypes=N,L.defaultProps=j,(0,O.bsClass)("tab",L),t.default=(0,_.default)(L,{activeKey:"onSelect"}),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(15),y=i(b),_=n(8),w={src:g.default.PropTypes.string,alt:g.default.PropTypes.string,href:g.default.PropTypes.string},C=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.src,n=e.alt,i=e.className,r=e.children,a=(0,s.default)(e,["src","alt","className","children"]),l=(0,_.splitBsProps)(a),u=l[0],c=l[1],d=c.href?y.default:"div",p=(0,_.getClassSet)(u);return g.default.createElement(d,(0,o.default)({},c,{className:(0,m.default)(i,p)}),g.default.createElement("img",{src:t,alt:n}),r&&g.default.createElement("div",{className:"caption"},r))},t}(g.default.Component);C.propTypes=w,t.default=(0,_.bsClass)("thumbnail",C),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(46),y=i(b),_=n(8),w={id:(0,y.default)(g.default.PropTypes.oneOfType([g.default.PropTypes.string,g.default.PropTypes.number])),placement:g.default.PropTypes.oneOf(["top","right","bottom","left"]),positionTop:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string]),positionLeft:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string]),arrowOffsetTop:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string]),arrowOffsetLeft:g.default.PropTypes.oneOfType([g.default.PropTypes.number,g.default.PropTypes.string])},C={placement:"right"},E=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e,t=this.props,n=t.placement,i=t.positionTop,r=t.positionLeft,a=t.arrowOffsetTop,l=t.arrowOffsetLeft,u=t.className,c=t.style,d=t.children,p=(0,s.default)(t,["placement","positionTop","positionLeft","arrowOffsetTop","arrowOffsetLeft","className","style","children"]),f=(0,_.splitBsProps)(p),h=f[0],v=f[1],b=(0,o.default)({},(0,_.getClassSet)(h),(e={},e[n]=!0,e)),y=(0,o.default)({top:i,left:r},c),w={top:a,left:l};return g.default.createElement("div",(0,o.default)({},v,{role:"tooltip",className:(0,m.default)(u,b),style:y}),g.default.createElement("div",{className:(0,_.prefix)(h,"arrow"),style:w}),g.default.createElement("div",{className:(0,_.prefix)(h,"inner")},d))},t}(g.default.Component);E.propTypes=w,E.defaultProps=C,t.default=(0,_.bsClass)("tooltip",E),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var r=n(5),o=i(r),a=n(6),s=i(a),l=n(2),u=i(l),c=n(4),d=i(c),p=n(3),f=i(p),h=n(7),m=i(h),v=n(1),g=i(v),b=n(8),y=n(11),_=function(e){function t(){return(0,u.default)(this,t),(0,d.default)(this,e.apply(this,arguments))}return(0,f.default)(t,e),t.prototype.render=function(){var e=this.props,t=e.className,n=(0,s.default)(e,["className"]),i=(0,b.splitBsProps)(n),r=i[0],a=i[1],l=(0,b.getClassSet)(r);return g.default.createElement("div",(0,o.default)({},a,{className:(0,m.default)(t,l)}))},t}(g.default.Component);t.default=(0,b.bsClass)("well",(0,b.bsSizes)([y.Size.LARGE,y.Size.SMALL],_)),e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)(function(e,n,i){var r=void 0;return t.every(function(t){return!!u.default.some(e.children,function(e){return e.props.bsRole===t})||(r=t,!1)}),r?new Error("(children) "+i+" - Missing a required child with bsRole: "+(r+". "+i+" must have at least one child of each of ")+("the following bsRoles: "+t.join(", "))):null})}function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.default)(function(e,n,i){var r=void 0;return t.every(function(t){var n=u.default.filter(e.children,function(e){return e.props.bsRole===t});return!(n.length>1&&(r=t,1))}),r?new Error("(children) "+i+" - Duplicate children detected of bsRole: "+(r+". Only one child each allowed with the following ")+("bsRoles: "+t.join(", "))):null})}t.__esModule=!0,t.requiredRoles=r,t.exclusiveRoles=o;var a=n(47),s=i(a),l=n(12),u=i(l)},function(e,t){"use strict";function n(){var e=document.createElement("div"),t=e.style;"AnimationEvent"in window||delete a.animationend.animation,"TransitionEvent"in window||delete a.transitionend.transition;for(var n in a){var i=a[n];for(var r in i)if(r in t){s.push(i[r]);break}}}function i(e,t,n){e.addEventListener(t,n,!1)}function r(e,t,n){e.removeEventListener(t,n,!1)}t.__esModule=!0;var o=!("undefined"==typeof window||!window.document||!window.document.createElement),a={transitionend:{transition:"transitionend",WebkitTransition:"webkitTransitionEnd",MozTransition:"mozTransitionEnd",OTransition:"oTransitionEnd",msTransition:"MSTransitionEnd"},animationend:{animation:"animationend",WebkitAnimation:"webkitAnimationEnd",MozAnimation:"mozAnimationEnd",OAnimation:"oAnimationEnd",msAnimation:"MSAnimationEnd"}},s=[];o&&n();var l={addEndEventListener:function(e,t){return 0===s.length?void window.setTimeout(t,0):void s.forEach(function(n){i(e,n,t)})},removeEndEventListener:function(e,t){0!==s.length&&s.forEach(function(n){r(e,n,t)})}};t.default=l,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i=void 0;"object"===("undefined"==typeof e?"undefined":(0,f.default)(e))?i=e.message:(i=e+" is deprecated. Use "+t+" instead.",n&&(i+="\nYou can read more about it at "+n)),m[i]||(m[i]=!0)}function o(){m={}}t.__esModule=!0;var a=n(2),s=i(a),l=n(4),u=i(l),c=n(3),d=i(c),p=n(54),f=i(p);t._resetWarned=o;var h=n(14),m=(i(h),{});r.wrapper=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return function(e){function t(){return(0,s.default)(this,t),(0,u.default)(this,e.apply(this,arguments))}return(0,d.default)(t,e),t.prototype.componentWillMount=function(){if(r.apply(void 0,n),e.prototype.componentWillMount){for(var t,i=arguments.length,o=Array(i),a=0;a<i;a++)o[a]=arguments[a];(t=e.prototype.componentWillMount).call.apply(t,[this].concat(o))}},t}(e)},t.default=r},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}t.__esModule=!0,t.ValidComponentChildren=t.createChainedFunction=t.bootstrapUtils=void 0;var o=n(8),a=r(o),s=n(10),l=i(s),u=n(12),c=i(u);t.bootstrapUtils=a,t.createChainedFunction=l.default,t.ValidComponentChildren=c.default},function(e,t,n){e.exports={default:n(187),__esModule:!0}},function(e,t,n){e.exports={default:n(189),__esModule:!0}},function(e,t,n){e.exports={default:n(191),__esModule:!0}},function(e,t,n){e.exports={default:n(193),__esModule:!0}},function(e,t,n){e.exports={default:n(194),__esModule:!0}},function(e,t,n){n(105),n(218),e.exports=n(16).Array.from},function(e,t,n){n(220),e.exports=n(16).Object.assign},function(e,t,n){n(221);var i=n(16).Object;e.exports=function(e,t){return i.create(e,t)}},function(e,t,n){n(225),e.exports=n(16).Object.entries},function(e,t,n){n(222),e.exports=n(16).Object.setPrototypeOf},function(e,t,n){n(226),e.exports=n(16).Object.values},function(e,t,n){n(224),n(223),n(227),n(228),e.exports=n(16).Symbol},function(e,t,n){n(105),n(229),e.exports=n(69).f("iterator")},function(e,t){e.exports=function(e){if("function"!=typeof e)throw TypeError(e+" is not a function!");return e}},function(e,t){e.exports=function(){}},function(e,t,n){var i=n(20),r=n(104),o=n(216);e.exports=function(e){return function(t,n,a){var s,l=i(t),u=r(l.length),c=o(a,u);if(e&&n!=n){for(;u>c;)if(s=l[c++],s!=s)return!0}else for(;u>c;c++)if((e||c in l)&&l[c]===n)return e||c||0;return!e&&-1}}},function(e,t,n){var i=n(55),r=n(17)("toStringTag"),o="Arguments"==i(function(){return arguments}()),a=function(e,t){try{return e[t]}catch(e){}};e.exports=function(e){var t,n,s;return void 0===e?"Undefined":null===e?"Null":"string"==typeof(n=a(t=Object(e),r))?n:o?i(t):"Object"==(s=i(t))&&"function"==typeof t.callee?"Arguments":s}},function(e,t,n){"use strict";var i=n(22),r=n(36);e.exports=function(e,t,n){t in e?i.f(e,t,r(0,n)):e[t]=n}},function(e,t,n){var i=n(28),r=n(61),o=n(35);e.exports=function(e){var t=i(e),n=r.f;if(n)for(var a,s=n(e),l=o.f,u=0;s.length>u;)l.call(e,a=s[u++])&&t.push(a);return t}},function(e,t,n){e.exports=n(19).document&&document.documentElement},function(e,t,n){var i=n(34),r=n(17)("iterator"),o=Array.prototype;e.exports=function(e){return void 0!==e&&(i.Array===e||o[r]===e)}},function(e,t,n){var i=n(55);e.exports=Array.isArray||function(e){return"Array"==i(e)}},function(e,t,n){var i=n(25);e.exports=function(e,t,n,r){try{return r?t(i(n)[0],n[1]):t(n)}catch(t){var o=e.return;throw void 0!==o&&i(o.call(e)),t}}},function(e,t,n){"use strict";var i=n(60),r=n(36),o=n(62),a={};n(27)(a,n(17)("iterator"),function(){return this}),e.exports=function(e,t,n){e.prototype=i(a,{next:r(1,n)}),o(e,t+" Iterator")}},function(e,t,n){var i=n(17)("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}e.exports=function(e,t){if(!t&&!r)return!1;var n=!1;try{var o=[7],a=o[i]();a.next=function(){return{done:n=!0}},o[i]=function(){return a},e(o)}catch(e){}return n}},function(e,t){e.exports=function(e,t){return{value:t,done:!!e}}},function(e,t,n){var i=n(28),r=n(20);e.exports=function(e,t){for(var n,o=r(e),a=i(o),s=a.length,l=0;s>l;)if(o[n=a[l++]]===t)return n}},function(e,t,n){var i=n(41)("meta"),r=n(33),o=n(21),a=n(22).f,s=0,l=Object.isExtensible||function(){return!0},u=!n(32)(function(){return l(Object.preventExtensions({}))}),c=function(e){a(e,i,{value:{i:"O"+ ++s,w:{}}})},d=function(e,t){if(!r(e))return"symbol"==typeof e?e:("string"==typeof e?"S":"P")+e;if(!o(e,i)){if(!l(e))return"F";if(!t)return"E";c(e)}return e[i].i},p=function(e,t){if(!o(e,i)){if(!l(e))return!0;if(!t)return!1;c(e)}return e[i].w},f=function(e){return u&&h.NEED&&l(e)&&!o(e,i)&&c(e),e},h=e.exports={KEY:i,NEED:!1,fastKey:d,getWeak:p,onFreeze:f}},function(e,t,n){"use strict";var i=n(28),r=n(61),o=n(35),a=n(66),s=n(97),l=Object.assign;e.exports=!l||n(32)(function(){var e={},t={},n=Symbol(),i="abcdefghijklmnopqrst";return e[n]=7,i.split("").forEach(function(e){t[e]=e}),7!=l({},e)[n]||Object.keys(l({},t)).join("")!=i})?function(e,t){for(var n=a(e),l=arguments.length,u=1,c=r.f,d=o.f;l>u;)for(var p,f=s(arguments[u++]),h=c?i(f).concat(c(f)):i(f),m=h.length,v=0;m>v;)d.call(f,p=h[v++])&&(n[p]=f[p]);return n}:l},function(e,t,n){var i=n(22),r=n(25),o=n(28);e.exports=n(26)?Object.defineProperties:function(e,t){r(e);for(var n,a=o(t),s=a.length,l=0;s>l;)i.f(e,n=a[l++],t[n]);return e}},function(e,t,n){var i=n(20),r=n(100).f,o={}.toString,a="object"==typeof window&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],s=function(e){try{return r(e)}catch(e){return a.slice()}};e.exports.f=function(e){return a&&"[object Window]"==o.call(e)?s(e):r(i(e))}},function(e,t,n){var i=n(21),r=n(66),o=n(63)("IE_PROTO"),a=Object.prototype;e.exports=Object.getPrototypeOf||function(e){return e=r(e),i(e,o)?e[o]:"function"==typeof e.constructor&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?a:null}},function(e,t,n){var i=n(33),r=n(25),o=function(e,t){if(r(e),!i(t)&&null!==t)throw TypeError(t+": can't set as prototype!")};e.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(e,t,i){try{i=n(56)(Function.call,n(99).f(Object.prototype,"__proto__").set,2),i(e,[]),t=!(e instanceof Array)}catch(e){t=!0}return function(e,n){return o(e,n),t?e.__proto__=n:i(e,n),e}}({},!1):void 0),check:o}},function(e,t,n){var i=n(65),r=n(57);e.exports=function(e){return function(t,n){var o,a,s=String(r(t)),l=i(n),u=s.length;return l<0||l>=u?e?"":void 0:(o=s.charCodeAt(l),o<55296||o>56319||l+1===u||(a=s.charCodeAt(l+1))<56320||a>57343?e?s.charAt(l):o:e?s.slice(l,l+2):(o-55296<<10)+(a-56320)+65536)}}},function(e,t,n){var i=n(65),r=Math.max,o=Math.min;e.exports=function(e,t){return e=i(e),e<0?r(e+t,0):o(e,t)}},function(e,t,n){var i=n(198),r=n(17)("iterator"),o=n(34);e.exports=n(16).getIteratorMethod=function(e){if(void 0!=e)return e[r]||e["@@iterator"]||o[i(e)]}},function(e,t,n){"use strict";var i=n(56),r=n(18),o=n(66),a=n(204),s=n(202),l=n(104),u=n(199),c=n(217);r(r.S+r.F*!n(206)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,r,d,p=o(e),f="function"==typeof this?this:Array,h=arguments.length,m=h>1?arguments[1]:void 0,v=void 0!==m,g=0,b=c(p);if(v&&(m=i(m,h>2?arguments[2]:void 0,2)),void 0==b||f==Array&&s(b))for(t=l(p.length),n=new f(t);t>g;g++)u(n,g,v?m(p[g],g):p[g]);else for(d=b.call(p),n=new f;!(r=d.next()).done;g++)u(n,g,v?a(d,m,[r.value,g],!0):r.value);return n.length=g,n}})},function(e,t,n){"use strict";var i=n(196),r=n(207),o=n(34),a=n(20);e.exports=n(98)(Array,"Array",function(e,t){this._t=a(e),this._i=0,this._k=t},function(){var e=this._t,t=this._k,n=this._i++;return!e||n>=e.length?(this._t=void 0,r(1)):"keys"==t?r(0,n):"values"==t?r(0,e[n]):r(0,[n,e[n]])},"values"),o.Arguments=o.Array,i("keys"),i("values"),i("entries")},function(e,t,n){var i=n(18);i(i.S+i.F,"Object",{assign:n(210)})},function(e,t,n){var i=n(18);i(i.S,"Object",{create:n(60)})},function(e,t,n){var i=n(18);i(i.S,"Object",{setPrototypeOf:n(214).set})},function(e,t){},function(e,t,n){"use strict";var i=n(19),r=n(21),o=n(26),a=n(18),s=n(103),l=n(209).KEY,u=n(32),c=n(64),d=n(62),p=n(41),f=n(17),h=n(69),m=n(68),v=n(208),g=n(200),b=n(203),y=n(25),_=n(20),w=n(67),C=n(36),E=n(60),k=n(212),T=n(99),x=n(22),S=n(28),P=T.f,O=x.f,I=k.f,M=i.Symbol,A=i.JSON,N=A&&A.stringify,j="prototype",L=f("_hidden"),D=f("toPrimitive"),R={}.propertyIsEnumerable,F=c("symbol-registry"),B=c("symbols"),U=c("op-symbols"),$=Object[j],H="function"==typeof M,z=i.QObject,W=!z||!z[j]||!z[j].findChild,V=o&&u(function(){return 7!=E(O({},"a",{get:function(){return O(this,"a",{value:7}).a}})).a})?function(e,t,n){var i=P($,t);i&&delete $[t],O(e,t,n),i&&e!==$&&O($,t,i)}:O,G=function(e){var t=B[e]=E(M[j]);return t._k=e,t},q=H&&"symbol"==typeof M.iterator?function(e){return"symbol"==typeof e}:function(e){return e instanceof M},K=function(e,t,n){return e===$&&K(U,t,n),y(e),t=w(t,!0),y(n),r(B,t)?(n.enumerable?(r(e,L)&&e[L][t]&&(e[L][t]=!1),n=E(n,{enumerable:C(0,!1)})):(r(e,L)||O(e,L,C(1,{})),e[L][t]=!0),V(e,t,n)):O(e,t,n)},Y=function(e,t){y(e);for(var n,i=g(t=_(t)),r=0,o=i.length;o>r;)K(e,n=i[r++],t[n]);return e},Q=function(e,t){return void 0===t?E(e):Y(E(e),t)},X=function(e){var t=R.call(this,e=w(e,!0));return!(this===$&&r(B,e)&&!r(U,e))&&(!(t||!r(this,e)||!r(B,e)||r(this,L)&&this[L][e])||t)},J=function(e,t){if(e=_(e),t=w(t,!0),e!==$||!r(B,t)||r(U,t)){var n=P(e,t);return!n||!r(B,t)||r(e,L)&&e[L][t]||(n.enumerable=!0),n}},Z=function(e){for(var t,n=I(_(e)),i=[],o=0;n.length>o;)r(B,t=n[o++])||t==L||t==l||i.push(t);return i},ee=function(e){for(var t,n=e===$,i=I(n?U:_(e)),o=[],a=0;i.length>a;)!r(B,t=i[a++])||n&&!r($,t)||o.push(B[t]);return o};H||(M=function(){if(this instanceof M)throw TypeError("Symbol is not a constructor!");var e=p(arguments.length>0?arguments[0]:void 0),t=function(n){this===$&&t.call(U,n),r(this,L)&&r(this[L],e)&&(this[L][e]=!1),V(this,e,C(1,n))};return o&&W&&V($,e,{configurable:!0,set:t}),G(e)},s(M[j],"toString",function(){return this._k}),T.f=J,x.f=K,n(100).f=k.f=Z,n(35).f=X,n(61).f=ee,o&&!n(59)&&s($,"propertyIsEnumerable",X,!0),h.f=function(e){return G(f(e))}),a(a.G+a.W+a.F*!H,{Symbol:M});for(var te="hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),ne=0;te.length>ne;)f(te[ne++]);for(var te=S(f.store),ne=0;te.length>ne;)m(te[ne++]);a(a.S+a.F*!H,"Symbol",{for:function(e){return r(F,e+="")?F[e]:F[e]=M(e)},keyFor:function(e){if(q(e))return v(F,e);throw TypeError(e+" is not a symbol!")},useSetter:function(){W=!0},useSimple:function(){W=!1}}),a(a.S+a.F*!H,"Object",{create:Q,defineProperty:K,defineProperties:Y,getOwnPropertyDescriptor:J,getOwnPropertyNames:Z,getOwnPropertySymbols:ee}),A&&a(a.S+a.F*(!H||u(function(){var e=M();return"[null]"!=N([e])||"{}"!=N({a:e})||"{}"!=N(Object(e))})),"JSON",{stringify:function(e){if(void 0!==e&&!q(e)){for(var t,n,i=[e],r=1;arguments.length>r;)i.push(arguments[r++]);return t=i[1],"function"==typeof t&&(n=t),!n&&b(t)||(t=function(e,t){if(n&&(t=n.call(this,e,t)),!q(t))return t}),i[1]=t,N.apply(A,i)}}}),M[j][D]||n(27)(M[j],D,M[j].valueOf),d(M,"Symbol"),d(Math,"Math",!0),d(i.JSON,"JSON",!0)},function(e,t,n){var i=n(18),r=n(102)(!0);i(i.S,"Object",{entries:function(e){return r(e)}})},function(e,t,n){var i=n(18),r=n(102)(!1);i(i.S,"Object",{values:function(e){return r(e)}})},function(e,t,n){n(68)("asyncIterator")},function(e,t,n){n(68)("observable")},function(e,t,n){n(219);for(var i=n(19),r=n(27),o=n(34),a=n(17)("toStringTag"),s=["NodeList","DOMTokenList","MediaList","StyleSheetList","CSSRuleList"],l=0;l<5;l++){var u=s[l],c=i[u],d=c&&c.prototype;d&&!d[a]&&r(d,a,u),o[u]=o.Array}},function(e,t,n){"use strict";var i=n(107);e.exports=function(e,t){e.classList?e.classList.add(t):i(e)||(e.className=e.className+" "+t)}},function(e,t,n){"use strict";e.exports={addClass:n(230),removeClass:n(232),hasClass:n(107)}},function(e,t){"use strict";e.exports=function(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}},function(e,t,n){"use strict";var i=n(30),r=n(237);e.exports=function(e,t){return function(n){var o=n.currentTarget,a=n.target,s=r(o,e);s.some(function(e){return i(e,a)})&&t.call(this,n)}}},function(e,t,n){"use strict";var i=n(70),r=n(108),o=n(233);e.exports={on:i,off:r,filter:o}},function(e,t,n){"use strict";function i(e){return e.nodeName&&e.nodeName.toLowerCase()}function r(e){for(var t=(0,s.default)(e),n=e&&e.offsetParent;n&&"html"!==i(e)&&"static"===(0,u.default)(n,"position");)n=n.offsetParent;return n||t.documentElement}var o=n(44);t.__esModule=!0,t.default=r;var a=n(29),s=o.interopRequireDefault(a),l=n(43),u=o.interopRequireDefault(l);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e.nodeName&&e.nodeName.toLowerCase()}function r(e,t){var n,r={top:0,left:0};return"fixed"===(0,m.default)(e,"position")?n=e.getBoundingClientRect():(t=t||(0,u.default)(e),n=(0,s.default)(e),"html"!==i(t)&&(r=(0,s.default)(t)),r.top+=parseInt((0,m.default)(t,"borderTopWidth"),10)-(0,d.default)(t)||0,r.left+=parseInt((0,m.default)(t,"borderLeftWidth"),10)-(0,f.default)(t)||0),o._extends({},n,{top:n.top-r.top-(parseInt((0,m.default)(e,"marginTop"),10)||0),left:n.left-r.left-(parseInt((0,m.default)(e,"marginLeft"),10)||0)})}var o=n(44);t.__esModule=!0,t.default=r;var a=n(109),s=o.interopRequireDefault(a),l=n(235),u=o.interopRequireDefault(l),c=n(110),d=o.interopRequireDefault(c),p=n(238),f=o.interopRequireDefault(p),h=n(43),m=o.interopRequireDefault(h);e.exports=t.default},function(e,t){"use strict";var n=/^[\w-]*$/,i=Function.prototype.bind.call(Function.prototype.call,[].slice);e.exports=function(e,t){var r,o="#"===t[0],a="."===t[0],s=o||a?t.slice(1):t,l=n.test(s);return l?o?(e=e.getElementById?e:document,(r=e.getElementById(s))?[r]:[]):i(e.getElementsByClassName&&a?e.getElementsByClassName(s):e.getElementsByTagName(t)):i(e.querySelectorAll(t))}},function(e,t,n){"use strict";var i=n(42);e.exports=function(e,t){var n=i(e);return void 0===t?n?"pageXOffset"in n?n.pageXOffset:n.document.documentElement.scrollLeft:e.scrollLeft:void(n?n.scrollTo(t,"pageYOffset"in n?n.pageYOffset:n.document.documentElement.scrollTop):e.scrollLeft=t)}},function(e,t,n){"use strict";var i=n(44),r=n(111),o=i.interopRequireDefault(r),a=/^(top|right|bottom|left)$/,s=/^([+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|))(?!px)[a-z%]+$/i;e.exports=function(e){if(!e)throw new TypeError("No Element passed to `getComputedStyle()`");var t=e.ownerDocument;return"defaultView"in t?t.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):window.getComputedStyle(e,null):{getPropertyValue:function(t){var n=e.style;t=(0,o.default)(t),"float"==t&&(t="styleFloat");var i=e.currentStyle[t]||null;if(null==i&&n&&n[t]&&(i=n[t]),s.test(i)&&!a.test(t)){var r=n.left,l=e.runtimeStyle,u=l&&l.left;u&&(l.left=e.currentStyle.left),n.left="fontSize"===t?"1em":i,i=n.pixelLeft+"px",n.left=r,u&&(l.left=u)}return i}}}},function(e,t){"use strict";e.exports=function(e,t){return"removeProperty"in e.style?e.style.removeProperty(t):e.style.removeAttribute(t)}},function(e,t,n){"use strict";function i(){var e,t="",n={O:"otransitionend",Moz:"transitionend",Webkit:"webkitTransitionEnd",ms:"MSTransitionEnd"},i=document.createElement("div");for(var r in n)if(u.call(n,r)&&void 0!==i.style[r+"TransitionProperty"]){t="-"+r.toLowerCase()+"-",e=n[r];break}return e||void 0===i.style.transitionProperty||(e="transitionend"),{end:e,prefix:t}}var r,o,a,s,l=n(23),u=Object.prototype.hasOwnProperty,c="transform",d={};l&&(d=i(),c=d.prefix+c,a=d.prefix+"transition-property",o=d.prefix+"transition-duration",s=d.prefix+"transition-delay",r=d.prefix+"transition-timing-function"),e.exports={transform:c,end:d.end,property:a,timing:r,delay:s,duration:o}},function(e,t){"use strict";var n=/-(.)/g;e.exports=function(e){return e.replace(n,function(e,t){return t.toUpperCase()})}},function(e,t){"use strict";var n=/([A-Z])/g;e.exports=function(e){return e.replace(n,"-$1").toLowerCase()}},function(e,t,n){"use strict";var i=n(243),r=/^ms-/;e.exports=function(e){return i(e).replace(r,"-ms-")}},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},o=n(1),a=i(o),s=n(14),l=i(s),u=n(74),c=i(u),d=n(9),p=i(d),f=n(113),h=i(f),m=n(246),v=i(m),g=n(37),b=i(g),y=n(116),_=i(y),w=n(249),C=i(w),E=n(23),k=i(E),T=n(106),x=i(T),S=n(30),P=i(S),O=n(73),I=i(O),M=new v.default,A=a.default.createClass({displayName:"Modal",propTypes:r({},h.default.propTypes,{show:a.default.PropTypes.bool,container:a.default.PropTypes.oneOfType([c.default,a.default.PropTypes.func]),onShow:a.default.PropTypes.func,onHide:a.default.PropTypes.func,backdrop:a.default.PropTypes.oneOfType([a.default.PropTypes.bool,a.default.PropTypes.oneOf(["static"])]),renderBackdrop:a.default.PropTypes.func,onEscapeKeyUp:a.default.PropTypes.func,onBackdropClick:a.default.PropTypes.func,backdropStyle:a.default.PropTypes.object,backdropClassName:a.default.PropTypes.string,containerClassName:a.default.PropTypes.string,
keyboard:a.default.PropTypes.bool,transition:p.default,dialogTransitionTimeout:a.default.PropTypes.number,backdropTransitionTimeout:a.default.PropTypes.number,autoFocus:a.default.PropTypes.bool,enforceFocus:a.default.PropTypes.bool,onEnter:a.default.PropTypes.func,onEntering:a.default.PropTypes.func,onEntered:a.default.PropTypes.func,onExit:a.default.PropTypes.func,onExiting:a.default.PropTypes.func,onExited:a.default.PropTypes.func,manager:a.default.PropTypes.object.isRequired}),getDefaultProps:function(){var e=function(){};return{show:!1,backdrop:!0,keyboard:!0,autoFocus:!0,enforceFocus:!0,onHide:e,manager:M,renderBackdrop:function(e){return a.default.createElement("div",e)}}},getInitialState:function(){return{exited:!this.props.show}},render:function(){var e=this.props,t=e.show,n=e.container,i=e.children,r=e.transition,s=e.backdrop,l=e.dialogTransitionTimeout,u=e.className,c=e.style,d=e.onExit,p=e.onExiting,f=e.onEnter,m=e.onEntering,v=e.onEntered,g=a.default.Children.only(i),b=t||r&&!this.state.exited;if(!b)return null;var y=g.props,_=y.role,w=y.tabIndex;return void 0!==_&&void 0!==w||(g=(0,o.cloneElement)(g,{role:void 0===_?"document":_,tabIndex:null==w?"-1":w})),r&&(g=a.default.createElement(r,{transitionAppear:!0,unmountOnExit:!0,in:t,timeout:l,onExit:d,onExiting:p,onExited:this.handleHidden,onEnter:f,onEntering:m,onEntered:v},g)),a.default.createElement(h.default,{ref:this.setMountNode,container:n},a.default.createElement("div",{ref:"modal",role:_||"dialog",style:c,className:u},s&&this.renderBackdrop(),g))},renderBackdrop:function e(){var t=this,n=this.props,i=n.backdropStyle,r=n.backdropClassName,e=n.renderBackdrop,o=n.transition,s=n.backdropTransitionTimeout,l=function(e){return t.backdrop=e},u=a.default.createElement("div",{ref:l,style:this.props.backdropStyle,className:this.props.backdropClassName,onClick:this.handleBackdropClick});return o&&(u=a.default.createElement(o,{transitionAppear:!0,in:this.props.show,timeout:s},e({ref:l,style:i,className:r,onClick:this.handleBackdropClick}))),u},componentWillReceiveProps:function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})},componentWillUpdate:function(e){!this.props.show&&e.show&&this.checkForFocus()},componentDidMount:function(){this.props.show&&this.onShow()},componentDidUpdate:function(e){var t=this.props.transition;!e.show||this.props.show||t?!e.show&&this.props.show&&this.onShow():this.onHide()},componentWillUnmount:function(){var e=this.props,t=e.show,n=e.transition;(t||n&&!this.state.exited)&&this.onHide()},onShow:function(){var e=(0,b.default)(this),t=(0,I.default)(this.props.container,e.body);this.props.manager.add(this,t,this.props.containerClassName),this._onDocumentKeyupListener=(0,_.default)(e,"keyup",this.handleDocumentKeyUp),this._onFocusinListener=(0,C.default)(this.enforceFocus),this.focus(),this.props.onShow&&this.props.onShow()},onHide:function(){this.props.manager.remove(this),this._onDocumentKeyupListener.remove(),this._onFocusinListener.remove(),this.restoreLastFocus()},setMountNode:function(e){this.mountNode=e?e.getMountNode():e},handleHidden:function(){if(this.setState({exited:!0}),this.onHide(),this.props.onExited){var e;(e=this.props).onExited.apply(e,arguments)}},handleBackdropClick:function(e){e.target===e.currentTarget&&(this.props.onBackdropClick&&this.props.onBackdropClick(e),this.props.backdrop===!0&&this.props.onHide())},handleDocumentKeyUp:function(e){this.props.keyboard&&27===e.keyCode&&this.isTopModal()&&(this.props.onEscapeKeyUp&&this.props.onEscapeKeyUp(e),this.props.onHide())},checkForFocus:function(){k.default&&(this.lastFocus=(0,x.default)())},focus:function(){var e=this.props.autoFocus,t=this.getDialogElement(),n=(0,x.default)((0,b.default)(this)),i=n&&(0,P.default)(t,n);t&&e&&!i&&(this.lastFocus=n,t.hasAttribute("tabIndex")||(t.setAttribute("tabIndex",-1),(0,l.default)(!1,'The modal content node does not accept focus. For the benefit of assistive technologies, the tabIndex of the node is being set to "-1".')),t.focus())},restoreLastFocus:function(){this.lastFocus&&this.lastFocus.focus&&(this.lastFocus.focus(),this.lastFocus=null)},enforceFocus:function e(){var e=this.props.enforceFocus;if(e&&this.isMounted()&&this.isTopModal()){var t=(0,x.default)((0,b.default)(this)),n=this.getDialogElement();n&&n!==t&&!(0,P.default)(n,t)&&n.focus()}},getDialogElement:function(){var e=this.refs.modal;return e&&e.lastChild},isTopModal:function(){return this.props.manager.isTopModal(this)}});A.Manager=v.default,t.default=A,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){var n=-1;return e.some(function(e,i){if(t(e,i))return n=i,!0}),n}function a(e,t){return o(e,function(e){return e.modals.indexOf(t)!==-1})}function s(e,t){var n={overflow:"hidden"};e.style={overflow:t.style.overflow,paddingRight:t.style.paddingRight},e.overflowing&&(n.paddingRight=parseInt((0,d.default)(t,"paddingRight")||0,10)+(0,m.default)()+"px"),(0,d.default)(t,n)}function l(e,t){var n=e.style;Object.keys(n).forEach(function(e){return t.style[e]=n[e]})}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(43),d=i(c),p=n(231),f=i(p),h=n(112),m=i(h),v=n(117),g=i(v),b=n(251),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.hideSiblingNodes,i=void 0===n||n,o=t.handleContainerOverflow,a=void 0===o||o;r(this,e),this.hideSiblingNodes=i,this.handleContainerOverflow=a,this.modals=[],this.containers=[],this.data=[]}return u(e,[{key:"add",value:function(e,t,n){var i=this.modals.indexOf(e),r=this.containers.indexOf(t);if(i!==-1)return i;if(i=this.modals.length,this.modals.push(e),this.hideSiblingNodes&&(0,b.hideSiblings)(t,e.mountNode),r!==-1)return this.data[r].modals.push(e),i;var o={modals:[e],classes:n?n.split(/\s+/):[],overflowing:(0,g.default)(t)};return this.handleContainerOverflow&&s(o,t),o.classes.forEach(f.default.addClass.bind(null,t)),this.containers.push(t),this.data.push(o),i}},{key:"remove",value:function(e){var t=this.modals.indexOf(e);if(t!==-1){var n=a(this.data,e),i=this.data[n],r=this.containers[n];i.modals.splice(i.modals.indexOf(e),1),this.modals.splice(t,1),0===i.modals.length?(i.classes.forEach(f.default.removeClass.bind(null,r)),this.handleContainerOverflow&&l(i,r),this.hideSiblingNodes&&(0,b.showSiblings)(r,e.mountNode),this.containers.splice(n,1),this.data.splice(n,1)):this.hideSiblingNodes&&(0,b.ariaHidden)(!1,i.modals[i.modals.length-1].mountNode)}}},{key:"isTopModal",value:function(e){return!!this.modals.length&&this.modals[this.modals.length-1]===e}}]),e}();t.default=y,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(1),d=i(c),p=n(113),f=i(p),h=n(248),m=i(h),v=n(114),g=i(v),b=n(9),y=i(b),_=function(e){function t(e,n){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={exited:!e.show},i.onHiddenListener=i.handleHidden.bind(i),i}return s(t,e),u(t,[{key:"componentWillReceiveProps",value:function(e){e.show?this.setState({exited:!1}):e.transition||this.setState({exited:!0})}},{key:"render",value:function(){var e=this.props,t=e.container,n=e.containerPadding,i=e.target,o=e.placement,a=e.shouldUpdatePosition,s=e.rootClose,l=e.children,u=e.transition,c=r(e,["container","containerPadding","target","placement","shouldUpdatePosition","rootClose","children","transition"]),p=c.show||u&&!this.state.exited;if(!p)return null;var h=l;if(h=d.default.createElement(m.default,{container:t,containerPadding:n,target:i,placement:o,shouldUpdatePosition:a},h),u){var v=c.onExit,b=c.onExiting,y=c.onEnter,_=c.onEntering,w=c.onEntered;h=d.default.createElement(u,{in:c.show,transitionAppear:!0,onExit:v,onExiting:b,onExited:this.onHiddenListener,onEnter:y,onEntering:_,onEntered:w},h)}return s&&(h=d.default.createElement(g.default,{onRootClose:c.onHide},h)),d.default.createElement(f.default,{container:t},h)}},{key:"handleHidden",value:function(){if(this.setState({exited:!0}),this.props.onExited){var e;(e=this.props).onExited.apply(e,arguments)}}}]),t}(d.default.Component);_.propTypes=l({},f.default.propTypes,m.default.propTypes,{show:d.default.PropTypes.bool,rootClose:d.default.PropTypes.bool,onHide:function(e){var t=d.default.PropTypes.func;e.rootClose&&(t=t.isRequired);for(var n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return t.apply(void 0,[e].concat(i))},transition:y.default,onEnter:d.default.PropTypes.func,onEntering:d.default.PropTypes.func,onEntered:d.default.PropTypes.func,onExit:d.default.PropTypes.func,onExiting:d.default.PropTypes.func,onExited:d.default.PropTypes.func}),t.default=_,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(7),d=i(c),p=n(1),f=i(p),h=n(13),m=i(h),v=n(74),g=i(v),b=n(250),y=i(b),_=n(73),w=i(_),C=n(37),E=i(C),k=function(e){function t(e,n){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.state={positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null},i._needsFlush=!1,i._lastTarget=null,i}return s(t,e),u(t,[{key:"componentDidMount",value:function(){this.updatePosition(this.getTarget())}},{key:"componentWillReceiveProps",value:function(){this._needsFlush=!0}},{key:"componentDidUpdate",value:function(e){this._needsFlush&&(this._needsFlush=!1,this.maybeUpdatePosition(this.props.placement!==e.placement))}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,i=r(e,["children","className"]),o=this.state,a=o.positionLeft,s=o.positionTop,u=r(o,["positionLeft","positionTop"]);delete i.target,delete i.container,delete i.containerPadding,delete i.shouldUpdatePosition;var c=f.default.Children.only(t);return(0,p.cloneElement)(c,l({},i,u,{positionLeft:a,positionTop:s,className:(0,d.default)(n,c.props.className),style:l({},c.props.style,{left:a,top:s})}))}},{key:"getTarget",value:function(){var e=this.props.target,t="function"==typeof e?e():e;return t&&m.default.findDOMNode(t)||null}},{key:"maybeUpdatePosition",value:function(e){var t=this.getTarget();(this.props.shouldUpdatePosition||t!==this._lastTarget||e)&&this.updatePosition(t)}},{key:"updatePosition",value:function(e){if(this._lastTarget=e,!e)return void this.setState({positionLeft:0,positionTop:0,arrowOffsetLeft:null,arrowOffsetTop:null});var t=m.default.findDOMNode(this),n=(0,w.default)(this.props.container,(0,E.default)(this).body);this.setState((0,y.default)(this.props.placement,t,e,n,this.props.containerPadding))}}]),t}(f.default.Component);k.propTypes={target:f.default.PropTypes.oneOfType([g.default,f.default.PropTypes.func]),container:f.default.PropTypes.oneOfType([g.default,f.default.PropTypes.func]),containerPadding:f.default.PropTypes.number,placement:f.default.PropTypes.oneOf(["top","right","bottom","left"]),shouldUpdatePosition:f.default.PropTypes.bool},k.displayName="Position",k.defaultProps={containerPadding:0,placement:"right",shouldUpdatePosition:!1},t.default=k,e.exports=t.default},function(e,t){"use strict";function n(e){var t=!document.addEventListener,n=void 0;return t?(document.attachEvent("onfocusin",e),n=function(){return document.detachEvent("onfocusin",e)}):(document.addEventListener("focus",e,!0),n=function(){return document.removeEventListener("focus",e,!0)}),{remove:n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=n,e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=void 0,n=void 0,i=void 0;if("BODY"===e.tagName)t=window.innerWidth,n=window.innerHeight,i=(0,f.default)((0,m.default)(e).documentElement)||(0,f.default)(e);else{var r=(0,u.default)(e);t=r.width,n=r.height,i=(0,f.default)(e)}return{width:t,height:n,scroll:i}}function o(e,t,n,i){var o=r(n),a=o.scroll,s=o.height,l=e-i-a,u=e+i-a+t;return l<0?-l:u>s?s-u:0}function a(e,t,n,i){var o=r(n),a=o.width,s=e-i,l=e+i+t;return s<0?-s:l>a?a-l:0}function s(e,t,n,i,r){var s="BODY"===i.tagName?(0,u.default)(n):(0,d.default)(n,i),l=(0,u.default)(t),c=l.height,p=l.width,f=void 0,h=void 0,m=void 0,v=void 0;if("left"===e||"right"===e){h=s.top+(s.height-c)/2,f="left"===e?s.left-p:s.left+s.width;var g=o(h,c,i,r);h+=g,v=50*(1-2*g/c)+"%",m=void 0}else{if("top"!==e&&"bottom"!==e)throw new Error('calcOverlayPosition(): No such placement of "'+e+'" found.');f=s.left+(s.width-p)/2,h="top"===e?s.top-c:s.top+s.height;var b=a(f,p,i,r);f+=b,m=50*(1-2*b/p)+"%",v=void 0}return{positionLeft:f,positionTop:h,arrowOffsetLeft:m,arrowOffsetTop:v}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=s;var l=n(109),u=i(l),c=n(236),d=i(c),p=n(110),f=i(p),h=n(37),m=i(h);e.exports=t.default},function(e,t){"use strict";function n(e,t){t&&(e?t.setAttribute("aria-hidden","true"):t.removeAttribute("aria-hidden"))}function i(e,t){s(e,t,function(e){return n(!0,e)})}function r(e,t){s(e,t,function(e){return n(!1,e)})}Object.defineProperty(t,"__esModule",{value:!0}),t.ariaHidden=n,t.hideSiblings=i,t.showSiblings=r;var o=["template","script","style"],a=function(e){var t=e.nodeType,n=e.tagName;return 1===t&&o.indexOf(n.toLowerCase())===-1},s=function(e,t,n){t=[].concat(t),[].forEach.call(e.children,function(e){t.indexOf(e)===-1&&a(e)&&n(e)})}},function(e,t,n){"use strict";function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){function n(i,r){function o(e,n){var i=p.getLinkName(e),o=this.props[r[e]];i&&s(this.props,i)&&!o&&(o=this.props[i].requestChange);for(var a=arguments.length,l=Array(a>2?a-2:0),u=2;u<a;u++)l[u-2]=arguments[u];t(this,e,o,n,l)}function s(e,t){return void 0!==e[t]}function u(e){var t={};return p.each(e,function(e,n){b.indexOf(n)===-1&&(t[n]=e)}),t}var d,f=arguments.length<=2||void 0===arguments[2]?[]:arguments[2],h=i.displayName||i.name||"Component",m=p.getType(i).propTypes,v=p.isReactComponent(i),g=Object.keys(r),b=["valueLink","checkedLink"].concat(g.map(p.defaultKey));d=p.uncontrolledPropTypes(r,m,h),(0,c.default)(v||!f.length,"[uncontrollable] stateless function components cannot pass through methods because they have no associated instances. Check component: "+h+", attempting to pass through methods: "+f.join(", ")),f=p.transform(f,function(e,t){e[t]=function(){var e;return(e=this.refs.inner)[t].apply(e,arguments)}},{});var y=l.default.createClass(a({displayName:"Uncontrolled("+h+")",mixins:e,propTypes:d},f,{componentWillMount:function(){var e=this,t=this.props;this._values={},g.forEach(function(n){e._values[n]=t[p.defaultKey(n)]})},componentWillReceiveProps:function(e){var t=this,n=this.props;g.forEach(function(i){void 0===p.getValue(e,i)&&void 0!==p.getValue(n,i)&&(t._values[i]=e[p.defaultKey(i)])})},getControlledInstance:function(){return this.refs.inner},render:function(){var e=this,t={},n=u(this.props);return p.each(r,function(n,i){var r=p.getLinkName(i),a=e.props[i];r&&!s(e.props,i)&&s(e.props,r)&&(a=e.props[r].value),t[i]=void 0!==a?a:e._values[i],t[n]=o.bind(e,i)}),t=a({},n,t,{ref:v?"inner":null}),l.default.createElement(i,t)}}));return y.ControlledComponent=i,y.deferControlTo=function(e){var t=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2];return n(e,a({},r,t),i)},y}return n}t.__esModule=!0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=o;var s=n(1),l=r(s),u=n(71),c=r(u),d=n(253),p=i(d);e.exports=t.default},function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){var i={};return i}function o(e){return b[0]>=15||0===b[0]&&b[1]>=13?e:e.type}function a(e,t){var n=l(t);return n&&!s(e,t)&&s(e,n)?e[n].value:e[t]}function s(e,t){return void 0!==e[t]}function l(e){return"value"===e?"valueLink":"checked"===e?"checkedLink":null}function u(e){return"default"+e.charAt(0).toUpperCase()+e.substr(1)}function c(e,t,n){return function(){for(var i=arguments.length,r=Array(i),o=0;o<i;o++)r[o]=arguments[o];t&&t.call.apply(t,[e].concat(r)),n&&n.call.apply(n,[e].concat(r))}}function d(e,t,n){return p(e,t.bind(null,n=n||(Array.isArray(e)?[]:{}))),n}function p(e,t,n){if(Array.isArray(e))return e.forEach(t,n);for(var i in e)f(e,i)&&t.call(n,e[i],i,e)}function f(e,t){return!!e&&Object.prototype.hasOwnProperty.call(e,t)}function h(e){return!!(e&&e.prototype&&e.prototype.isReactComponent)}t.__esModule=!0,t.version=void 0,t.uncontrolledPropTypes=r,t.getType=o,t.getValue=a,t.getLinkName=l,t.defaultKey=u,t.chain=c,t.transform=d,t.each=p,t.has=f,t.isReactComponent=h;var m=n(1),v=i(m),g=n(71),b=(i(g),t.version=v.default.version.split(".").map(parseFloat))}])}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/ActionOverlay",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/common/ActionOverlay",["module","exports","react","react-bootstrap","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./ActionOverlay"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){function t(e,t,n){return e||(t+=" op-hidden"),s.default.createElement("span",{className:t,onClick:n})}function n(t,n,r){return t||(n+=" op-hidden"),s.default.createElement(i.OverlayTrigger,{placement:"top",key:e.item.id,overlay:s.default.createElement(i.Tooltip,{id:"transition-tooltip-"+e.item.id},l.default.builder.builderPanel.duplicate)},s.default.createElement("span",{className:n,onClick:r}))}return e.showActions&&(e.item.hasDelete||e.item.hasDuplicate)?s.default.createElement("div",{className:"op-action-overlay"},t(e.item.hasDelete,"action-icon glyphicon glyphicon-remove-circle",function(t){e.callbacks.deleteItem(e.item.id),t.stopPropagation()}),n(e.item.hasDuplicate,"action-icon glyphicon glyphicon-duplicate",function(t){e.callbacks.duplicateItem(e.item.id),t.stopPropagation()})):null}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(r);t.default=a,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/ItemMain",[],function(){}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMain",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMain",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMain"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="op-item-main builder-overview "+e.item.size;e.item.scanResults&&e.item.scanResults.hasErrors&&(t+=" error");var n=function(){return e.item.showTitleBar?a.default.createElement("div",{className:"title-bar"},a.default.createElement("span",{className:"title"},a.default.createElement("span",{className:e.item.icon+" icon"}),e.item.title)):e.item.icon?a.default.createElement("span",{className:"item-icon"},a.default.createElement("span",{className:e.item.icon+" icon"})):e.item.text?a.default.createElement("div",{className:"text-overlay"},a.default.createElement("p",{className:"item-text"},e.item.text)):null},i=function(){return e.item.label?a.default.createElement("div",{className:"item-label"},e.item.label):null};return a.default.createElement("div",{style:{backgroundImage:"url("+e.item.thumbnail+")"},className:t},n(),i(),a.default.createElement(s.default,e))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i);t.default=o,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMainButton",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/ItemMainButton",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMainButton"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="op-item-main item-button "+e.item.size;return e.item.scanResults&&e.item.scanResults.hasErrors&&(t+=" error"),a.default.createElement("div",{className:t},a.default.createElement("div",null,e.item.label),a.default.createElement(s.default,e))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i);t.default=o,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/common/Item",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/builderOverview/Item",["module","exports","react","./ItemMain","./ItemMainButton","lib-build/less!./../common/Item"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){a(this,t);var e=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showActions:!1},e.renderInnerItem=e.renderInnerItem.bind(e),e}return l(t,e),f(t,[{key:"renderInnerItem",value:function(){var e=this,t=c.default,n="op-item";return"button"===this.props.item.style&&(t=d.default),this.props.selected&&(n+=" selected"),this.props.item.hasOrganize||(n+=" undraggable"),this.props.organize&&(n+=" organize"),"simple-text"==this.props.item.style&&(n+=" style-simple-text"),u.default.createElement("div",{className:n,onClick:function(){e.props.organize||(e.props.onItemClicked(e.props.item.id),e.props.callbacks.selectItem(e.props.item.id))},onMouseOver:function(){e.props.organize||e.setState({showActions:!0})},onMouseLeave:function(){e.setState({showActions:!1})},"data-id":this.props.item.id},u.default.createElement(t,p({showActions:this.state.showActions},this.props)))}},{key:"render",value:function(){return this.renderInnerItem()}}]),t}(u.default.Component);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/InlineAdd",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/InlineAdd",["module","exports","react","lib-build/less!./InlineAdd"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(e){function t(){r(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hovered:!1},e}return a(t,e),l(t,[{key:"render",value:function(){var e=this,t=null;return this.props.organize||(t=s.default.createElement("span",{className:"add-button",onClick:function(){e.props.addItem(e.props.index)}},s.default.createElement("span",{className:"icon glyphicon glyphicon-plus"}))),s.default.createElement("div",{className:"op-inline-add-container",onMouseEnter:function(){e.setState({hovered:!0})},onMouseLeave:function(){e.setState({hovered:!1})}},t)}}]),t}(s.default.Component);t.default=u,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/TransitionOverlay",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/TransitionOverlay",["module","exports","react","react-bootstrap","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./TransitionOverlay"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=function(t){var n="item btn-gray",i=null;return t.enabled||(n+=" disabled"),e.transition.id===t.id&&(n+=" selected",i=s.default.createElement("span",{className:"icon"},s.default.createElement("span",{className:"glyphicon glyphicon-ok"}))),s.default.createElement("li",{key:t.id,className:n,onClick:function(){t.enabled&&e.onItemClick(t.id)}},i,t.label)},n=function(){return e.transitions.map(function(n){return n.enabled?t(n):s.default.createElement(i.OverlayTrigger,{placement:"left",key:n.id,overlay:s.default.createElement(i.Tooltip,{id:"transition-tooltip-"+e.itemID+"-"+n.id},n.tooltip)},t(n))})},r=Object.assign({},e);return delete r.transitions,delete r.transition,delete r.onItemClick,s.default.createElement(i.Popover,u({},r,{id:"transition-popover-"+e.itemID,placement:"top"}),s.default.createElement("h6",{className:"title"},l.default.builder.immersiveViewPanel.transition),s.default.createElement("ul",{className:"list"},n()))}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(r),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e};t.default=a,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Transition",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Transition",["module","exports","react","react-dom","react-bootstrap","./TransitionOverlay","lib-build/less!./Transition"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(o),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),h=function(e){function t(){s(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={shown:!1},e.hidePopover=e.hidePopover.bind(e),e.togglePopover=e.togglePopover.bind(e),e.onTransitionClick=e.onTransitionClick.bind(e),e}return u(t,e),f(t,[{key:"hidePopover",value:function(){this.setState({shown:!1})}},{key:"togglePopover",value:function(){this.setState({shown:!this.state.shown})}},{key:"onTransitionClick",value:function(e){this.hidePopover(),this.props.callbacks.updateItemTransition(this.props.index,e)}},{key:"render",value:function(){var e=this,t="op-transition-button";return this.props.firstItem?null:c.default.createElement("div",{className:"op-transition-container"},c.default.createElement(r.Overlay,{trigger:"click",placement:"top",rootClose:!0,show:this.state.shown,target:function(){return d.default.findDOMNode(e.refs.target)},onHide:this.hidePopover},c.default.createElement(p.default,{className:"op-transition-overlay",itemID:this.props.itemID,transitions:this.props.transitions,transition:this.props.transition,onItemClick:this.onTransitionClick})),c.default.createElement("div",{ref:"target",className:t,title:"Choose transition",onClick:function(t){e.togglePopover(),t.stopPropagation()}},c.default.createElement("img",{className:"icon",src:this.props.transition.icon})))}}]),t}(c.default.Component);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/ItemMain",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/ItemMain",["module","exports","react","./../common/ActionOverlay","lib-build/less!./../common/ItemMain","lib-build/less!./ItemMain"],function(e,t,n,i){
"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e){var t="op-item-main",n=e.item.scanResults||[],i=n.some(function(e){return e.hasErrors});return i&&(t+=" error"),a.default.createElement("div",{style:{backgroundImage:"url("+e.item.thumbnail+")"},className:t},a.default.createElement(s.default,e))}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i);t.default=o,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Item",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/item/immersiveView/Item",["module","exports","react","./InlineAdd","./Transition","./ItemMain","lib-build/less!./../common/Item","lib-build/less!./Item"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=function(e){function t(){s(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={showActions:!1},e.renderInlineAdd=e.renderInlineAdd.bind(e),e.renderInnerItem=e.renderInnerItem.bind(e),e.renderTransition=e.renderTransition.bind(e),e}return u(t,e),m(t,[{key:"renderInlineAdd",value:function(){return c.default.createElement(d.default,{organize:this.props.organize,lastItem:this.props.lastItem,addItem:this.props.callbacks.addItem,index:this.props.index})}},{key:"renderTransition",value:function(){var e=this;return c.default.createElement(p.default,{firstItem:this.props.firstItem,itemID:this.props.item.id,transitions:this.props.item.transitions,transition:this.props.item.transitions.find(function(t){return t.id===e.props.item.transition}),callbacks:this.props.callbacks,index:this.props.index})}},{key:"renderInnerItem",value:function(){var e=this,t="op-item";return this.props.selected&&(t+=" selected"),this.props.item.hasOrganize||(t+=" undraggable"),this.props.organize&&(t+=" organize"),c.default.createElement("div",{className:t,onClick:function(){e.props.organize||(e.props.onItemClicked(e.props.item.id),e.props.callbacks.selectItem(e.props.item.id))},onMouseOver:function(){e.props.organize||e.setState({showActions:!0})},onMouseLeave:function(){e.setState({showActions:!1})},"data-id":this.props.item.id},this.renderTransition(),c.default.createElement(f.default,h({showMedia:!0,showActions:this.state.showActions},this.props)))}},{key:"render",value:function(){return c.default.createElement("div",{className:"op-item-outer","data-id":this.props.item.id},this.renderInnerItem(),this.renderInlineAdd())}}]),t}(c.default.Component);t.default=v,e.exports=t.default}),!function(e){"function"==typeof define&&define.amd?define("lib/jquery-mousewheel/jquery.mousewheel.min",["jquery"],e):"object"==typeof exports?module.exports=e:e(jQuery)}(function(e){function t(t){var a=t||window.event,s=l.call(arguments,1),u=0,d=0,p=0,f=0,h=0,m=0;if(t=e.event.fix(a),t.type="mousewheel","detail"in a&&(p=-1*a.detail),"wheelDelta"in a&&(p=a.wheelDelta),"wheelDeltaY"in a&&(p=a.wheelDeltaY),"wheelDeltaX"in a&&(d=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(d=-1*p,p=0),u=0===p?d:p,"deltaY"in a&&(p=-1*a.deltaY,u=p),"deltaX"in a&&(d=a.deltaX,0===p&&(u=-1*d)),0!==p||0!==d){if(1===a.deltaMode){var v=e.data(this,"mousewheel-line-height");u*=v,p*=v,d*=v}else if(2===a.deltaMode){var g=e.data(this,"mousewheel-page-height");u*=g,p*=g,d*=g}if(f=Math.max(Math.abs(p),Math.abs(d)),(!o||o>f)&&(o=f,i(a,f)&&(o/=40)),i(a,f)&&(u/=40,d/=40,p/=40),u=Math[u>=1?"floor":"ceil"](u/o),d=Math[d>=1?"floor":"ceil"](d/o),p=Math[p>=1?"floor":"ceil"](p/o),c.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();h=t.clientX-b.left,m=t.clientY-b.top}return t.deltaX=d,t.deltaY=p,t.deltaFactor=o,t.offsetX=h,t.offsetY=m,t.deltaMode=0,s.unshift(t,u,d,p),r&&clearTimeout(r),r=setTimeout(n,200),(e.event.dispatch||e.event.handle).apply(this,s)}}function n(){o=null}function i(e,t){return c.settings.adjustOldDeltas&&"mousewheel"===e.type&&t%120===0}var r,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(e.event.fixHooks)for(var u=a.length;u;)e.event.fixHooks[a[--u]]=e.event.mouseHooks;var c=e.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],t,!1);else this.onmousewheel=t;e.data(this,"mousewheel-line-height",c.getLineHeight(this)),e.data(this,"mousewheel-page-height",c.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],t,!1);else this.onmousewheel=null;e.removeData(this,"mousewheel-line-height"),e.removeData(this,"mousewheel-page-height")},getLineHeight:function(t){var n=e(t),i=n["offsetParent"in e.fn?"offsetParent":"parent"]();return i.length||(i=e("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(t){return e(t).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};e.fn.extend({mousewheel:function(e){return e?this.bind("mousewheel",e):this.trigger("mousewheel")},unmousewheel:function(e){return this.unbind("mousewheel",e)}})}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/list/List",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/list/List",["module","exports","react","lib/Sortable/Sortable","./item/builderOverview/Item","./item/immersiveView/Item","lib/jquery-mousewheel/jquery.mousewheel.min","lib-build/less!./List"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(e){function t(){s(this,t);var e=l(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.sortableContainersDecorator=e.sortableContainersDecorator.bind(e),e.sortableGroupDecorator=e.sortableGroupDecorator.bind(e),e.showItems=e.showItems.bind(e),e.preventPageScroll=e.preventPageScroll.bind(e),e.onScroll=e.onScroll.bind(e),e.handleHorizontalScroll=e.handleHorizontalScroll.bind(e),e.sortableGroupInstance=null,e.sortableContainerInstance=null,e.listNode=null,e}return u(t,e),h(t,[{key:"componentDidMount",value:function(){this.listNode=$(this.props.container).find(".op-list.group-list")[0],$(this.listNode).on("mousewheel",this.onScroll)}},{key:"onScroll",value:function(e){"vertical"===this.props.orientation?this.preventPageScroll(e.originalEvent):this.handleHorizontalScroll(e)}},{key:"handleHorizontalScroll",value:function(e){var t=$(e.currentTarget),n=e.deltaX,i=e.deltaY;e.preventDefault(),Math.abs(n)>Math.abs(i)?t.scrollLeft(t.scrollLeft()+n*e.deltaFactor):t.scrollLeft(t.scrollLeft()-i*e.deltaFactor)}},{key:"preventPageScroll",value:function(e){this.listNode.scrollHeight>=this.listNode.clientHeight&&(this.listNode.scrollHeight-this.listNode.scrollTop<=this.listNode.clientHeight&&e.deltaY>0&&e.preventDefault(),0===this.listNode.scrollTop&&e.deltaY<0&&e.preventDefault())}},{key:"componentDidUpdate",value:function(e){e.organize!==this.props.organize&&this.sortableGroupInstance.option("disabled",!this.props.organize)}},{key:"componentWillUnmount",value:function(){this.sortableGroupInstance.destroy(),this.sortableContainerInstance.destroy(),this.listNode.removeEventListener("wheel",this.preventPageScroll)}},{key:"sortableContainersDecorator",value:function(e){var t=null;e&&(t={},this.sortableContainerInstance=d.default.create(e,t))}},{key:"sortableGroupDecorator",value:function(e){var t=this,n=null;e&&(n={disabled:!0,ghostClass:"drop-zone",chosenClass:"chosen",filter:".undraggable",animation:300,onUpdate:function(){var e=t.sortableGroupInstance.toArray();t.props.updateOrder(e)},onMove:function(e){if($(e.related).hasClass("undraggable"))return!1}},this.sortableGroupInstance=d.default.create(e,n))}},{key:"showItems",value:function(){var e=this,t=p.default;return"horizontal"===this.props.orientation&&(t=f.default),this.props.items.map(function(n,i,r){var o=0===i,a=i===r.length-1;return c.default.createElement(t,{key:n.id,item:n,index:i,onItemClicked:e.props.changeSelectedItem,selected:e.props.selectedItem===n.id,callbacks:e.props.callbacks,organize:e.props.organize,orientation:e.props.orientation,firstItem:o,lastItem:a})})}},{key:"render",value:function(){var e="op-list";return this.props.organize&&(e+=" organize"),c.default.createElement("div",{className:"group-list "+e,ref:this.sortableGroupDecorator},this.showItems())}}]),t}(c.default.Component);t.default=m,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/builder/overviewPanel/Panel",[],function(){}),define("storymaps-react/tpl/builder/overviewPanel/Panel",["module","exports","react","./list/List","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./Panel"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=e.organize?u.default.builder.builderPanel.done:u.default.builder.builderPanel.organize,n="icon glyphicon",i="op-panel";"horizontal"===e.orientation&&(i+=" op-style-horizontal"),e.organize&&(i+=" organize"),n+=e.organize?" glyphicon-ok done":" glyphicon-sort organize";var r=function(){if("horizontal"===e.orientation&&e.items&&e.items.length){var t=1===e.items.length&&"empty"===e.items[0].mediaType;if(t)return s.default.createElement("div",{className:"overview-orientation"},s.default.createElement("div",{className:"overview-orientation-text"},u.default.builder.immersiveViewPanel.invite))}return null};return s.default.createElement("div",{className:i},s.default.createElement(l.default,e),s.default.createElement("div",{className:"organize-toggle",onClick:function(){e.organize&&e.callbacks.organize(e.order),e.toggleOrganize()}},s.default.createElement("div",{className:"organize-toggle-wrapper"},s.default.createElement("span",{className:n}),"horizontal"===e.orientation?null:t)),r())}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r);t.default=a,e.exports=t.default}),define("storymaps-react/tpl/builder/overviewPanel/PanelContainer",["module","exports","react-redux","./actions","./Panel"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0});var s=a(i),l=o(r),u=function(e){return{items:e.items,organize:e.organize,selectedItem:e.selectedItem,order:e.order}},c=function(e){return{toggleOrganize:function(){e(s.toggleOrganize())},changeSelectedItem:function(t){e(s.changeSelectedItem(t))},updateOrder:function(t){e(s.updateOrder(t))}}};t.default=(0,n.connect)(u,c)(l.default),e.exports=t.default}),define("storymaps-react/tpl/builder/overviewPanel/OverviewPanel",["module","exports","react","react-dom","redux","react-redux","./reducer","./actions","./PanelContainer"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,i){function a(e,n){var i=500,r=800,o=0,a=0,s=0,l=0,u=0,c=0,d=0,p=0;"horizontal"===t?(s=n[0].offsetWidth/2,l=e[0].offsetWidth/2,a=l-s,d=n.offset().left-(e.offset().left-e.scrollLeft()),o=d-a,o<0&&(o=0),e.animate({scrollLeft:o},r)):(u=n[0].offsetHeight/2,c=e[0].offsetHeight/2,a=c-u,p=n.offset().top-(e.offset().top-e.scrollTop()),o=p-a,o<0&&(o=0),e.animate({scrollTop:o},i))}var s={selectedItem:n.length?n[0].id:"",items:n,organize:!1,order:n.map(function(e){return e.id})},l=(0,r.createStore)(f.default,s);p.default.render(d.default.createElement(o.Provider,{store:l},d.default.createElement(m.default,{callbacks:i,orientation:t,container:e})),e),this.updateItems=function(e){l.dispatch(h.updateItems(e));var t=e.map(function(e){return e.id});l.dispatch(h.updateOrder(t))},this.navigateTo=function(t){l.dispatch(h.changeSelectedItem(t));var n=$(e).find(".group-list"),i=n.find('[data-id="'+t+'"]');n.length&&i.length&&a(n,i)}};var d=c(n),p=c(i),f=c(a),h=u(s),m=c(l);e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveBuilderPanel",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveBuilderPanel",["module","exports","lib-build/i18n!resources/tpl/builder/nls/app","storymaps-react/tpl/builder/overviewPanel/OverviewPanel","lib-build/less!./ImmersiveBuilderPanel"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u={"fade-fast":{id:"fade-fast",label:a.default.builder.immersiveViewPanel.fade,icon:"resources/tpl/builder/icons/immersive-panel/FadeFast.png"},"fade-slow":{id:"fade-slow",label:a.default.builder.immersiveViewPanel.fadeSlow,icon:"resources/tpl/builder/icons/immersive-panel/Fade.png"},"swipe-vertical":{id:"swipe-vertical",label:a.default.builder.immersiveViewPanel.swipeVertical,icon:"resources/tpl/builder/icons/immersive-panel/SwipeVertical.png"},"swipe-horizontal":{id:"swipe-horizontal",label:a.default.builder.immersiveViewPanel.swipeHorizontal,icon:"resources/tpl/builder/icons/immersive-panel/SwipeHorizontal.png"},none:{id:"none",label:a.default.builder.immersiveViewPanel.none,icon:"resources/tpl/builder/icons/immersive-panel/None.png"}},c=function(){function e(t){o(this,e),t=t||{},t.container&&(this._node=t.container,this._medias=null,this._panels=null,this._transitions=null,this._overview=new s.default(this._node[0],"horizontal",[],{selectItem:function(e){t.selectView(this._getViewById(e))}.bind(this),addItem:t.addView,deleteItem:function(e){t.deleteView(this._getViewById(e))}.bind(this),duplicateItem:function(e){t.duplicateView(this._getViewById(e))}.bind(this),updateItemTransition:t.updateTransition,organize:t.organize}))}return l(e,[{key:"update",value:function(e){e=e||{},e.medias&&e.panels&&(this._medias=e.medias,this._panels=e.panels,this._transitions=e.transitions,this._overview.updateItems(this._getViewsOverview(e.transitionsInfos)))}},{key:"selectView",value:function(e){e<0||this._overview.navigateTo(this._getViewIdByIndex(e))}},{key:"_getViewById",value:function(e){for(var t in this._panels){var n=this._panels[t];if(n.id==e)return parseInt(t,10)}return-1}},{key:"_getViewIdByIndex",value:function(e){return e<0?null:this._panels[e].id}},{key:"_getViewsOverview",value:function(e){for(var t=this,n=[],i=function(i){var r=t._medias[i],o=t._panels[i],a=t._transitions[i],s=e[i],l=[r.scanResults];o._blocks.forEach(function(e){e.scanResults&&l.push(e.scanResults)}),n.push({id:o.id,type:"thumbnail",icon:r.getPreviewIcon(),transition:a,mediaType:r.type,transitions:t._getTransition({index:i,mediaType:r.type,isDuplicate:s.isDuplicate,isDuplicateConsecutive:s.isDuplicateConsecutive,firstOccurenceTransition:s.firstOccurenceTransition,duplicateConsecutiveTransitions:s.duplicateConsecutiveTransitions}),thumbnail:r.getPreviewThumbnail(),hidden:!1,hasDelete:!0,hasHide:!0,hasDuplicate:!0,hasOrganize:!0,scanResults:l})},r=0;r<this._medias.length;r++)i(r);return n}},{key:"_getTransition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=[];if(0===e.index)return t;if(e.isDuplicateConsecutive){var n=a.default.builder.immersiveViewPanel.disabledConsecutiveSameMedia,i=a.default.builder.immersiveViewPanel.disabledTooltipMap,r=a.default.builder.immersiveViewPanel.disabledConsecutiveSameMap,o=a.default.builder.immersiveViewPanel.disabledNotInBeta,s=["fade-fast","fade-slow","swipe-vertical","swipe-horizontal"],l=!0,c=!1,d=void 0;try{for(var p,f=s[Symbol.iterator]();!(l=(p=f.next()).done);l=!0){var h=p.value,m=Object.assign({},u[h]);e.duplicateConsecutiveTransitions.indexOf(h)>-1?(m.enabled=!0,m.tooltip=""):"webmap"==e.mediaType?"fade-slow"==h||"fade-fast"==h?(m.enabled=!1,m.tooltip=r):"swipe-horizontal"==h?(m.enabled=!1,m.tooltip=o):(m.enabled=!1,m.tooltip=i):(m.enabled=!1,m.tooltip=n),t.push(m)}}catch(e){c=!0,d=e}finally{try{!l&&f.return&&f.return()}finally{if(c)throw d}}var v=Object.assign({},u.none);v.enabled=!0,v.tooltip="",t.push(v)}else if(e.isDuplicate&&e.firstOccurenceTransition&&"image"!=e.mediaType){var g=a.default.builder.immersiveViewPanel.disabledNonConsecutive;e.firstOccurenceTransition="none";for(var b in u){var y=Object.assign({},u[b]);b!=e.firstOccurenceTransition?(y.enabled=!1,y.tooltip=g):(y.enabled=!0,y.tooltip=""),t.push(y)}}else for(var _ in u){var w=Object.assign({},u[_]);w.enabled=!0,w.tooltip="",t.push(w)}return t}}]),e}();t.default=c,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/ImmersiveTitleConfig",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-panel-wrapper immersive-title-config-wrapper">\r\n  <div class="builder-config-panel">\r\n    <div class="builder-config-panel-btn title-config-close">\r\n      <i class="builder-invite-close fa fa-check" aria-hidden="true"></i>\r\n    </div>\r\n    <div class="panel-config-row">\r\n\r\n      <div class="options-container panel-scrolling-theme" data-option="theme">\r\n        <div class="column-label">'+a(o(null!=(r=null!=e?e.strings:e)?r.theme:r,e))+'</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="shadow-light" data-shadow="true" data-text="light">\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleShadowLightOverDark.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="shadow-dark" data-shadow="true" data-text="dark">\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleShadowDarkOverLight.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="background-dark" data-background="dark" data-text="light">\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleSolidLightOverDark.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-type="style" data-value="background-light" data-background="light" data-text="dark">\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/titleSolidDarkOverLight.png" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n  <div class="builder-config-panel-btn title-config-open">\r\n    <i class="builder-invite-open fa fa-pencil" aria-hidden="true"></i>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveTitleConfig",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveTitleConfig",["module","exports","lib-build/hbars!./ImmersiveTitleConfig","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./ImmersiveTitleConfig"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){o(this,e),this._node=null,this._sectionOptions=null,this._configPanel=null,this.applyConfig=t?t.applyConfigCallback:null,this._style=t?t.style:null}return l(e,[{key:"render",value:function(){return(0,a.default)({strings:s.default.builder.immersive.titleConfig})}},{key:"postCreate",value:function(e){!e.container&&e.sectionOptions||(this._node=e.container,this._sectionOptions=e.sectionOptions,this._configPanel=this._node.find(".builder-config-panel"),this._addEvents())}},{key:"_addEvents",value:function(){var e=this,t=this._node.find('.panel-cfg-item-wrapper[data-type="style"]'),n=this._determineTitleStyle(),i="fa fa-check active";this._node.find('.panel-cfg-item-wrapper[data-value="'+n+'"]').addClass(i),t.on("click",function(n){var r=$(n.currentTarget),o={shadow:!!r.data("shadow"),text:r.data("text"),background:r.data("background")||null};t.removeClass(i),r.addClass(i),e.setStyle(o),"function"==typeof e.applyConfig&&e.applyConfig()})}},{key:"_determineTitleStyle",value:function(){if(!this._sectionOptions)return"shadow-light";var e=this._sectionOptions.style;return e?e.background?"dark"===e.background?"background-dark":"background-light":e.shadow&&"dark"===e.text?"shadow-dark":"shadow-light":"shadow-light"}},{key:"getStyle",value:function(){return this._style}},{key:"setStyle",value:function(e){this._style=e}},{key:"toggleBuilderPanel",value:function(e){var t=this._node.find(".builder-config-panel-btn.title-config-open");e.hasClass("title-config-open")?(this._configPanel.addClass("active"),t.css("display","none")):(this._configPanel.removeClass("active"),t.css("display","block"))}}]),e}();t.default=u,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/builder/notification/Undo",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'" class="builder-notification notification-undo has-notification-btn">\r\n  <div class="alert alert-dismissible" role="alert">\r\n    ';return o=null!=(o=t.label||(null!=e?e.label:e))?o:s,r=typeof o===a?o.call(e,{name:"label",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n    <button class="btn btn-primary btn-sm btn-undo">'+l((o=null!=(o=t.labelUndo||(null!=e?e.labelUndo:e))?o:s,typeof o===a?o.call(e,{name:"labelUndo",hash:{},data:i}):o))+'</button>\r\n    <button type="button" class="close" data-dismiss="alert" aria-label="'+l((o=null!=(o=t.labelClose||(null!=e?e.labelClose:e))?o:s,typeof o===a?o.call(e,{name:"labelClose",hash:{},data:i}):o))+'">\r\n      <span aria-hidden="true">&times;</span>\r\n    </button>\r\n    <div class="progress"></div>\r\n    <div class="info-icon">\r\n      <i class="fa fa-info-circle" aria-hidden="true"></i>\r\n    </div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),!function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("lib/progressbar.js/dist/progressbar.min",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.ProgressBar=e()}}(function(){var e;return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,n,i){(function(){var t=this||Function("return this")(),r=function(){"use strict";function r(){}function o(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function a(e,t){return o(t,function(n){e[n]=t[n]}),e}function s(e,t){o(t,function(n){"undefined"==typeof e[n]&&(e[n]=t[n])})}function l(e,t,n,i,r,o,a){var s,l,c,d=o>e?0:(e-o)/r;for(s in t)t.hasOwnProperty(s)&&(l=a[s],c="function"==typeof l?l:h[l],t[s]=u(n[s],i[s],c,d));return t}function u(e,t,n,i){return e+(t-e)*n(i)}function c(e,t){var n=f.prototype.filter,i=e._filterArgs;o(n,function(r){"undefined"!=typeof n[r][t]&&n[r][t].apply(e,i)})}function d(e,t,n,i,r,o,a,s,u,d,p){w=t+n+i,C=Math.min(p||_(),w),E=C>=w,k=i-(w-C),e.isPlaying()&&(E?(u(a,e._attachment,k),e.stop(!0)):(e._scheduleId=d(e._timeoutHandler,b),c(e,"beforeTween"),t+n>C?l(1,r,o,a,1,1,s):l(C,r,o,a,i,t+n,s),c(e,"afterTween"),u(r,e._attachment,k)))}function p(e,t){var n={},i=typeof t;return"string"===i||"function"===i?o(e,function(e){n[e]=t}):o(e,function(e){n[e]||(n[e]=t[e]||v)}),n}function f(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=m,"undefined"!=typeof t&&this.setConfig(t)}var h,m,v="linear",g=500,b=1e3/60,y=Date.now?Date.now:function(){return+new Date},_="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:y;m="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var w,C,E,k;return f.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=_(),this._start(this.get(),this._attachment),this.resume())},f.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._delay=e.delay||0,this._start=e.start||r,this._step=e.step||r,this._finish=e.finish||r,this._duration=e.duration||g,this._currentState=a({},e.from)||this.get(),this._originalState=this.get(),this._targetState=a({},e.to)||this.get();var t=this;this._timeoutHandler=function(){d(t,t._timestamp,t._delay,t._duration,t._currentState,t._originalState,t._targetState,t._easing,t._step,t._scheduleFunction)};var n=this._currentState,i=this._targetState;return s(i,n),this._easing=p(n,e.easing||v),this._filterArgs=[n,this._originalState,i,this._easing],c(this,"tweenCreated"),this},f.prototype.get=function(){return a({},this._currentState)},f.prototype.set=function(e){this._currentState=e},f.prototype.pause=function(){return this._pausedAtTime=_(),this._isPaused=!0,this},f.prototype.resume=function(){return this._isPaused&&(this._timestamp+=_()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0,this._timeoutHandler(),this},f.prototype.seek=function(e){e=Math.max(e,0);var t=_();return this._timestamp+e===0?this:(this._timestamp=t-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,d(this,this._timestamp,this._delay,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction,t),this.pause()),this)},f.prototype.stop=function(e){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=r,(t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.oCancelAnimationFrame||t.msCancelAnimationFrame||t.mozCancelRequestAnimationFrame||t.clearTimeout)(this._scheduleId),e&&(c(this,"beforeTween"),l(1,this._currentState,this._originalState,this._targetState,1,0,this._easing),c(this,"afterTween"),c(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},f.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},f.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},f.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},f.prototype.filter={},f.prototype.formula={linear:function(e){return e}},h=f.prototype.formula,a(f,{now:_,each:o,tweenProps:l,tweenProp:u,applyFilter:c,shallowCopy:a,defaults:s,composeEasingObject:p}),"function"==typeof SHIFTY_DEBUG_NOW&&(t.timeoutHandler=d),"object"==typeof i?n.exports=f:"function"==typeof e&&e.amd?e(function(){return f}):"undefined"==typeof t.Tweenable&&(t.Tweenable=f),f}();!function(){r.shallowCopy(r.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return-Math.cos(e*(Math.PI/2))+1},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:-Math.pow(2,-10*e)+1},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(-Math.pow(2,-10*--e)+2)},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},elastic:function(e){
return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?.5*(e*e*(((t*=1.525)+1)*e-t)):.5*((e-=2)*e*(((t*=1.525)+1)*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?2-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})}(),function(){function e(e,t,n,i,r,o){function a(e){return((f*e+h)*e+m)*e}function s(e){return((v*e+g)*e+b)*e}function l(e){return(3*f*e+2*h)*e+m}function u(e){return 1/(200*e)}function c(e,t){return s(p(e,t))}function d(e){return e>=0?e:0-e}function p(e,t){var n,i,r,o,s,u;for(r=e,u=0;8>u;u++){if(o=a(r)-e,d(o)<t)return r;if(s=l(r),d(s)<1e-6)break;r-=o/s}if(n=0,i=1,r=e,n>r)return n;if(r>i)return i;for(;i>n;){if(o=a(r),d(o-e)<t)return r;e>o?n=r:i=r,r=.5*(i-n)+n}return r}var f=0,h=0,m=0,v=0,g=0,b=0;return m=3*t,h=3*(i-t)-m,f=1-m-h,b=3*n,g=3*(r-n)-b,v=1-b-g,c(e,u(o))}function t(t,n,i,r){return function(o){return e(o,t,n,i,r,1)}}r.setBezierFunction=function(e,n,i,o,a){var s=t(n,i,o,a);return s.displayName=e,s.x1=n,s.y1=i,s.x2=o,s.y2=a,r.prototype.formula[e]=s},r.unsetBezierFunction=function(e){delete r.prototype.formula[e]}}(),function(){function e(e,t,n,i,o,a){return r.tweenProps(i,t,e,n,1,a,o)}var t=new r;t._filterArgs=[],r.interpolate=function(n,i,o,a,s){var l=r.shallowCopy({},n),u=s||0,c=r.composeEasingObject(n,a||"linear");t.set({});var d=t._filterArgs;d.length=0,d[0]=l,d[1]=n,d[2]=i,d[3]=c,r.applyFilter(t,"tweenCreated"),r.applyFilter(t,"beforeTween");var p=e(n,l,i,o,c,u);return r.applyFilter(t,"afterTween"),p}}(),function(e){function t(e,t){var n,i=[],r=e.length;for(n=0;r>n;n++)i.push("_"+t+"_"+n);return i}function n(e){var t=e.match(w);return t?(1===t.length||e[0].match(_))&&t.unshift(""):t=["",""],t.join(x)}function i(t){e.each(t,function(e){var n=t[e];"string"==typeof n&&n.match(T)&&(t[e]=r(n))})}function r(e){return l(T,e,o)}function o(e){var t=a(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function a(e){return e=e.replace(/#/,""),3===e.length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),S[0]=s(e.substr(0,2)),S[1]=s(e.substr(2,2)),S[2]=s(e.substr(4,2)),S}function s(e){return parseInt(e,16)}function l(e,t,n){var i=t.match(e),r=t.replace(e,x);if(i)for(var o,a=i.length,s=0;a>s;s++)o=i.shift(),r=r.replace(x,n(o));return r}function u(e){return l(E,e,c)}function c(e){for(var t=e.match(C),n=t.length,i=e.match(k)[0],r=0;n>r;r++)i+=parseInt(t[r],10)+",";return i=i.slice(0,-1)+")"}function d(i){var r={};return e.each(i,function(e){var o=i[e];if("string"==typeof o){var a=g(o);r[e]={formatString:n(o),chunkNames:t(a,e)}}}),r}function p(t,n){e.each(n,function(e){for(var i=t[e],r=g(i),o=r.length,a=0;o>a;a++)t[n[e].chunkNames[a]]=+r[a];delete t[e]})}function f(t,n){e.each(n,function(e){var i=t[e],r=h(t,n[e].chunkNames),o=m(r,n[e].chunkNames);i=v(n[e].formatString,o),t[e]=u(i)})}function h(e,t){for(var n,i={},r=t.length,o=0;r>o;o++)n=t[o],i[n]=e[n],delete e[n];return i}function m(e,t){P.length=0;for(var n=t.length,i=0;n>i;i++)P.push(e[t[i]]);return P}function v(e,t){for(var n=e,i=t.length,r=0;i>r;r++)n=n.replace(x,+t[r].toFixed(4));return n}function g(e){return e.match(C)}function b(t,n){e.each(n,function(e){var i,r=n[e],o=r.chunkNames,a=o.length,s=t[e];if("string"==typeof s){var l=s.split(" "),u=l[l.length-1];for(i=0;a>i;i++)t[o[i]]=l[i]||u}else for(i=0;a>i;i++)t[o[i]]=s;delete t[e]})}function y(t,n){e.each(n,function(e){var i=n[e],r=i.chunkNames,o=r.length,a=t[r[0]],s=typeof a;if("string"===s){for(var l="",u=0;o>u;u++)l+=" "+t[r[u]],delete t[r[u]];t[e]=l.substr(1)}else t[e]=a})}var _=/(\d|\-|\.)/,w=/([^\-0-9\.]+)/g,C=/[0-9.\-]+/g,E=new RegExp("rgb\\("+C.source+/,\s*/.source+C.source+/,\s*/.source+C.source+"\\)","g"),k=/^.*\(/,T=/#([0-9]|[a-f]){3,6}/gi,x="VAL",S=[],P=[];e.prototype.filter.token={tweenCreated:function(e,t,n,r){i(e),i(t),i(n),this._tokenData=d(e)},beforeTween:function(e,t,n,i){b(i,this._tokenData),p(e,this._tokenData),p(t,this._tokenData),p(n,this._tokenData)},afterTween:function(e,t,n,i){f(e,this._tokenData),f(t,this._tokenData),f(n,this._tokenData),y(i,this._tokenData)}}}(r)}).call(null)},{}],2:[function(e,t,n){var i=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 50,50 m 0,-{radius} a {radius},{radius} 0 1 1 0,{2radius} a {radius},{radius} 0 1 1 0,-{2radius}",this.containerAspectRatio=1,i.apply(this,arguments)};o.prototype=new i,o.prototype.constructor=o,o.prototype._pathString=function(e){var t=e.strokeWidth;e.trailWidth&&e.trailWidth>e.strokeWidth&&(t=e.trailWidth);var n=50-t/2;return r.render(this._pathTemplate,{radius:n,"2radius":2*n})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":8}],3:[function(e,t,n){var i=e("./shape"),r=e("./utils"),o=function(e,t){this._pathTemplate="M 0,{center} L 100,{center}",i.apply(this,arguments)};o.prototype=new i,o.prototype.constructor=o,o.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 "+t.strokeWidth),e.setAttribute("preserveAspectRatio","none")},o.prototype._pathString=function(e){return r.render(this._pathTemplate,{center:e.strokeWidth/2})},o.prototype._trailString=function(e){return this._pathString(e)},t.exports=o},{"./shape":7,"./utils":8}],4:[function(e,t,n){t.exports={Line:e("./line"),Circle:e("./circle"),SemiCircle:e("./semicircle"),Path:e("./path"),Shape:e("./shape"),utils:e("./utils")}},{"./circle":2,"./line":3,"./path":5,"./semicircle":6,"./shape":7,"./utils":8}],5:[function(e,t,n){var i=e("shifty"),r=e("./utils"),o={easeIn:"easeInCubic",easeOut:"easeOutCubic",easeInOut:"easeInOutCubic"},a=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");n=r.extend({duration:800,easing:"linear",from:{},to:{},step:function(){}},n);var i;i=r.isString(t)?document.querySelector(t):t,this.path=i,this._opts=n,this._tweenable=null;var o=this.path.getTotalLength();this.path.style.strokeDasharray=o+" "+o,this.set(0)};a.prototype.value=function(){var e=this._getComputedDashOffset(),t=this.path.getTotalLength(),n=1-e/t;return parseFloat(n.toFixed(6),10)},a.prototype.set=function(e){this.stop(),this.path.style.strokeDashoffset=this._progressToOffset(e);var t=this._opts.step;if(r.isFunction(t)){var n=this._easing(this._opts.easing),i=this._calculateTo(e,n),o=this._opts.shape||this;t(i,o,this._opts.attachment)}},a.prototype.stop=function(){this._stopTween(),this.path.style.strokeDashoffset=this._getComputedDashOffset()},a.prototype.animate=function(e,t,n){t=t||{},r.isFunction(t)&&(n=t,t={});var o=r.extend({},t),a=r.extend({},this._opts);t=r.extend(a,t);var s=this._easing(t.easing),l=this._resolveFromAndTo(e,s,o);this.stop(),this.path.getBoundingClientRect();var u=this._getComputedDashOffset(),c=this._progressToOffset(e),d=this;this._tweenable=new i,this._tweenable.tween({from:r.extend({offset:u},l.from),to:r.extend({offset:c},l.to),duration:t.duration,easing:s,step:function(e){d.path.style.strokeDashoffset=e.offset;var n=t.shape||d;t.step(e,n,t.attachment)},finish:function(e){r.isFunction(n)&&n()}})},a.prototype._getComputedDashOffset=function(){var e=window.getComputedStyle(this.path,null);return parseFloat(e.getPropertyValue("stroke-dashoffset"),10)},a.prototype._progressToOffset=function(e){var t=this.path.getTotalLength();return t-e*t},a.prototype._resolveFromAndTo=function(e,t,n){return n.from&&n.to?{from:n.from,to:n.to}:{from:this._calculateFrom(t),to:this._calculateTo(e,t)}},a.prototype._calculateFrom=function(e){return i.interpolate(this._opts.from,this._opts.to,this.value(),e)},a.prototype._calculateTo=function(e,t){return i.interpolate(this._opts.from,this._opts.to,e,t)},a.prototype._stopTween=function(){null!==this._tweenable&&(this._tweenable.stop(),this._tweenable=null)},a.prototype._easing=function(e){return o.hasOwnProperty(e)?o[e]:e},t.exports=a},{"./utils":8,shifty:1}],6:[function(e,t,n){var i=e("./shape"),r=e("./circle"),o=e("./utils"),a=function(e,t){this._pathTemplate="M 50,50 m -{radius},0 a {radius},{radius} 0 1 1 {2radius},0",this.containerAspectRatio=2,i.apply(this,arguments)};a.prototype=new i,a.prototype.constructor=a,a.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 50")},a.prototype._initializeTextContainer=function(e,t,n){e.text.style&&(n.style.top="auto",n.style.bottom="0",e.text.alignToBottom?o.setStyle(n,"transform","translate(-50%, 0)"):o.setStyle(n,"transform","translate(-50%, 50%)"))},a.prototype._pathString=r.prototype._pathString,a.prototype._trailString=r.prototype._trailString,t.exports=a},{"./circle":2,"./shape":7,"./utils":8}],7:[function(e,t,n){var i=e("./path"),r=e("./utils"),o="Object is destroyed",a=function e(t,n){if(!(this instanceof e))throw new Error("Constructor was called without new keyword");if(0!==arguments.length){this._opts=r.extend({color:"#555",strokeWidth:1,trailColor:null,trailWidth:null,fill:null,text:{style:{color:null,position:"absolute",left:"50%",top:"50%",padding:0,margin:0,transform:{prefix:!0,value:"translate(-50%, -50%)"}},autoStyleContainer:!0,alignToBottom:!0,value:null,className:"progressbar-text"},svgStyle:{display:"block",width:"100%"},warnings:!1},n,!0),r.isObject(n)&&void 0!==n.svgStyle&&(this._opts.svgStyle=n.svgStyle),r.isObject(n)&&r.isObject(n.text)&&void 0!==n.text.style&&(this._opts.text.style=n.text.style);var o,a=this._createSvgView(this._opts);if(o=r.isString(t)?document.querySelector(t):t,!o)throw new Error("Container does not exist: "+t);this._container=o,this._container.appendChild(a.svg),this._opts.warnings&&this._warnContainerAspectRatio(this._container),this._opts.svgStyle&&r.setStyles(a.svg,this._opts.svgStyle),this.svg=a.svg,this.path=a.path,this.trail=a.trail,this.text=null;var s=r.extend({attachment:void 0,shape:this},this._opts);this._progressPath=new i(a.path,s),r.isObject(this._opts.text)&&null!==this._opts.text.value&&this.setText(this._opts.text.value)}};a.prototype.animate=function(e,t,n){if(null===this._progressPath)throw new Error(o);this._progressPath.animate(e,t,n)},a.prototype.stop=function(){if(null===this._progressPath)throw new Error(o);void 0!==this._progressPath&&this._progressPath.stop()},a.prototype.destroy=function(){if(null===this._progressPath)throw new Error(o);this.stop(),this.svg.parentNode.removeChild(this.svg),this.svg=null,this.path=null,this.trail=null,this._progressPath=null,null!==this.text&&(this.text.parentNode.removeChild(this.text),this.text=null)},a.prototype.set=function(e){if(null===this._progressPath)throw new Error(o);this._progressPath.set(e)},a.prototype.value=function(){if(null===this._progressPath)throw new Error(o);return void 0===this._progressPath?0:this._progressPath.value()},a.prototype.setText=function(e){if(null===this._progressPath)throw new Error(o);null===this.text&&(this.text=this._createTextContainer(this._opts,this._container),this._container.appendChild(this.text)),r.isObject(e)?(r.removeChildren(this.text),this.text.appendChild(e)):this.text.innerHTML=e},a.prototype._createSvgView=function(e){var t=document.createElementNS("http://www.w3.org/2000/svg","svg");this._initializeSvg(t,e);var n=null;(e.trailColor||e.trailWidth)&&(n=this._createTrail(e),t.appendChild(n));var i=this._createPath(e);return t.appendChild(i),{svg:t,path:i,trail:n}},a.prototype._initializeSvg=function(e,t){e.setAttribute("viewBox","0 0 100 100")},a.prototype._createPath=function(e){var t=this._pathString(e);return this._createPathElement(t,e)},a.prototype._createTrail=function(e){var t=this._trailString(e),n=r.extend({},e);return n.trailColor||(n.trailColor="#eee"),n.trailWidth||(n.trailWidth=n.strokeWidth),n.color=n.trailColor,n.strokeWidth=n.trailWidth,n.fill=null,this._createPathElement(t,n)},a.prototype._createPathElement=function(e,t){var n=document.createElementNS("http://www.w3.org/2000/svg","path");return n.setAttribute("d",e),n.setAttribute("stroke",t.color),n.setAttribute("stroke-width",t.strokeWidth),t.fill?n.setAttribute("fill",t.fill):n.setAttribute("fill-opacity","0"),n},a.prototype._createTextContainer=function(e,t){var n=document.createElement("div");n.className=e.text.className;var i=e.text.style;return i&&(e.text.autoStyleContainer&&(t.style.position="relative"),r.setStyles(n,i),i.color||(n.style.color=e.color)),this._initializeTextContainer(e,t,n),n},a.prototype._initializeTextContainer=function(e,t,n){},a.prototype._pathString=function(e){throw new Error("Override this function for each progress bar")},a.prototype._trailString=function(e){throw new Error("Override this function for each progress bar")},a.prototype._warnContainerAspectRatio=function(e){if(this.containerAspectRatio){var t=window.getComputedStyle(e,null),n=parseFloat(t.getPropertyValue("width"),10),i=parseFloat(t.getPropertyValue("height"),10);r.floatEquals(this.containerAspectRatio,n/i)||(console.warn("Incorrect aspect ratio of container","#"+e.id,"detected:",t.getPropertyValue("width")+"(width)","/",t.getPropertyValue("height")+"(height)","=",n/i),console.warn("Aspect ratio of should be",this.containerAspectRatio))}},t.exports=a},{"./path":5,"./utils":8}],8:[function(e,t,n){function i(e,t,n){e=e||{},t=t||{},n=n||!1;for(var r in t)if(t.hasOwnProperty(r)){var o=e[r],a=t[r];n&&d(o)&&d(a)?e[r]=i(o,a,n):e[r]=a}return e}function r(e,t){var n=e;for(var i in t)if(t.hasOwnProperty(i)){var r=t[i],o="\\{"+i+"\\}",a=new RegExp(o,"g");n=n.replace(a,r)}return n}function o(e,t,n){for(var i=e.style,r=0;r<m.length;++r){var o=m[r];i[o+s(t)]=n}i[t]=n}function a(e,t){p(t,function(t,n){null!==t&&void 0!==t&&(d(t)&&t.prefix===!0?o(e,n,t.value):e.style[n]=t)})}function s(e){return e.charAt(0).toUpperCase()+e.slice(1)}function l(e){return"string"==typeof e||e instanceof String}function u(e){return"function"==typeof e}function c(e){return"[object Array]"===Object.prototype.toString.call(e)}function d(e){if(c(e))return!1;var t=typeof e;return"object"===t&&!!e}function p(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=e[n];t(i,n)}}function f(e,t){return Math.abs(e-t)<v}function h(e){for(;e.firstChild;)e.removeChild(e.firstChild)}var m="Webkit Moz O ms".split(" "),v=.001;t.exports={extend:i,render:r,setStyle:o,setStyles:a,capitalize:s,isString:l,isFunction:u,isObject:d,forEachObject:p,floatEquals:f,removeChildren:h}},{}]},{},[4])(4)}),define("lib-build/less!storymaps-react/tpl/builder/notification/Undo",[],function(){}),define("storymaps-react/tpl/builder/notification/Undo",["module","exports","./Notification","lib-build/hbars!./Undo","lib/progressbar.js/dist/progressbar.min","lib-build/less!./Undo"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=2e4,h=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};a(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._clearFollowingsAfterUndo=e.clearFollowingsAfterUndo,n}return l(t,e),p(t,[{key:"render",value:function(){return(0,c.default)({id:this._id,label:this._label,labelUndo:i18n.builder.notification.undo,labelClose:i18n.builder.notification.close})}},{key:"postCreate",value:function(){void 0!==this._positionTop&&this._node.css("top",this._positionTop),this._initEvents()}},{key:"_initEvents",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.delay||f,n=new d.default.Line(this._node.find(".progress")[0],{strokeWidth:4,duration:t,color:"#005e95",trailColor:"#eee",trailWidth:1,svgStyle:{width:"100%",height:"100%"}});n.set(-1),n.animate(0,{},function(){setTimeout(function(){this._node.fadeOut({complete:function(){this._node.remove()}.bind(this)}),this._resultDeferred.reject()}.bind(this),200)}.bind(this)),this._node.find(".btn-undo").click(function(){this._clearFollowingsAfterUndo&&this._node.nextAll().remove(),this._node.remove(),this._resultDeferred.resolve()}.bind(this))}}]),t}(u.default);t.default=h,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/ImmersiveBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/ImmersiveBuilder",["module","exports","./Immersive","./ImmersiveBuilderPanel","./ImmersiveTitleConfig","storymaps/tpl/view/section/Common","storymaps-react/tpl/builder/notification/Undo","../builder/AddMenu","dojo/topic","dojo/_base/lang","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./ImmersiveBuilder"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var m=d(n),v=d(i),g=d(r),b=d(o),y=d(a),_=d(s),w=d(l),C=d(u),E=d(c),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},x=function(e){function t(e,n){p(this,t);var i=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.MEDIA_BUILDER_TABS_BACKGROUND=["appearance","background","manage"],i.MEDIA_BUILDER_TABS_PANEL=["appearance","manage"],i._latestOnScrollParams=null,i._currentScrollPosition=null,i._builderPanel=null,i._builderPanelNode=null,i._initialMedia=n,i._titleConfig=null,i.scanResults={hasErrors:!1,hasWarnings:!1},i._addMenu=new _.default({buttons:["sequence","title","immersive"]}),i}return h(t,e),k(t,[{key:"render",value:function(){var e=this._section.views,n="fade-fast";if(!e||!e.length){var i=this._initialMedia||{type:"empty",empty:"empty"};this._section.views=[{transition:n,background:b.default.initMedia(i).serialize(),foreground:{panels:[app.ui.ImmersivePanelFactory.createInstance(null,n).serialize()],title:{style:{shadow:!1,text:"dark",background:"light"}}}}]}return this._section.views[0].foreground.title.style||(this._section.views[0].foreground.title.style={shadow:!0,text:"light",background:null}),this._titleConfig=new g.default({applyConfigCallback:this._onTitleConfigChange.bind(this),style:this._section.views[0].foreground&&this._section.views[0].foreground.title?this._section.views[0].foreground.title.style:null}),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this,{titleConfigPanel:this._titleConfig.render()})}},{key:"postCreate",value:function(e){var n=this;T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._builderPanelNode=this._node.find(".builder-panel"),this._builderPanel=new v.default({container:this._builderPanelNode,selectView:this._selectView.bind(this),addView:this._addEmptyView.bind(this),deleteView:this._deleteView.bind(this),duplicateView:this._duplicateView.bind(this),updateTransition:this._updateTransition.bind(this),organize:this._organizeByIds.bind(this)}),this._node.find(".background-title h2").attr("contenteditable",!0).attr("placeholder",E.default.builder.title.placeholder).on("blur keyup",function(){this.serialize(),this._onContentChange()}.bind(this)).on("paste",function(){setTimeout(function(){this._node.find(".background-title h2").html($("<div>"+this._node.find(".background-title h2").text()).text()),this.serialize(),this._onContentChange()}.bind(this),0)}.bind(this)).keydown(function(e){if(13===e.keyCode)return!1;if(e.ctrlKey||e.metaKey){var t=e.keyCode;if(66==t||98==t||73==t||105==t||85==t||117==t)return!1}}),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._titleConfig.postCreate({container:this._node.find(".background-title-wrapper .builder-config-panel-wrapper"),sectionOptions:this._section.views[0].foreground?this._section.views[0].foreground.title:null}),this._node.find(".background-title-wrapper .builder-config-panel-btn").on("click",function(e){n._titleConfig.toggleBuilderPanel($(e.currentTarget))}),this._updateBuilderPanel()}},{key:"update",value:function(){var e=this._medias[this._currentViewIndex-1];e&&"webmap"==e.type&&e.resetSwipe(),T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"update",this).call(this),this._updateMapHomeButtons(),this._updateBuilderPanel(),this._onContentChange()}},{key:"_onTitleConfigChange",value:function(){this._onContentChange(),this.update()}},{key:"onScroll",value:function(e){this._latestOnScrollParams=e,this._currentScrollPosition=e.currentSectionScroll;var n=this._currentViewIndex;if(T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onScroll",this).call(this,e),n!=this._currentViewIndex&&(this._builderPanel.selectView(this._currentViewIndex-1),app.isInBuilder)){var i=this._medias[this._currentViewIndex-1];i&&(this._node.toggleClass("hide-foreground",i.isConfigActive()),this._node.find(".media-media").removeClass("appearance-invite"))}}},{key:"navigateToViewByIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};T(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"navigateToViewByIndex",this).call(this,e),this._builderPanel.selectView(e.index)}},{key:"getPreviewThumbnail",value:function(){return this._medias.length?this._medias[0].getPreviewThumbnail():""}},{key:"getPreviewText",value:function(){var e="";return this._node.find(".background-title h2").text()?this._node.find(".background-title h2").text():this._panels.length?this._panels[0].getPreviewText():e}},{key:"getPreviewIcon",value:function(){return"glyphicon glyphicon-random"}},{key:"onUpdatePanelLayout",value:function(e){this._node.removeClass("layout-scroll-full layout-scroll-partial").addClass("layout-"+e),this._node.find(".imm-panel").css({opacity:"scroll-full"==e?"inherit":0,transform:""});for(var t=0;t<this._panels.length;t++){var n=this._panels[t];n.layout=e,t==this._currentViewIndex-1&&n.updatePosition({currentSectionScroll:this._currentScrollPosition})}}},{key:"focus",value:function(){setTimeout(function(){this._panels[0]&&this._panels[0].focus()}.bind(this),50)}},{key:"serialize",value:function(){for(var e=[],t=0;t<this._medias.length;t++){var n=this._medias[t],i=this._panels[t],r=this._transitions[t];e.push({transition:r,background:n.serialize(),foreground:{panels:[i.serialize()]}}),0===t&&(e[0].foreground.title={value:$("<div>"+this._node.find(".background-title h2").text()+"</div>").text(),global:!0,style:this._titleConfig.getStyle()})}return this._section.views=e,C.default.clone(this._section)}},{key:"setBookmark",value:function(e){this._section.bookmark={enabled:"visible"==e.status,title:e.bookmark}}},{key:"_onContentChange",value:function(){this.serialize(),w.default.publish("builder-section-update")}},{key:"_updateBuilderPanel",value:function(){if(this._builderPanel){for(var e=[],t=0;t<this._medias.length;t++)e.push(this._getTransitionInfo(t));this._builderPanel.update({medias:this._medias,panels:this._panels,transitions:this._transitions,transitionsInfos:e})}}},{key:"_onToggleMediaConfig",value:function(){this._node.toggleClass("hide-foreground")}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.action&&e.media&&"swap"==e.action){var t="empty"==e.media.serialize().type;app.builder.mediaPicker.open({mode:t?"add":"edit",media:t?null:e.media.serialize()}).then(function(t){"empty"!=e.media.type&&this._onToggleMediaConfig(),this._onEditMedia(e.media,t)}.bind(this),function(){})}}},{key:"_onMediaConfigChange",value:function(){this.update()}},{key:"_onEditMedia",value:function(e,t){var n=this._medias.indexOf(e),i=b.default.initMedia(t,this._mediaCache),r=this.isMediaAlreadyLoaded(t);r||e.getNode().after(b.default.renderBackground({media:i,transition:this._transitions[n]})),i.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"}),r||i.load({isBuilderAdd:!0,isUniqueInSection:!0}),this._medias[n]=i;var o=this._medias.findIndex(function(t){return t.getNode().is(e.getNode())});o===-1&&e.destroy(),b.default.checkMedia(t),this.update(),i.getNode().addClass("active"),i.getNode().nextAll().removeClass("active")}},{key:"_selectView",value:function(e){e!=this._currentViewIndex-1&&this.navigateToViewByIndex({index:e,animate:!1})}},{key:"_addEmptyView",value:function(e){var t="fade-fast",n=b.default.initMedia({type:"empty",empty:"empty"});this._medias.splice(e+1,0,n),this._medias[e].getNode().after(b.default.renderBackground({media:n,transition:t})),n.postCreate({container:this._node,delayBuilderInit:!0,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"});var i=app.ui.ImmersivePanelFactory.duplicateWithoutContent(this._panels[e]?this._panels[e].serialize():null,t,{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)});this._panels.splice(e+1,0,i),this._node.find(".foreground .imm-panel").eq(e).after(i.render()),i.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),i.focus(),this._transitions.splice(e+1,0,t),this.update();var r=this._currentViewIndex;this._currentViewIndex=-1,this.navigateToViewByIndex({index:e+1,animate:!1}),e+1==r-1&&app.ui.update({forceUpdate:!0})}},{key:"_addView",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.index,n=e.media,i=e.panel,r=e.transition;if(void 0!==t&&n&&i&&r){n=b.default.initMedia(n,this._mediaCache);var o=this.isMediaAlreadyLoaded(n.serialize());o||(0===t?this._medias[0].getNode().before(b.default.renderBackground({media:n,transition:r})):this._medias[t-1].getNode().after(b.default.renderBackground({media:n,transition:r}))),this._medias.splice(t,0,n),n.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"}),o||this.loadMediaItem(n),i=app.ui.ImmersivePanelFactory.createInstance(i,r,{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)}),this._panels.splice(t,0,i),0===t?this._node.find(".foreground .imm-panel").eq(0).before(i.render()):this._node.find(".foreground .imm-panel").eq(t-1).after(i.render()),i.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),i.load(),this._transitions.splice(t,0,r),b.default.checkMedia(e.media),this.update(),0===t&&this._medias[0].getNode().nextAll().removeClass("active"),this.navigateToViewByIndex({index:t,animate:!1})}}},{key:"_deleteView",value:function(e){if(1===this._medias.length)return void app.Controller.deleteActiveSection();var t={index:e,panel:this._panels[e].serialize(),media:this._medias[e].serialize(),transition:this._transitions[e]};if(this.isMediaUniqueInSection(this._medias[e].serialize())&&this._node.find(".background").eq(e).remove(),this._node.find(".imm-panel").eq(e).remove(),this._panels.splice(e,1),this._medias.splice(e,1),this._transitions.splice(e,1),w.default.publish("builder-should-check-story"),this.update(),e==this._currentViewIndex-1)e>0?this.navigateToViewByIndex({index:e-1,animate:!1}):this._medias.length&&this.navigateToViewByIndex({index:e,animate:!1});else if(e<this._currentViewIndex-1){var n=this._currentViewIndex;this.navigateToViewByIndex({index:n-2,animate:!1})}this._currentViewIndex=-1,app.ui.update({forceUpdate:!0});var i=new y.default({container:this._node,label:E.default.builder.controller.viewDelete,positionTop:70});i.display().then(function(){this._addView(t)}.bind(this),function(){})}},{key:"_duplicateView",value:function(e){var t=this._transitions[e],n=app.ui.MediaFactory.createInstance(this._medias[e].serialize(),this._mediaCache);this._medias.splice(e+1,0,n);var i=this.isMediaAlreadyLoaded(n.serialize());i||("image"==n.type&&(t="none"),this._medias[e].getNode().after(b.default.renderBackground({media:n,transition:t}))),n.postCreate({container:this._node,delayBuilderInit:!1,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,onConfigChange:app.isInBuilder?this._onMediaConfigChange.bind(this):null,builderConfigurationTabs:this.MEDIA_BUILDER_TABS_BACKGROUND,sectionType:"immersive"});var r=app.ui.ImmersivePanelFactory.duplicateWithoutContent(this._panels[e].serialize(),t,{onUpdateLayout:this.onUpdatePanelLayout.bind(this),onChange:this._onContentChange.bind(this)});this._panels.splice(e+1,0,r),this._node.find(".foreground .imm-panel").eq(e).after(r.render()),r.postCreate({container:this._node,mediaConfigurationTabs:this.MEDIA_BUILDER_TABS_PANEL}),r.focus(),this._transitions.splice(e+1,0,t),w.default.publish("builder-should-check-story"),this.update();var o=this._currentViewIndex;this._currentViewIndex=-1,this.navigateToViewByIndex({index:e+1,animate:!1}),e+1==o-1&&app.ui.update({forceUpdate:!0})}},{key:"_updateMapHomeButtons",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._medias[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;"webmap"===o.type&&(this.isMediaUniqueInSection(o.serialize())?o.showHomeButton():o.hideHomeButton())}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"_updateTransition",value:function(e,t){if(this._transitions[e]&&t){var n="view-transition-";this._node.find(".imm-panel").eq(e).removeClass(n+this._transitions[e]).addClass(n+t)}this._currentViewIndex-1==e&&this._applyViewTransition({media:this._medias[e],prevTransition:this._transitions[e],
newTransition:t}),this._transitions[e]=t,this.update(),this.onScroll(this._latestOnScrollParams)}},{key:"_applyViewTransition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.media){var t=e.media.getNode();e.prevTransition&&e.newTransition?(t.css("clip","").removeClass("transition-"+e.prevTransition),"fade-slow"==e.newTransition||"fade-fast"==e.newTransition?(this._node.addClass("disable-transition"),t.removeClass("active").addClass("transition-"+e.newTransition),setTimeout(function(){this._node.removeClass("disable-transition"),t.addClass("active")}.bind(this),10)):t.addClass("transition-"+e.newTransition)):console.error("TODO")}}},{key:"_organizeByIds",value:function(e){var t=this._getViewsIndexesByIds(e);this._organizeByIndexes(t,!0)}},{key:"_organizeByIndexes",value:function(e,t){for(var n=!0,i=0;i<e.length-1;i++)if(e[i]>e[i+1]){n=!1;break}if(!n){for(var r=[],o=[],a=[],s=-1,l=[],u=[],c=[],d=this._currentViewIndex,p=0;p<this._medias.length;p++)l[p]=this._medias[p],u[p]=this._panels[p],c[p]=this._transitions[p];for(var f=0;f<e.length;f++){var h=e[f];r.push(this._medias[h]),o.push(this._panels[h]),a.push(this._transitions[h]),h==this._currentViewIndex-1&&(s=f)}this._medias=r,this._panels=o,this._transitions=a;for(var m=this._panels.length-1;m>=0;m--){var v=this._panels[m];this._node.find(".foreground").prepend(v._node)}if(this.update(),s!=-1&&setTimeout(function(){this.navigateToViewByIndex({index:s,animate:!1})}.bind(this),50),t){var g=new y.default({container:this._node,label:E.default.builder.controller.immersiveOrganize,positionTop:70});g.display().then(function(){this._medias=l,this._panels=u,this._transitions=c;for(var e=this._panels.length-1;e>=0;e--){var t=this._panels[e];this._node.find(".foreground").prepend(t._node)}this.update(),d!=this._currentViewIndex&&setTimeout(function(){this.navigateToViewByIndex({index:d-1,animate:!1})}.bind(this),50)}.bind(this),function(){})}}}},{key:"_getViewsIndexesByIds",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)for(var s=o.value,l=0;l<this._panels.length;l++){var u=this._panels[l];u.id==s&&t.push(l)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}}]),t}(m.default);t.default=x,e.exports=t.default}),define("lib-build/less!storymaps-react/tpl/view/section/CreditsBuilder",[],function(){}),define("storymaps-react/tpl/view/section/CreditsBuilder",["module","exports","./Credits","./builder/AddMenu","lib-build/i18n!resources/tpl/builder/nls/app","storymaps-react/common/builder/textEditor/MediumEditorWrapper","dojo/_base/lang","dojo/topic","lib-build/less!./CreditsBuilder"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},_="#000",w=function(e){function t(e){u(this,t);var n=c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._addMenu=new f.default({buttons:["sequence","title","immersive"]}),n.scanResults={hasErrors:!1,hasWarnings:!1},n}return d(t,e),b(t,[{key:"render",value:function(){return this._section.background||(this._section={type:"credits",layout:"credits-1",background:{type:"color",color:{value:_}},foreground:{panels:[{type:"blocks",blocks:[{type:"text",text:{value:'<p class="block" style="text-align: center;"></p>'}}]},{type:"credits",credits:[]}]}}),y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"render",this).call(this)}},{key:"postCreate",value:function(e){y(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node});var n=this._node.find(".credits > .blocks"),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=$(l).index();this._panels[u].editor=new m.default({node:$(l),addMedia:function(){},style:"compact",addButtons:null,authorizedMedia:[],placeholder:h.default.builder.credits.introductionPlaceholder,onChange:this._onContentChange.bind(this)})}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}},{key:"_onContentChange",value:function(){g.default.publish("builder-section-update")}},{key:"focus",value:function(){setTimeout(function(){this._panels[0]&&this._panels[0].editor&&this._panels[0].editor.focus()}.bind(this),50)}},{key:"serialize",value:function(){for(var e=[],t=0;t<this._panels.length;t++){var n=this._panels[t];"credits"===n.type?e.push(n.credits.serialize()):"blocks"===n.type&&e.push(this.serializeBlocks(n))}return this._section.foreground.panels=e,v.default.clone(this._section)}},{key:"serializeBlocks",value:function(e){var t=[];if(e.editor){t=e.editor.serialize();for(var n=0;n<t.length;n++){var i=t[n];if("media"===i.type){var r=this.findBlock(e,i.id);r&&(t[n]=r.serialize())}}e.blocks=t}return{type:"blocks",blocks:t}}},{key:"findBlock",value:function(e,t){if(!t)return null;var n=!0,i=!1,r=void 0;try{for(var o,a=e.blocks[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;if(s._domID===t)return s}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}}]),t}(p.default);t.default=w,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/builder/CreditsPlaceholder",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="section section-layout-credits-placeholder">\r\n\r\n  ';return o=null!=(o=t.background||(null!=e?e.background:e))?o:s,r=typeof o===a?o.call(e,{name:"background",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n\r\n  <div class="foreground">\r\n    <button class="btn btn-primary btn-lg btn-add-credits">'+l((o=null!=(o=t.invite||(null!=e?e.invite:e))?o:s,typeof o===a?o.call(e,{name:"invite",hash:{},data:i}):o))+'</button>\r\n  </div>\r\n\r\n  <div class="builder-section-add-menu"></div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/builder/CreditsPlaceholder",[],function(){}),define("storymaps-react/tpl/view/section/builder/CreditsPlaceholder",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","./AddMenu","lib-build/hbars!./CreditsPlaceholder","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/less!./CreditsPlaceholder"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var u=s(n),c=s(i),d=s(r),p=s(o),f=s(a),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function(){function e(){l(this,e),this.type="credits-placeholder",this.id=c.default.getUID(),this._node=null,this.scanResults={hasErrors:!1,hasWarnings:!1},this._addMenu=new d.default({buttons:["sequence","title","immersive"]})}return h(e,[{key:"render",value:function(){return(0,p.default)({background:u.default.renderBackground({media:u.default.initMedia({type:"color",color:{value:"#777"}})}),invite:f.default.builder.credits.sectionInvite})}},{key:"postCreate",value:function(e){this._node=e,this._addMenu.postCreate({container:this._node.find(".builder-section-add-menu"),sectionContainer:this._node}),this._node.find(".btn-add-credits").click(this._onClickAddCredits.bind(this))}},{key:"resize",value:function(){}},{key:"onScroll",value:function(){}},{key:"serialize",value:function(){return null}},{key:"getArcGISContent",value:function(){return[]}},{key:"setVisibility",value:function(e){this._node.toggleClass("hidden",!e)}},{key:"_onClickAddCredits",value:function(){app.Controller.addSection({type:"credits",index:this._node.index()})}},{key:"getScanResults",value:function(){return this.scanResults}},{key:"setScanResults",value:function(e,t){Object.assign(this.scanResults,{hasErrors:e},{hasWarnings:t})}}]),e}();t.default=m,e.exports=t.default}),define("storymaps-react/tpl/view/section/FactoryBuilder",["module","exports","./FactoryViewer","./Cover/CoverBuilder","./SequenceBuilder","./TitleBuilder","./Immersive/ImmersiveBuilder","./CreditsBuilder","./builder/CreditsPlaceholder"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){return c(this,t),d(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return p(t,e),_(t,null,[{key:"getClasses",value:function(){return{Cover:h.default,Sequence:m.default,Title:v.default,Immersive:g.default,Credits:b.default,CreditsPlaceholder:y.default}}}]),t}(f.default);t.default=w,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/Panel",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="'+l((o=null!=(o=t.classes||(null!=e?e.classes:e))?o:s,typeof o===a?o.call(e,{name:"classes",hash:{},data:i}):o))+'" id="'+l((o=null!=(o=t.id||(null!=e?e.id:e))?o:s,typeof o===a?o.call(e,{name:"id",hash:{},data:i}):o))+'">\r\n  <div class="blocksWrapper">\r\n    <div class="blocks">\r\n      ';return o=null!=(o=t.blocks||(null!=e?e.blocks:e))?o:s,r=typeof o===a?o.call(e,{name:"blocks",hash:{},data:i}):o,null!=r&&(u+=r),u+'\r\n    </div>\r\n    <div class="builder-ui panel-cfg"></div>\r\n  </div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/Panel",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/Panel",["module","exports","storymaps/tpl/view/section/Common","storymaps/tpl/utils/UI","lib-build/hbars!./Panel","lib-build/less!./Panel"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=o(n),u=o(i),c=o(r),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=125,f=function(){function e(t,n){s(this,e),this.id=u.default.getUID(),this.layout=t.layout,this._viewTransition=n,this._settings=t.settings,this._blocksJSON=t.blocks,this._blocks=null,this._node=null}return d(e,[{key:"render",value:function(){var e=l.default.renderBlocks(this._blocksJSON,{});return this._blocks=e.blocks,(0,c.default)({id:this.id,classes:this.getClasses(),blocks:e.output})}},{key:"load",value:function(){var e=!0,t=!1,n=void 0;try{for(var i,r=this._blocks[Symbol.iterator]();!(e=(i=r.next()).done);e=!0){var o=i.value;o.load()}}catch(e){t=!0,n=e}finally{try{!e&&r.return&&r.return()}finally{if(t)throw n}}}},{key:"postCreate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.container){this._node=e.container.find("#"+this.id),this._node.parent().find(".imm-panel").attr("role","complementary");var t=!0,n=!1,i=void 0;try{for(var r,o=this._blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs})}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}app.isInBuilder||1!=this._blocks.length||"text"!=this._blocks[0].type||this._blocks[0].getPreviewText()||this._node.find(".blocksWrapper").hide()}}},{key:"getClasses",value:function(){var e=["imm-panel"];return this._settings&&(e.push("style-"+this._settings.style),e.push("theme-"+this._settings.theme),e.push("placement-"+this._settings["position-x"]),e.push("size-"+this._settings.size)),e.push("view-transition-"+this._viewTransition),e.join(" ")}},{key:"updatePosition",value:function(e){if(e.currentSectionScroll){var t=app.display.windowHeight,n=e.currentSectionScroll%t,i=n/t,r=null,o=1;if("scroll-partial"==this.layout){var a=app.display.windowHeight;app.isInBuilder&&(a-=p);var s=a/2,l=75;r=s+l-i*(t/4),o=i<=.5?2*i*1.5:1-2*(i-.5)/1.5,o>1?o=1:o<0&&(o=0),o>.9&&(o=1),this._node.parent().find(".imm-panel").css({transform:"inherit",opacity:0,visibility:"hidden"}),this._node.css({transform:"translateY("+parseInt(r)+"px)",opacity:o,visibility:"visible"})}}}},{key:"getArcGISContent",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._blocks[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var s=r.value;e.push.apply(e,a(s.getArcGISContent()))}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return e}}]),e}();t.default=f,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/section/Immersive/PanelBuilder",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="builder-config-panel">\r\n  <div class="panel-scrolling">\r\n\r\n\r\n    <div class="panel-config-row">\r\n\r\n      <div class="options-container panel-scrolling-placement" data-option="position-x">\r\n        <div class="column-label">'+a(o(null!=(r=null!=e?e.labels:e)?r.position:r,e))+'</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'left\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignLeft.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'center\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignCenter.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'right\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelAlignRight.png" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="options-container panel-scrolling-size" data-option="size">\r\n        <div class="column-label">'+a(o(null!=(r=null!=e?e.labels:e)?r.size:r,e))+'</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'small\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthNarrow.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'medium\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthMedium.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'large\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelWidthWide.png" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="panel-config-row">\r\n\r\n      <div class="options-container panel-scrolling-theme" data-option="theme">\r\n        <div class="column-label">'+a(o(null!=(r=null!=e?e.labels:e)?r.theme:r,e))+'</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'black-over-white\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelThemeLight.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'white-over-black\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelThemeDark.png" />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="options-container panel-scrolling-style" data-option="style">\r\n        <div class="column-label">'+a(o(null!=(r=null!=e?e.labels:e)?r.background:r,e))+'</div>\r\n        <div class="panel-column">\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'background\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundFill.png" />\r\n            </div>\r\n          </div>\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'text-shadow\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundShadow.png" />\r\n            </div>\r\n          </div>\r\n          <!--\r\n          <div class="panel-cfg-item">\r\n            <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'auto\'>\r\n              <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelBackgroundAuto.png" />\r\n            </div>\r\n          </div>\r\n          -->\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="row-scrolling column-label">'+a(o(null!=(r=null!=e?e.labels:e)?r.layout:r,e))+'</div>\r\n    <div class="options-container panel-scrolling-layout" data-option="layout">\r\n      <div class="panel-cfg-item">\r\n        <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'scroll-full\'>\r\n          <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelScrollFull.gif" />\r\n        </div>\r\n      </div>\r\n      <div class="panel-cfg-item">\r\n        <div class="panel-cfg-item-wrapper fa fa-check" data-value=\'scroll-partial\'>\r\n          <img class="panel-cfg-item-icon" src="resources/tpl/builder/icons/immersive/panelScrollPartial.gif" />\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="builder-config-panel-btn">\r\n  <i class="builder-invite-open fa fa-pencil" aria-hidden="true"></i>\r\n  <i class="builder-invite-close fa fa-check" aria-hidden="true"></i>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/section/Immersive/PanelBuilder",[],function(){}),define("storymaps-react/tpl/view/section/Immersive/PanelBuilder",["module","exports","./Panel","storymaps/tpl/view/section/Common","storymaps-react/common/builder/textEditor/MediumEditorWrapper","lib-build/hbars!./PanelBuilder","lib-build/i18n!resources/tpl/builder/nls/app","dojo/topic","dojo/_base/lang","lib-build/less!./PanelBuilder"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},C=function(e){function t(e,n,i){c(this,t);var r=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return r._callbacks=i,r._editor=null,r._configPanelIsInit=!1,r._configPanelIsOpen=!1,r._configPanelMedia=null,r._mediaConfigurationTabs=null,r}return p(t,e),_(t,[{key:"postCreate",value:function(e){this._mediaConfigurationTabs=e.mediaConfigurationTabs,w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"postCreate",this).call(this,e),this._editor=new m.default({node:this._node.find(".blocks"),addMedia:this.addMedia.bind(this),addButtons:["text","media"],style:"compact",authorizedMedia:["image","video","webpage"],onChange:this._onContentChange.bind(this)}),this.updateBuilderEditorPlacementRules(),this._node.find(".panel-cfg").html((0,v.default)({labels:g.default.builder.immersive.panelConfig})),this._node.find(".blocks").click(this.onPanelClick.bind(this)),this._node.find(".builder-config-panel-btn").click(this.toggleBuilderPanel.bind(this))}},{key:"updatePosition",value:function(e,n){if(w(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updatePosition",this).call(this,e,n),this._editor.hideToolbars(),this._configPanelIsOpen)if(e.isNewView)this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!1,this._configPanelMedia=null;else{var i=this._configPanelMedia.getNode(),r=i[0].getBoundingClientRect();i.find(".media-cfg-panel").css("top",r.bottom)}}},{key:"focus",value:function(){}},{key:"onPanelClick",value:function(){this._node.find(".panel-cfg").addClass("active"),"scroll-partial"==this.layout&&this._node.css("opacity",1)}},{key:"toggleBuilderPanel",value:function(){var e=this._node.find(".builder-config-panel-btn"),t=this._node.find(".builder-config-panel");if(!this._configPanelIsInit){this._node.find(".panel-cfg-item").click(this.onOptionChange.bind(this));var n=Object.assign({},this._settings,{layout:this.layout});this._node.find('.panel-cfg-item-wrapper[data-value="scroll-full"]').hover(function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollFullHover.gif")},function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollFull.gif")}),this._node.find('.panel-cfg-item-wrapper[data-value="scroll-partial"]').hover(function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollPartialHover.gif")},function(){$(this).find(".panel-cfg-item-icon").attr("src","resources/tpl/builder/icons/immersive/panelScrollPartial.gif")});for(var i in n){var r=n[i],o=this._node.find('.options-container[data-option="'+i+'"]');o.find('.panel-cfg-item-wrapper[data-value="'+r+'"]').addClass("active")}}this._editor.hideToolbars(),e.toggleClass("active"),t.toggleClass("active"),"scroll-partial"==this.layout&&(t.hasClass("active")?(this._node.data("opacity-tmp",this._node.css("opacity")),this._node.css("opacity",1)):(this._node.css("opacity",this._node.data("opacity-tmp")),this._node.data("opacity-tmp",""))),this._configPanelIsOpen&&this._configPanelMedia&&(this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!1,this._configPanelMedia=null)}},{key:"onOptionChange",value:function(e){var t=$(e.target),n=t.parents(".options-container"),i=n.data("option"),r=t.data("value");t.hasClass("panel-cfg-item-wrapper")&&("layout"==i&&this._callbacks.onUpdateLayout(r),n.find(".panel-cfg-item-wrapper").removeClass("active"),t.addClass("active"),this._settings[i]=r,this.updateSettings(),"scroll-partial"==this.layout&&this._node.css("opacity",1),b.default.publish("builder-section-update"))}},{key:"updateSettings",value:function(){this._node.removeClass().addClass(this.getClasses()),this.updateBuilderEditorPlacementRules()}},{key:"updateBuilderEditorPlacementRules",value:function(){var e=this._settings,t=e.size,n=e["position-x"],i={width:"",minWidth:"250px",maxWidth:"400px",left:"",marginLeft:"",marginRight:""};"small"==t?(i.width="calc((100vw - 250px) * .28)",i.maxWidth="300px"):"medium"==t?i.width="calc((100vw - 250px) * .38)":"large"==t&&(i.width="calc((100vw - 250px) * .48)",i.maxWidth="600px"),"left"==n?i.marginLeft="30px":"center"==n?(i.minWidth="",i.maxWidth="",i.width=""):"right"==n&&(i.marginRight="30px",i.left="inherit !important"),this._editor.setAddMenuPlacementRules(i)}},{key:"_onContentChange",value:function(){this.serialize(),this._callbacks.onChange()}},{key:"addMedia",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(e.media){var t=h.default.createBlock(e.media);return this._blocks.push(t),setTimeout(function(){t.postCreate({container:this._node,onToggleMediaConfig:this._onToggleMediaConfig.bind(this),onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs}),t.load(),h.default.checkMedia(e.media)}.bind(this),50),t.render({placement:"block"})}}},{key:"_onToggleMediaConfig",value:function(e){var t=e.getNode().find(".media-cfg-panel"),n=e.getNode()[0],i=n.getBoundingClientRect(),r=0;if(!e.getNode().hasClass("config-panel-active"))return t.css("top",""),this._configPanelIsOpen=!1,void(this._configPanelMedia=null);if(this._configPanelIsOpen&&this._configPanelMedia&&this._configPanelMedia.closeConfigPanel(),this._configPanelIsOpen=!0,this._configPanelMedia=e,t.css("top",i.bottom),i.bottom+175+125>app.display.windowHeight&&(r=app.display.windowHeight-i.bottom-175-125),r){var o=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:o-r+10},150)}}},{key:"_onEditMedia",value:function(e,t){var n=h.default.initMedia(t);e.getNode().before(n.render({placement:"block"})),e.getNode().remove(),n.postCreate({container:this._node,onToggleMediaConfig:app.isInBuilder?this._onToggleMediaConfig.bind(this):null,onConfigAction:app.isInBuilder?this._onMediaConfigAction.bind(this):null,builderConfigurationTabs:this._mediaConfigurationTabs}),n.load(),this._blocks.splice(this._blocks.indexOf(e),1,n),h.default.checkMedia(t)}},{key:"_onMediaConfigAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e.action&&e.media&&("remove"==e.action?(e.media.remove(),this._blocks.splice(this._blocks.indexOf(e.media),1)):"swap"==e.action&&app.builder.mediaPicker.open({mode:"edit",media:e.media.serialize(),authorizedMedia:["image","video","webpage"]}).then(function(t){this._onToggleMediaConfig(e.media),this._onEditMedia(e.media,t)}.bind(this),function(){}))}},{key:"getPreviewText",value:function(){var e="";if(this._blocksJSON&&this._blocksJSON.length){var t=!0,n=!1,i=void 0;try{for(var r,o=this._blocksJSON[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if("text"==a.type&&(e=$(a.text.value).text()))break}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}return e}},{key:"findBlock",value:function(e){if(!e)return null;for(var t=0;t<this._blocks.length;t++)if(this._blocks[t]._domID==e)return this._blocks[t]}},{key:"serialize",value:function(){var e=[];if(this._editor){e=this._editor.serialize();for(var t=0;t<e.length;t++){var n=e[t];if("media"==n.type){var i=this.findBlock(n.id);i&&(e[t]=i.serialize())}}this._blocksJSON=e}return y.default.clone({layout:this.layout,settings:this._settings,blocks:this._blocksJSON})}}]),t}(f.default);t.default=C,e.exports=t.default}),define("storymaps/tpl/view/section/Immersive/PanelFactoryBuilder",["storymaps-react/tpl/view/section/Immersive/PanelBuilder"],function(e){var t="scroll-full",n={"position-x":"left",size:"medium",style:"background",theme:"white-over-black"},i=[{type:"text",text:{value:'<p class="block"></p>'}}];return{createInstance:function(r,o,a){if(r)return new e(r,o,a);var s={layout:t,settings:n,blocks:i};return new e(s,o,a)},duplicateWithoutContent:function(r,o,a){var s={};return r?(s=JSON.parse(JSON.stringify(r)),s.blocks=i):s={layout:t,settings:n,blocks:i},new e(s,o,a)}}}),function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){(function(t){"use strict";if(t._babelPolyfill)throw new Error("only one instance of babel/polyfill is allowed");t._babelPolyfill=!0,e("core-js/shim"),e("regenerator/runtime")}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"core-js/shim":72,"regenerator/runtime":73}],2:[function(e,t,n){"use strict";var i=e("./$");t.exports=function(e){return function(t){var n,r=i.toObject(this),o=i.toLength(r.length),a=i.toIndex(arguments[1],o);if(e&&t!=t){for(;o>a;)if(n=r[a++],n!=n)return!0}else for(;o>a;a++)if((e||a in r)&&r[a]===t)return e||a;return!e&&-1}}},{"./$":16}],3:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.ctx");t.exports=function(e){var t=1==e,n=2==e,o=3==e,a=4==e,s=6==e,l=5==e||s;
return function(u){for(var c,d,p=Object(i.assertDefined(this)),f=i.ES5Object(p),h=r(u,arguments[1],3),m=i.toLength(f.length),v=0,g=t?Array(m):n?[]:void 0;m>v;v++)if((l||v in f)&&(c=f[v],d=h(c,v,p),e))if(t)g[v]=d;else if(d)switch(e){case 3:return!0;case 5:return c;case 6:return v;case 2:g.push(c)}else if(a)return!1;return s?-1:o||a?a:g}}},{"./$":16,"./$.ctx":10}],4:[function(e,t,n){function i(e,t,n){if(!e)throw TypeError(n?t+n:t)}var r=e("./$");i.def=r.assertDefined,i.fn=function(e){if(!r.isFunction(e))throw TypeError(e+" is not a function!");return e},i.obj=function(e){if(!r.isObject(e))throw TypeError(e+" is not an object!");return e},i.inst=function(e,t,n){if(!(e instanceof t))throw TypeError(n+": use the 'new' operator!");return e},t.exports=i},{"./$":16}],5:[function(e,t,n){var i=e("./$");t.exports=Object.assign||function(e,t){for(var n=Object(i.assertDefined(e)),r=arguments.length,o=1;r>o;)for(var a,s=i.ES5Object(arguments[o++]),l=i.getKeys(s),u=l.length,c=0;u>c;)n[a=l[c++]]=s[a];return n}},{"./$":16}],6:[function(e,t,n){function i(e){return a.call(e).slice(8,-1)}var r=e("./$"),o=e("./$.wks")("toStringTag"),a={}.toString;i.classof=function(e){var t,n;return void 0==e?void 0===e?"Undefined":"Null":"string"==typeof(n=(t=Object(e))[o])?n:i(t)},i.set=function(e,t,n){e&&!r.has(e=n?e:e.prototype,o)&&r.hide(e,o,t)},t.exports=i},{"./$":16,"./$.wks":27}],7:[function(e,t,n){"use strict";function i(e,t){if(!p(e))return("string"==typeof e?"S":"P")+e;if(m(e))return"F";if(!c(e,v)){if(!t)return"E";f(e,v,++C)}return"O"+e[v]}function r(e,t){var n,r=i(t);if("F"!=r)return e[g][r];for(n=e[y];n;n=n.n)if(n.k==t)return n}var o=e("./$"),a=e("./$.ctx"),s=e("./$.uid").safe,l=e("./$.assert"),u=e("./$.iter"),c=o.has,d=o.set,p=o.isObject,f=o.hide,h=u.step,m=Object.isFrozen||o.core.Object.isFrozen,v=s("id"),g=s("O1"),b=s("last"),y=s("first"),_=s("iter"),w=o.DESC?s("size"):"size",C=0;t.exports={getConstructor:function(e,t,n){function i(r){var a=l.inst(this,i,e);d(a,g,o.create(null)),d(a,w,0),d(a,b,void 0),d(a,y,void 0),void 0!=r&&u.forOf(r,t,a[n],a)}return o.mix(i.prototype,{clear:function(){for(var e=this,t=e[g],n=e[y];n;n=n.n)n.r=!0,n.p&&(n.p=n.p.n=void 0),delete t[n.i];e[y]=e[b]=void 0,e[w]=0},delete:function(e){var t=this,n=r(t,e);if(n){var i=n.n,o=n.p;delete t[g][n.i],n.r=!0,o&&(o.n=i),i&&(i.p=o),t[y]==n&&(t[y]=i),t[b]==n&&(t[b]=o),t[w]--}return!!n},forEach:function(e){for(var t,n=a(e,arguments[1],3);t=t?t.n:this[y];)for(n(t.v,t.k,this);t&&t.r;)t=t.p},has:function(e){return!!r(this,e)}}),o.DESC&&o.setDesc(i.prototype,"size",{get:function(){return l.def(this[w])}}),i},def:function(e,t,n){var o,a,s=r(e,t);return s?s.v=n:(e[b]=s={i:a=i(t,!0),k:t,v:n,p:o=e[b],n:void 0,r:!1},e[y]||(e[y]=s),o&&(o.n=s),e[w]++,"F"!=a&&(e[g][a]=s)),e},getEntry:r,getIterConstructor:function(){return function(e,t){d(this,_,{o:e,k:t})}},next:function(){for(var e=this[_],t=e.k,n=e.l;n&&n.r;)n=n.p;return e.o&&(e.l=n=n?n.n:e.o[y])?"key"==t?h(0,n.k):"value"==t?h(0,n.v):h(0,[n.k,n.v]):(e.o=void 0,h(1))}}},{"./$":16,"./$.assert":4,"./$.ctx":10,"./$.iter":15,"./$.uid":25}],8:[function(e,t,n){"use strict";function i(e,t){return b.call(e.array,function(e){return e[0]===t})}function r(e){return e[v]||d(e,v,{array:[],get:function(e){var t=i(this,e);if(t)return t[1]},has:function(e){return!!i(this,e)},set:function(e,t){var n=i(this,e);n?n[1]=t:this.array.push([e,t])},delete:function(e){var t=y.call(this.array,function(t){return t[0]===e});return~t&&this.array.splice(t,1),!!~t}})[v]}var o=e("./$"),a=e("./$.uid").safe,s=e("./$.assert"),l=e("./$.iter").forOf,u=o.has,c=o.isObject,d=o.hide,p=Object.isFrozen||o.core.Object.isFrozen,f=0,h=a("id"),m=a("weak"),v=a("leak"),g=e("./$.array-methods"),b=g(5),y=g(6);t.exports={getConstructor:function(e,t,n){function i(r){o.set(s.inst(this,i,e),h,f++),void 0!=r&&l(r,t,this[n],this)}return o.mix(i.prototype,{delete:function(e){return!!c(e)&&(p(e)?r(this).delete(e):u(e,m)&&u(e[m],this[h])&&delete e[m][this[h]])},has:function(e){return!!c(e)&&(p(e)?r(this).has(e):u(e,m)&&u(e[m],this[h]))}}),i},def:function(e,t,n){return p(s.obj(t))?r(e).set(t,n):(u(t,m)||d(t,m,{}),t[m][e[h]]=n),e},leakStore:r,WEAK:m,ID:h}},{"./$":16,"./$.array-methods":3,"./$.assert":4,"./$.iter":15,"./$.uid":25}],9:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def"),o=e("./$.iter"),a=e("./$.assert").inst;t.exports=function(t,n,s,l,u){function c(e,t){var n=h[e];i.FW&&(h[e]=function(e,i){var r=n.call(this,0===e?0:e,i);return t?this:r})}var d=i.g[t],p=d,f=l?"set":"add",h=p&&p.prototype,m={};if(i.isFunction(p)&&(u||!o.BUGGY&&h.forEach&&h.entries)){var v,g=new p,b=g[f](u?{}:-0,1);e("./$.iter-detect")(function(e){new p(e)})||(p=function(e){a(this,p,t);var n=new d;return void 0!=e&&o.forOf(e,l,n[f],n),n},p.prototype=h,i.FW&&(h.constructor=p)),u||g.forEach(function(e,t){v=1/t===-(1/0)}),v&&(c("delete"),c("has"),l&&c("get")),(v||b!==g)&&c(f,!0)}else p=s.getConstructor(t,l,f),i.mix(p.prototype,n);return e("./$.cof").set(p,t),e("./$.species")(p),m[t]=p,r(r.G+r.W+r.F*(p!=d),m),u||o.std(p,t,s.getIterConstructor(),s.next,l?"key+value":"value",!l,!0),p}},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.def":11,"./$.iter":15,"./$.iter-detect":14,"./$.species":22}],10:[function(e,t,n){var i=e("./$.assert").fn;t.exports=function(e,t,n){if(i(e),~n&&void 0===t)return e;switch(n){case 1:return function(n){return e.call(t,n)};case 2:return function(n,i){return e.call(t,n,i)};case 3:return function(n,i,r){return e.call(t,n,i,r)}}return function(){return e.apply(t,arguments)}}},{"./$.assert":4}],11:[function(e,t,n){function i(e,t){return function(){return e.apply(t,arguments)}}function r(e,t,n){var u,c,d,p,f=e&r.G,h=f?a:e&r.S?a[t]:(a[t]||{}).prototype,m=f?s:s[t]||(s[t]={});f&&(n=t);for(u in n)c=!(e&r.F)&&h&&u in h,d=(c?h:n)[u],p=e&r.B&&c?i(d,a):e&r.P&&l(d)?i(Function.call,d):d,h&&!c&&(f?h[u]=d:delete h[u]&&o.hide(h,u,d)),m[u]!=d&&o.hide(m,u,p)}var o=e("./$"),a=o.g,s=o.core,l=o.isFunction;a.core=s,r.F=1,r.G=2,r.S=4,r.P=8,r.B=16,r.W=32,t.exports=r},{"./$":16}],12:[function(e,t,n){t.exports=function(e){return e.FW=!0,e.path=e.g,e}},{}],13:[function(e,t,n){t.exports=function(e,t,n){var i=void 0===n;switch(t.length){case 0:return i?e():e.call(n);case 1:return i?e(t[0]):e.call(n,t[0]);case 2:return i?e(t[0],t[1]):e.call(n,t[0],t[1]);case 3:return i?e(t[0],t[1],t[2]):e.call(n,t[0],t[1],t[2]);case 4:return i?e(t[0],t[1],t[2],t[3]):e.call(n,t[0],t[1],t[2],t[3]);case 5:return i?e(t[0],t[1],t[2],t[3],t[4]):e.call(n,t[0],t[1],t[2],t[3],t[4])}return e.apply(n,t)}},{}],14:[function(e,t,n){var i=e("./$.wks")("iterator"),r=!1;try{var o=[7][i]();o.return=function(){r=!0},Array.from(o,function(){throw 2})}catch(e){}t.exports=function(e){if(!r)return!1;var t=!1;try{var n=[7],o=n[i]();o.next=function(){t=!0},n[i]=function(){return o},e(n)}catch(e){}return t}},{"./$.wks":27}],15:[function(e,t,n){"use strict";function i(e,t){l.hide(e,f,t),h in[]&&l.hide(e,h,t)}function r(e,t,n,r){var o=e.prototype,a=o[f]||o[h]||r&&o[r]||n;if(l.FW&&i(o,a),a!==n){var s=l.getProto(a.call(new e));c.set(s,t+" Iterator",!0),l.FW&&l.has(o,h)&&i(s,l.that)}return m[t]=a,m[t+" Iterator"]=l.that,a}function o(e){var t=l.g.Symbol,n=e[t&&t.iterator||h],i=n||e[f]||m[c.classof(e)];return p(i.call(e))}function a(e){var t=e.return;void 0!==t&&p(t.call(e))}function s(e,t,n,i){try{return i?t(p(n)[0],n[1]):t(n)}catch(t){throw a(e),t}}var l=e("./$"),u=e("./$.ctx"),c=e("./$.cof"),d=e("./$.def"),p=e("./$.assert").obj,f=e("./$.wks")("iterator"),h="@@iterator",m={},v={},g="keys"in[]&&!("next"in[].keys());i(v,l.that);var b=t.exports={BUGGY:g,Iterators:m,prototype:v,step:function(e,t){return{value:t,done:!!e}},stepCall:s,close:a,is:function(e){var t=Object(e),n=l.g.Symbol,i=n&&n.iterator||h;return i in t||f in t||l.has(m,c.classof(t))},get:o,set:i,create:function(e,t,n,i){e.prototype=l.create(i||b.prototype,{next:l.desc(1,n)}),c.set(e,t+" Iterator")},define:r,std:function(e,t,n,i,o,a,s){function u(e){return function(){return new n(this,e)}}b.create(n,t,i);var c,p,f=u("key+value"),h=u("value"),m=e.prototype;if("value"==o?h=r(e,t,h,"values"):f=r(e,t,f,"entries"),o&&(c={entries:f,keys:a?h:u("key"),values:h},d(d.P+d.F*g,t,c),s))for(p in c)p in m||l.hide(m,p,c[p])},forOf:function(e,t,n,i){for(var r,l=o(e),c=u(n,i,t?2:1);!(r=l.next()).done;)if(s(l,c,r.value,t)===!1)return a(l)}}},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.ctx":10,"./$.def":11,"./$.wks":27}],16:[function(e,t,n){"use strict";function i(e){return isNaN(e=+e)?0:(e>0?m:h)(e)}function r(e,t){return{enumerable:!(1&e),configurable:!(2&e),writable:!(4&e),value:t}}function o(e,t,n){return e[t]=n,e}function a(e){return b?function(t,n,i){return _.setDesc(t,n,r(e,i))}:o}function s(e){return null!==e&&("object"==typeof e||"function"==typeof e)}function l(e){return"function"==typeof e}function u(e){if(void 0==e)throw TypeError("Can't call method on  "+e);return e}var c="undefined"!=typeof self?self:Function("return this")(),d={},p=Object.defineProperty,f={}.hasOwnProperty,h=Math.ceil,m=Math.floor,v=Math.max,g=Math.min,b=!!function(){try{return 2==p({},"a",{get:function(){return 2}}).a}catch(e){}}(),y=a(1),_=t.exports=e("./$.fw")({g:c,core:d,html:c.document&&document.documentElement,isObject:s,isFunction:l,it:function(e){return e},that:function(){return this},toInteger:i,toLength:function(e){return e>0?g(i(e),9007199254740991):0},toIndex:function(e,t){return e=i(e),e<0?v(e+t,0):g(e,t)},has:function(e,t){return f.call(e,t)},create:Object.create,getProto:Object.getPrototypeOf,DESC:b,desc:r,getDesc:Object.getOwnPropertyDescriptor,setDesc:p,getKeys:Object.keys,getNames:Object.getOwnPropertyNames,getSymbols:Object.getOwnPropertySymbols,assertDefined:u,ES5Object:Object,toObject:function(e){return _.ES5Object(u(e))},hide:y,def:a(0),set:c.Symbol?o:y,mix:function(e,t){for(var n in t)y(e,n,t[n]);return e},each:[].forEach});"undefined"!=typeof __e&&(__e=d),"undefined"!=typeof __g&&(__g=c)},{"./$.fw":12}],17:[function(e,t,n){var i=e("./$");t.exports=function(e,t){for(var n,r=i.toObject(e),o=i.getKeys(r),a=o.length,s=0;a>s;)if(r[n=o[s++]]===t)return n}},{"./$":16}],18:[function(e,t,n){var i=e("./$"),r=e("./$.assert").obj;t.exports=function(e){return r(e),i.getSymbols?i.getNames(e).concat(i.getSymbols(e)):i.getNames(e)}},{"./$":16,"./$.assert":4}],19:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.invoke"),o=e("./$.assert").fn;t.exports=function(){for(var e=o(this),t=arguments.length,n=Array(t),a=0,s=i.path._,l=!1;t>a;)(n[a]=arguments[a++])===s&&(l=!0);return function(){var i,o=this,a=arguments.length,u=0,c=0;if(!l&&!a)return r(e,n,o);if(i=n.slice(),l)for(;t>u;u++)i[u]===s&&(i[u]=arguments[c++]);for(;a>c;)i.push(arguments[c++]);return r(e,i,o)}}},{"./$":16,"./$.assert":4,"./$.invoke":13}],20:[function(e,t,n){"use strict";t.exports=function(e,t,n){var i=t===Object(t)?function(e){return t[e]}:t;return function(t){return String(n?t:this).replace(e,i)}}},{}],21:[function(e,t,n){function i(e,t){o.obj(e),o(null===t||r.isObject(t),t,": can't set as prototype!")}var r=e("./$"),o=e("./$.assert");t.exports={set:Object.setPrototypeOf||("__proto__"in{}?function(t,n){try{n=e("./$.ctx")(Function.call,r.getDesc(Object.prototype,"__proto__").set,2),n({},[])}catch(e){t=!0}return function(e,r){return i(e,r),t?e.__proto__=r:n(e,r),e}}():void 0),check:i}},{"./$":16,"./$.assert":4,"./$.ctx":10}],22:[function(e,t,n){var i=e("./$");t.exports=function(t){i.DESC&&i.FW&&i.setDesc(t,e("./$.wks")("species"),{configurable:!0,get:i.that})}},{"./$":16,"./$.wks":27}],23:[function(e,t,n){"use strict";var i=e("./$");t.exports=function(e){return function(t){var n,r,o=String(i.assertDefined(this)),a=i.toInteger(t),s=o.length;return a<0||a>=s?e?"":void 0:(n=o.charCodeAt(a),n<55296||n>56319||a+1===s||(r=o.charCodeAt(a+1))<56320||r>57343?e?o.charAt(a):n:e?o.slice(a,a+2):(n-55296<<10)+(r-56320)+65536)}}},{"./$":16}],24:[function(e,t,n){"use strict";function i(){var e=+this;if(l.has(E,e)){var t=E[e];delete E[e],t()}}function r(e){i.call(e.data)}var o,a,s,l=e("./$"),u=e("./$.ctx"),c=e("./$.cof"),d=e("./$.invoke"),p=l.g,f=l.isFunction,h=l.html,m=p.document,v=p.process,g=p.setImmediate,b=p.clearImmediate,y=p.postMessage,_=p.addEventListener,w=p.MessageChannel,C=0,E={},k="onreadystatechange";f(g)&&f(b)||(g=function(e){for(var t=[],n=1;arguments.length>n;)t.push(arguments[n++]);return E[++C]=function(){d(f(e)?e:Function(e),t)},o(C),C},b=function(e){delete E[e]},"process"==c(v)?o=function(e){v.nextTick(u(i,e,1))}:_&&f(y)&&!p.importScripts?(o=function(e){y(e,"*")},_("message",r,!1)):f(w)?(a=new w,s=a.port2,a.port1.onmessage=r,o=u(s.postMessage,s,1)):o=m&&k in m.createElement("script")?function(e){h.appendChild(m.createElement("script"))[k]=function(){h.removeChild(this),i.call(e)}}:function(e){setTimeout(u(i,e,1),0)}),t.exports={set:g,clear:b}},{"./$":16,"./$.cof":6,"./$.ctx":10,"./$.invoke":13}],25:[function(e,t,n){function i(e){return"Symbol("+e+")_"+(++r+Math.random()).toString(36)}var r=0;i.safe=e("./$").g.Symbol||i,t.exports=i},{"./$":16}],26:[function(e,t,n){var i=e("./$"),r=e("./$.wks")("unscopables");!i.FW||r in[]||i.hide(Array.prototype,r,{}),t.exports=function(e){i.FW&&([][r][e]=!0)}},{"./$":16,"./$.wks":27}],27:[function(e,t,n){var i=e("./$").g,r={};t.exports=function(t){return r[t]||(r[t]=i.Symbol&&i.Symbol[t]||e("./$.uid").safe("Symbol."+t))}},{"./$":16,"./$.uid":25}],28:[function(e,t,n){function i(e,t){return function(n){var i,r=S(n),o=0,a=[];for(i in r)i!=h&&E(r,i)&&a.push(i);for(;t>o;)E(r,i=e[o++])&&(~_.call(a,i)||a.push(i));return a}}function r(e){return!u.isObject(e)}function o(){}function a(e){return function(){return e.apply(u.ES5Object(this),arguments)}}function s(e){return function(t,n){m.fn(t);var i=S(this),r=P(i.length),o=e?r-1:0,a=e?-1:1;if(arguments.length<2)for(;;){if(o in i){n=i[o],o+=a;break}o+=a,m(e?o>=0:r>o,"Reduce of empty array with no initial value")}for(;e?o>=0:r>o;o+=a)o in i&&(n=t(n,i[o],o,this));return n}}function l(e){return e>9?e:"0"+e}var u=e("./$"),c=e("./$.cof"),d=e("./$.def"),p=e("./$.invoke"),f=e("./$.array-methods"),h=e("./$.uid").safe("__proto__"),m=e("./$.assert"),v=m.obj,g=Object.prototype,b=[],y=b.slice,_=b.indexOf,w=c.classof,C=Object.defineProperties,E=u.has,k=u.setDesc,T=u.getDesc,x=u.isFunction,S=u.toObject,P=u.toLength,O=!1;if(!u.DESC){try{O=8==k(document.createElement("div"),"x",{get:function(){return 8}}).x}catch(e){}u.setDesc=function(e,t,n){if(O)try{return k(e,t,n)}catch(e){}if("get"in n||"set"in n)throw TypeError("Accessors not supported!");return"value"in n&&(v(e)[t]=n.value),e},u.getDesc=function(e,t){if(O)try{return T(e,t)}catch(e){}if(E(e,t))return u.desc(!g.propertyIsEnumerable.call(e,t),e[t])},C=function(e,t){v(e);for(var n,i=u.getKeys(t),r=i.length,o=0;r>o;)u.setDesc(e,n=i[o++],t[n]);return e}}d(d.S+d.F*!u.DESC,"Object",{getOwnPropertyDescriptor:u.getDesc,defineProperty:u.setDesc,defineProperties:C});var I="constructor,hasOwnProperty,isPrototypeOf,propertyIsEnumerable,toLocaleString,toString,valueOf".split(","),M=I.concat("length","prototype"),A=I.length,N=function(){var e,t=document.createElement("iframe"),n=A,i=">";for(t.style.display="none",u.html.appendChild(t),t.src="javascript:",e=t.contentWindow.document,e.open(),e.write("<script>document.F=Object</script"+i),e.close(),N=e.F;n--;)delete N.prototype[I[n]];return N()};d(d.S,"Object",{getPrototypeOf:u.getProto=u.getProto||function(e){return e=Object(m.def(e)),E(e,h)?e[h]:x(e.constructor)&&e instanceof e.constructor?e.constructor.prototype:e instanceof Object?g:null},getOwnPropertyNames:u.getNames=u.getNames||i(M,M.length,!0),create:u.create=u.create||function(e,t){var n;return null!==e?(o.prototype=v(e),n=new o,o.prototype=null,n[h]=e):n=N(),void 0===t?n:C(n,t)},keys:u.getKeys=u.getKeys||i(I,A,!1),seal:u.it,freeze:u.it,preventExtensions:u.it,isSealed:r,isFrozen:r,isExtensible:u.isObject}),d(d.P,"Function",{bind:function(e){function t(){var r=i.concat(y.call(arguments));return p(n,r,this instanceof t?u.create(n.prototype):e)}var n=m.fn(this),i=y.call(arguments,1);return n.prototype&&(t.prototype=n.prototype),t}}),0 in Object("z")&&"z"=="z"[0]||(u.ES5Object=function(e){return"String"==c(e)?e.split(""):Object(e)}),d(d.P+d.F*(u.ES5Object!=Object),"Array",{slice:a(y),join:a(b.join)}),d(d.S,"Array",{isArray:function(e){return"Array"==c(e)}}),d(d.P,"Array",{forEach:u.each=u.each||f(0),map:f(1),filter:f(2),some:f(3),every:f(4),reduce:s(!1),reduceRight:s(!0),indexOf:_=_||e("./$.array-includes")(!1),lastIndexOf:function(e,t){var n=S(this),i=P(n.length),r=i-1;for(arguments.length>1&&(r=Math.min(r,u.toInteger(t))),r<0&&(r=P(i+r));r>=0;r--)if(r in n&&n[r]===e)return r;return-1}}),d(d.P,"String",{trim:e("./$.replacer")(/^\s*([\s\S]*\S)?\s*$/,"$1")}),d(d.S,"Date",{now:function(){return+new Date}}),d(d.P,"Date",{toISOString:function(){if(!isFinite(this))throw RangeError("Invalid time value");var e=this,t=e.getUTCFullYear(),n=e.getUTCMilliseconds(),i=t<0?"-":t>9999?"+":"";return i+("00000"+Math.abs(t)).slice(i?-6:-4)+"-"+l(e.getUTCMonth()+1)+"-"+l(e.getUTCDate())+"T"+l(e.getUTCHours())+":"+l(e.getUTCMinutes())+":"+l(e.getUTCSeconds())+"."+(n>99?n:"0"+l(n))+"Z"}}),"Object"==w(function(){return arguments}())&&(c.classof=function(e){var t=w(e);return"Object"==t&&x(e.callee)?"Arguments":t})},{"./$":16,"./$.array-includes":2,"./$.array-methods":3,"./$.assert":4,"./$.cof":6,"./$.def":11,"./$.invoke":13,"./$.replacer":20,"./$.uid":25}],29:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def"),o=i.toIndex;r(r.P,"Array",{copyWithin:function(e,t){var n=Object(i.assertDefined(this)),r=i.toLength(n.length),a=o(e,r),s=o(t,r),l=arguments[2],u=void 0===l?r:o(l,r),c=Math.min(u-s,r-a),d=1;for(s<a&&a<s+c&&(d=-1,s=s+c-1,a=a+c-1);c-- >0;)s in n?n[a]=n[s]:delete n[a],a+=d,s+=d;return n}}),e("./$.unscope")("copyWithin")},{"./$":16,"./$.def":11,"./$.unscope":26}],30:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def"),o=i.toIndex;r(r.P,"Array",{fill:function(e){for(var t=Object(i.assertDefined(this)),n=i.toLength(t.length),r=o(arguments[1],n),a=arguments[2],s=void 0===a?n:o(a,n);s>r;)t[r++]=e;return t}}),e("./$.unscope")("fill")},{"./$":16,"./$.def":11,"./$.unscope":26}],31:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{findIndex:e("./$.array-methods")(6)}),e("./$.unscope")("findIndex")},{"./$.array-methods":3,"./$.def":11,"./$.unscope":26}],32:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{find:e("./$.array-methods")(5)}),e("./$.unscope")("find")},{"./$.array-methods":3,"./$.def":11,"./$.unscope":26}],33:[function(e,t,n){var i=e("./$"),r=e("./$.ctx"),o=e("./$.def"),a=e("./$.iter"),s=a.stepCall;o(o.S+o.F*!e("./$.iter-detect")(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,o,l,u=Object(i.assertDefined(e)),c=arguments[1],d=void 0!==c,p=d?r(c,arguments[2],2):void 0,f=0;if(a.is(u))for(l=a.get(u),n=new("function"==typeof this?this:Array);!(o=l.next()).done;f++)n[f]=d?s(l,p,[o.value,f],!0):o.value;else for(n=new("function"==typeof this?this:Array)(t=i.toLength(u.length));t>f;f++)n[f]=d?p(u[f],f):u[f];return n.length=f,n}})},{"./$":16,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.iter-detect":14}],34:[function(e,t,n){var i=e("./$"),r=e("./$.unscope"),o=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step,l=a.Iterators;a.std(Array,"Array",function(e,t){i.set(this,o,{o:i.toObject(e),i:0,k:t})},function(){var e=this[o],t=e.o,n=e.k,i=e.i++;return!t||i>=t.length?(e.o=void 0,s(1)):"key"==n?s(0,i):"value"==n?s(0,t[i]):s(0,[i,t[i]])},"value"),l.Arguments=l.Array,r("keys"),r("values"),r("entries")},{"./$":16,"./$.iter":15,"./$.uid":25,"./$.unscope":26}],35:[function(e,t,n){var i=e("./$.def");i(i.S,"Array",{of:function(){for(var e=0,t=arguments.length,n=new("function"==typeof this?this:Array)(t);t>e;)n[e]=arguments[e++];return n.length=t,n}})},{"./$.def":11}],36:[function(e,t,n){e("./$.species")(Array)},{"./$.species":22}],37:[function(e,t,n){"use strict";var i=e("./$"),r="name",o=i.setDesc,a=Function.prototype;r in a||i.FW&&i.DESC&&o(a,r,{configurable:!0,get:function(){var e=String(this).match(/^\s*function ([^ (]*)/),t=e?e[1]:"";return i.has(this,r)||o(this,r,i.desc(5,t)),t},set:function(e){i.has(this,r)||o(this,r,i.desc(0,e))}})},{"./$":16}],38:[function(e,t,n){"use strict";var i=e("./$.collection-strong");e("./$.collection")("Map",{get:function(e){var t=i.getEntry(this,e);return t&&t.v},set:function(e,t){return i.def(this,0===e?0:e,t)}},i,!0)},{"./$.collection":9,"./$.collection-strong":7}],39:[function(e,t,n){function i(e){return e+1/g-1/g}function r(e){return 0==(e=+e)||e!=e?e:e<0?-1:1}function o(e){return isFinite(e=+e)&&0!=e?e<0?-o(-e):f(e+h(e*e+1)):e}function a(e){return 0==(e=+e)?e:e>-1e-6&&e<1e-6?e+e*e/2:p(e)-1}var s=1/0,l=e("./$.def"),u=Math.E,c=Math.pow,d=Math.abs,p=Math.exp,f=Math.log,h=Math.sqrt,m=Math.ceil,v=Math.floor,g=c(2,-52),b=c(2,-23),y=c(2,127)*(2-b),_=c(2,-126);l(l.S,"Math",{acosh:function(e){return(e=+e)<1?NaN:isFinite(e)?f(e/u+h(e+1)*h(e-1)/u)+1:e},asinh:o,atanh:function(e){return 0==(e=+e)?e:f((1+e)/(1-e))/2},cbrt:function(e){return r(e=+e)*c(d(e),1/3)},clz32:function(e){return(e>>>=0)?31-v(f(e+.5)*Math.LOG2E):32},cosh:function(e){return(p(e=+e)+p(-e))/2},expm1:a,fround:function(e){var t,n,o=d(e),a=r(e);return o<_?a*i(o/_/b)*_*b:(t=(1+b/g)*o,n=t-(t-o),n>y||n!=n?a*s:a*n)},hypot:function(e,t){for(var n,i=0,r=arguments.length,o=r,a=Array(r),l=-s;r--;){if(n=a[r]=+arguments[r],n==s||n==-s)return s;n>l&&(l=n)}for(l=n||1;o--;)i+=c(a[o]/l,2);return l*h(i)},imul:function(e,t){var n=65535,i=+e,r=+t,o=n&i,a=n&r;return 0|o*a+((n&i>>>16)*a+o*(n&r>>>16)<<16>>>0)},log1p:function(e){return(e=+e)>-1e-8&&e<1e-8?e-e*e/2:f(1+e)},log10:function(e){return f(e)/Math.LN10},log2:function(e){return f(e)/Math.LN2},sign:r,sinh:function(e){return d(e=+e)<1?(a(e)-a(-e))/2:(p(e-1)-p(-e-1))*(u/2)},tanh:function(e){var t=a(e=+e),n=a(-e);return t==s?1:n==s?-1:(t-n)/(p(e)+p(-e))},trunc:function(e){return(e>0?v:m)(e)}})},{"./$.def":11}],40:[function(e,t,n){"use strict";function i(e){var t,n;if(s(t=e.valueOf)&&!a(n=t.call(e)))return n;if(s(t=e.toString)&&!a(n=t.call(e)))return n;throw TypeError("Can't convert object to number")}function r(e){if(a(e)&&(e=i(e)),"string"==typeof e&&e.length>2&&48==e.charCodeAt(0)){var t=!1;switch(e.charCodeAt(1)){case 66:case 98:t=!0;case 79:case 111:return parseInt(e.slice(2),t?2:8)}}return+e}var o=e("./$"),a=o.isObject,s=o.isFunction,l="Number",u=o.g[l],c=u,d=u.prototype;!o.FW||u("0o1")&&u("0b1")||(u=function e(t){return this instanceof e?new c(r(t)):r(t)},o.each.call(o.DESC?o.getNames(c):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),function(e){o.has(c,e)&&!o.has(u,e)&&o.setDesc(u,e,o.getDesc(c,e))}),u.prototype=d,d.constructor=u,o.hide(o.g,l,u))},{"./$":16}],41:[function(e,t,n){function i(e){return!r.isObject(e)&&l(e)&&s(e)===e}var r=e("./$"),o=e("./$.def"),a=Math.abs,s=Math.floor,l=r.g.isFinite,u=9007199254740991;o(o.S,"Number",{EPSILON:Math.pow(2,-52),isFinite:function(e){return"number"==typeof e&&l(e)},isInteger:i,isNaN:function(e){return e!=e},isSafeInteger:function(e){return i(e)&&a(e)<=u},MAX_SAFE_INTEGER:u,MIN_SAFE_INTEGER:-u,parseFloat:parseFloat,parseInt:parseInt})},{"./$":16,"./$.def":11}],42:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{assign:e("./$.assign")})},{"./$.assign":5,"./$.def":11}],43:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{is:function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}})},{"./$.def":11}],44:[function(e,t,n){var i=e("./$.def");i(i.S,"Object",{setPrototypeOf:e("./$.set-proto").set})},{"./$.def":11,"./$.set-proto":21}],45:[function(e,t,n){function i(e,t){var n=(r.core.Object||{})[e]||Object[e],i=0,l={};l[e]=1==t?function(e){return a(e)?n(e):e}:2==t?function(e){return!a(e)||n(e)}:3==t?function(e){return!!a(e)&&n(e)}:4==t?function(e,t){return n(s(e),t)}:5==t?function(e){return n(Object(r.assertDefined(e)))}:function(e){return n(s(e))};try{n("z")}catch(e){i=1}o(o.S+o.F*i,"Object",l)}var r=e("./$"),o=e("./$.def"),a=r.isObject,s=r.toObject;i("freeze",1),i("seal",1),i("preventExtensions",1),i("isFrozen",2),i("isSealed",2),i("isExtensible",3),i("getOwnPropertyDescriptor",4),i("getPrototypeOf",5),i("keys"),i("getOwnPropertyNames")},{"./$":16,"./$.def":11}],46:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o={};o[e("./$.wks")("toStringTag")]="z",i.FW&&"z"!=r(o)&&i.hide(Object.prototype,"toString",function(){return"[object "+r.classof(this)+"]"})},{"./$":16,"./$.cof":6,"./$.wks":27}],47:[function(e,t,n){"use strict";function i(e){var t=P(e)[v];return void 0!=t?t:e}function r(e){var t;return x(e)&&(t=e.then),!!T(t)&&t}function o(e){var t,n=e[g],i=n.c,r=0;if(n.h)return!1;for(;i.length>r;)if(t=i[r++],t.fail||!o(t.P))return!1;return!0}function a(e,t){var n=e.c;(t||n.length)&&C(function(){var i=e.p,a=e.v,s=1==e.s,l=0;if(t&&o(i))setTimeout(function(){o(i)&&("process"==p(w)?w.emit("unhandledRejection",a,i):_.console&&T(console.error)&&console.error("Unhandled promise rejection",a))},1e3);else for(;n.length>l;)!function(t){var n,i,o=s?t.ok:t.fail;try{o?(s||(e.h=!0),n=o===!0?a:o(a),n===t.P?t.rej(TypeError(y+"-chain cycle")):(i=r(n))?i.call(n,t.res,t.rej):t.res(n)):t.rej(a)}catch(e){t.rej(e)}}(n[l++]);n.length=0})}function s(e){var t=this;t.d||(t.d=!0,t=t.r||t,t.v=e,t.s=2,a(t,!0))}function l(e){var t,n,i=this;if(!i.d){i.d=!0,i=i.r||i;try{(t=r(e))?(n={r:i,d:!1},t.call(e,d(l,n,1),d(s,n,1))):(i.v=e,i.s=1,a(i))}catch(e){s.call(n||{r:i,d:!1},e)}}}var u,c=e("./$"),d=e("./$.ctx"),p=e("./$.cof"),f=e("./$.def"),h=e("./$.assert"),m=e("./$.iter"),v=e("./$.wks")("species"),g=e("./$.uid").safe("record"),b=m.forOf,y="Promise",_=c.g,w=_.process,C=w&&w.nextTick||e("./$.task").set,E=_[y],k=E,T=c.isFunction,x=c.isObject,S=h.fn,P=h.obj;T(E)&&T(E.resolve)&&E.resolve(u=new E(function(){}))==u||(E=function(e){S(e);var t={p:h.inst(this,E,y),c:[],s:0,d:!1,v:void 0,h:!1};c.hide(this,g,t);try{e(d(l,t,1),d(s,t,1))}catch(e){s.call(t,e)}},c.mix(E.prototype,{then:function(e,t){var n=P(P(this).constructor)[v],i={ok:!T(e)||e,fail:!!T(t)&&t},r=i.P=new(void 0!=n?n:E)(function(e,t){i.res=S(e),i.rej=S(t)}),o=this[g];return o.c.push(i),o.s&&a(o),r},catch:function(e){return this.then(void 0,e)}})),f(f.G+f.W+f.F*(E!=k),{Promise:E}),p.set(E,y),e("./$.species")(E),f(f.S,y,{reject:function(e){return new(i(this))(function(t,n){n(e)})},resolve:function(e){return x(e)&&g in e&&c.getProto(e)===this.prototype?e:new(i(this))(function(t){t(e)})}}),f(f.S+f.F*!e("./$.iter-detect")(function(e){E.all(e).catch(function(){})}),y,{all:function(e){var t=i(this),n=[];return new t(function(i,r){b(e,!1,n.push,n);var o=n.length,a=Array(o);o?c.each.call(n,function(e,n){t.resolve(e).then(function(e){a[n]=e,--o||i(a)},r)}):i(a)})},race:function(e){var t=i(this);return new t(function(n,i){b(e,!1,function(e){t.resolve(e).then(n,i)})})}})},{"./$":16,"./$.assert":4,"./$.cof":6,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.iter-detect":14,"./$.species":22,"./$.task":24,"./$.uid":25,"./$.wks":27}],48:[function(e,t,n){function i(e){var t,n=[];for(t in e)n.push(t);s.set(this,d,{o:e,a:n,i:0})}function r(e){return function(t){y(t);try{return e.apply(void 0,arguments),!0}catch(e){return!1}}}function o(e,t){var n,i=arguments.length<3?e:arguments[2],r=m(y(e),t);return r?s.has(r,"value")?r.value:void 0===r.get?void 0:r.get.call(i):h(n=g(e))?o(n,t,i):void 0}function a(e,t,n){var i,r,o=arguments.length<4?e:arguments[3],l=m(y(e),t);if(!l){if(h(r=g(e)))return a(r,t,n,o);l=s.desc(0)}return s.has(l,"value")?!(l.writable===!1||!h(o))&&(i=m(o,t)||s.desc(0),i.value=n,v(o,t,i),!0):void 0!==l.set&&(l.set.call(o,n),!0)}var s=e("./$"),l=e("./$.def"),u=e("./$.set-proto"),c=e("./$.iter"),d=e("./$.uid").safe("iter"),p=c.step,f=e("./$.assert"),h=s.isObject,m=s.getDesc,v=s.setDesc,g=s.getProto,b=Function.apply,y=f.obj,_=Object.isExtensible||s.it;c.create(i,"Object",function(){var e,t=this[d],n=t.a;do if(t.i>=n.length)return p(1);while(!((e=n[t.i++])in t.o));return p(0,e)});var w={apply:e("./$.ctx")(Function.call,b,3),construct:function(e,t){var n=f.fn(arguments.length<3?e:arguments[2]).prototype,i=s.create(h(n)?n:Object.prototype),r=b.call(e,i,t);return h(r)?r:i},defineProperty:r(v),deleteProperty:function(e,t){var n=m(y(e),t);return!(n&&!n.configurable)&&delete e[t]},enumerate:function(e){return new i(y(e))},get:o,getOwnPropertyDescriptor:function(e,t){return m(y(e),t)},getPrototypeOf:function(e){return g(y(e))},has:function(e,t){return t in e},isExtensible:function(e){return!!_(y(e))},ownKeys:e("./$.own-keys"),preventExtensions:r(Object.preventExtensions||s.it),set:a};u&&(w.setPrototypeOf=function(e,t){u.check(e,t);try{return u.set(e,t),!0}catch(e){return!1}}),l(l.G,{Reflect:{}}),l(l.S,"Reflect",w)},{"./$":16,"./$.assert":4,"./$.ctx":10,"./$.def":11,"./$.iter":15,"./$.own-keys":18,"./$.set-proto":21,"./$.uid":25}],49:[function(e,t,n){var i=e("./$"),r=e("./$.cof"),o=i.g.RegExp,a=o,s=o.prototype;i.FW&&i.DESC&&(function(){try{return"/a/i"==o(/a/g,"i")}catch(e){}}()||(o=function(e,t){return new a("RegExp"==r(e)&&void 0!==t?e.source:e,t)},i.each.call(i.getNames(a),function(e){e in o||i.setDesc(o,e,{configurable:!0,get:function(){return a[e]},set:function(t){a[e]=t}})}),s.constructor=o,o.prototype=s,i.hide(i.g,"RegExp",o)),"g"!=/./g.flags&&i.setDesc(s,"flags",{configurable:!0,get:e("./$.replacer")(/^.*\/(\w*)$/,"$1")})),e("./$.species")(o)},{"./$":16,"./$.cof":6,"./$.replacer":20,"./$.species":22}],50:[function(e,t,n){"use strict";var i=e("./$.collection-strong");e("./$.collection")("Set",{add:function(e){return i.def(this,e=0===e?0:e,e)}},i)},{"./$.collection":9,"./$.collection-strong":7}],51:[function(e,t,n){var i=e("./$.def");i(i.P,"String",{codePointAt:e("./$.string-at")(!1)})},{"./$.def":11,"./$.string-at":23}],52:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o=e("./$.def"),a=i.toLength;o(o.P,"String",{endsWith:function(e){if("RegExp"==r(e))throw TypeError();var t=String(i.assertDefined(this)),n=arguments[1],o=a(t.length),s=void 0===n?o:Math.min(a(n),o);return e+="",t.slice(s-e.length,s)===e}})},{"./$":16,"./$.cof":6,"./$.def":11}],53:[function(e,t,n){var i=e("./$.def"),r=e("./$").toIndex,o=String.fromCharCode;i(i.S,"String",{fromCodePoint:function(e){for(var t,n=[],i=arguments.length,a=0;i>a;){if(t=+arguments[a++],r(t,1114111)!==t)throw RangeError(t+" is not a valid code point");n.push(t<65536?o(t):o(((t-=65536)>>10)+55296,t%1024+56320))}return n.join("")}})},{"./$":16,"./$.def":11}],54:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o=e("./$.def");o(o.P,"String",{includes:function(e){if("RegExp"==r(e))throw TypeError();return!!~String(i.assertDefined(this)).indexOf(e,arguments[1])}})},{"./$":16,"./$.cof":6,"./$.def":11}],55:[function(e,t,n){var i=e("./$").set,r=e("./$.string-at")(!0),o=e("./$.uid").safe("iter"),a=e("./$.iter"),s=a.step;a.std(String,"String",function(e){i(this,o,{o:String(e),i:0})},function(){var e,t=this[o],n=t.o,i=t.i;return i>=n.length?s(1):(e=r.call(n,i),t.i+=e.length,s(0,e))})},{"./$":16,"./$.iter":15,"./$.string-at":23,"./$.uid":25}],56:[function(e,t,n){var i=e("./$"),r=e("./$.def");r(r.S,"String",{raw:function(e){for(var t=i.toObject(e.raw),n=i.toLength(t.length),r=arguments.length,o=[],a=0;n>a;)o.push(String(t[a++])),a<r&&o.push(String(arguments[a]));return o.join("")}})},{"./$":16,"./$.def":11}],57:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.def");r(r.P,"String",{repeat:function(e){var t=String(i.assertDefined(this)),n="",r=i.toInteger(e);if(r<0||r==1/0)throw RangeError("Count can't be negative");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(n+=t);return n}})},{"./$":16,"./$.def":11}],58:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.cof"),o=e("./$.def");o(o.P,"String",{startsWith:function(e){if("RegExp"==r(e))throw TypeError();var t=String(i.assertDefined(this)),n=i.toLength(Math.min(arguments[1],t.length));return e+="",t.slice(n,n+e.length)===e}})},{"./$":16,"./$.cof":6,"./$.def":11}],59:[function(e,t,n){"use strict";function i(e){var t=b[e]=r.set(r.create(f.prototype),v,e);return r.DESC&&m&&r.setDesc(Object.prototype,e,{configurable:!0,set:function(t){c(this,e,t)}}),t}var r=e("./$"),o=e("./$.cof").set,a=e("./$.uid"),s=e("./$.def"),l=e("./$.keyof"),u=r.has,c=r.hide,d=r.getNames,p=r.toObject,f=r.g.Symbol,h=f,m=!1,v=a.safe("tag"),g={},b={};
r.isFunction(f)||(f=function e(t){if(this instanceof e)throw TypeError("Symbol is not a constructor");return i(a(t))},c(f.prototype,"toString",function(){return this[v]})),s(s.G+s.W,{Symbol:f});var y={for:function(e){return u(g,e+="")?g[e]:g[e]=f(e)},keyFor:function(e){return l(g,e)},pure:a.safe,set:r.set,useSetter:function(){m=!0},useSimple:function(){m=!1}};r.each.call("hasInstance,isConcatSpreadable,iterator,match,replace,search,species,split,toPrimitive,toStringTag,unscopables".split(","),function(t){var n=e("./$.wks")(t);y[t]=f===h?n:i(n)}),m=!0,s(s.S,"Symbol",y),s(s.S+s.F*(f!=h),"Object",{getOwnPropertyNames:function(e){for(var t,n=d(p(e)),i=[],r=0;n.length>r;)u(b,t=n[r++])||i.push(t);return i},getOwnPropertySymbols:function(e){for(var t,n=d(p(e)),i=[],r=0;n.length>r;)u(b,t=n[r++])&&i.push(b[t]);return i}}),o(f,"Symbol"),o(Math,"Math",!0),o(r.g.JSON,"JSON",!0)},{"./$":16,"./$.cof":6,"./$.def":11,"./$.keyof":17,"./$.uid":25,"./$.wks":27}],60:[function(e,t,n){"use strict";var i=e("./$"),r=e("./$.collection-weak"),o=r.leakStore,a=r.ID,s=r.WEAK,l=i.has,u=i.isObject,c=Object.isFrozen||i.core.Object.isFrozen,d={},p=e("./$.collection")("WeakMap",{get:function(e){if(u(e)){if(c(e))return o(this).get(e);if(l(e,s))return e[s][this[a]]}},set:function(e,t){return r.def(this,e,t)}},r,!0,!0);i.FW&&7!=(new p).set((Object.freeze||Object)(d),7).get(d)&&i.each.call(["delete","has","get","set"],function(e){var t=p.prototype[e];p.prototype[e]=function(n,i){if(u(n)&&c(n)){var r=o(this)[e](n,i);return"set"==e?this:r}return t.call(this,n,i)}})},{"./$":16,"./$.collection":9,"./$.collection-weak":8}],61:[function(e,t,n){"use strict";var i=e("./$.collection-weak");e("./$.collection")("WeakSet",{add:function(e){return i.def(this,e,!0)}},i,!1,!0)},{"./$.collection":9,"./$.collection-weak":8}],62:[function(e,t,n){var i=e("./$.def");i(i.P,"Array",{includes:e("./$.array-includes")(!0)}),e("./$.unscope")("includes")},{"./$.array-includes":2,"./$.def":11,"./$.unscope":26}],63:[function(e,t,n){var i=e("./$"),r=e("./$.def"),o=e("./$.own-keys");r(r.S,"Object",{getOwnPropertyDescriptors:function(e){var t=i.toObject(e),n={};return i.each.call(o(t),function(e){i.setDesc(n,e,i.desc(0,i.getDesc(t,e)))}),n}})},{"./$":16,"./$.def":11,"./$.own-keys":18}],64:[function(e,t,n){function i(e){return function(t){var n,i=r.toObject(t),o=r.getKeys(t),a=o.length,s=0,l=Array(a);if(e)for(;a>s;)l[s]=[n=o[s++],i[n]];else for(;a>s;)l[s]=i[o[s++]];return l}}var r=e("./$"),o=e("./$.def");o(o.S,"Object",{values:i(!1),entries:i(!0)})},{"./$":16,"./$.def":11}],65:[function(e,t,n){var i=e("./$.def");i(i.S,"RegExp",{escape:e("./$.replacer")(/([\\\-[\]{}()*+?.,^$|])/g,"\\$1",!0)})},{"./$.def":11,"./$.replacer":20}],66:[function(e,t,n){var i=e("./$.def"),r=e("./$.iter").forOf;i(i.P,"Set",{toJSON:function(){var e=[];return r(this,!1,e.push,e),e}})},{"./$.def":11,"./$.iter":15}],67:[function(e,t,n){var i=e("./$.def");i(i.P,"String",{at:e("./$.string-at")(!0)})},{"./$.def":11,"./$.string-at":23}],68:[function(e,t,n){function i(t,n){r.each.call(t.split(","),function(t){void 0==n&&t in a?s[t]=a[t]:t in[]&&(s[t]=e("./$.ctx")(Function.call,[][t],n))})}var r=e("./$"),o=e("./$.def"),a=r.core.Array||Array,s={};i("pop,reverse,shift,keys,values,entries",1),i("indexOf,every,some,forEach,map,filter,find,findIndex,includes",3),i("join,slice,concat,push,splice,unshift,sort,lastIndexOf,reduce,reduceRight,copyWithin,fill,turn"),o(o.S,"Array",s)},{"./$":16,"./$.ctx":10,"./$.def":11}],69:[function(e,t,n){e("./es6.array.iterator");var i=e("./$"),r=e("./$.iter").Iterators,o=e("./$.wks")("iterator"),a=i.g.NodeList;!i.FW||!a||o in a.prototype||i.hide(a.prototype,o,r.Array),r.NodeList=r.Array},{"./$":16,"./$.iter":15,"./$.wks":27,"./es6.array.iterator":34}],70:[function(e,t,n){var i=e("./$.def"),r=e("./$.task");i(i.G+i.B,{setImmediate:r.set,clearImmediate:r.clear})},{"./$.def":11,"./$.task":24}],71:[function(e,t,n){function i(e){return l?function(t,n){return e(a(s,[].slice.call(arguments,2),r.isFunction(t)?t:Function(t)),n)}:e}var r=e("./$"),o=e("./$.def"),a=e("./$.invoke"),s=e("./$.partial"),l=!!r.g.navigator&&/MSIE .\./.test(navigator.userAgent);o(o.G+o.B+o.F*l,{setTimeout:i(r.g.setTimeout),setInterval:i(r.g.setInterval)})},{"./$":16,"./$.def":11,"./$.invoke":13,"./$.partial":19}],72:[function(e,t,n){e("./modules/es5"),e("./modules/es6.symbol"),e("./modules/es6.object.assign"),e("./modules/es6.object.is"),e("./modules/es6.object.set-prototype-of"),e("./modules/es6.object.to-string"),e("./modules/es6.object.statics-accept-primitives"),e("./modules/es6.function.name"),e("./modules/es6.number.constructor"),e("./modules/es6.number.statics"),e("./modules/es6.math"),e("./modules/es6.string.from-code-point"),e("./modules/es6.string.raw"),e("./modules/es6.string.iterator"),e("./modules/es6.string.code-point-at"),e("./modules/es6.string.ends-with"),e("./modules/es6.string.includes"),e("./modules/es6.string.repeat"),e("./modules/es6.string.starts-with"),e("./modules/es6.array.from"),e("./modules/es6.array.of"),e("./modules/es6.array.iterator"),e("./modules/es6.array.species"),e("./modules/es6.array.copy-within"),e("./modules/es6.array.fill"),e("./modules/es6.array.find"),e("./modules/es6.array.find-index"),e("./modules/es6.regexp"),e("./modules/es6.promise"),e("./modules/es6.map"),e("./modules/es6.set"),e("./modules/es6.weak-map"),e("./modules/es6.weak-set"),e("./modules/es6.reflect"),e("./modules/es7.array.includes"),e("./modules/es7.string.at"),e("./modules/es7.regexp.escape"),e("./modules/es7.object.get-own-property-descriptors"),e("./modules/es7.object.to-array"),e("./modules/es7.set.to-json"),e("./modules/js.array.statics"),e("./modules/web.timers"),e("./modules/web.immediate"),e("./modules/web.dom.iterable"),t.exports=e("./modules/$").core},{"./modules/$":16,"./modules/es5":28,"./modules/es6.array.copy-within":29,"./modules/es6.array.fill":30,"./modules/es6.array.find":32,"./modules/es6.array.find-index":31,"./modules/es6.array.from":33,"./modules/es6.array.iterator":34,"./modules/es6.array.of":35,"./modules/es6.array.species":36,"./modules/es6.function.name":37,"./modules/es6.map":38,"./modules/es6.math":39,"./modules/es6.number.constructor":40,"./modules/es6.number.statics":41,"./modules/es6.object.assign":42,"./modules/es6.object.is":43,"./modules/es6.object.set-prototype-of":44,"./modules/es6.object.statics-accept-primitives":45,"./modules/es6.object.to-string":46,"./modules/es6.promise":47,"./modules/es6.reflect":48,"./modules/es6.regexp":49,"./modules/es6.set":50,"./modules/es6.string.code-point-at":51,"./modules/es6.string.ends-with":52,"./modules/es6.string.from-code-point":53,"./modules/es6.string.includes":54,"./modules/es6.string.iterator":55,"./modules/es6.string.raw":56,"./modules/es6.string.repeat":57,"./modules/es6.string.starts-with":58,"./modules/es6.symbol":59,"./modules/es6.weak-map":60,"./modules/es6.weak-set":61,"./modules/es7.array.includes":62,"./modules/es7.object.get-own-property-descriptors":63,"./modules/es7.object.to-array":64,"./modules/es7.regexp.escape":65,"./modules/es7.set.to-json":66,"./modules/es7.string.at":67,"./modules/js.array.statics":68,"./modules/web.dom.iterable":69,"./modules/web.immediate":70,"./modules/web.timers":71}],73:[function(e,t,n){(function(e){!function(e){"use strict";function n(e,t,n,i){var o=Object.create((t||r).prototype);return o._invoke=s(e,n||null,new d(i||[])),o}function i(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}function r(){}function o(){}function a(){}function s(e,t,n){var r=y;return function(o,a){if(r===w)throw new Error("Generator is already running");if(r===C)return f();for(;;){var s=n.delegate;if(s){if("return"===o||"throw"===o&&s.iterator.throw===h){n.delegate=null;var l=s.iterator.return;if(l){var u=i(l,s.iterator,a);if("throw"===u.type){o="throw",a=u.arg;continue}}if("return"===o)continue}var u=i(s.iterator[o],s.iterator,a);if("throw"===u.type){n.delegate=null,o="throw",a=u.arg;continue}o="next",a=h;var c=u.arg;if(!c.done)return r=_,c;n[s.resultName]=c.value,n.next=s.nextLoc,n.delegate=null}if("next"===o)r===_?n.sent=a:delete n.sent;else if("throw"===o){if(r===y)throw r=C,a;n.dispatchException(a)&&(o="next",a=h)}else"return"===o&&n.abrupt("return",a);r=w;var u=i(e,t,n);if("normal"===u.type){r=n.done?C:_;var c={value:u.arg,done:n.done};if(u.arg!==E)return c;n.delegate&&"next"===o&&(a=h)}else"throw"===u.type&&(r=C,o="throw",a=u.arg)}}}function l(e){k[e]=function(t){return this._invoke(e,t)}}function u(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function c(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function d(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(u,this),this.reset()}function p(e){if(e){var t=e[v];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var n=-1,i=function t(){for(;++n<e.length;)if(m.call(e,n))return t.value=e[n],t.done=!1,t;return t.value=h,t.done=!0,t};return i.next=i}}return{next:f}}function f(){return{value:h,done:!0}}var h,m=Object.prototype.hasOwnProperty,v="function"==typeof Symbol&&Symbol.iterator||"@@iterator",g="object"==typeof t,b=e.regeneratorRuntime;if(b)return void(g&&(t.exports=b));b=e.regeneratorRuntime=g?t.exports:{},b.wrap=n;var y="suspendedStart",_="suspendedYield",w="executing",C="completed",E={},k=a.prototype=r.prototype;o.prototype=k.constructor=a,a.constructor=o,o.displayName="GeneratorFunction",b.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===o||"GeneratorFunction"===(t.displayName||t.name))},b.mark=function(e){return e.__proto__=a,e.prototype=Object.create(k),e},b.async=function(e,t,r,o){return new Promise(function(a,s){function l(e,t){var n=i(u[e],u,t);if("throw"===n.type)return void s(n.arg);var r=n.arg;r.done?a(r.value):Promise.resolve(r.value).then(c,d)}var u=n(e,t,r,o),c=l.bind(u,"next"),d=l.bind(u,"throw");c()})},l("next"),l("throw"),l("return"),k[v]=function(){return this},k.toString=function(){return"[object Generator]"},b.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var i=t.pop();if(i in e)return n.value=i,n.done=!1,n}return n.done=!0,n}},b.values=p,d.prototype={constructor:d,reset:function(){this.prev=0,this.next=0,this.sent=h,this.done=!1,this.delegate=null,this.tryEntries.forEach(c);for(var e,t=0;m.call(this,e="t"+t)||t<20;++t)this[e]=null},stop:function(){this.done=!0;var e=this.tryEntries[0],t=e.completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(e){function t(t,i){return o.type="throw",o.arg=e,n.next=t,!!i}if(this.done)throw e;for(var n=this,i=this.tryEntries.length-1;i>=0;--i){var r=this.tryEntries[i],o=r.completion;if("root"===r.tryLoc)return t("end");if(r.tryLoc<=this.prev){var a=m.call(r,"catchLoc"),s=m.call(r,"finallyLoc");if(a&&s){if(this.prev<r.catchLoc)return t(r.catchLoc,!0);if(this.prev<r.finallyLoc)return t(r.finallyLoc)}else if(a){if(this.prev<r.catchLoc)return t(r.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<r.finallyLoc)return t(r.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var i=this.tryEntries[n];if(i.tryLoc<=this.prev&&m.call(i,"finallyLoc")&&this.prev<i.finallyLoc){var r=i;break}}r&&("break"===e||"continue"===e)&&r.tryLoc<=t&&t<r.finallyLoc&&(r=null);var o=r?r.completion:{};return o.type=e,o.arg=t,r?this.next=r.finallyLoc:this.complete(o),E},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=e.arg,this.next="end"):"normal"===e.type&&t&&(this.next=t),E},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc)}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var i=n.completion;if("throw"===i.type){var r=i.arg;c(n)}return r}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:p(e),resultName:t,nextLoc:n},E}}}("object"==typeof e?e:"object"==typeof window?window:"object"==typeof self?self:this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1]),define("lib/babel-polyfill/browser-polyfill",function(){}),define("lib-build/less!storymaps/tpl/core/MainView",[],function(){}),define("lib-build/css!storymaps/tpl/view/media/Common",[],function(){}),define("storymaps-react/tpl/core/WebSceneCache",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e),this._items=[],this._IDEAL_MAX_ITEMS=2}return i(e,[{key:"add",value:function(e,t){if(this._items.length<this._IDEAL_MAX_ITEMS){var n=this._findInstanceIndex(e);n!==-1?this._replaceItem(e,n):this._addItem(e)}else if(t){var i=this._findInstanceIndex(e);i!==-1?this._replaceItem(e,i):this._bumpOnItem(e)}}},{key:"_bumpOnItem",value:function(e){this._addItem(e);var t=this._findInstanceIndex(e),n=this._items[0],i=this._items[this._items.length-1];0===t?i.canRemove()&&this._removeItem(i):t===this._items.length-1?n.canRemove()&&this._removeItem(n):n.canRemove()?this._removeItem(n):i.canRemove()&&this._removeItem(i)}},{key:"_addSameID",value:function(e,t){var n=this._items[t];n.item._domID!==e.item._domID&&this._replaceItem(e,t)}},{key:"_removeItem",value:function(e){var t=this._findInstanceIndex(e);this._items.splice(t,1),e.item.unload()}},{key:"_replaceItem",value:function(e,t){this._items[t]=e,e.item.setLoaded(!0)}},{key:"_addItem",value:function(e){e.item.load(),this._items.push(e),this._sort()}},{key:"_sort",value:function(){this._items.sort(function(e,t){var n=e.item._node.offset().top-t.item._node.offset().top;return 0===n&&e.hasOwnProperty("viewIndex")&&t.hasOwnProperty("viewIndex")?e.viewIndex-t.viewIndex:n})}},{key:"_findInstanceIndex",value:function(e){return this._items.findIndex(function(t){return t.item.id===e.item.id&&t.item._node.is(e.item._node)})}}]),e}();t.default=r,e.exports=t.default}),define("storymaps-react/tpl/core/Controller",["module","exports","dojo/_base/lang","dojo/topic","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps-react/tpl/view/media/Media","storymaps-react/tpl/core/WebSceneCache"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var c=s(n),d=s(i),p=s(r),f=s(o),h=s(a),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v="Story Map",g=function(){function e(){u(this,e)}return m(e,null,[{key:"getStoryTitle",value:function(){var e=this._sections&&this._sections[0];return e?e.getPreviewText():""}},{key:"getStoryURL",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.url||document.location.href;return t=t.replace(/\?edit(=.*)*&/,"?"),t=t.replace(/\&edit(=.*)*/,""),t=t.replace(/\?edit/,""),t=t.replace(/\?locale(=[a-zA-Z\-]+)+&/,"?"),t=t.replace(/\&locale(=[a-zA-Z\-]+)+/,""),e.urlEncoding?encodeURIComponent(t):t}},{key:"isStoryBlank",value:function(){return!(app.data.appItem&&app.data.appItem.data&&app.data.appItem.data.values&&app.data.appItem.data.values.config&&app.data.appItem.data.values.settings&&app.data.appItem.data.values.sections&&app.data.appItem.data.values.template)}},{key:"renderHeader",value:function(){var t=app.data.appItem,n=t?t.data.values.settings.header:null;n&&n.logo&&n.link||(n=e.DEFAULT_HEADER_SETTINGS),app.ui.header.render({logo:n.logo,link:n.link,social:n.social,bookmarks:this.getBookmarks(),title:this.getStoryTitle()})}},{key:"renderStory",value:function(e,t){this._sections=[],this._webSceneCache=new h.default,this._currentSection=null,this._$currentSection=null,this._currentSectionIndex=null,this._container=$(".sections");var n=!1,i=t.length;app.data.errorWebGL=!1,app.data.errorVideoMobile=!1;for(var r="",o=t.length-1;o>=0;o--){var a=t[o];"sequence"==a.type&&"sequence"==r&&(a.foreground.blocks=a.foreground.blocks.concat(t[o+1].foreground.blocks),t.splice(o+1,1)),r=a.type}$.each(t,function(e,r){var o=!1,a=app.ui.SectionFactory.createInstance(r);if(a){if(r.alternate===!0&&!n)return;try{this._container.append(a.render(e))}catch(e){console.error(e),o=!0,n=!0,"RUNTIME-NO-WEBGL"==e&&(app.data.errorWebGL=!0)}o||this._sections.push(a)}if((app.data.errorWebGL||app.data.errorVideoMobile)&&(app.isInBuilder&&(e==i-3&&"credits-placeholder"==t[e+1].type||e==i-2&&"credits-placeholder"==t[e+1].type)||!app.isInBuilder&&(e==i-2&&"credits"==t[e+1].type||e==i-1&&"credits"!=r.type))){var s="";app.data.errorWebGL?s="WEBGL":app.data.errorVideoMobile&&(s="VIDEO_MOBILE");var l=this.getErrorSection({type:s});l&&(this._sections.push(l),this._container.append(l.render(e)))}}.bind(this)),app.data.sections=this._sections,app.data.sectionsJSON=t,app.data.title=app.Controller.getStoryTitle(),document.title=app.data.title;var s=[];return $(".section").each(function(e,t){var n=this._sections[e].postCreate($(t));Array.isArray(n)&&(s=s.concat(n))}.bind(this)),Promise.all(s)}},{key:"getBookmarks",value:function(){var e=[];return $.each(this._sections,function(t,n){if(n.getBookmark){var i=n.getBookmark();i&&"visible"==i.status&&e.push({index:t,title:i.bookmark})}}),e}},{key:"preloadSectionByIndex",value:function(e){this.preloadSection(this._sections[e],{})}},{key:"preloadSection",value:function(e,t){e&&window.requestAnimationFrame(function(){e.onScroll(c.default.mixin(t,{status:"preload"}))})}},{key:"toggleScrollEvents",value:function(e){this._disableScrollEvents=!e}},{key:"onScroll",value:function(e){var t=this._sections[e.currentSectionIndex];if(t&&!this._disableScrollEvents){var n=app.display.sections[e.currentSectionIndex].top;if(t.onScroll(c.default.mixin(e,{status:"current",viewportTop:e.scrollTop-n,viewportBottom:e.scrollTop+app.display.sectionHeight-n,webSceneCache:this._webSceneCache})),e.currentSectionIndex!=this._currentSectionIndex){e.$currentSection.addClass("active"),d.default.publish("story-navigated-section",{index:e.currentSectionIndex,data:this._currentSection});var i=this._sections[e.currentSectionIndex+1];i&&e.currentSectionIndex!=this._currentSectionIndex&&this.preloadSection(i,e);var r=this._currentSection,o=this._$currentSection;o&&window.requestAnimationFrame(function(){o.removeClass("active"),r.onScroll({status:"unload"})})}$.each(e.visibleSections,function(t,n){var i=this._sections[n],r=app.display.sections[n].top;n!=e.currentSectionIndex&&i.onScroll(c.default.mixin(e,{status:"visible",viewportTop:e.scrollTop-r,viewportBottom:e.scrollTop+app.display.sectionHeight-r,webSceneCache:this._webSceneCache}))}.bind(this)),this._$currentSection=e.$currentSection,this._currentSectionIndex=e.currentSectionIndex,this._currentSection=t}}},{key:"onResize",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._sections[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;a.resize(c.default.mixin(e,{webSceneCache:this._webSceneCache}))}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}},{key:"navigateToSection",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n){if(void 0!=t.index&&void 0!=t.animate&&!(t.index>app.display.sections.length-1)){var i=50,r=e._sections[t.index].type,o=app.display.sections[t.index].top,a=1,s=0;"immersive"==r&&(a=app.display.windowHeight-250+i,app.isInBuilder&&(a+=125)),s=Math.floor(o-i+a),t.animate?(e.toggleScrollEvents(!1),$("html,body").animate({scrollTop:s},{duration:t.animateSpeed||400}).promise().then(function(){this.toggleScrollEvents(!0),app.ui.update({forceUpdate:!0}),n(t.index)}.bind(e))):(document.body.scrollTop=s,document.documentElement.scrollTop=s,n(t.index))}})}},{key:"getSectionById",value:function(e){for(var t in this._sections){var n=this._sections[t];if(n.id==e)return parseInt(t,10)}return-1}},{key:"getSectionIndexById",value:function(e){return this._sections[e].id}},{key:"getErrorSection",value:function(e){e=e||{};var t=null;if("WEBGL"===e.type||"VIDEO_MOBILE"===e.type){var n="mailto:?to=&subject=Check%20out%20this%20story&body="+document.location.href;t=app.ui.SectionFactory.createInstance({type:"sequence",layout:"sequence-2",background:{type:"color",color:{value:"#FFF"}},foreground:{blocks:[{type:"text",text:{value:'<div class="block"><table><tr><td style="padding-bottom: 10px;"> <img src="resources/tpl/viewer/icons/warning-mobile-smartphone.png" /></td><td style="padding-bottom: 10px; padding-left: 13px;">'+p.default.viewer.mobileWarning.message1+'</td></tr><tr><td colspan="2" style="padding-top: 10px; border-top: 1px solid white; text-align: center;"><a class="btn btn-warning-email" style="background-color: white; color: rgba(255, 0, 0, 0.7);" href="'+n+'"><img src="resources/tpl/viewer/icons/warning-mobile-laptop.png" style="margin-right: 5px;"/>'+p.default.viewer.mobileWarning.email+"</a></td></tr></table></div>"}}]}})}return t}},{key:"getArcGISContent",value:function(){var e=[],t=app.data.appItem&&app.data.appItem.data&&app.data.appItem.data.values,n=t&&t.settings&&t.settings.header&&t.settings.header.logo;if(n&&n.enabled&&n.url){var i=f.default.getArcGISItemResourceURL(n.url);i&&e.push({type:"item-resource",mediaType:"image",url:i.url,file:i.file})}var r=!0,o=!1,a=void 0;try{for(var s,u=this._sections[Symbol.iterator]();!(r=(s=u.next()).done);r=!0){var c=s.value;e.push.apply(e,l(c.getArcGISContent()))}}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return e}},{key:"DEFAULT_HEADER_SETTINGS",get:function(){var e={logo:{enabled:!0,url:"resources/tpl/viewer/icons/esri-logo.png",link:"https://www.esri.com"},link:{url:"https://storymaps.arcgis.com",title:p.default.viewer.headerFromCommon.defaultTagline.replace(/\${STORY_MAP}/g,v)},social:{enabled:!0}};return e}},{key:"SHARED_STYLE_HEADER_SETTINGS",get:function(){if(!app.portal.isOrganization)return null;var e=c.default.getObject("portal.portalProperties.sharedTheme.logo.small",!1,app);if(!e)return null;var t={logo:{enabled:!0,url:e,link:""},link:{url:"https://storymaps.arcgis.com",title:p.default.viewer.headerFromCommon.defaultTagline.replace(/\${STORY_MAP}/g,v)},social:{enabled:!0}};return t}}]),e}();t.default=g,e.exports=t.default}),function(e,t){"object"==typeof exports?t(exports):"function"==typeof define&&define.amd?define("lib/progress.js/minified/progress.min",["exports"],t):t(e)}(this,function(e){function t(e){this._targetElement="undefined"!=typeof e.length?e:[e],"undefined"==typeof window._progressjsId&&(window._progressjsId=1),"undefined"==typeof window._progressjsIntervals&&(window._progressjsIntervals={}),this._options={theme:"blue",overlayMode:!1,considerTransition:!0}}function n(e,t){var n=this;100<=t&&(t=100),e.hasAttribute("data-progressjs")&&setTimeout(function(){"undefined"!=typeof n._onProgressCallback&&n._onProgressCallback.call(n,e,t);var r=i(e);r.style.width=parseInt(t)+"%";var r=r.querySelector(".progressjs-percent"),o=parseInt(r.innerHTML.replace("%","")),a=parseInt(t),s=function(e,t,n){var i=Math.abs(t-n);3>i?u=30:20>i?u=20:intervanIn=1,0!=t-n&&(e.innerHTML=(l?++t:--t)+"%",setTimeout(function(){s(e,t,n)},u))},l=!0;o>a&&(l=!1);var u=10;s(r,o,a)},50)}function i(e){return e=parseInt(e.getAttribute("data-progressjs")),document.querySelector('.progressjs-container > .progressjs-progress[data-progressjs="'+e+'"] > .progressjs-inner')}function r(e){for(var t=0,r=this._targetElement.length;t<r;t++){var o=this._targetElement[t];if(o.hasAttribute("data-progressjs")){var a=i(o);(a=parseInt(a.style.width.replace("%","")))&&n.call(this,o,a+(e||1))}}}function o(){var e,t=document.createElement("fakeelement"),n={transition:"transitionend",OTransition:"oTransitionEnd",MozTransition:"transitionend",WebkitTransition:"webkitTransitionEnd"};for(e in n)if(void 0!==t.style[e])return n[e]}var a=function(e){if("object"==typeof e)return new t(e);if("string"==typeof e){if(e=document.querySelectorAll(e))return new t(e);throw Error("There is no element with given selector.")}return new t(document.body)};return a.version="0.1.0",a.fn=t.prototype={clone:function(){return new t(this)},setOption:function(e,t){return this._options[e]=t,this},setOptions:function(e){var t,n=this._options,i={};for(t in n)i[t]=n[t];for(t in e)i[t]=e[t];return this._options=i,this},start:function(){if("undefined"!=typeof this._onBeforeStartCallback&&this._onBeforeStartCallback.call(this),!document.querySelector(".progressjs-container")){var e=document.createElement("div");e.className="progressjs-container",document.body.appendChild(e)}for(var e=0,t=this._targetElement.length;e<t;e++){var i=this._targetElement[e];if(!i.hasAttribute("data-progressjs")){var r,o,a,s=i;"body"===s.tagName.toLowerCase()?(r=s.clientWidth,o=s.clientHeight):(r=s.offsetWidth,o=s.offsetHeight);for(var l=a=0;s&&!isNaN(s.offsetLeft)&&!isNaN(s.offsetTop);)a+=s.offsetLeft,l+=s.offsetTop,s=s.offsetParent;s=l,i.setAttribute("data-progressjs",window._progressjsId),l=document.createElement("div"),l.className="progressjs-progress progressjs-theme-"+this._options.theme,l.style.position="body"===i.tagName.toLowerCase()?"fixed":"absolute",l.setAttribute("data-progressjs",window._progressjsId);var u=document.createElement("div");u.className="progressjs-inner";var c=document.createElement("div");c.className="progressjs-percent",c.innerHTML="1%",u.appendChild(c),this._options.overlayMode&&"body"===i.tagName.toLowerCase()?(l.style.left=0,l.style.right=0,l.style.top=0,l.style.bottom=0):(l.style.left=a+"px",l.style.top=s+"px",l.style.width=r+"px",this._options.overlayMode&&(l.style.height=o+"px")),l.appendChild(u),document.querySelector(".progressjs-container").appendChild(l),n(i,1),++window._progressjsId}}return this},set:function(e){for(var t=0,i=this._targetElement.length;t<i;t++)n.call(this,this._targetElement[t],e);return this},increase:function(e){return r.call(this,e),this},autoIncrease:function(e,t){var n=this,i=parseInt(this._targetElement[0].getAttribute("data-progressjs"));return"undefined"!=typeof window._progressjsIntervals[i]&&clearInterval(window._progressjsIntervals[i]),window._progressjsIntervals[i]=setInterval(function(){r.call(n,e)},t),this},end:function(){e:{"undefined"!=typeof this._onBeforeEndCallback&&(!0===this._options.considerTransition?i(this._targetElement[0]).addEventListener(o(),this._onBeforeEndCallback,!1):this._onBeforeEndCallback.call(this));for(var e=parseInt(this._targetElement[0].getAttribute("data-progressjs")),t=0,r=this._targetElement.length;t<r;t++){var a=this._targetElement[t],s=i(a);if(!s)break e;var l=1;100>parseInt(s.style.width.replace("%",""))&&(n.call(this,a,100),l=500),function(e,t){setTimeout(function(){e.parentNode.className+=" progressjs-end",setTimeout(function(){e.parentNode.parentNode.removeChild(e.parentNode),t.removeAttribute("data-progressjs")},1e3)},l)}(s,a)}if(window._progressjsIntervals[e])try{clearInterval(window._progressjsIntervals[e]),window._progressjsIntervals[e]=null,delete window._progressjsIntervals[e]}catch(e){}}return this},onbeforeend:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforeend was not a function");return this._onBeforeEndCallback=e,this},onbeforestart:function(e){if("function"!=typeof e)throw Error("Provided callback for onbeforestart was not a function");return this._onBeforeStartCallback=e,this},onprogress:function(e){if("function"!=typeof e)throw Error("Provided callback for onprogress was not a function");return this._onProgressCallback=e,this}},e.progressJs=a}),define("lib-build/css!lib/progress.js/minified/progressjs.min",[],function(){}),define("lib-build/less!storymaps/tpl/view/ui/ProgressBar",[],function(){}),define("storymaps/tpl/view/ui/ProgressBar",["lib/progress.js/minified/progress.min","lib-build/css!lib/progress.js/minified/progressjs.min","lib-build/less!./ProgressBar"],function(e){return function(){var t=new e;this.start=function(){t.start()},this.update=function(e){t.set(e)}}}),define("lib-build/hbars!storymaps-react/tpl/view/ui/Bookmark",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o="function",a=t.helperMissing,s=this.escapeExpression;return'<li class="bookmark" data-index="'+s((r=null!=(r=t.index||(null!=e?e.index:e))?r:a,typeof r===o?r.call(e,{name:"index",hash:{},data:i}):r))+'">'+s((r=null!=(r=t.title||(null!=e?e.title:e))?r:a,typeof r===o?r.call(e,{name:"title",hash:{},data:i}):r))+"</li>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/view/ui/BookmarksMore",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l='<li class="dropdown bookmark-dropdown">\r\n\t<a class="dropdown-toggle" data-toggle="dropdown">\r\n\t\t<span class="glyphicon glyphicon-th-list"></span> <span class="caret"></span>\r\n\t</a>\r\n\t<ul class="dropdown-menu dropdown-menu-right">\r\n\t\t';return o=null!=(o=t.bookmarks||(null!=e?e.bookmarks:e))?o:s,r=typeof o===a?o.call(e,{name:"bookmarks",hash:{},data:i}):o,null!=r&&(l+=r),l+"\r\n\t</ul>\r\n</li>\r\n"},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/ui/Bookmarks",[],function(){}),define("storymaps-react/tpl/view/ui/Bookmarks",["module","exports","lib-build/hbars!./Bookmark","lib-build/hbars!./BookmarksMore","lib-build/less!./Bookmarks"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(t){o(this,e),this.container=t,this.bookmarkIndex=0,this.bookmarkNavigationInProgress=!1}return l(e,[{key:"update",value:function(e){this.showBookmarkIndex(e)}},{key:"resize",value:function(){var e=this,t=this.container.width();this.container.children("li").addClass("visible"),this.container.find(".dropdown").removeClass("visible"),this.container.find(".dropdown-menu li").removeClass("visible");var n=0,i=0,r=!1,o=this.container.children(".bookmark"),a=this.container.find("li.dropdown").outerWidth(!0);o.each(function(s,l){var u=$(l);i++,n+=u.outerWidth(!0);var c=n>t,d=n+a>t,p=i<o.length;(c||d&&p)&&(r=!0,u.removeClass("visible"),e.container.find(".dropdown-menu li").eq(u.index()).addClass("visible"))});var s=this.container.children(".bookmark.active"),l=this.container.find(".dropdown-menu li.active");s.length&&!s.hasClass("visible")?(s.removeClass("active"),this.container.find(".nav-tabs .dropdown-menu li").eq(s.index()).addClass("active"),this.container.find(".nav-tabs > .dropdown").addClass("active")):l.length&&!l.hasClass("visible")&&(l.removeClass("active"),this.container.find(".nav-tabs > .bookmark").eq(l.index()).addClass("active"),this.container.find(".nav-tabs > .dropdown").removeClass("active")),r&&this.container.find(".dropdown").addClass("visible");
}},{key:"updateVisibleBookmark",value:function(e){var t=this.container.find(".bookmark.visible").filter(function(t,n){return $(n).data("index")<=e});t.length&&$(t[t.length-1]).addClass("active")}},{key:"showBookmarkIndex",value:function(e){if(!this.bookmarkNavigationInProgress){e||0===e||(e=this.bookmarkIndex),this.container.find("li, .bookmark").removeClass("active"),this.updateVisibleBookmark(e);var t=this.container.find(".bookmark.active").closest(".bookmark-dropdown").length>0;t?(this.container.find(".dropdown").addClass("active"),app.isLoading||this.container.find(".dropdown").hasClass("open")||this.container.find(".dropdown-toggle").click()):app.isLoading||this.container.find(".dropdown").hasClass("open")&&this.container.find(".dropdown-toggle").click(),this.bookmarkIndex=e}}},{key:"render",value:function(e){e||(e=[]);var t="",n=!0,i=!1,r=void 0;try{for(var o,l=e[Symbol.iterator]();!(n=(o=l.next()).done);n=!0){var u=o.value;t+=(0,a.default)(u)}}catch(e){i=!0,r=e}finally{try{!n&&l.return&&l.return()}finally{if(i)throw r}}this.container.html(t+(0,s.default)({bookmarks:t})),this.addEvents(),this.resize(),this.showBookmarkIndex()}},{key:"addEvents",value:function(){var e=this;this.container.find(".bookmark").off("click").on("click",function(t){e.onBookmarkNavigate($(t.currentTarget))})}},{key:"onBookmarkNavigate",value:function(e){var t=this,n=e.data("index");this.bookmarkNavigationInProgress=!0,app.Controller.navigateToSection({index:n,animate:!0}).then(function(){t.bookmarkNavigationInProgress=!1,t.showBookmarkIndex(n)})}}]),e}();t.default=u,e.exports=t.default}),define("lib-build/tpl",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),define("lib-build/tpl!storymaps/common/ui/share/ShareDialog",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal-dialog">\r\n  <div class="modal-content">\r\n\r\n    <div class="modal-logo"></div>\r\n    <div class="modal-header">\r\n      <h4 class="modal-title"></h4>\r\n    </div>\r\n\r\n    <div class="modal-body">\r\n      <div class="share-url-social">\r\n        <div class="share-url-panel"></div>\r\n        <div class="share-social-container">\r\n          <i class="social-icon share_facebook fa fa-facebook-square" tabindex="0" aria-label="Share on Facebook button"></i>\r\n          <i class="social-icon share_twitter fa fa-twitter" tabindex="0" aria-label="Share on Twitter button"></i>\r\n        </div>\r\n      </div>\r\n\r\n      <div class="embed-title"></div>\r\n      <div class="share-embed-panel"></div>\r\n\r\n      <div class="checkbox autoplay-container">\r\n        <label>\r\n          <input type="checkbox" class="autoplay-checkbox" value="autoplay" />\r\n          <span class="autoplay-label"></span>\r\n        </label>\r\n        <span class="help autoplay-help" data-toggle="tooltip">\r\n          <i class="fa fa-question-circle" aria-hidden="true"></i>\r\n        </span>\r\n        <span class="autoplay-notification"></span>\r\n      </div>\r\n    </div>\r\n\r\n    <div class="modal-footer">\r\n      <button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal"></button>\r\n    </div>\r\n  </div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareDialog",[],function(){}),define("lib-build/less!storymaps/common/ui/share/ShareDialog",[],function(){}),define("lib-build/tpl!storymaps/common/ui/share/ShareURLPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="share-url-container">\r\n\t<span class="share-btn glyphicon glyphicon-copy" data-clipboard-text="" tabindex="0" aria-label="Copy bitly link"></span>\r\n  <input type="text" class="form-control bitlylink" readonly="true" aria-label="bitly link"/>\r\n\t<a class="btn btn-primary btn-bitlylink-open" target="_blank"></a>\r\n\t<div class="share-status-wrapper"><span class="share-status"></span></div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareURLPanel",[],function(){}),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define("lib/clipboard/dist/clipboard",[],e);else{var t;t="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,t.Clipboard=e()}}(function(){var e;return function e(t,n,i){function r(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return r(n?n:e)},c,c.exports,e,t,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(e,t,n){function i(e,t){for(;e&&e!==document;){if(e.matches(t))return e;e=e.parentNode}}if(Element&&!Element.prototype.matches){var r=Element.prototype;r.matches=r.matchesSelector||r.mozMatchesSelector||r.msMatchesSelector||r.oMatchesSelector||r.webkitMatchesSelector}t.exports=i},{}],2:[function(e,t,n){function i(e,t,n,i,o){var a=r.apply(this,arguments);return e.addEventListener(n,a,o),{destroy:function(){e.removeEventListener(n,a,o)}}}function r(e,t,n,i){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&i.call(e,n)}}var o=e("./closest");t.exports=i},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){var t=Object.prototype.toString.call(e);return"[object Function]"===t}},{}],4:[function(e,t,n){function i(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return r(e,t,n);if(s.nodeList(e))return o(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function r(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var s=e("./is"),l=e("delegate");t.exports=i},{"./is":3,delegate:2}],5:[function(e,t,n){function i(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),i=document.createRange();i.selectNodeContents(e),n.removeAllRanges(),n.addRange(i),t=n.toString()}return t}t.exports=i},{}],6:[function(e,t,n){function i(){}i.prototype={on:function(e,t,n){var i=this.e||(this.e={});return(i[e]||(i[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function i(){r.off(e,i),t.apply(n,arguments)}var r=this;return i._=t,this.on(e,i,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),i=0,r=n.length;for(i;i<r;i++)n[i].fn.apply(n[i].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),i=n[e],r=[];if(i&&t)for(var o=0,a=i.length;o<a;o++)i[o].fn!==t&&i[o].fn._!==t&&r.push(i[o]);return r.length?n[e]=r:delete n[e],this}},t.exports=i},{}],7:[function(t,n,i){!function(r,o){if("function"==typeof e&&e.amd)e(["module","select"],o);else if("undefined"!=typeof i)o(n,t("select"));else{var a={exports:{}};o(a,r.select),r.clipboardAction=a.exports}}(this,function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=n(t),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.resolveOptions(t),this.initSelection()}return a(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,n)),this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==("undefined"==typeof e?"undefined":o(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=s})},{select:5}],8:[function(t,n,i){!function(r,o){if("function"==typeof e&&e.amd)e(["module","./clipboard-action","tiny-emitter","good-listener"],o);else if("undefined"!=typeof i)o(n,t("./clipboard-action"),t("tiny-emitter"),t("good-listener"));else{var a={exports:{}};o(a,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=a.exports}}(this,function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=r(t),c=r(n),d=r(i),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function(e){function t(e,n){o(this,t);var i=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.resolveOptions(n),i.listenClick(e),i}return s(t,e),p(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,d.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}(c.default);e.exports=f})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),define("storymaps/common/ui/share/ShareURLPanel",["lib-build/tpl!./ShareURLPanel","lib-build/css!./ShareURLPanel","../../utils/SocialSharing","dojo/has","lib/clipboard/dist/clipboard"],function(e,t,n,i,r){return function(t){function o(e){s.val(e),t.find(".btn-bitlylink-open").attr("href",e+"&preview"),n.requestBitly(e).then(function(e){t.find(".share-btn").data("clipboardText",e),s.val(e).select()});var i=new r(t.find(".share-btn")[0],{text:function(e){return $(e).data("clipboardText")}});t.find(".share-btn").off("keypress").on("keypress",function(e){13===e.keyCode&&$(this).trigger("click")}),i.on("success",function(){t.find(".share-btn").removeClass("glyphicon-copy").addClass("glyphicon-ok"),t.find(".share-status").show(),t.find(".bitlylink")[0].selectionStart=t.find(".bitlylink")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("glyphicon-copy").removeClass("glyphicon-ok"),t.find(".share-status").hide()},2e3)})}function a(){t.find(".bitlylink").click(function(){this.setSelectionRange(0,this.value.length)})}t.append(e({}));var s=t.find(".bitlylink"),l=null;a(),this.present=function(e){l=n.cleanURL(e,!0),o(e),t.find(".btn-bitlylink-open").html(i18n.viewer.shareFromCommon.open),t.find(".share-url-container").toggleClass("touch",!!i("touch")),t.find(".share-btn").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)},this.focus=function(){s.select()},this.setAutoplay=function(e){var t=l;e&&(t+=t.match(/\?/)?"&":"?",t+="autoplay"),o(t)}}}),define("lib-build/tpl!storymaps/common/ui/share/ShareEmbedPanel",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="share-embed-container">\r\n\t<div class="embed-explain"></div>\r\n\r\n\t<div class="share-embed-wrapper">\r\n\t\t<div class="share-btn glyphicon glyphicon-copy" data-clipboard-text="" tabindex="0" aria-label="Copy embed code"></div>\r\n\t\t<textarea class="form-control embedTextarea" readonly="true" tabindex="0" aria-label="Embed code"></textarea>\r\n\t</div>\r\n\t<div class="share-status-wrapper"><span class="share-status"></span></div>\r\n\r\n\t<div>\r\n\t\t<span id="embed-lbl" class="embed-lbl-size"></span>\r\n\t\t<div class="btn-group" aria-labelled-by="embed-lbl">\r\n\t\t\t<button class="btn btn-default btn-sm dropdown-toggle" type="button" data-toggle="dropdown">\r\n\t\t\t\t<span class="embed-sizes-btn"></span>&nbsp;<span class="caret"></span>\r\n\t\t\t</button>\r\n\t\t\t<ul class="dropdown-menu embed-sizes" role="menu"></ul>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n';return __p}}),define("lib-build/css!storymaps/common/ui/share/ShareEmbedPanel",[],function(){}),define("storymaps/common/ui/share/ShareEmbedPanel",["lib-build/tpl!./ShareEmbedPanel","lib-build/css!./ShareEmbedPanel","dojo/has","lib/clipboard/dist/clipboard"],function(e,t,n,i){return function(t){function r(){$.each(l,function(e,n){t.find(".embed-sizes").append('<li><a data-width="'+n.width+'" data-height="'+n.height+'">'+n.width+" / "+n.height+"</a></li>")}),t.find(".embed-sizes a").click(function(){var e=$(this);e.parents(".btn-group").find(".embed-sizes-btn").text(e.text()),o(e.data("width"),e.data("height"))})}function o(e,n){var r=t.find(".embedTextarea");r.val(s.replace("%URL%",u).replace("%WIDTH%",e).replace("%HEIGHT%",n)),t.find(".share-btn").data("clipboardText",r.val());var o=new i(t.find(".share-btn")[0],{text:function(e){return $(e).data("clipboardText")}});t.find(".share-btn").off("keypress").on("keypress",function(e){13===e.keyCode&&$(this).trigger("click")}),o.on("success",function(){t.find(".share-btn").removeClass("glyphicon-copy").addClass("glyphicon-ok"),t.find(".share-status").show(),t.find(".embedTextarea")[0].selectionStart=t.find(".embedTextarea")[0].selectionEnd=-1,t.find(".bitlylink").focus(),setTimeout(function(){t.find(".share-btn").addClass("glyphicon-copy").removeClass("glyphicon-ok"),t.find(".share-status").hide()},2e3)})}function a(){t.find(".embedTextarea").click(function(){this.setSelectionRange(0,this.value.length)})}var s='<iframe width="%WIDTH%" height="%HEIGHT%" src="%URL%" frameborder="0" scrolling="no"></iframe>',l=[{width:"100%",height:"800px"},{width:"100%",height:"640px"},{width:"800px",height:"600px"},{width:"640px",height:"480px"}],u=null,c=null;t.append(e({})),r(),a(),this.present=function(e){u=e,c=e,t.find(".embed-explain").html(i18n.viewer.shareFromCommon.embedExplain),t.find(".embed-lbl-size").html(i18n.viewer.shareFromCommon.size),t.find(".embed-sizes a").eq(0).click(),t.find(".share-embed-wrapper").toggleClass("touch",!!n("touch")),t.find(".share-clipboard").attr("title",i18n.viewer.shareFromCommon.copy),t.find(".share-status").html(i18n.viewer.shareFromCommon.copied)},this.setAutoplay=function(e){var n=c;e&&(n+=n.match(/\?/)?"&":"?",n+="autoplay"),u=n,t.find(".embed-sizes a").eq(0).click()}}}),define("storymaps/common/ui/share/ShareDialog",["lib-build/tpl!./ShareDialog","lib-build/css!./ShareDialog","lib-build/less!./ShareDialog","./ShareURLPanel","./ShareEmbedPanel","../../utils/SocialSharing"],function(e,t,n,i,r,o){return function(t){function n(e){t.find(".share_facebook").toggle(e.facebook),e.facebook&&t.find(".share_facebook").off("click").click(function(){a($(this).data("url"))}).on("keypress",function(e){13===e.keyCode&&a($(this).data("url"))}),t.find(".share_twitter").toggle(e.twitter),e.twitter&&t.find(".share_twitter").off("click").click(function(){s($(this).data("url"))}).on("keypress",function(e){13===e.keyCode&&s($(this).data("url"))})}function a(e){o.shareFacebook("","",null,e)}function s(e){var t=$("<div>"+app.data.title+"</div>").text();o.shareTwitter(t,e)}t.append(e({}));var l=new i(t.find(".share-url-panel")),u=new r(t.find(".share-embed-panel"));t.on("shown.bs.modal",function(){l.focus()}),t.find(".autoplay-checkbox").change(function(){l.setAutoplay(!!this.checked),u.setAutoplay(!!this.checked),t.find(".autoplay-notification").html(i18n.viewer.shareFromCommon.linksupdated).fadeIn(),setTimeout(function(){t.find(".autoplay-notification").fadeOut()},1e3)}),this.present=function(e,i){i=i||{facebook:!1,twitter:!1},t.find(".social-container").toggle(i.facebook||i.twitter),n(i),l.present(e),u.present(e),t.find(".modal-title").html(i18n.viewer.headerFromCommon.share),t.find(".embed-title").html(i18n.viewer.shareFromCommon.embed),t.find(".btn-close").html(i18n.viewer.common.close),t.find(".autoplay-label").html(i18n.viewer.shareFromCommon.autoplayLabel),t.find(".autoplay-help").tooltip({title:i18n.viewer.shareFromCommon.autoplayExplain1+"<br /><br />"+i18n.viewer.shareFromCommon.autoplayExplain2,html:!0}),t.find(".autoplay-checkbox").prop("checked",!1),t.modal({keyboard:!0})}}}),define("lib-build/less!storymaps-react/tpl/view/ui/Header",[],function(){}),define("storymaps-react/tpl/view/ui/Header",["module","exports","lib-build/i18n!resources/tpl/builder/nls/app","storymaps/common/utils/CommonHelper","storymaps-react/tpl/view/media/Media","storymaps/tpl/view/ui/ProgressBar","./Bookmarks","storymaps/common/ui/share/ShareDialog","storymaps/common/utils/SocialSharing","dojo/has","lib-build/less!./Header"],function(e,t,n,i,r,o,a,s,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var p=c(n),f=c(i),h=c(r),m=c(o),v=c(a),g=c(s),b=c(l),y=c(u),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=50,C=function(){function e(){d(this,e),this._node=$(".story-header"),this._bookmarksNode=this._node.find(".bookmarks"),this._shareDialog=new g.default($("#shareDialog")),this._progressBar=new m.default,this._bookmarks=new v.default(this._node.find(".bookmarks")),this._isCompact=null,this._currentSection=null,this.initShareTooltip()}return _(e,[{key:"render",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.logo,i=t.link,r=t.social,o=t.title,a={logoEnabled:n.enabled,logoURL:h.default.addToken(n.url),logoTarget:n.link,linkURL:i.url,linkText:i.title};this.setLogo(this._node,a).then(function(){e._bookmarks.render(t.bookmarks)},function(){e._bookmarks.render(t.bookmarks)}),this.setLink(this._node,a),this._node.find(".title").html(o),this._node.find(".title").off("click").on("click",function(){app.Controller.navigateToSection({index:0,animate:!1})}),this._node.find(".share-btn").off("click").click(this._onShareBtnClick.bind(this)).toggleClass("active",!!r.enabled).off("keypress").on("keypress",function(e){console.debug("hello keypress"),13===e.keyCode&&r.enabled&&this._onShareBtnClick()}.bind(this)),this._progressBar.start(),this._bookmarks.render(t.bookmarks),this.toggleShareButton()}},{key:"initShareTooltip",value:function(){var e=this._node.find('.share-btn-container[data-toggle="tooltip"]');e.tooltip({title:p.default.builder.header.sharingNotAvailable,placement:"auto left"}),e.on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("custom-share-tooltip")}),e.tooltip("disable")}},{key:"toggleShareButton",value:function(){var e=!0;window.app.data.appItem&&window.app.data.appItem.item&&window.app.data.appItem.item.access&&"private"!==app.data.appItem.item.access&&"shared"!==app.data.appItem.item.access&&(e=!1);var t=this._node.find(".share-btn"),n=this._node.find('.share-btn-container[data-toggle="tooltip"]');e||app.builder&&app.builder.isDirectCreationFirstSave?(t.addClass("share-disabled"),n.tooltip("enable")):(t.removeClass("share-disabled"),n.tooltip("disable"))}},{key:"disableShareButtonAutoplay",value:function(){var e=this._node.find(".share-btn"),t=this._node.find('.share-btn-container[data-toggle="tooltip"]');e.addClass("share-disabled"),t.tooltip("destroy").tooltip({title:window.i18n.viewer.headerFromCommon.tooltipAutoplayDisabled,trigger:"hover",placement:"left"})}},{key:"setLogo",value:function(e,t){return new Promise(function(n,i){if(t.logoEnabled&&t.logoURL&&"NO_LOGO"!=t.logoURL){if(f.default.uploadedImageNeedsFixing(t.logoURL)){t.logoURL=f.default.fixUploadedImageUrl(t.logoURL);var r=app.data.appItem.data.values.settings.header.logo;r.url=f.default.fixUploadedImageUrl(r.url)}e.find(".logoLink").css("cursor",t.logoTarget?"pointer":"default"),t.logoTarget?(e.find(".logoLink").attr("href",t.logoTarget),e.find(".logoLink").removeClass("logoLink-disabled")):e.find(".logoLink").addClass("logoLink-disabled");var o=e.find(".logoImg");o.on("error",function(){o.hide(),i()}),o.on("load",function(){n()}),o.attr("src",t.logoURL).show()}else e.find(".logoImg").hide(),i()})}},{key:"setLink",value:function(e,t){t.linkURL&&t.linkText?e.find(".linkContainer").html('<a href="'+t.linkURL+'" class="link" target="_blank">'+t.linkText+"</a>"):e.find(".linkContainer").html(t.linkText)}},{key:"update",value:function(e){this._progressBar.update(e.storyProgress),this._isCompact!==e.headerCompact&&(this._isCompact=e.headerCompact,this._node.toggleClass("compact",this._isCompact),this._bookmarksNode.toggleClass("bookmarks-hidden",this._isCompact),this._isCompact||this._node.css("background-color","rgba(0,0,0,1)")),this._currentSection!==e.sectionIndex&&(this._currentSection=e.sectionIndex,this._bookmarks.update(e.sectionIndex))}},{key:"resize",value:function(){this._bookmarks.resize()}},{key:"getHeight",value:function(){return w}},{key:"_onShareBtnClick",value:function(){this._shareDialog.present(b.default.cleanURL(document.location.href,!0),{facebook:!0,twitter:!0})}},{key:"showEditButton",value:function(){this._node.find(".header-edit-button").html('<i class="header-edit-icon fa fa-pencil"></i>'+p.default.builder.header.edit+'<span aria-hidden="true" class="header-edit-close"></span>').show().off("click").click(f.default.switchToBuilder),(0,y.default)("ff")||(0,y.default)("ie")||7==(0,y.default)("trident")?this._node.find(".header-edit-close").hide():this._node.find(".header-edit-close").click(function(){return this._node.find(".header-edit-button").hide(),$(window).resize(),!1}.bind(this))}}]),e}();t.default=C,e.exports=t.default}),define("lib-build/hbars!storymaps-react/tpl/view/ui/Autoplay",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){return'<div class="autoplay-controls">\r\n  <i class="autoplay-btn fa fa-pause" aria-hidden="true"></i>\r\n  <div class="slider-container ">\r\n\t\t<input type="text" />\r\n\t</div>\r\n</div>\r\n'},useData:!0})}),define("lib-build/less!storymaps-react/tpl/view/ui/Autoplay",[],function(){});var windowIsDefined="object"===("undefined"==typeof window?"undefined":_typeof(window));if(!function(e){if("function"==typeof define&&define.amd)define("lib/seiyria-bootstrap-slider/dist/bootstrap-slider.min",["jquery"],e);else if("object"===("undefined"==typeof module?"undefined":_typeof(module))&&module.exports){var t;try{t=require("jquery")}catch(e){t=null}module.exports=e(t)}else window&&(window.Slider=e(window.jQuery))}(function(e){var t="slider",n="bootstrapSlider";windowIsDefined&&!window.console&&(window.console={}),windowIsDefined&&!window.console.log&&(window.console.log=function(){}),windowIsDefined&&!window.console.warn&&(window.console.warn=function(){});var i;return function(e){function t(){}function n(e){function n(t){t.prototype.option||(t.prototype.option=function(t){e.isPlainObject(t)&&(this.options=e.extend(!0,this.options,t))})}function r(t,n){e.fn[t]=function(r){if("string"==typeof r){for(var a=i.call(arguments,1),s=0,l=this.length;l>s;s++){var u=this[s],c=e.data(u,t);if(c)if(e.isFunction(c[r])&&"_"!==r.charAt(0)){var d=c[r].apply(c,a);if(void 0!==d&&d!==c)return d}else o("no such method '"+r+"' for "+t+" instance");else o("cannot call methods on "+t+" prior to initialization; attempted to call '"+r+"'")}return this}var p=this.map(function(){var i=e.data(this,t);return i?(i.option(r),i._init()):(i=new n(this,r),e.data(this,t,i)),e(this)});return!p||p.length>1?p:p[0]}}if(e){var o="undefined"==typeof console?t:function(e){console.error(e)};return e.bridget=function(e,t){n(t),r(e,t)},e.bridget}}var i=Array.prototype.slice;n(e)}(e),function(e){function r(t,n){function i(e,t){var n="data-slider-"+t.replace(/_/g,"-"),i=e.getAttribute(n);try{return JSON.parse(i)}catch(e){return i}}this._state={value:null,enabled:null,offset:null,size:null,percentage:null,inDrag:!1,over:!1},"string"==typeof t?this.element=document.querySelector(t):t instanceof HTMLElement&&(this.element=t),n=n?n:{};for(var r=Object.keys(this.defaultOptions),o=0;o<r.length;o++){var s=r[o],l=n[s];l="undefined"!=typeof l?l:i(this.element,s),l=null!==l?l:this.defaultOptions[s],this.options||(this.options={}),this.options[s]=l}"vertical"!==this.options.orientation||"top"!==this.options.tooltip_position&&"bottom"!==this.options.tooltip_position?"horizontal"!==this.options.orientation||"left"!==this.options.tooltip_position&&"right"!==this.options.tooltip_position||(this.options.tooltip_position="top"):this.options.tooltip_position="right";var u,c,d,p,f,h=this.element.style.width,m=!1,v=this.element.parentNode;if(this.sliderElem)m=!0;else{this.sliderElem=document.createElement("div"),this.sliderElem.className="slider";var g=document.createElement("div");if(g.className="slider-track",c=document.createElement("div"),c.className="slider-track-low",u=document.createElement("div"),u.className="slider-selection",d=document.createElement("div"),d.className="slider-track-high",p=document.createElement("div"),p.className="slider-handle min-slider-handle",p.setAttribute("role","slider"),p.setAttribute("aria-valuemin",this.options.min),p.setAttribute("aria-valuemax",this.options.max),f=document.createElement("div"),f.className="slider-handle max-slider-handle",f.setAttribute("role","slider"),f.setAttribute("aria-valuemin",this.options.min),f.setAttribute("aria-valuemax",this.options.max),g.appendChild(c),g.appendChild(u),g.appendChild(d),this.rangeHighlightElements=[],Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var b=0;b<this.options.rangeHighlights.length;b++){var y=document.createElement("div");y.className="slider-rangeHighlight slider-selection",this.rangeHighlightElements.push(y),g.appendChild(y)}var _=Array.isArray(this.options.labelledby);if(_&&this.options.labelledby[0]&&p.setAttribute("aria-labelledby",this.options.labelledby[0]),_&&this.options.labelledby[1]&&f.setAttribute("aria-labelledby",this.options.labelledby[1]),!_&&this.options.labelledby&&(p.setAttribute("aria-labelledby",this.options.labelledby),f.setAttribute("aria-labelledby",this.options.labelledby)),this.ticks=[],Array.isArray(this.options.ticks)&&this.options.ticks.length>0){for(this.ticksContainer=document.createElement("div"),this.ticksContainer.className="slider-tick-container",o=0;o<this.options.ticks.length;o++){var w=document.createElement("div");w.className="slider-tick",this.ticks.push(w),this.ticksContainer.appendChild(w)}u.className+=" tick-slider-selection"}if(this.tickLabels=[],Array.isArray(this.options.ticks_labels)&&this.options.ticks_labels.length>0)for(this.tickLabelContainer=document.createElement("div"),this.tickLabelContainer.className="slider-tick-label-container",o=0;o<this.options.ticks_labels.length;o++){var C=document.createElement("div"),E=0===this.options.ticks_positions.length,k=this.options.reversed&&E?this.options.ticks_labels.length-(o+1):o;C.className="slider-tick-label",C.innerHTML=this.options.ticks_labels[k],this.tickLabels.push(C),this.tickLabelContainer.appendChild(C)}var T=function(e){var t=document.createElement("div");t.className="tooltip-arrow";
var n=document.createElement("div");n.className="tooltip-inner",e.appendChild(t),e.appendChild(n)},x=document.createElement("div");x.className="tooltip tooltip-main",x.setAttribute("role","presentation"),T(x);var S=document.createElement("div");S.className="tooltip tooltip-min",S.setAttribute("role","presentation"),T(S);var P=document.createElement("div");P.className="tooltip tooltip-max",P.setAttribute("role","presentation"),T(P),this.sliderElem.appendChild(g),this.sliderElem.appendChild(x),this.sliderElem.appendChild(S),this.sliderElem.appendChild(P),this.tickLabelContainer&&this.sliderElem.appendChild(this.tickLabelContainer),this.ticksContainer&&this.sliderElem.appendChild(this.ticksContainer),this.sliderElem.appendChild(p),this.sliderElem.appendChild(f),v.insertBefore(this.sliderElem,this.element),this.element.style.display="none"}if(e&&(this.$element=e(this.element),this.$sliderElem=e(this.sliderElem)),this.eventToCallbackMap={},this.sliderElem.id=this.options.id,this.touchCapable="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,this.touchX=0,this.touchY=0,this.tooltip=this.sliderElem.querySelector(".tooltip-main"),this.tooltipInner=this.tooltip.querySelector(".tooltip-inner"),this.tooltip_min=this.sliderElem.querySelector(".tooltip-min"),this.tooltipInner_min=this.tooltip_min.querySelector(".tooltip-inner"),this.tooltip_max=this.sliderElem.querySelector(".tooltip-max"),this.tooltipInner_max=this.tooltip_max.querySelector(".tooltip-inner"),a[this.options.scale]&&(this.options.scale=a[this.options.scale]),m===!0&&(this._removeClass(this.sliderElem,"slider-horizontal"),this._removeClass(this.sliderElem,"slider-vertical"),this._removeClass(this.tooltip,"hide"),this._removeClass(this.tooltip_min,"hide"),this._removeClass(this.tooltip_max,"hide"),["left","top","width","height"].forEach(function(e){this._removeProperty(this.trackLow,e),this._removeProperty(this.trackSelection,e),this._removeProperty(this.trackHigh,e)},this),[this.handle1,this.handle2].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top")},this),[this.tooltip,this.tooltip_min,this.tooltip_max].forEach(function(e){this._removeProperty(e,"left"),this._removeProperty(e,"top"),this._removeProperty(e,"margin-left"),this._removeProperty(e,"margin-top"),this._removeClass(e,"right"),this._removeClass(e,"top")},this)),"vertical"===this.options.orientation?(this._addClass(this.sliderElem,"slider-vertical"),this.stylePos="top",this.mousePos="pageY",this.sizePos="offsetHeight"):(this._addClass(this.sliderElem,"slider-horizontal"),this.sliderElem.style.width=h,this.options.orientation="horizontal",this.stylePos="left",this.mousePos="pageX",this.sizePos="offsetWidth"),this._setTooltipPosition(),Array.isArray(this.options.ticks)&&this.options.ticks.length>0&&(this.options.max=Math.max.apply(Math,this.options.ticks),this.options.min=Math.min.apply(Math,this.options.ticks)),Array.isArray(this.options.value)?(this.options.range=!0,this._state.value=this.options.value):this.options.range?this._state.value=[this.options.value,this.options.max]:this._state.value=this.options.value,this.trackLow=c||this.trackLow,this.trackSelection=u||this.trackSelection,this.trackHigh=d||this.trackHigh,"none"===this.options.selection&&(this._addClass(this.trackLow,"hide"),this._addClass(this.trackSelection,"hide"),this._addClass(this.trackHigh,"hide")),this.handle1=p||this.handle1,this.handle2=f||this.handle2,m===!0)for(this._removeClass(this.handle1,"round triangle"),this._removeClass(this.handle2,"round triangle hide"),o=0;o<this.ticks.length;o++)this._removeClass(this.ticks[o],"round triangle hide");var O=["round","triangle","custom"],I=-1!==O.indexOf(this.options.handle);if(I)for(this._addClass(this.handle1,this.options.handle),this._addClass(this.handle2,this.options.handle),o=0;o<this.ticks.length;o++)this._addClass(this.ticks[o],this.options.handle);this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this.setValue(this._state.value),this.handle1Keydown=this._keydown.bind(this,0),this.handle1.addEventListener("keydown",this.handle1Keydown,!1),this.handle2Keydown=this._keydown.bind(this,1),this.handle2.addEventListener("keydown",this.handle2Keydown,!1),this.mousedown=this._mousedown.bind(this),this.touchstart=this._touchstart.bind(this),this.touchmove=this._touchmove.bind(this),this.touchCapable&&(this.sliderElem.addEventListener("touchstart",this.touchstart,!1),this.sliderElem.addEventListener("touchmove",this.touchmove,!1)),this.sliderElem.addEventListener("mousedown",this.mousedown,!1),this.resize=this._resize.bind(this),window.addEventListener("resize",this.resize,!1),"hide"===this.options.tooltip?(this._addClass(this.tooltip,"hide"),this._addClass(this.tooltip_min,"hide"),this._addClass(this.tooltip_max,"hide")):"always"===this.options.tooltip?(this._showTooltip(),this._alwaysShowTooltip=!0):(this.showTooltip=this._showTooltip.bind(this),this.hideTooltip=this._hideTooltip.bind(this),this.sliderElem.addEventListener("mouseenter",this.showTooltip,!1),this.sliderElem.addEventListener("mouseleave",this.hideTooltip,!1),this.handle1.addEventListener("focus",this.showTooltip,!1),this.handle1.addEventListener("blur",this.hideTooltip,!1),this.handle2.addEventListener("focus",this.showTooltip,!1),this.handle2.addEventListener("blur",this.hideTooltip,!1)),this.options.enabled?this.enable():this.disable()}var o={formatInvalidInputErrorMsg:function(e){return"Invalid input value '"+e+"' passed in"},callingContextNotSliderInstance:"Calling context element does not have instance of Slider bound to it. Check your code to make sure the JQuery object returned from the call to the slider() initializer is calling the method"},a={linear:{toValue:function(e){var t=e/100*(this.options.max-this.options.min),n=!0;if(this.options.ticks_positions.length>0){for(var i,r,o,a=0,s=1;s<this.options.ticks_positions.length;s++)if(e<=this.options.ticks_positions[s]){i=this.options.ticks[s-1],o=this.options.ticks_positions[s-1],r=this.options.ticks[s],a=this.options.ticks_positions[s];break}var l=(e-o)/(a-o);t=i+l*(r-i),n=!1}var u=n?this.options.min:0,c=u+Math.round(t/this.options.step)*this.options.step;return c<this.options.min?this.options.min:c>this.options.max?this.options.max:c},toPercentage:function(e){if(this.options.max===this.options.min)return 0;if(this.options.ticks_positions.length>0){for(var t,n,i,r=0,o=0;o<this.options.ticks.length;o++)if(e<=this.options.ticks[o]){t=o>0?this.options.ticks[o-1]:0,i=o>0?this.options.ticks_positions[o-1]:0,n=this.options.ticks[o],r=this.options.ticks_positions[o];break}if(o>0){var a=(e-t)/(n-t);return i+a*(r-i)}}return 100*(e-this.options.min)/(this.options.max-this.options.min)}},logarithmic:{toValue:function(e){var t=0===this.options.min?0:Math.log(this.options.min),n=Math.log(this.options.max),i=Math.exp(t+(n-t)*e/100);return i=this.options.min+Math.round((i-this.options.min)/this.options.step)*this.options.step,i<this.options.min?this.options.min:i>this.options.max?this.options.max:i},toPercentage:function(e){if(this.options.max===this.options.min)return 0;var t=Math.log(this.options.max),n=0===this.options.min?0:Math.log(this.options.min),i=0===e?0:Math.log(e);return 100*(i-n)/(t-n)}}};i=function(e,t){return r.call(this,e,t),this},i.prototype={_init:function(){},constructor:i,defaultOptions:{id:"",min:0,max:10,step:1,precision:0,orientation:"horizontal",value:5,range:!1,selection:"before",tooltip:"show",tooltip_split:!1,handle:"round",reversed:!1,enabled:!0,formatter:function(e){return Array.isArray(e)?e[0]+" : "+e[1]:e},natural_arrow_keys:!1,ticks:[],ticks_positions:[],ticks_labels:[],ticks_snap_bounds:0,scale:"linear",focus:!1,tooltip_position:null,labelledby:null,rangeHighlights:[]},getElement:function(){return this.sliderElem},getValue:function(){return this.options.range?this._state.value:this._state.value[0]},setValue:function(e,t,n){e||(e=0);var i=this.getValue();this._state.value=this._validateInputValue(e);var r=this._applyPrecision.bind(this);this.options.range?(this._state.value[0]=r(this._state.value[0]),this._state.value[1]=r(this._state.value[1]),this._state.value[0]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[0])),this._state.value[1]=Math.max(this.options.min,Math.min(this.options.max,this._state.value[1]))):(this._state.value=r(this._state.value),this._state.value=[Math.max(this.options.min,Math.min(this.options.max,this._state.value))],this._addClass(this.handle2,"hide"),"after"===this.options.selection?this._state.value[1]=this.options.max:this._state.value[1]=this.options.min),this.options.max>this.options.min?this._state.percentage=[this._toPercentage(this._state.value[0]),this._toPercentage(this._state.value[1]),100*this.options.step/(this.options.max-this.options.min)]:this._state.percentage=[0,0,100],this._layout();var o=this.options.range?this._state.value:this._state.value[0];return this._setDataVal(o),t===!0&&this._trigger("slide",o),i!==o&&n===!0&&this._trigger("change",{oldValue:i,newValue:o}),this},destroy:function(){this._removeSliderEventHandlers(),this.sliderElem.parentNode.removeChild(this.sliderElem),this.element.style.display="",this._cleanUpEventCallbacksMap(),this.element.removeAttribute("data"),e&&(this._unbindJQueryEventHandlers(),this.$element.removeData("slider"))},disable:function(){return this._state.enabled=!1,this.handle1.removeAttribute("tabindex"),this.handle2.removeAttribute("tabindex"),this._addClass(this.sliderElem,"slider-disabled"),this._trigger("slideDisabled"),this},enable:function(){return this._state.enabled=!0,this.handle1.setAttribute("tabindex",0),this.handle2.setAttribute("tabindex",0),this._removeClass(this.sliderElem,"slider-disabled"),this._trigger("slideEnabled"),this},toggle:function(){return this._state.enabled?this.disable():this.enable(),this},isEnabled:function(){return this._state.enabled},on:function(e,t){return this._bindNonQueryEventHandler(e,t),this},off:function(t,n){e?(this.$element.off(t,n),this.$sliderElem.off(t,n)):this._unbindNonQueryEventHandler(t,n)},getAttribute:function(e){return e?this.options[e]:this.options},setAttribute:function(e,t){return this.options[e]=t,this},refresh:function(){return this._removeSliderEventHandlers(),r.call(this,this.element,this.options),e&&e.data(this.element,"slider",this),this},relayout:function(){return this._resize(),this._layout(),this},_removeSliderEventHandlers:function(){this.handle1.removeEventListener("keydown",this.handle1Keydown,!1),this.handle2.removeEventListener("keydown",this.handle2Keydown,!1),this.showTooltip&&(this.handle1.removeEventListener("focus",this.showTooltip,!1),this.handle2.removeEventListener("focus",this.showTooltip,!1)),this.hideTooltip&&(this.handle1.removeEventListener("blur",this.hideTooltip,!1),this.handle2.removeEventListener("blur",this.hideTooltip,!1)),this.showTooltip&&this.sliderElem.removeEventListener("mouseenter",this.showTooltip,!1),this.hideTooltip&&this.sliderElem.removeEventListener("mouseleave",this.hideTooltip,!1),this.sliderElem.removeEventListener("touchstart",this.touchstart,!1),this.sliderElem.removeEventListener("touchmove",this.touchmove,!1),this.sliderElem.removeEventListener("mousedown",this.mousedown,!1),window.removeEventListener("resize",this.resize,!1)},_bindNonQueryEventHandler:function(e,t){void 0===this.eventToCallbackMap[e]&&(this.eventToCallbackMap[e]=[]),this.eventToCallbackMap[e].push(t)},_unbindNonQueryEventHandler:function(e,t){var n=this.eventToCallbackMap[e];if(void 0!==n)for(var i=0;i<n.length;i++)if(n[i]===t){n.splice(i,1);break}},_cleanUpEventCallbacksMap:function(){for(var e=Object.keys(this.eventToCallbackMap),t=0;t<e.length;t++){var n=e[t];this.eventToCallbackMap[n]=null}},_showTooltip:function(){this.options.tooltip_split===!1?(this._addClass(this.tooltip,"in"),this.tooltip_min.style.display="none",this.tooltip_max.style.display="none"):(this._addClass(this.tooltip_min,"in"),this._addClass(this.tooltip_max,"in"),this.tooltip.style.display="none"),this._state.over=!0},_hideTooltip:function(){this._state.inDrag===!1&&this.alwaysShowTooltip!==!0&&(this._removeClass(this.tooltip,"in"),this._removeClass(this.tooltip_min,"in"),this._removeClass(this.tooltip_max,"in")),this._state.over=!1},_layout:function(){var e;if(e=this.options.reversed?[100-this._state.percentage[0],this.options.range?100-this._state.percentage[1]:this._state.percentage[1]]:[this._state.percentage[0],this._state.percentage[1]],this.handle1.style[this.stylePos]=e[0]+"%",this.handle1.setAttribute("aria-valuenow",this._state.value[0]),this.handle2.style[this.stylePos]=e[1]+"%",this.handle2.setAttribute("aria-valuenow",this._state.value[1]),this.rangeHighlightElements.length>0&&Array.isArray(this.options.rangeHighlights)&&this.options.rangeHighlights.length>0)for(var t=0;t<this.options.rangeHighlights.length;t++){var n=this._toPercentage(this.options.rangeHighlights[t].start),i=this._toPercentage(this.options.rangeHighlights[t].end),r=this._createHighlightRange(n,i);r?"vertical"===this.options.orientation?(this.rangeHighlightElements[t].style.top=r.start+"%",this.rangeHighlightElements[t].style.height=r.size+"%"):(this.rangeHighlightElements[t].style.left=r.start+"%",this.rangeHighlightElements[t].style.width=r.size+"%"):this.rangeHighlightElements[t].style.display="none"}if(Array.isArray(this.options.ticks)&&this.options.ticks.length>0){var o="vertical"===this.options.orientation?"height":"width",a="vertical"===this.options.orientation?"marginTop":"marginLeft",s=this._state.size/(this.options.ticks.length-1);if(this.tickLabelContainer){var l=0;if(0===this.options.ticks_positions.length)"vertical"!==this.options.orientation&&(this.tickLabelContainer.style[a]=-s/2+"px"),l=this.tickLabelContainer.offsetHeight;else for(u=0;u<this.tickLabelContainer.childNodes.length;u++)this.tickLabelContainer.childNodes[u].offsetHeight>l&&(l=this.tickLabelContainer.childNodes[u].offsetHeight);"horizontal"===this.options.orientation&&(this.sliderElem.style.marginBottom=l+"px")}for(var u=0;u<this.options.ticks.length;u++){var c=this.options.ticks_positions[u]||this._toPercentage(this.options.ticks[u]);this.options.reversed&&(c=100-c),this.ticks[u].style[this.stylePos]=c+"%",this._removeClass(this.ticks[u],"in-selection"),this.options.range?c>=e[0]&&c<=e[1]&&this._addClass(this.ticks[u],"in-selection"):"after"===this.options.selection&&c>=e[0]?this._addClass(this.ticks[u],"in-selection"):"before"===this.options.selection&&c<=e[0]&&this._addClass(this.ticks[u],"in-selection"),this.tickLabels[u]&&(this.tickLabels[u].style[o]=s+"px","vertical"!==this.options.orientation&&void 0!==this.options.ticks_positions[u]?(this.tickLabels[u].style.position="absolute",this.tickLabels[u].style[this.stylePos]=c+"%",this.tickLabels[u].style[a]=-s/2+"px"):"vertical"===this.options.orientation&&(this.tickLabels[u].style.marginLeft=this.sliderElem.offsetWidth+"px",this.tickLabelContainer.style.marginTop=this.sliderElem.offsetWidth/2*-1+"px"))}}var d;if(this.options.range){d=this.options.formatter(this._state.value),this._setText(this.tooltipInner,d),this.tooltip.style[this.stylePos]=(e[1]+e[0])/2+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px"),"vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");var p=this.options.formatter(this._state.value[0]);this._setText(this.tooltipInner_min,p);var f=this.options.formatter(this._state.value[1]);this._setText(this.tooltipInner_max,f),this.tooltip_min.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip_min,"margin-top",-this.tooltip_min.offsetHeight/2+"px"):this._css(this.tooltip_min,"margin-left",-this.tooltip_min.offsetWidth/2+"px"),this.tooltip_max.style[this.stylePos]=e[1]+"%","vertical"===this.options.orientation?this._css(this.tooltip_max,"margin-top",-this.tooltip_max.offsetHeight/2+"px"):this._css(this.tooltip_max,"margin-left",-this.tooltip_max.offsetWidth/2+"px")}else d=this.options.formatter(this._state.value[0]),this._setText(this.tooltipInner,d),this.tooltip.style[this.stylePos]=e[0]+"%","vertical"===this.options.orientation?this._css(this.tooltip,"margin-top",-this.tooltip.offsetHeight/2+"px"):this._css(this.tooltip,"margin-left",-this.tooltip.offsetWidth/2+"px");if("vertical"===this.options.orientation)this.trackLow.style.top="0",this.trackLow.style.height=Math.min(e[0],e[1])+"%",this.trackSelection.style.top=Math.min(e[0],e[1])+"%",this.trackSelection.style.height=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.bottom="0",this.trackHigh.style.height=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";else{this.trackLow.style.left="0",this.trackLow.style.width=Math.min(e[0],e[1])+"%",this.trackSelection.style.left=Math.min(e[0],e[1])+"%",this.trackSelection.style.width=Math.abs(e[0]-e[1])+"%",this.trackHigh.style.right="0",this.trackHigh.style.width=100-Math.min(e[0],e[1])-Math.abs(e[0]-e[1])+"%";var h=this.tooltip_min.getBoundingClientRect(),m=this.tooltip_max.getBoundingClientRect();"bottom"===this.options.tooltip_position?h.right>m.left?(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top="",this.tooltip_max.style.bottom="22px"):(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top=this.tooltip_min.style.top,this.tooltip_max.style.bottom=""):h.right>m.left?(this._removeClass(this.tooltip_max,"top"),this._addClass(this.tooltip_max,"bottom"),this.tooltip_max.style.top="18px"):(this._removeClass(this.tooltip_max,"bottom"),this._addClass(this.tooltip_max,"top"),this.tooltip_max.style.top=this.tooltip_min.style.top)}},_createHighlightRange:function(e,t){return this._isHighlightRange(e,t)?e>t?{start:t,size:e-t}:{start:e,size:t-e}:null},_isHighlightRange:function(e,t){return e>=0&&100>=e&&t>=0&&100>=t},_resize:function(e){this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos],this._layout()},_removeProperty:function(e,t){e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(t)},_mousedown:function(e){if(!this._state.enabled)return!1;this._state.offset=this._offset(this.sliderElem),this._state.size=this.sliderElem[this.sizePos];var t=this._getPercentage(e);if(this.options.range){var n=Math.abs(this._state.percentage[0]-t),i=Math.abs(this._state.percentage[1]-t);this._state.dragged=i>n?0:1,this._adjustPercentageForRangeSliders(t)}else this._state.dragged=0;this._state.percentage[this._state.dragged]=t,this._layout(),this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),this.mousemove&&document.removeEventListener("mousemove",this.mousemove,!1),this.mouseup&&document.removeEventListener("mouseup",this.mouseup,!1),this.mousemove=this._mousemove.bind(this),this.mouseup=this._mouseup.bind(this),this.touchCapable&&(document.addEventListener("touchmove",this.mousemove,!1),document.addEventListener("touchend",this.mouseup,!1)),document.addEventListener("mousemove",this.mousemove,!1),document.addEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!0;var r=this._calculateValue();return this._trigger("slideStart",r),this._setDataVal(r),this.setValue(r,!1,!0),this._pauseEvent(e),this.options.focus&&this._triggerFocusOnHandle(this._state.dragged),!0},_touchstart:function(e){if(void 0===e.changedTouches)return void this._mousedown(e);var t=e.changedTouches[0];this.touchX=t.pageX,this.touchY=t.pageY},_triggerFocusOnHandle:function(e){0===e&&this.handle1.focus(),1===e&&this.handle2.focus()},_keydown:function(e,t){if(!this._state.enabled)return!1;var n;switch(t.keyCode){case 37:case 40:n=-1;break;case 39:case 38:n=1}if(n){if(this.options.natural_arrow_keys){var i="vertical"===this.options.orientation&&!this.options.reversed,r="horizontal"===this.options.orientation&&this.options.reversed;(i||r)&&(n=-n)}var o=this._state.value[e]+n*this.options.step;return this.options.range&&(o=[e?this._state.value[0]:o,e?o:this._state.value[1]]),this._trigger("slideStart",o),this._setDataVal(o),this.setValue(o,!0,!0),this._setDataVal(o),this._trigger("slideStop",o),this._layout(),this._pauseEvent(t),!1}},_pauseEvent:function(e){e.stopPropagation&&e.stopPropagation(),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,e.returnValue=!1},_mousemove:function(e){if(!this._state.enabled)return!1;var t=this._getPercentage(e);this._adjustPercentageForRangeSliders(t),this._state.percentage[this._state.dragged]=t,this._layout();var n=this._calculateValue(!0);return this.setValue(n,!0,!0),!1},_touchmove:function(e){if(void 0!==e.changedTouches){var t=e.changedTouches[0],n=t.pageX-this.touchX,i=t.pageY-this.touchY;this._state.inDrag||("vertical"===this.options.orientation&&5>=n&&n>=-5&&(i>=15||-15>=i)?this._mousedown(e):5>=i&&i>=-5&&(n>=15||-15>=n)&&this._mousedown(e))}},_adjustPercentageForRangeSliders:function(e){if(this.options.range){var t=this._getNumDigitsAfterDecimalPlace(e);t=t?t-1:0;var n=this._applyToFixedAndParseFloat(e,t);0===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[1],t)<n?(this._state.percentage[0]=this._state.percentage[1],this._state.dragged=1):1===this._state.dragged&&this._applyToFixedAndParseFloat(this._state.percentage[0],t)>n&&(this._state.percentage[1]=this._state.percentage[0],this._state.dragged=0)}},_mouseup:function(){if(!this._state.enabled)return!1;this.touchCapable&&(document.removeEventListener("touchmove",this.mousemove,!1),document.removeEventListener("touchend",this.mouseup,!1)),document.removeEventListener("mousemove",this.mousemove,!1),document.removeEventListener("mouseup",this.mouseup,!1),this._state.inDrag=!1,this._state.over===!1&&this._hideTooltip();var e=this._calculateValue(!0);return this._layout(),this._setDataVal(e),this._trigger("slideStop",e),!1},_calculateValue:function(e){var t;if(this.options.range?(t=[this.options.min,this.options.max],0!==this._state.percentage[0]&&(t[0]=this._toValue(this._state.percentage[0]),t[0]=this._applyPrecision(t[0])),100!==this._state.percentage[1]&&(t[1]=this._toValue(this._state.percentage[1]),t[1]=this._applyPrecision(t[1]))):(t=this._toValue(this._state.percentage[0]),t=parseFloat(t),t=this._applyPrecision(t)),e){for(var n=[t,1/0],i=0;i<this.options.ticks.length;i++){var r=Math.abs(this.options.ticks[i]-t);r<=n[1]&&(n=[this.options.ticks[i],r])}if(n[1]<=this.options.ticks_snap_bounds)return n[0]}return t},_applyPrecision:function(e){var t=this.options.precision||this._getNumDigitsAfterDecimalPlace(this.options.step);return this._applyToFixedAndParseFloat(e,t)},_getNumDigitsAfterDecimalPlace:function(e){var t=(""+e).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);return t?Math.max(0,(t[1]?t[1].length:0)-(t[2]?+t[2]:0)):0},_applyToFixedAndParseFloat:function(e,t){var n=e.toFixed(t);return parseFloat(n)},_getPercentage:function(e){!this.touchCapable||"touchstart"!==e.type&&"touchmove"!==e.type||(e=e.touches[0]);var t=e[this.mousePos],n=this._state.offset[this.stylePos],i=t-n,r=i/this._state.size*100;return r=Math.round(r/this._state.percentage[2])*this._state.percentage[2],this.options.reversed&&(r=100-r),Math.max(0,Math.min(100,r))},_validateInputValue:function(e){if("number"==typeof e)return e;if(Array.isArray(e))return this._validateArray(e),e;throw new Error(o.formatInvalidInputErrorMsg(e))},_validateArray:function(e){for(var t=0;t<e.length;t++){var n=e[t];if("number"!=typeof n)throw new Error(o.formatInvalidInputErrorMsg(n))}},_setDataVal:function(e){this.element.setAttribute("data-value",e),this.element.setAttribute("value",e),this.element.value=e},_trigger:function(t,n){n=n||0===n?n:void 0;var i=this.eventToCallbackMap[t];if(i&&i.length)for(var r=0;r<i.length;r++){var o=i[r];o(n)}e&&this._triggerJQueryEvent(t,n)},_triggerJQueryEvent:function(e,t){var n={type:e,value:t};this.$element.trigger(n),this.$sliderElem.trigger(n)},_unbindJQueryEventHandlers:function(){this.$element.off(),this.$sliderElem.off()},_setText:function(e,t){"undefined"!=typeof e.textContent?e.textContent=t:"undefined"!=typeof e.innerText&&(e.innerText=t)},_removeClass:function(e,t){for(var n=t.split(" "),i=e.className,r=0;r<n.length;r++){var o=n[r],a=new RegExp("(?:\\s|^)"+o+"(?:\\s|$)");i=i.replace(a," ")}e.className=i.trim()},_addClass:function(e,t){for(var n=t.split(" "),i=e.className,r=0;r<n.length;r++){var o=n[r],a=new RegExp("(?:\\s|^)"+o+"(?:\\s|$)"),s=a.test(i);s||(i+=" "+o)}e.className=i.trim()},_offsetLeft:function(e){return e.getBoundingClientRect().left},_offsetTop:function(e){for(var t=e.offsetTop;(e=e.offsetParent)&&!isNaN(e.offsetTop);)t+=e.offsetTop,"BODY"!==e.tagName&&(t-=e.scrollTop);return t},_offset:function(e){return{left:this._offsetLeft(e),top:this._offsetTop(e)}},_css:function(t,n,i){if(e)e.style(t,n,i);else{var r=n.replace(/^-ms-/,"ms-").replace(/-([\da-z])/gi,function(e,t){return t.toUpperCase()});t.style[r]=i}},_toValue:function(e){return this.options.scale.toValue.apply(this,[e])},_toPercentage:function(e){return this.options.scale.toPercentage.apply(this,[e])},_setTooltipPosition:function(){var e=[this.tooltip,this.tooltip_min,this.tooltip_max];if("vertical"===this.options.orientation){var t=this.options.tooltip_position||"right",n="left"===t?"right":"left";e.forEach(function(e){this._addClass(e,t),e.style[n]="100%"}.bind(this))}else"bottom"===this.options.tooltip_position?e.forEach(function(e){this._addClass(e,"bottom"),e.style.top="22px"}.bind(this)):e.forEach(function(e){this._addClass(e,"top"),e.style.top=-this.tooltip.outerHeight-14+"px"}.bind(this))}},e&&!function(){var r=void 0;e.fn.slider?(windowIsDefined&&window.console.warn("bootstrap-slider.js - WARNING: $.fn.slider namespace is already bound. Use the $.fn.bootstrapSlider namespace instead."),r=n):(e.bridget(t,i),r=t),e.bridget(n,i),e(function(){e("input[data-provide=slider]")[r]()})}()}(e),i}),define("lib-build/css!lib/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min",[],function(){}),define("storymaps-react/tpl/view/ui/Autoplay",["module","exports","lib-build/hbars!./Autoplay","dojo/has","lib-build/less!./Autoplay","lib/seiyria-bootstrap-slider/dist/bootstrap-slider.min","lib-build/css!lib/seiyria-bootstrap-slider/dist/css/bootstrap-slider.min"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=1e3,c=10,d=3e3,p=2e3,f=2e3,h=50,m=180,v=function(){function e(){o(this,e),this._node=null,this._autoplayBtn=null,this._inProgress=!1,this._delay=null,this._slider=null,this._isHoverContainer=!1,this._mouseMoveTime=Date.now(),this._init()}return l(e,[{key:"start",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this._delay=1e3*this._slider.slider("getValue"),this._inProgress||(this._inProgress=!0,e.immediate?this._next():setTimeout(this._next.bind(this),this._delay),this._updatePlayPauseButton(!0))}},{key:"stop",value:function(){this._inProgress=!1,this._updatePlayPauseButton(!1)}},{key:"isPlaying",value:function(){return this._inProgress}},{key:"_next",value:function(){var e=app.Controller._currentSectionIndex,t=app.display.sections[e],n=t.type,i=t.node.height(),r=app.display.windowHeight,o=$(document).scrollTop(),a=0;if(this._inProgress){if("cover"==n)a=r-h+1;else if("immersive"==n){var s=Math.ceil(t.top+i-o);a=s>=i-1?r+(s-i)-m:s==i-r+m?r+m:s==r?r-h:r}else a="title"==n?r:r;console.log("scrolling",a+"px on a ",n,"section");for(var l=-1,c=app.display.sections.length-1;c>0;c--){var d=app.display.sections[c];if(o+a>d.top){l=c;break}}if(l!=e){var v=app.display.sections[l];if(v&&"immersive"==v.type){var g=v.top;o+a>g&&(a=g-o-h+1)}}else{var b=app.display.sections[e+1];b&&b.top-(o+a)<200&&(a+=b.top-(o+a)-h)}$("html,body").animate({scrollTop:o+a},{duration:u}).promise().then(function(){$(document).scrollTop()+r>=$("body").height()?setTimeout(function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,app.ui.update({forceUpdate:!0}),setTimeout(this._next.bind(this),f)}.bind(this),p):setTimeout(this._next.bind(this),this._delay)}.bind(this))}}},{key:"_showContainer",value:function(){var e=Date.now();this._mouseMoveTime>e-150&&this._node.removeClass("fade"),this._mouseMoveTime=e}},{key:"_hideContainer",value:function(){!this._isHoverContainer&&Date.now()>this._mouseMoveTime+d&&this._node.addClass("fade")}},{key:"_updatePlayPauseButton",value:function(e){e?this._autoplayBtn.removeClass("fa-play").addClass("fa-pause"):this._autoplayBtn.removeClass("fa-pause").addClass("fa-play")}},{key:"_init",value:function(){var e=this;$("body").append(a.default),this._node=$(".autoplay-controls"),this._autoplayBtn=this._node.find(".autoplay-btn"),(0,s.default)("ios")||($(".sections").mousemove(this._showContainer.bind(this)),setInterval(this._hideContainer.bind(this),1e3),this._node.hover(function(){e._isHoverContainer=!0},function(){e._isHoverContainer=!1,e._hideContainer()})),this._slider=this._node.find(".slider-container input").slider({min:5,max:60,value:c,formatter:function(e){return e+"s"}}),this._node.find(".slider-container input").on("slideStop",function(){e.isPlaying()&&e.start({immediate:!1})}),this._autoplayBtn.click(function(){var t=e._autoplayBtn.hasClass("fa-play");t?e.start({immediate:!0}):e.stop()}),$(window).bind("mousewheel DOMMouseScroll",function(){e._inProgress&&(e.stop(),e._mouseMoveTime=Date.now(),e._autoplayBtn.removeClass("fa-pause").addClass("fa-play"),e._node.removeClass("fade"))})}}]),e}();t.default=v,e.exports=t.default}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(e){"use strict";var t=e.fn.jquery.split(" ")[0].split(".");if(t[0]<2&&t[1]<9||1==t[0]&&9==t[1]&&t[2]<1||t[0]>2)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3")}(jQuery),+function(e){"use strict";function t(){var e=document.createElement("bootstrap"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in t)if(void 0!==e.style[n])return{end:t[n]};return!1}e.fn.emulateTransitionEnd=function(t){var n=!1,i=this;e(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||e(i).trigger(e.support.transition.end)};return setTimeout(r,t),this},e(function(){e.support.transition=t(),e.support.transition&&(e.event.special.bsTransitionEnd={bindType:e.support.transition.end,delegateType:e.support.transition.end,handle:function(t){return e(t.target).is(this)?t.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var n=e(this),r=n.data("bs.alert");r||n.data("bs.alert",r=new i(this)),"string"==typeof t&&r[t].call(n)})}var n='[data-dismiss="alert"]',i=function(t){e(t).on("click",n,this.close)};i.VERSION="3.3.6",i.TRANSITION_DURATION=150,i.prototype.close=function(t){function n(){a.detach().trigger("closed.bs.alert").remove()}var r=e(this),o=r.attr("data-target");o||(o=r.attr("href"),o=o&&o.replace(/.*(?=#[^\s]*$)/,""));var a=e(o);t&&t.preventDefault(),a.length||(a=r.closest(".alert")),a.trigger(t=e.Event("close.bs.alert")),t.isDefaultPrevented()||(a.removeClass("in"),e.support.transition&&a.hasClass("fade")?a.one("bsTransitionEnd",n).emulateTransitionEnd(i.TRANSITION_DURATION):n())};var r=e.fn.alert;e.fn.alert=t,e.fn.alert.Constructor=i,e.fn.alert.noConflict=function(){
return e.fn.alert=r,this},e(document).on("click.bs.alert.data-api",n,i.prototype.close)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.button"),o="object"==typeof t&&t;r||i.data("bs.button",r=new n(this,o)),"toggle"==t?r.toggle():t&&r.setState(t)})}var n=function(t,i){this.$element=e(t),this.options=e.extend({},n.DEFAULTS,i),this.isLoading=!1};n.VERSION="3.3.6",n.DEFAULTS={loadingText:"loading..."},n.prototype.setState=function(t){var n="disabled",i=this.$element,r=i.is("input")?"val":"html",o=i.data();t+="Text",null==o.resetText&&i.data("resetText",i[r]()),setTimeout(e.proxy(function(){i[r](null==o[t]?this.options[t]:o[t]),"loadingText"==t?(this.isLoading=!0,i.addClass(n).attr(n,n)):this.isLoading&&(this.isLoading=!1,i.removeClass(n).removeAttr(n))},this),0)},n.prototype.toggle=function(){var e=!0,t=this.$element.closest('[data-toggle="buttons"]');if(t.length){var n=this.$element.find("input");"radio"==n.prop("type")?(n.prop("checked")&&(e=!1),t.find(".active").removeClass("active"),this.$element.addClass("active")):"checkbox"==n.prop("type")&&(n.prop("checked")!==this.$element.hasClass("active")&&(e=!1),this.$element.toggleClass("active")),n.prop("checked",this.$element.hasClass("active")),e&&n.trigger("change")}else this.$element.attr("aria-pressed",!this.$element.hasClass("active")),this.$element.toggleClass("active")};var i=e.fn.button;e.fn.button=t,e.fn.button.Constructor=n,e.fn.button.noConflict=function(){return e.fn.button=i,this},e(document).on("click.bs.button.data-api",'[data-toggle^="button"]',function(n){var i=e(n.target);i.hasClass("btn")||(i=i.closest(".btn")),t.call(i,"toggle"),e(n.target).is('input[type="radio"]')||e(n.target).is('input[type="checkbox"]')||n.preventDefault()}).on("focus.bs.button.data-api blur.bs.button.data-api",'[data-toggle^="button"]',function(t){e(t.target).closest(".btn").toggleClass("focus",/^focus(in)?$/.test(t.type))})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.carousel"),o=e.extend({},n.DEFAULTS,i.data(),"object"==typeof t&&t),a="string"==typeof t?t:o.slide;r||i.data("bs.carousel",r=new n(this,o)),"number"==typeof t?r.to(t):a?r[a]():o.interval&&r.pause().cycle()})}var n=function(t,n){this.$element=e(t),this.$indicators=this.$element.find(".carousel-indicators"),this.options=n,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on("keydown.bs.carousel",e.proxy(this.keydown,this)),"hover"==this.options.pause&&!("ontouchstart"in document.documentElement)&&this.$element.on("mouseenter.bs.carousel",e.proxy(this.pause,this)).on("mouseleave.bs.carousel",e.proxy(this.cycle,this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=600,n.DEFAULTS={interval:5e3,pause:"hover",wrap:!0,keyboard:!0},n.prototype.keydown=function(e){if(!/input|textarea/i.test(e.target.tagName)){switch(e.which){case 37:this.prev();break;case 39:this.next();break;default:return}e.preventDefault()}},n.prototype.cycle=function(t){return t||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(e.proxy(this.next,this),this.options.interval)),this},n.prototype.getItemIndex=function(e){return this.$items=e.parent().children(".item"),this.$items.index(e||this.$active)},n.prototype.getItemForDirection=function(e,t){var n=this.getItemIndex(t),i="prev"==e&&0===n||"next"==e&&n==this.$items.length-1;if(i&&!this.options.wrap)return t;var r="prev"==e?-1:1,o=(n+r)%this.$items.length;return this.$items.eq(o)},n.prototype.to=function(e){var t=this,n=this.getItemIndex(this.$active=this.$element.find(".item.active"));return e>this.$items.length-1||0>e?void 0:this.sliding?this.$element.one("slid.bs.carousel",function(){t.to(e)}):n==e?this.pause().cycle():this.slide(e>n?"next":"prev",this.$items.eq(e))},n.prototype.pause=function(t){return t||(this.paused=!0),this.$element.find(".next, .prev").length&&e.support.transition&&(this.$element.trigger(e.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},n.prototype.next=function(){return this.sliding?void 0:this.slide("next")},n.prototype.prev=function(){return this.sliding?void 0:this.slide("prev")},n.prototype.slide=function(t,i){var r=this.$element.find(".item.active"),o=i||this.getItemForDirection(t,r),a=this.interval,s="next"==t?"left":"right",l=this;if(o.hasClass("active"))return this.sliding=!1;var u=o[0],c=e.Event("slide.bs.carousel",{relatedTarget:u,direction:s});if(this.$element.trigger(c),!c.isDefaultPrevented()){if(this.sliding=!0,a&&this.pause(),this.$indicators.length){this.$indicators.find(".active").removeClass("active");var d=e(this.$indicators.children()[this.getItemIndex(o)]);d&&d.addClass("active")}var p=e.Event("slid.bs.carousel",{relatedTarget:u,direction:s});return e.support.transition&&this.$element.hasClass("slide")?(o.addClass(t),o[0].offsetWidth,r.addClass(s),o.addClass(s),r.one("bsTransitionEnd",function(){o.removeClass([t,s].join(" ")).addClass("active"),r.removeClass(["active",s].join(" ")),l.sliding=!1,setTimeout(function(){l.$element.trigger(p)},0)}).emulateTransitionEnd(n.TRANSITION_DURATION)):(r.removeClass("active"),o.addClass("active"),this.sliding=!1,this.$element.trigger(p)),a&&this.cycle(),this}};var i=e.fn.carousel;e.fn.carousel=t,e.fn.carousel.Constructor=n,e.fn.carousel.noConflict=function(){return e.fn.carousel=i,this};var r=function(n){var i,r=e(this),o=e(r.attr("data-target")||(i=r.attr("href"))&&i.replace(/.*(?=#[^\s]+$)/,""));if(o.hasClass("carousel")){var a=e.extend({},o.data(),r.data()),s=r.attr("data-slide-to");s&&(a.interval=!1),t.call(o,a),s&&o.data("bs.carousel").to(s),n.preventDefault()}};e(document).on("click.bs.carousel.data-api","[data-slide]",r).on("click.bs.carousel.data-api","[data-slide-to]",r),e(window).on("load",function(){e('[data-ride="carousel"]').each(function(){var n=e(this);t.call(n,n.data())})})}(jQuery),+function(e){"use strict";function t(t){var n,i=t.attr("data-target")||(n=t.attr("href"))&&n.replace(/.*(?=#[^\s]+$)/,"");return e(i)}function n(t){return this.each(function(){var n=e(this),r=n.data("bs.collapse"),o=e.extend({},i.DEFAULTS,n.data(),"object"==typeof t&&t);!r&&o.toggle&&/show|hide/.test(t)&&(o.toggle=!1),r||n.data("bs.collapse",r=new i(this,o)),"string"==typeof t&&r[t]()})}var i=function(t,n){this.$element=e(t),this.options=e.extend({},i.DEFAULTS,n),this.$trigger=e('[data-toggle="collapse"][href="#'+t.id+'"],[data-toggle="collapse"][data-target="#'+t.id+'"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};i.VERSION="3.3.6",i.TRANSITION_DURATION=350,i.DEFAULTS={toggle:!0},i.prototype.dimension=function(){var e=this.$element.hasClass("width");return e?"width":"height"},i.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass("in")){var t,r=this.$parent&&this.$parent.children(".panel").children(".in, .collapsing");if(!(r&&r.length&&(t=r.data("bs.collapse"),t&&t.transitioning))){var o=e.Event("show.bs.collapse");if(this.$element.trigger(o),!o.isDefaultPrevented()){r&&r.length&&(n.call(r,"hide"),t||r.data("bs.collapse",null));var a=this.dimension();this.$element.removeClass("collapse").addClass("collapsing")[a](0).attr("aria-expanded",!0),this.$trigger.removeClass("collapsed").attr("aria-expanded",!0),this.transitioning=1;var s=function(){this.$element.removeClass("collapsing").addClass("collapse in")[a](""),this.transitioning=0,this.$element.trigger("shown.bs.collapse")};if(!e.support.transition)return s.call(this);var l=e.camelCase(["scroll",a].join("-"));this.$element.one("bsTransitionEnd",e.proxy(s,this)).emulateTransitionEnd(i.TRANSITION_DURATION)[a](this.$element[0][l])}}}},i.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass("in")){var t=e.Event("hide.bs.collapse");if(this.$element.trigger(t),!t.isDefaultPrevented()){var n=this.dimension();this.$element[n](this.$element[n]())[0].offsetHeight,this.$element.addClass("collapsing").removeClass("collapse in").attr("aria-expanded",!1),this.$trigger.addClass("collapsed").attr("aria-expanded",!1),this.transitioning=1;var r=function(){this.transitioning=0,this.$element.removeClass("collapsing").addClass("collapse").trigger("hidden.bs.collapse")};return e.support.transition?void this.$element[n](0).one("bsTransitionEnd",e.proxy(r,this)).emulateTransitionEnd(i.TRANSITION_DURATION):r.call(this)}}},i.prototype.toggle=function(){this[this.$element.hasClass("in")?"hide":"show"]()},i.prototype.getParent=function(){return e(this.options.parent).find('[data-toggle="collapse"][data-parent="'+this.options.parent+'"]').each(e.proxy(function(n,i){var r=e(i);this.addAriaAndCollapsedClass(t(r),r)},this)).end()},i.prototype.addAriaAndCollapsedClass=function(e,t){var n=e.hasClass("in");e.attr("aria-expanded",n),t.toggleClass("collapsed",!n).attr("aria-expanded",n)};var r=e.fn.collapse;e.fn.collapse=n,e.fn.collapse.Constructor=i,e.fn.collapse.noConflict=function(){return e.fn.collapse=r,this},e(document).on("click.bs.collapse.data-api",'[data-toggle="collapse"]',function(i){var r=e(this);r.attr("data-target")||i.preventDefault();var o=t(r),a=o.data("bs.collapse"),s=a?"toggle":r.data();n.call(o,s)})}(jQuery),+function(e){"use strict";function t(t){var n=t.attr("data-target");n||(n=t.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&e(n);return i&&i.length?i:t.parent()}function n(n){n&&3===n.which||(e(r).remove(),e(o).each(function(){var i=e(this),r=t(i),o={relatedTarget:this};r.hasClass("open")&&(n&&"click"==n.type&&/input|textarea/i.test(n.target.tagName)&&e.contains(r[0],n.target)||(r.trigger(n=e.Event("hide.bs.dropdown",o)),n.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger(e.Event("hidden.bs.dropdown",o)))))}))}function i(t){return this.each(function(){var n=e(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof t&&i[t].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(t){e(t).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.6",a.prototype.toggle=function(i){var r=e(this);if(!r.is(".disabled, :disabled")){var o=t(r),a=o.hasClass("open");if(n(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&e(document.createElement("div")).addClass("dropdown-backdrop").insertAfter(e(this)).on("click",n);var s={relatedTarget:this};if(o.trigger(i=e.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger(e.Event("shown.bs.dropdown",s))}return!1}},a.prototype.keydown=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)){var i=e(this);if(n.preventDefault(),n.stopPropagation(),!i.is(".disabled, :disabled")){var r=t(i),a=r.hasClass("open");if(!a&&27!=n.which||a&&27==n.which)return 27==n.which&&r.find(o).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=r.find(".dropdown-menu"+s);if(l.length){var u=l.index(n.target);38==n.which&&u>0&&u--,40==n.which&&u<l.length-1&&u++,~u||(u=0),l.eq(u).trigger("focus")}}}};var s=e.fn.dropdown;e.fn.dropdown=i,e.fn.dropdown.Constructor=a,e.fn.dropdown.noConflict=function(){return e.fn.dropdown=s,this},e(document).on("click.bs.dropdown.data-api",n).on("click.bs.dropdown.data-api",".dropdown form",function(e){e.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",".dropdown-menu",a.prototype.keydown)}(jQuery),+function(e){"use strict";function t(t,i){return this.each(function(){var r=e(this),o=r.data("bs.modal"),a=e.extend({},n.DEFAULTS,r.data(),"object"==typeof t&&t);o||r.data("bs.modal",o=new n(this,a)),"string"==typeof t?o[t](i):a.show&&o.show(i)})}var n=function(t,n){this.options=n,this.$body=e(document.body),this.$element=e(t),this.$dialog=this.$element.find(".modal-dialog"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(".modal-content").load(this.options.remote,e.proxy(function(){this.$element.trigger("loaded.bs.modal")},this))};n.VERSION="3.3.6",n.TRANSITION_DURATION=300,n.BACKDROP_TRANSITION_DURATION=150,n.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},n.prototype.toggle=function(e){return this.isShown?this.hide():this.show(e)},n.prototype.show=function(t){var i=this,r=e.Event("show.bs.modal",{relatedTarget:t});this.$element.trigger(r),this.isShown||r.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass("modal-open"),this.escape(),this.resize(),this.$element.on("click.dismiss.bs.modal",'[data-dismiss="modal"]',e.proxy(this.hide,this)),this.$dialog.on("mousedown.dismiss.bs.modal",function(){i.$element.one("mouseup.dismiss.bs.modal",function(t){e(t.target).is(i.$element)&&(i.ignoreBackdropClick=!0)})}),this.backdrop(function(){var r=e.support.transition&&i.$element.hasClass("fade");i.$element.parent().length||i.$element.appendTo(i.$body),i.$element.show().scrollTop(0),i.adjustDialog(),r&&i.$element[0].offsetWidth,i.$element.addClass("in"),i.enforceFocus();var o=e.Event("shown.bs.modal",{relatedTarget:t});r?i.$dialog.one("bsTransitionEnd",function(){i.$element.trigger("focus").trigger(o)}).emulateTransitionEnd(n.TRANSITION_DURATION):i.$element.trigger("focus").trigger(o)}))},n.prototype.hide=function(t){t&&t.preventDefault(),t=e.Event("hide.bs.modal"),this.$element.trigger(t),this.isShown&&!t.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),e(document).off("focusin.bs.modal"),this.$element.removeClass("in").off("click.dismiss.bs.modal").off("mouseup.dismiss.bs.modal"),this.$dialog.off("mousedown.dismiss.bs.modal"),e.support.transition&&this.$element.hasClass("fade")?this.$element.one("bsTransitionEnd",e.proxy(this.hideModal,this)).emulateTransitionEnd(n.TRANSITION_DURATION):this.hideModal())},n.prototype.enforceFocus=function(){e(document).off("focusin.bs.modal").on("focusin.bs.modal",e.proxy(function(e){this.$element[0]===e.target||this.$element.has(e.target).length||this.$element.trigger("focus")},this))},n.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on("keydown.dismiss.bs.modal",e.proxy(function(e){27==e.which&&this.hide()},this)):this.isShown||this.$element.off("keydown.dismiss.bs.modal")},n.prototype.resize=function(){this.isShown?e(window).on("resize.bs.modal",e.proxy(this.handleUpdate,this)):e(window).off("resize.bs.modal")},n.prototype.hideModal=function(){var e=this;this.$element.hide(),this.backdrop(function(){e.$body.removeClass("modal-open"),e.resetAdjustments(),e.resetScrollbar(),e.$element.trigger("hidden.bs.modal")})},n.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},n.prototype.backdrop=function(t){var i=this,r=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var o=e.support.transition&&r;if(this.$backdrop=e(document.createElement("div")).addClass("modal-backdrop "+r).appendTo(this.$body),this.$element.on("click.dismiss.bs.modal",e.proxy(function(e){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(e.target===e.currentTarget&&("static"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),o&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass("in"),!t)return;o?this.$backdrop.one("bsTransitionEnd",t).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):t()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");var a=function(){i.removeBackdrop(),t&&t()};e.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one("bsTransitionEnd",a).emulateTransitionEnd(n.BACKDROP_TRANSITION_DURATION):a()}else t&&t()},n.prototype.handleUpdate=function(){this.adjustDialog()},n.prototype.adjustDialog=function(){var e=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&e?this.scrollbarWidth:"",paddingRight:this.bodyIsOverflowing&&!e?this.scrollbarWidth:""})},n.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:"",paddingRight:""})},n.prototype.checkScrollbar=function(){var e=window.innerWidth;if(!e){var t=document.documentElement.getBoundingClientRect();e=t.right-Math.abs(t.left)}this.bodyIsOverflowing=document.body.clientWidth<e,this.scrollbarWidth=this.measureScrollbar()},n.prototype.setScrollbar=function(){var e=parseInt(this.$body.css("padding-right")||0,10);this.originalBodyPad=document.body.style.paddingRight||"",this.bodyIsOverflowing&&this.$body.css("padding-right",e+this.scrollbarWidth)},n.prototype.resetScrollbar=function(){this.$body.css("padding-right",this.originalBodyPad)},n.prototype.measureScrollbar=function(){var e=document.createElement("div");e.className="modal-scrollbar-measure",this.$body.append(e);var t=e.offsetWidth-e.clientWidth;return this.$body[0].removeChild(e),t};var i=e.fn.modal;e.fn.modal=t,e.fn.modal.Constructor=n,e.fn.modal.noConflict=function(){return e.fn.modal=i,this},e(document).on("click.bs.modal.data-api",'[data-toggle="modal"]',function(n){var i=e(this),r=i.attr("href"),o=e(i.attr("data-target")||r&&r.replace(/.*(?=#[^\s]+$)/,"")),a=o.data("bs.modal")?"toggle":e.extend({remote:!/#/.test(r)&&r},o.data(),i.data());i.is("a")&&n.preventDefault(),o.one("show.bs.modal",function(e){e.isDefaultPrevented()||o.one("hidden.bs.modal",function(){i.is(":visible")&&i.trigger("focus")})}),t.call(o,a,this)})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tooltip"),o="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init("tooltip",e,t)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(t,n,i){if(this.enabled=!0,this.type=t,this.$element=e(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&e(e.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,e.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,e.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,e.proxy(this.leave,this))}}this.options.selector?this._options=e.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(t){return t=e.extend({},this.getDefaults(),this.$element.data(),t),t.delay&&"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),t},n.prototype.getDelegateOptions=function(){var t={},n=this.getDefaults();return this._options&&e.each(this._options,function(e,i){n[e]!=i&&(t[e]=i)}),t},n.prototype.enter=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusin"==t.type?"focus":"hover"]=!0),n.tip().hasClass("in")||"in"==n.hoverState?void(n.hoverState="in"):(clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.isInStateTrue=function(){for(var e in this.inState)if(this.inState[e])return!0;return!1},n.prototype.leave=function(t){var n=t instanceof this.constructor?t:e(t.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n)),t instanceof e.Event&&(n.inState["focusout"==t.type?"focus":"hover"]=!1),n.isInStateTrue()?void 0:(clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide())},n.prototype.show=function(){var t=e.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(t);var i=e.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(t.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,u=l.test(s);u&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element),this.$element.trigger("inserted.bs."+this.type);var c=this.getPosition(),d=o[0].offsetWidth,p=o[0].offsetHeight;if(u){var f=s,h=this.getPosition(this.$viewport);s="bottom"==s&&c.bottom+p>h.bottom?"top":"top"==s&&c.top-p<h.top?"bottom":"right"==s&&c.right+d>h.width?"left":"left"==s&&c.left-d<h.left?"right":s,o.removeClass(f).addClass(s)}var m=this.getCalculatedOffset(s,c,d,p);this.applyPlacement(m,s);var v=function(){var e=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==e&&r.leave(r)};e.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(t,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),t.top+=a,t.left+=s,e.offset.setOffset(i[0],e.extend({using:function(e){i.css({top:Math.round(e.top),left:Math.round(e.left)})}},t),0),i.addClass("in");var l=i[0].offsetWidth,u=i[0].offsetHeight;"top"==n&&u!=o&&(t.top=t.top+o-u);var c=this.getViewportAdjustedDelta(n,t,l,u);c.left?t.left+=c.left:t.top+=c.top;var d=/top|bottom/.test(n),p=d?2*c.left-r+l:2*c.top-o+u,f=d?"offsetWidth":"offsetHeight";i.offset(t),this.replaceArrow(p,i[0][f],d)},n.prototype.replaceArrow=function(e,t,n){this.arrow().css(n?"left":"top",50*(1-e/t)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](t),e.removeClass("fade in top bottom left right")},n.prototype.hide=function(t){function i(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),t&&t()}var r=this,o=e(this.$tip),a=e.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),e.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var e=this.$element;(e.attr("title")||"string"!=typeof e.attr("data-original-title"))&&e.attr("data-original-title",e.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(t){t=t||this.$element;var n=t[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=e.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=i?{top:0,left:0}:t.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:t.scrollTop()},s=i?{width:e(window).width(),height:e(window).height()}:null;return e.extend({},r,a,s,o)},n.prototype.getCalculatedOffset=function(e,t,n,i){return"bottom"==e?{top:t.top+t.height,left:t.left+t.width/2-n/2}:"top"==e?{top:t.top-i,left:t.left+t.width/2-n/2}:"left"==e?{top:t.top+t.height/2-i/2,left:t.left-n}:{top:t.top+t.height/2-i/2,left:t.left+t.width}},n.prototype.getViewportAdjustedDelta=function(e,t,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(e)){var s=t.top-o-a.scroll,l=t.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var u=t.left-o,c=t.left+o+n;u<a.left?r.left=a.left-u:c>a.right&&(r.left=a.left+a.width-c)}return r},n.prototype.getTitle=function(){var e,t=this.$element,n=this.options;return e=t.attr("data-original-title")||("function"==typeof n.title?n.title.call(t[0]):n.title)},n.prototype.getUID=function(e){do e+=~~(1e6*Math.random());while(document.getElementById(e));return e},n.prototype.tip=function(){if(!this.$tip&&(this.$tip=e(this.options.template),1!=this.$tip.length))throw new Error(this.type+" `template` option must consist of exactly 1 top-level element!");return this.$tip},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(t){var n=this;t&&(n=e(t.currentTarget).data("bs."+this.type),n||(n=new this.constructor(t.currentTarget,this.getDelegateOptions()),e(t.currentTarget).data("bs."+this.type,n))),t?(n.inState.click=!n.inState.click,n.isInStateTrue()?n.enter(n):n.leave(n)):n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var e=this;clearTimeout(this.timeout),this.hide(function(){e.$element.off("."+e.type).removeData("bs."+e.type),e.$tip&&e.$tip.detach(),e.$tip=null,e.$arrow=null,e.$viewport=null})};var i=e.fn.tooltip;e.fn.tooltip=t,e.fn.tooltip.Constructor=n,e.fn.tooltip.noConflict=function(){return e.fn.tooltip=i,this}}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.popover"),o="object"==typeof t&&t;(r||!/destroy|hide/.test(t))&&(r||i.data("bs.popover",r=new n(this,o)),"string"==typeof t&&r[t]())})}var n=function(e,t){this.init("popover",e,t)};if(!e.fn.tooltip)throw new Error("Popover requires tooltip.js");n.VERSION="3.3.6",n.DEFAULTS=e.extend({},e.fn.tooltip.Constructor.DEFAULTS,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),n.prototype=e.extend({},e.fn.tooltip.Constructor.prototype),n.prototype.constructor=n,n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.setContent=function(){var e=this.tip(),t=this.getTitle(),n=this.getContent();e.find(".popover-title")[this.options.html?"html":"text"](t),e.find(".popover-content").children().detach().end()[this.options.html?"string"==typeof n?"html":"append":"text"](n),e.removeClass("fade top bottom left right in"),e.find(".popover-title").html()||e.find(".popover-title").hide()},n.prototype.hasContent=function(){return this.getTitle()||this.getContent()},n.prototype.getContent=function(){var e=this.$element,t=this.options;return e.attr("data-content")||("function"==typeof t.content?t.content.call(e[0]):t.content)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".arrow")};var i=e.fn.popover;e.fn.popover=t,e.fn.popover.Constructor=n,e.fn.popover.noConflict=function(){return e.fn.popover=i,this}}(jQuery),+function(e){"use strict";function t(n,i){this.$body=e(document.body),this.$scrollElement=e(e(n).is(document.body)?window:n),this.options=e.extend({},t.DEFAULTS,i),this.selector=(this.options.target||"")+" .nav li > a",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on("scroll.bs.scrollspy",e.proxy(this.process,this)),this.refresh(),this.process()}function n(n){return this.each(function(){var i=e(this),r=i.data("bs.scrollspy"),o="object"==typeof n&&n;r||i.data("bs.scrollspy",r=new t(this,o)),"string"==typeof n&&r[n]()})}t.VERSION="3.3.6",t.DEFAULTS={offset:10},t.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},t.prototype.refresh=function(){var t=this,n="offset",i=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),e.isWindow(this.$scrollElement[0])||(n="position",i=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var t=e(this),r=t.data("target")||t.attr("href"),o=/^#./.test(r)&&e(r);return o&&o.length&&o.is(":visible")&&[[o[n]().top+i,r]]||null}).sort(function(e,t){return e[0]-t[0]}).each(function(){t.offsets.push(this[0]),t.targets.push(this[1])})},t.prototype.process=function(){var e,t=this.$scrollElement.scrollTop()+this.options.offset,n=this.getScrollHeight(),i=this.options.offset+n-this.$scrollElement.height(),r=this.offsets,o=this.targets,a=this.activeTarget;if(this.scrollHeight!=n&&this.refresh(),t>=i)return a!=(e=o[o.length-1])&&this.activate(e);if(a&&t<r[0])return this.activeTarget=null,this.clear();for(e=r.length;e--;)a!=o[e]&&t>=r[e]&&(void 0===r[e+1]||t<r[e+1])&&this.activate(o[e])},t.prototype.activate=function(t){this.activeTarget=t,this.clear();var n=this.selector+'[data-target="'+t+'"],'+this.selector+'[href="'+t+'"]',i=e(n).parents("li").addClass("active");i.parent(".dropdown-menu").length&&(i=i.closest("li.dropdown").addClass("active")),i.trigger("activate.bs.scrollspy")},t.prototype.clear=function(){e(this.selector).parentsUntil(this.options.target,".active").removeClass("active")};var i=e.fn.scrollspy;e.fn.scrollspy=n,e.fn.scrollspy.Constructor=t,e.fn.scrollspy.noConflict=function(){return e.fn.scrollspy=i,this},e(window).on("load.bs.scrollspy.data-api",function(){e('[data-spy="scroll"]').each(function(){var t=e(this);n.call(t,t.data())})})}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.tab");r||i.data("bs.tab",r=new n(this)),"string"==typeof t&&r[t]()})}var n=function(t){this.element=e(t)};n.VERSION="3.3.6",n.TRANSITION_DURATION=150,n.prototype.show=function(){var t=this.element,n=t.closest("ul:not(.dropdown-menu)"),i=t.data("target");if(i||(i=t.attr("href"),i=i&&i.replace(/.*(?=#[^\s]*$)/,"")),!t.parent("li").hasClass("active")){var r=n.find(".active:last a"),o=e.Event("hide.bs.tab",{relatedTarget:t[0]}),a=e.Event("show.bs.tab",{relatedTarget:r[0]});if(r.trigger(o),t.trigger(a),!a.isDefaultPrevented()&&!o.isDefaultPrevented()){var s=e(i);this.activate(t.closest("li"),n),this.activate(s,s.parent(),function(){r.trigger({type:"hidden.bs.tab",relatedTarget:t[0]}),t.trigger({type:"shown.bs.tab",relatedTarget:r[0]})})}}},n.prototype.activate=function(t,i,r){function o(){a.removeClass("active").find("> .dropdown-menu > .active").removeClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!1),t.addClass("active").find('[data-toggle="tab"]').attr("aria-expanded",!0),s?(t[0].offsetWidth,t.addClass("in")):t.removeClass("fade"),t.parent(".dropdown-menu").length&&t.closest("li.dropdown").addClass("active").end().find('[data-toggle="tab"]').attr("aria-expanded",!0),r&&r()}var a=i.find("> .active"),s=r&&e.support.transition&&(a.length&&a.hasClass("fade")||!!i.find("> .fade").length);
a.length&&s?a.one("bsTransitionEnd",o).emulateTransitionEnd(n.TRANSITION_DURATION):o(),a.removeClass("in")};var i=e.fn.tab;e.fn.tab=t,e.fn.tab.Constructor=n,e.fn.tab.noConflict=function(){return e.fn.tab=i,this};var r=function(n){n.preventDefault(),t.call(e(this),"show")};e(document).on("click.bs.tab.data-api",'[data-toggle="tab"]',r).on("click.bs.tab.data-api",'[data-toggle="pill"]',r)}(jQuery),+function(e){"use strict";function t(t){return this.each(function(){var i=e(this),r=i.data("bs.affix"),o="object"==typeof t&&t;r||i.data("bs.affix",r=new n(this,o)),"string"==typeof t&&r[t]()})}var n=function(t,i){this.options=e.extend({},n.DEFAULTS,i),this.$target=e(this.options.target).on("scroll.bs.affix.data-api",e.proxy(this.checkPosition,this)).on("click.bs.affix.data-api",e.proxy(this.checkPositionWithEventLoop,this)),this.$element=e(t),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};n.VERSION="3.3.6",n.RESET="affix affix-top affix-bottom",n.DEFAULTS={offset:0,target:window},n.prototype.getState=function(e,t,n,i){var r=this.$target.scrollTop(),o=this.$element.offset(),a=this.$target.height();if(null!=n&&"top"==this.affixed)return n>r&&"top";if("bottom"==this.affixed)return null!=n?!(r+this.unpin<=o.top)&&"bottom":!(e-i>=r+a)&&"bottom";var s=null==this.affixed,l=s?r:o.top,u=s?a:t;return null!=n&&n>=r?"top":null!=i&&l+u>=e-i&&"bottom"},n.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(n.RESET).addClass("affix");var e=this.$target.scrollTop(),t=this.$element.offset();return this.pinnedOffset=t.top-e},n.prototype.checkPositionWithEventLoop=function(){setTimeout(e.proxy(this.checkPosition,this),1)},n.prototype.checkPosition=function(){if(this.$element.is(":visible")){var t=this.$element.height(),i=this.options.offset,r=i.top,o=i.bottom,a=Math.max(e(document).height(),e(document.body).height());"object"!=typeof i&&(o=r=i),"function"==typeof r&&(r=i.top(this.$element)),"function"==typeof o&&(o=i.bottom(this.$element));var s=this.getState(a,t,r,o);if(this.affixed!=s){null!=this.unpin&&this.$element.css("top","");var l="affix"+(s?"-"+s:""),u=e.Event(l+".bs.affix");if(this.$element.trigger(u),u.isDefaultPrevented())return;this.affixed=s,this.unpin="bottom"==s?this.getPinnedOffset():null,this.$element.removeClass(n.RESET).addClass(l).trigger(l.replace("affix","affixed")+".bs.affix")}"bottom"==s&&this.$element.offset({top:a-t-o})}};var i=e.fn.affix;e.fn.affix=t,e.fn.affix.Constructor=n,e.fn.affix.noConflict=function(){return e.fn.affix=i,this},e(window).on("load",function(){e('[data-spy="affix"]').each(function(){var n=e(this),i=n.data();i.offset=i.offset||{},null!=i.offsetBottom&&(i.offset.bottom=i.offsetBottom),null!=i.offsetTop&&(i.offset.top=i.offsetTop),t.call(n,i)})})}(jQuery),define("lib/calcite-bootstrap/js/bootstrap.min",function(){}),define("lib-build/css!storymaps/common/utils/SocialSharing",[],function(){}),define("storymaps/tpl/core/MainView",["lib/babel-polyfill/browser-polyfill","lib/jquery/dist/jquery.min","lib-build/less!./MainView","lib-build/css!../view/media/Common","lib-build/i18n!resources/tpl/viewer/nls/app","storymaps-react/tpl/core/Controller","storymaps/common/Core","storymaps/common/utils/CommonHelper","storymaps/tpl/utils/UI","storymaps-react/tpl/view/ui/Header","storymaps-react/tpl/view/ui/Autoplay","lib/calcite-bootstrap/js/bootstrap.min","lib-build/css!storymaps/common/utils/SocialSharing","esri/arcgis/utils","dojo/_base/lang","dojo/on","dojo/has","dojo/topic"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f,h,m,v,g){function b(e){return A=e,!0}function y(e,t,n){C(),app.display.browserWidth<768&&($("body").addClass("mobile-view"),app.isMobileView=!0),v("touch")&&$("body").addClass("touch"),app.Controller.renderStory(e,n).then(function(){app.Controller.renderHeader(),E(),setTimeout(function(){C()},100),setTimeout(function(){C()},300),setTimeout(function(){C()},500)})}function _(e){e=e||{};var t=app.display.scrollTop;if(app.isInBuilder&&C(),app.display.scrollTop=t,M!=t||e.forceUpdate){var n=t-M;M=t;var i=w(t,t+app.display.windowHeight),r=i.activeSection;if(r){var o=r.index,a=r.node,s=t-r.top;app.Controller.onScroll({currentSectionIndex:o,scrollTop:t,scrollDifference:n,windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight,$currentSection:a,sectionHeight:app.display.sectionHeight,currentSectionScroll:s,visibleSections:i.visibleSections});var l=!1;if(t<=app.display.windowHeight){var u=app.display.windowHeight-t-50;u<40&&(u=0),l=0!==u}O.update({headerCompact:l,storyProgress:(t+app.display.windowHeight)/app.display.storyHeight*100,sectionIndex:o})}}}function w(e,t){for(var n=app.display.sections,i=n.length,r=null,o=[],a=0,s=0,l=null,u=e+50,c=0;c<i;c++)a=n[c].top,s=c-1,l=n[c+1]?n[c+1].top:-1,a>u&&(r||(r={index:s,top:n[s].top,node:n[s].node})),c!=i-1||r||"credits"==n[c].type||(r={index:c,top:n[c].top,node:n[c].node}),u>=a&&u<l?o.push(s+1):t>a&&u<a&&o.push(s+1);return{activeSection:r,visibleSections:o}}function C(){var e=[];$(".section").each(function(t){var n=$(this);e.push({top:n.hasClass("hidden")?Number.MAX_VALUE:n.position().top,node:n,type:app.data.sections[t].type})});var t=[],n=$(window),i=n.width(),r=n.height(),o=O.getHeight();app.display={browserWidth:i,windowWidth:i-(app.isInBuilder?$(".section-builder-panel").width():0),windowHeight:r,headerHeight:o,sectionHeight:r-o,storyHeight:$("body").height(),scrollTop:app.display?app.display.scrollTop:0,sections:e,inlineVideos:t}}function E(){var e=!0,t=s.getUrlParams();"false"===t.forceScrollTop&&(e=!1),e&&$(window).on("beforeunload",function(){$(window).scrollTop(0)});var n=s.throttle(function(){k()},50);$(window).resize(n).trigger("resize"),g.subscribe("media-dynamic-resize",k);var i=!0,r=$(document);if("false"===t.useRafLoop&&(i=!1),i)window.requestAnimationFrame(function e(){var t=!1;$("body").hasClass("modal-open")&&(t=!0),t||(app.display.scrollTop=r.scrollTop(),_()),window.requestAnimationFrame(e)});else{var o=!1,a=function(){_(),o=!1};$(window).scroll(function(){app.isInBuilder&&$("body").hasClass("modal-open")||(app.display.scrollTop=r.scrollTop(),o||(window.requestAnimationFrame(a),o=!0))})}$(".modal").on("show.bs.modal",function(){I=app.display.scrollTop,$("body").css({position:"fixed",top:-app.display.scrollTop}),$(".sections").css({position:"fixed"})}),$(".modal").on("hide.bs.modal",function(){$("body").css({position:"",top:""}),$(".sections").css({position:""}),$("html,body").scrollTop(I)}),A.hasSwitchBuilderButton()&&app.ui.header.showEditButton(),app.isInBuilder||void 0===s.getUrlParams().autoplay||"false"===s.getUrlParams().autoplay||(app.ui.autoplay=new c,g.subscribe("tpl-ready",function(){$("body").hasClass("mobile-view")||($(".section-layout-cover .scroll-invite").hide(),app.ui.header.disableShareButtonAutoplay(),app.ui.autoplay.start())})),_(),g.publish("tpl-ready"),S()}function k(){var e=app.display.browserWidth<768;C(),O.resize(),app.Controller.onResize({windowWidth:app.display.windowWidth,windowHeight:app.display.windowHeight,sectionHeight:app.display.sectionHeight}),app.isInBuilder&&($("body").toggleClass("error modal-open",e),$("#loadingOverlay").toggleClass("error",e),$("#fatalError").toggle(e),$(".progressjs-container").toggle(!e)),app.ui.autoplay&&e&&app.ui.autoplay.stop()}function T(){return app.Controller.isStoryBlank()}function x(){if(app.data.appItem&&app.data.appItem.data){var e=app.data.appItem.data.values;y(e.config,e.settings,e.sections)}}function S(){setTimeout(function(){$("#loadingIndicator, #loadingMessage").addClass("fadeOut").fadeOut(300),$("#loadingOverlay").fadeOut(600)},0)}function P(e){e||alert(r.viewer.errors.noConfigName),$.ajax({type:"GET",url:"stories/"+e+".json",dataType:"json"}).then(function(e){e&&e.config&&e.sections&&e.sections.length?y(e.config,e.settings,e.sections):alert(r.viewer.errors.configFormatError)},function(){alert(r.viewer.errors.configNotFound)})}var O=new u,I=null,M=null,A=null;return app.ui={header:O,update:_},require([app.isInBuilder?"storymaps-react/tpl/view/section/FactoryBuilder":"storymaps-react/tpl/view/section/FactoryViewer"],function(e){app.ui.SectionFactory=e}),require([app.isInBuilder?"storymaps/tpl/view/section/Immersive/PanelFactoryBuilder":"storymaps/tpl/view/section/Immersive/PanelFactoryViewer"],function(e){app.ui.ImmersivePanelFactory=e}),require([app.isInBuilder?"storymaps-react/tpl/view/media/FactoryBuilder":"storymaps-react/tpl/view/media/FactoryViewer"],function(e){app.ui.MediaFactory=e}),require([app.isInBuilder?"storymaps-react/tpl/builder/Controller":"storymaps-react/tpl/core/Controller"],function(e){app.Controller=e}),{init:b,isStoryBlank:T,getConfig:P,appInitComplete:x,updateUI:_}}),define("lib-build/css!storymaps/common/builder/Builder",[],function(){}),define("lib-build/hbars!storymaps-react/tpl/builder/panel/BuilderPanel",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a=this.lambda,s=this.escapeExpression,l="function",u=t.helperMissing;return'<div class="builder-buttons">\r\n  <img src="resources/tpl/builder/icons/builder.jpg" />\r\n\r\n  <button class="btn btn-settings">\r\n    <i class="fa fa-cog fa-lg" aria-hidden="true"></i>\r\n    <span class="btn-settings-label">'+s(a(null!=(r=null!=e?e.commonStrings:e)?r.buttonSettings:r,e))+'</span>\r\n  </button>\r\n  <div class="beta-feedback">\r\n    <a href="http://links.esri.com/storymaps/cascade-beta-feedback" target="_blank">'+s(a(null!=(r=null!=e?e.strings:e)?r.betaFeedback:r,e))+'</a>\r\n    <i class="beta-tooltip fa fa-commenting" aria-hidden="true"></i>\r\n  </div>\r\n\r\n  <button class="btn btn-share not-clickable">\r\n    <i class="fa fa-share fa-lg" aria-hidden="true"></i>\r\n    <span class="btn-share-label">'+s(a(null!=(r=null!=e?e.commonStrings:e)?r.buttonShare:r,e))+'</span>\r\n    <div class="btn-share-container">\r\n      <div class="btn-share-outer-tooltip" data-level="private">\r\n        <div class="btn-share-wrapper" data-level="private" data-title="'+s(a(null!=(r=null!=e?e.sharingLevelStrings:e)?r.btnPrivate:r,e))+'">\r\n    \t\t\t<span class="small-loader"></span>\r\n    \t\t\t<i class="share-icon fa fa-user fa-lg" aria-hidden="true"></i>\r\n    \t\t</div>\r\n      </div>\r\n      <div class="btn-share-outer-tooltip tooltip-enabled" data-level="account" data-title="'+s((o=null!=(o=t.organizationWarning||(null!=e?e.organizationWarning:e))?o:u,typeof o===l?o.call(e,{name:"organizationWarning",hash:{},data:i}):o))+'">\r\n        <div class="btn-share-wrapper" data-level="account" data-title="'+s(a(null!=(r=null!=e?e.sharingLevelStrings:e)?r.btnOrg:r,e))+'">\r\n    \t\t\t<span class="small-loader"></span>\r\n    \t\t\t<i class="share-icon fa fa-users fa-lg" aria-hidden="true"></i>\r\n    \t\t</div>\r\n      </div>\r\n      <div class="btn-share-outer-tooltip tooltip-enabled" data-level="public" data-title="'+s((o=null!=(o=t.publicWarning||(null!=e?e.publicWarning:e))?o:u,typeof o===l?o.call(e,{name:"publicWarning",hash:{},data:i}):o))+'">\r\n        <div class="btn-share-wrapper" data-level="public" data-title="'+s(a(null!=(r=null!=e?e.sharingLevelStrings:e)?r.btnPublic:r,e))+'">\r\n    \t\t\t<span class="small-loader"></span>\r\n    \t\t\t<i class="share-icon fa fa-globe fa-lg" aria-hidden="true"></i>\r\n    \t\t</div>\r\n      </div>\r\n    </div>\r\n  </button>\r\n\r\n  <button class="btn btn-preview">\r\n    <i class="fa fa-eye fa-lg" aria-hidden="true"></i>\r\n    <span class="btn-preview-label">'+s(a(null!=(r=null!=e?e.commonStrings:e)?r.buttonPreview:r,e))+'</span>\r\n  </button>\r\n\r\n  <button class="btn btn-check not-clickable">\r\n    <span class="checking-icon-wrapper">\r\n      <span class="small-loader"></span>\r\n    </span>\r\n    <span class="issue-icon-wrapper">\r\n      <i class="fa fa-exclamation-triangle fa-lg"></i>\r\n      <span class="issue-count super"></span>\r\n    </span>\r\n    <span class="no-issues-icon-wrapper">\r\n      <i class="fa fa-heartbeat fa-lg" aria-hidden="true"></i>\r\n      <i class="fa fa-check super"></i>\r\n    </span>\r\n\r\n    <span class="btn-check-label">'+s(a(null!=(r=null!=e?e.commonStrings:e)?r.buttonHealth:r,e))+'\r\n      <i class="check-tooltip fa fa-info-circle" aria-hidden="true"></i>\r\n    </span>\r\n  </button>\r\n\r\n  <button id="save-button" class="btn btn-save" data-toggle="tooltip" data-placement="top" data-title="'+s(a(null!=(r=null!=e?e.strings:e)?r.saveError:r,e))+'">\r\n    <i class="btn-save-icon fa fa-cloud fa-lg" aria-hidden="true"></i>\r\n    <span class="btn-save-loader small-loader"></span>\r\n    <span class="btn-save-success glyphicon glyphicon-ok"></span>\r\n    <span class="btn-save-error glyphicon glyphicon-exclamation-sign"></span>\r\n    <span class="btn-save-label">'+s((o=null!=(o=t.btnSave||(null!=e?e.btnSave:e))?o:u,typeof o===l?o.call(e,{name:"btnSave",hash:{},data:i}):o))+'</span>\r\n  </button>\r\n\r\n</div>\r\n<div class="overview"></div>\r\n'},useData:!0})}),define("commonResources/nls/core",{root:{commonCore:{builderPanel:{buttonSaving:"Saving",buttonSaved:"Saved",buttonError:"Save failed",buttonShare:"Share",buttonSettings:"Settings",buttonHelp:"Help",buttonPreview:"View Story",buttonHealth:"Health Report",manageStories:"Manage My Stories",closeWithPendingChange:"Are you sure to want to confirm this action? Your changes will be lost.",saveError:"Save failed, please try again"},saveErrorSocial:{title:"Social media sharing",panel1:"Your story may not appear properly on social media as your ArcGIS web application item title is not the same as your story title.",panel1tooltip:"By defining a title, summary and thumbnail image, your story will look like this:",panel2:"Which title would you like to use on social media:",panel2q1:"Story title (recommended)",panel2q1tooltip:"By choosing this option, your item title will be modified to match your story title and further changes in the builder will be synchronized.",panel2q2:"Item title",panel3:"To further improve how your story looks on social media use ${MYSTORIES} to add a summary and a thumbnail image.",panel4:"Do not warn me again for this story",save:"Save",mystories:"My Stories"},share:{btnPrivate:"Private",btnOrg:"Organization",btnPublic:"Public"}}},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("lib-build/less!storymaps-react/tpl/builder/panel/BuilderPanel",[],function(){}),define("storymaps-react/tpl/builder/panel/BuilderPanel",["module","exports","lib-build/hbars!./BuilderPanel","lib-build/i18n!commonResources/nls/core","lib-build/i18n!resources/tpl/builder/nls/app","lib-build/i18n!resources/tpl/viewer/nls/app","../overviewPanel/OverviewPanel","storymaps/common/builder/BuilderHelper","dojo/topic","lib-build/less!./BuilderPanel"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=u(n),p=u(i),f=u(r),h=u(o),m=u(a),v=u(s),g=u(l),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(c(this,e),this._node=t.container,this._saveApp=t.saveApp,this._shareApp=t.shareApp,this._saveFailed=!1,!this._node||!this._saveApp||!this._shareApp)return void console.error("Could not initialize Builder Panel");var n=f.default.builder.builderPanel.publicWarning,i=f.default.builder.builderPanel.organizationWarning;this._node.html((0,d.default)({btnSave:h.default.viewer.common.save,commonStrings:p.default.commonCore.builderPanel,sharingLevelStrings:p.default.commonCore.share,strings:f.default.builder.builderPanel,publicWarning:n,organizationWarning:i})),this._overviewPanel=null,this._node.find(".btn-share-container .btn-share-wrapper").tooltip({container:".section-builder-panel",placement:"top"}),this._node.find(".btn-share-container .btn-share-wrapper").on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("share-tooltip")}),this._node.find(".btn-share-container .btn-share-wrapper").on("show.bs.tooltip",function(){$(this).closest(".btn-share-outer-tooltip.tooltip-enabled").tooltip("show")}),this._node.find(".btn-share-container .btn-share-wrapper").on("hide.bs.tooltip",function(){$(this).closest(".btn-share-outer-tooltip.tooltip-enabled").tooltip("hide")}),this._node.find(".btn-share-outer-tooltip.tooltip-enabled").tooltip({placement:"bottom",container:".section-builder-panel",trigger:"manual"}),this._node.find(".btn-share-outer-tooltip.tooltip-enabled").on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("custom-warning tooltip-bright")}),this._initEvents()}return b(e,[{key:"_initEvents",value:function(){g.default.subscribe("tpl-ready",this._onStoryReady.bind(this)),g.default.subscribe("builder-section-update",this._updateOverview.bind(this)),g.default.subscribe("story-navigated-section",this._onSectionNavigate.bind(this)),g.default.subscribe("builder-story-title-update",this._updateStoryTitle.bind(this)),g.default.subscribe("builder-story-update",this._updateSaveButtonStatus.bind(this)),g.default.subscribe("check-app-started",this._onStoryCheckStarted.bind(this)),g.default.subscribe("check-app-complete",this._onStoryCheckComplete.bind(this)),this._node.find(".btn-settings").click(this._onSettings.bind(this)),this._node.find(".btn-preview").click(this._onPreview.bind(this)),this._node.find(".my-stories-link").click(this._onCheck.bind(this)),this._node.find(".btn-save").click(this._onSave.bind(this));var e="Story Map Cascade",t=f.default.builder.builderPanel.betaNote.replace(/\${APP_NAME}/g,e);this._node.find(".beta-tooltip").tooltip({title:t,placement:"bottom",container:".section-builder-panel"}),this._node.find(".check-tooltip").tooltip({title:i18n.builder.builderPanel.mystoriestooltip,placement:"right",container:".section-builder-panel"}),this._node.find(".my-stories-link").tooltip({container:".btn-check"})}},{key:"_onStoryReady",value:function(){this._initShareButtons(),this._updateShareButtons(),this._updatePreviewButton(),this._updateCheckButton(),this._updateOverview()}},{key:"_onStoryCheckStarted",value:function(){this._updateIssueStatusButton(null,!1)}},{key:"_onStoryCheckComplete",value:function(e){this._updateIssueStatusButton(e,!0),this._updateOverview()}},{key:"_updateStoryTitle",value:function(){var e=this._node.find(".builder-buttons .btn"),t=this._node.find(".builder-buttons .btn:not(.btn-save)"),n=app.Controller.getStoryTitle();e.toggleClass("disabled",!n),n?this._saveFailed?t.tooltip("destroy"):e.tooltip("destroy"):e.tooltip({title:f.default.builder.builderPanel.addTitleNote,placement:"right",container:".section-builder-panel"}),this._updateShareButtons(),this._updatePreviewButton(),this._updateCheckButton()}},{key:"_onSettings",value:function(e){$(e.currentTarget).hasClass("disabled")||app.Controller.openSettings()}},{key:"_initShareButtons",value:function(){var e=app.portal.isOrganization!==!1,t=app.portal.getPortalUser().privileges||[],n=app.data.appItem.item.access,i=app.data.appItem.item.itemControl,r=e&&t.indexOf("portal:user:shareToOrg")>-1,o=!e||t.indexOf("portal:user:shareToPublic")>-1,a="private"==n||"shared"==n,s="account"==n,l=app.data.appItem.item.owner==app.portal.getPortalUser().username;"update"==i?(r=!1,o=!1):"admin"!=i||l||(r=t.indexOf("portal:admin:shareToOrg")>-1,o=t.indexOf("portal:admin:shareToPublic")>-1),s?r=!0:a||(o=!0),this._node.find('.btn-share-outer-tooltip[data-level="account"]').toggle(r),this._node.find('.btn-share-outer-tooltip[data-level="public"]').toggle(o),this._node.find(".btn-share-wrapper").click(this._onChangeSharing.bind(this))}},{key:"_onChangeSharing",value:function(e){var t=$(e.currentTarget);this._node.find(".btn-share-this._node").addClass("disabled"),this._node.find(".btn-share-wrapper").removeClass("active"),t.addClass("sharing"),this._shareApp({sharingLevel:t.data("level")}).then(function(){this._updateShareButtons(),this._updatePreviewButton(),app.Controller.renderHeader()}.bind(this),function(){this._updateShareButtons(),this._updatePreviewButton(),app.Controller.renderHeader()}.bind(this))}},{key:"_updateShareButtons",value:function(){var e="private",t=!!app.data.appItem.item.id,n=this._node.find(".btn-share");n.toggleClass("disabled",!t),this._node.find(".btn-share-wrapper").removeClass("sharing"),app.data.appItem.item&&app.data.appItem.item.access&&app.Controller.getStoryTitle()?(e=app.data.appItem.item.access,"shared"===e&&(e="private"),this._node.find(".btn-share-container").removeClass("disabled"),this._node.find(".btn-share-wrapper[data-level="+e+"]").addClass("active")):this._node.find(".btn-share-container").addClass("disabled")}},{key:"_updatePreviewButton",value:function(){var e=app.data.appItem.item.access,t=!!app.data.appItem.item.id,n="account"==e||"public"==e,i=this._node.find(".btn-preview");i.toggleClass("disabled",!t),t&&!n?i.tooltip({title:f.default.builder.builderPanel.notSharedNote,placement:"right",container:".section-builder-panel"}):i.tooltip("destroy")}},{key:"_onPreview",value:function(e){$(e.currentTarget).hasClass("disabled")||window.open(app.Controller.getStoryURL()+"&preview","_blank")}},{key:"_updateCheckButton",value:function(){var e=!!app.data.appItem.item.id,t=this._node.find(".btn-check");t.toggleClass("disabled",!e)}},{key:"_onCheck",value:function(e){$(e.currentTarget).hasClass("disabled")||window.open(v.default.getMyStoriesURL(),"_blank")}},{key:"_updateSaveButtonStatus",value:function(){var e=this._node.find(".btn-save"),t=app.Controller.getStoryTitle();e.toggleClass("btn-bright",!(!t||!app.builder.pendingChanges))}},{key:"_onSave",value:function(e){var t=$(e.currentTarget);t.hasClass("disabled")||(t.removeClass("saved").addClass("saving disabled"),t.find(".btn-save-label").html(p.default.commonCore.builderPanel.buttonSaving),this._saveApp())}},{key:"saveSucceeded",value:function(){var e=this;this._saveFailed=!1,this._node.find(".btn-save").removeClass("saving disabled").addClass("saved"),this._node.find(".btn-save-label").html(p.default.commonCore.builderPanel.buttonSaved),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip("destroy"),setTimeout(function(){e._node.find(".btn-save").removeClass("saved").find(".btn-save-label").html(h.default.viewer.common.save)},3500),this._updateSaveButtonStatus(),this._updateShareButtons(),this._updatePreviewButton(),this._updateCheckButton()}},{key:"saveFailed",value:function(){var e=this;this._saveFailed=!0,this._node.find(".btn-save").removeClass("saving").addClass("error"),this._node.find(".btn-save-label").html(p.default.commonCore.builderPanel.buttonError),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip({trigger:"manual",placement:"right",container:".builder-buttons"}),this._node.find('.btn-save[data-toggle="tooltip"]').on("inserted.bs.tooltip",function(){$(this).data("bs.tooltip").$tip.addClass("tooltip-danger")}),this._node.find('.btn-save[data-toggle="tooltip"]').tooltip("show"),setTimeout(function(){e._node.find(".btn-save").removeClass("error disabled").find(".btn-save-label").html(h.default.viewer.common.save)},3500)}},{key:"_updateIssueStatusButton",value:function(e,t){var n=this._node.find(".btn-check");if(n.removeClass("checking no-issues errors"),t)if(e.errors.allItems.length){n.addClass("errors");var i=0;Object.keys(e.errors.byId).forEach(function(t){var n=e.errors.byId[t].media;n&&n.length&&(i+=n.length)}),this._node.find(".issue-count").text(i)}else n.addClass("no-issues");else n.addClass("checking")}},{key:"_updateOverview",value:function(){var e=app.Controller.getStoryOverview();this._overviewPanel?this._overviewPanel.updateItems(e):this._initOverviewPanel(e)}},{key:"_onSectionNavigate",value:function(e){this._overviewPanel&&this._overviewPanel.navigateTo(app.Controller.getSectionIndexById(e.index))}},{key:"_initOverviewPanel",value:function(e){this._overviewPanel=new m.default(this._node.find(".overview")[0],"vertical",e,{selectItem:function(e){var t=app.Controller.getSectionById(e);app.Controller.navigateToSection({index:t,animate:!1})},duplicateItem:function(e){var t=app.Controller.getSectionById(e);app.Controller.duplicateSection({index:t})},toggleHidden:function(){},deleteItem:function(e){var t=app.Controller.getSectionById(e);app.Controller.deleteSection({index:t})},organize:function(e){var t=app.Controller.getSectionsIndexesByIds(e);app.Controller.organizeSections(t)}})}}]),e}();t.default=y,e.exports=t.default}),define("lib-build/hbars!storymaps/common/builder/SaveErrorPopupSocial",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a="function",s=t.helperMissing,l=this.escapeExpression,u='<div class="modal-dialog">\r\n\t<div class="modal-content">\r\n\t\t<div class="modal-logo"></div>\r\n\t\t<div class="modal-header">\r\n\t\t\t<h4 class="modal-title">'+l((o=null!=(o=t.title||(null!=e?e.title:e))?o:s,typeof o===a?o.call(e,{name:"title",hash:{},data:i}):o))+'</h4>\r\n\t\t</div>\r\n\r\n\t\t<div class="modal-body">\r\n\t\t\t<div class="panel1">\r\n\t\t\t\t';return o=null!=(o=t.panel1||(null!=e?e.panel1:e))?o:s,r=typeof o===a?o.call(e,{name:"panel1",hash:{},data:i}):o,null!=r&&(u+=r),u+='\r\n\t\t\t\t<a href="#" class="help" data-toggle="tooltip">\r\n\t\t\t\t\t<i class="fa fa-question-circle" aria-hidden="true"></i>\r\n\t\t\t\t</a>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel2">\r\n\t\t\t\t<div class="panel2lbl">'+l((o=null!=(o=t.panel2||(null!=e?e.panel2:e))?o:s,typeof o===a?o.call(e,{name:"panel2",hash:{},data:i}):o))+'</div>\r\n\t\t\t\t<div class="form-group">\r\n\t\t\t\t\t<div class="radio">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input type="radio" name="optErrorSocial" value="story" checked>\r\n\t\t\t\t\t\t\t<span>\r\n\t\t\t\t\t\t\t\t'+l((o=null!=(o=t.panel2q1||(null!=e?e.panel2q1:e))?o:s,typeof o===a?o.call(e,{name:"panel2q1",hash:{},data:i}):o))+'\r\n\t\t\t\t\t\t\t\t<a href="#" class="help" data-toggle="tooltip" title="'+l((o=null!=(o=t.panel2q1tooltip||(null!=e?e.panel2q1tooltip:e))?o:s,typeof o===a?o.call(e,{name:"panel2q1tooltip",hash:{},data:i}):o))+'">\r\n\t\t\t\t\t\t\t\t\t<i class="fa fa-question-circle" aria-hidden="true"></i>\r\n\t\t\t\t\t\t\t\t</a>\r\n\t\t\t\t\t\t\t</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<div class="radio">\r\n\t\t\t\t\t\t<label>\r\n\t\t\t\t\t\t\t<input type="radio" name="optErrorSocial" value="item">\r\n\t\t\t\t\t\t\t<span>',o=null!=(o=t.panel2q2||(null!=e?e.panel2q2:e))?o:s,r=typeof o===a?o.call(e,{name:"panel2q2",hash:{},data:i}):o,null!=r&&(u+=r),u+='</span>\r\n\t\t\t\t\t\t</label>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<div class="panel3">',o=null!=(o=t.panel3||(null!=e?e.panel3:e))?o:s,r=typeof o===a?o.call(e,{name:"panel3",hash:{},data:i}):o,null!=r&&(u+=r),u+'</div>\r\n\t\t</div>\r\n\r\n\t\t<div class="modal-footer">\r\n\t\t\t<div class="stop-asking">\r\n\t\t\t\t<div class="checkbox">\r\n\t\t\t\t\t<label class="disabled">\r\n\t\t\t\t\t\t<input type="checkbox" value="" disabled>\r\n\t\t\t\t\t\t'+l((o=null!=(o=t.panel4||(null!=e?e.panel4:e))?o:s,typeof o===a?o.call(e,{name:"panel4",hash:{},data:i}):o))+'\r\n\t\t\t\t\t</label>\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t\t<button type="button" class="btn btn-primary">'+l((o=null!=(o=t.btnSave||(null!=e?e.btnSave:e))?o:s,typeof o===a?o.call(e,{name:"btnSave",hash:{},data:i}):o))+"</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/css!storymaps/common/builder/SaveErrorPopupSocial",[],function(){}),define("storymaps/common/builder/SaveErrorPopupSocial",["lib-build/hbars!./SaveErrorPopupSocial","lib-build/css!./SaveErrorPopupSocial","../utils/CommonHelper","dojo/Deferred","dojo/i18n!commonResources/nls/core.js?v="+app.version],function(e,t,n,i,r){return function(t){function o(){t.find('input[name="optErrorSocial"]').change(function(){var e=t.find('input[name="optErrorSocial"]:checked').val();"story"==e?(t.find(".stop-asking input").attr("disabled","disabled").prop("checked",!1),t.find(".stop-asking label").addClass("disabled")):(t.find(".stop-asking input").removeAttr("disabled"),t.find(".stop-asking label").removeClass("disabled"))}),t.find(".btn-primary").click(function(){t.find(".stop-asking input").is(":checked")&&(app.data.appItem.data.values.config.doNotWarnTitle=!0),a.resolve({choice:t.find('input[name="optErrorSocial"]:checked').val()}),t.modal("hide")})}var a=null;t.append(e({title:r.commonCore.saveErrorSocial.title,panel1:r.commonCore.saveErrorSocial.panel1,panel2:r.commonCore.saveErrorSocial.panel2,panel2q1:r.commonCore.saveErrorSocial.panel2q1,panel2q1tooltip:r.commonCore.saveErrorSocial.panel2q1tooltip,panel2q2:r.commonCore.saveErrorSocial.panel2q2,panel3:r.commonCore.saveErrorSocial.panel3.replace("${MYSTORIES}",'<a href="'+n.getMyStoriesURL()+'" target="_blank">'+r.commonCore.saveErrorSocial.mystories+"</a>"),panel4:r.commonCore.saveErrorSocial.panel4,btnSave:r.commonCore.saveErrorSocial.save})),o(),this.present=function(){return a=new i,t.find(".panel1 .help").tooltip({title:r.commonCore.saveErrorSocial.panel1tooltip+'<img src="resources/tpl/builder/icons/share/builder-help-social.png"/>',html:!0,placement:"right"}),t.find(".panel2 .help").tooltip(),t.modal({keyboard:!1}),a}}}),define("storymaps/common/builder/Builder",["lib-build/css!./Builder","esri/arcgis/Portal","storymaps-react/tpl/builder/panel/BuilderPanel","./SaveErrorPopupSocial","./BuilderHelper","../utils/CommonHelper","esri/IdentityManager","dojo/Deferred","dojo/_base/lang"],function(e,t,n,i,r,o,a,s,l){function u(e,t){b=e,y=t;var a=o.getUrlParams();return app.builder.isDirectCreation=null!=a.fromScratch||null!=a.fromscratch,app.builder.isGalleryCreation=null!=a.fromGallery,app.builder.isDirectCreationFirstSave=app.builder.isDirectCreation,o.getAppID(b.isProd())||app.builder.isDirectCreation?($("body").addClass("builder-mode"),y.init(w),_=new n({container:$(".section-builder-panel"),saveApp:y.saveApp,openSettings:function(){},shareApp:m}),app.builder.builderPanel=_,C=new i($("#saveErrorPopupSocial")),window.onbeforeunload=function(e){if(e=e||window.event,app.isInBuilder&&app.builder.pendingChanges)return e&&(e.returnValue=i18n.commonCore.builderPanel.closeWithPendingChange),i18n.commonCore.builderPanel.closeWithPendingChange},void(app.builder.cleanApp=r.cleanApp)):void console.error("common.builder.Builder - abort builder initialization, no appid supplied")}function c(){var e="",t="";app.data.title&&(e=app.data.title.trim()),app.data.appItem&&app.data.appItem.item&&app.data.appItem.item.title&&(t=app.data.appItem.item.title.trim()),app.builder.titleMatchOnLoad=t==e,(app.builder.isDirectCreation||app.builder.isGalleryCreation)&&(app.builder.titleMatchOnLoad=!0),y.appInitComplete()}function d(){}function p(){if(!app.portal)return console.error("Fatal error - not signed in"),void g("APP");var e="",t="";if(app.data.title&&(e=app.data.title.trim()),app.data.appItem&&app.data.appItem.item&&app.data.appItem.item.title&&(t=app.data.appItem.item.title.trim()),!e)return void g("NONAME");if(app.builder.isDirectCreationFirstSave)app.portal.getPortalUser().getItems().then(function(t){var n=!1;t&&$.each(t,function(t,i){i.title&&i.title.toLowerCase()==e.toLowerCase()&&(n=!0)}),n?g("DUPLICATE"):h(e)});else if(app.builder.titleMatchOnLoad||app.data.appItem.data.values.config.doNotWarnTitle||"public"!=app.data.appItem.item.access||e==t){var n=app.data.appItem.data.values.config.doNotWarnTitle||"public"!=app.data.appItem.item.access&&!app.builder.titleMatchOnLoad;f(n)}else app.builder.titleMatchDialogDisplayed?f(app.builder.titleFromItem):(app.builder.titleMatchDialogDisplayed=!0,
C.present().then(function(e){e=e||{},app.builder.titleFromItem="item"==e.choice,f(app.builder.titleFromItem)}))}function f(e){r.saveApp(e).then(function(){v()},function(){g("APP")})}function h(e){var t=a.findCredential(r.getPortalURL()).userId;l.mixin(app.data.appItem.item,{title:e,snippet:"",uploaded:Date.now(),modified:Date.now(),owner:t,access:"private"}),r.saveApp(!1).then(function(e){var t=document.location.protocol+"//"+document.location.host+document.location.pathname;t.match(/index\.html$/)||(t+="index.html"),l.mixin(app.data.appItem.item,{id:e.id,item:e.item,url:t+"?appid="+e.id}),r.saveApp(!1).then(function(){app.builder.isDirectCreationFirstSave&&y.onFirstAppSave(),app.builder.isDirectCreationFirstSave=!1,window.history.replaceState({},"","index.html?appid="+e.id+"&edit"),v()})},function(){g()})}function m(e){var t=new s,n=app.data.appItem.item;if(!e||!e.sharingLevel||!n)return t.reject(),t;var i=e.sharingLevel;return"public"!=i&&"account"!=i&&"private"!=i&&(i="private"),y.shareApp(i).then(function(e){app.data.appItem.item.access=e.sharingLevel,t.resolve(),y.scanApp()},function(e){e.appShared&&(app.data.appItem.item.access=i),t.reject(e),y.scanApp()}),t}function v(){app.isWebMapCreation=!1,app.builder.pendingChanges=0,_.saveSucceeded(),(app.builder.isGalleryCreation||app.builder.isDirectCreationFirstSave)&&(app.builder.isDirectCreationFirstSave=!1,app.builder.isGalleryCreation=!1),y.scanApp()}function g(e,t){_.saveFailed(e,t),y.saveFailed(e,t)}var b=null,y=null,_=null,w=null,C=null;return this.isDirectCreation=!1,this.isGalleryCreation=!1,this.isDirectCreationFirstSave=!1,{init:u,resize:d,appInitComplete:c,saveApp:p}}),define("lib-build/tpl!storymaps/tpl/builder/BuilderView",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal fade" id="settingsPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="modal fade builderShare" id="sharePopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n<div class="modal fade builderShareError" id="sharePopupError" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="modal fade saveErrorPopup" id="saveErrorPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n<div class="modal fade saveErrorPopupSocial" id="saveErrorPopupSocial" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="modal fade media-picker-popup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="modal fade mapEditPopupNewMap" id="mapEditPopupNewMap" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n<div class="modal fade mapEditPopup" id="mapEditPopup" role="dialog" data-backdrop="static" tabindex="-1"></div>\r\n\r\n<div class="notification-container">\r\n\r\n</div>\r\n';return __p}}),define("lib-build/less!storymaps/tpl/builder/BuilderView",[],function(){}),define("issue-checker/helpers/NormalizeHelper",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,null,[{key:"getAllItems",value:function(e){for(var t=[],n=0;n<e.allItems.length;n++){var i=e.allItems[n],r=e.byId[i];t.push(r)}return t}},{key:"createObject",value:function(){return{byId:{},allItems:[]}}},{key:"addEntry",value:function(e,t,n){e.allItems.push(t),e.byId[t]=n}}]),e}();t.default=r,e.exports=t.default}),define("storymaps-react/tpl/builder/Actions",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={maps:{share:"maps/share"},content:{share:"content/share"},layers:{share:"layers/share",sharePremiumContent:"layers/sharePremiumContent",shareSubscriptionContent:"layers/shareSubscriptionContent"},images:{},videos:{}},e.exports=t.default}),define("storymaps-react/tpl/builder/Controller",["module","exports","../core/Controller","dojo/topic","dojo/_base/lang","lib-build/i18n!resources/tpl/builder/nls/app","issue-checker/helpers/NormalizeHelper","./notification/Undo","./Issues","./Actions"],function(e,t,n,i,r,o,a,s,l,u){"use strict";function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=c(i),v=c(r),g=c(o),b=c(a),y=c(s),_=c(l),w=c(u),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),E=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)};m.default.subscribe("builder-section-update",function(){k.storyChange()}),m.default.subscribe("builder-media-update",function(){k.storyChange()});var k=function(e){function t(){return d(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,e),C(t,null,[{key:"storyChange",value:function(){app.builder.pendingChanges++,m.default.publish("builder-story-update")}},{key:"storyUndo",value:function(){app.builder.pendingChanges--,m.default.publish("builder-story-update")}},{key:"renderStory",value:function(e,n){var i=n[n.length-1],r=n.length;return i&&"credits"==i.type&&(r-=1),n.splice(r,0,app.ui.SectionFactory.createInstance({type:"credits-placeholder"})),E(t.__proto__||Object.getPrototypeOf(t),"renderStory",this).call(this,e,n)}},{key:"onScroll",value:function(e){E(t.__proto__||Object.getPrototypeOf(t),"onScroll",this).call(this,e)}},{key:"openSettings",value:function(){var e=app.data.appItem.data.values.settings.header;e&&e.logo&&e.link||(e=h.default.DEFAULT_HEADER_SETTINGS);var t=app.portal.isOrganization&&v.default.getObject("portal.portalProperties.sharedTheme.logo.small",!1,app),n=t===e.logo.url,i={context:{headerBackground:"#000"},settings:Object.assign({},e,{bookmarks:this.getBookmarksBuilder()},{orgLogoSettings:{hasOrgLogo:!!t,useOrgLogo:n,orgLogo:t}})};app.builder.settingsPopup.open({settings:i}).then(function(e){app.data.appItem.data.values.settings.header={logo:e.logo,link:e.link,social:e.social},this._setBookmarksBuilder(e.bookmarks),this.renderHeader(),this.storyChange()}.bind(this),function(){})}},{key:"getBookmarksBuilder",value:function(){var e=[],t=!0,n=!1,i=void 0;try{for(var r,o=this._sections[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(a.getBookmark){var s=a.getBookmark();s&&(s.title?"cover"==a.type&&(s.title+=" "+g.default.builder.headerConfig.bookmarks.coverAppendage):"sequence"==a.type?s.title=g.default.builder.headerConfig.bookmarks.sequentialDefault:"immersive"==a.type?s.title=g.default.builder.headerConfig.bookmarks.immersiveDefault:"title"==a.type?s.title=g.default.builder.headerConfig.bookmarks.titleDefault:"cover"==a.type&&(s.title=g.default.builder.headerConfig.bookmarks.coverDefault),e.push(s))}}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return e}},{key:"_setBookmarksBuilder",value:function(e){var t=0,n=!0,i=!1,r=void 0;try{for(var o,a=this._sections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;s.getBookmark&&s.setBookmark(e[t++])}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"serializeStory",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=this._sections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.serialize();l&&(e&&(l.id=s.id),t.push(l))}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t}},{key:"reportScanResults",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=this._sections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;t.errorSections.indexOf(s.id)!==-1?s.setScanResults(!0,!1):s.setScanResults(!1,!1)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}this._broadcastScanResults(e)}},{key:"_broadcastScanResults",value:function(e){m.default.publish("check-app-complete",e);for(var t in e.media)e.media.hasOwnProperty(t)&&this._broadcastMediaResults(e,t)}},{key:"_broadcastMediaResults",value:function(e,t){var n=b.default.getAllItems(e.media[t]),i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;if(!l)return;var u=null;if("maps"===t||"scenes"===t)u={layers:this._extractLayerInfo(l.layers,e),details:l.details,errors:this._findMapSceneIssues(l,e,"errors")};else{if("images"!==t&&"videos"!==t)return;u={errors:this._findMediaIssues(l.errors,e.errors)}}m.default.publish("scan/"+t+"/"+l.id,u)}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}},{key:"_extractLayerInfo",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=t.media.layers.byId[l];u&&n.push({id:u.id,details:u.details})}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}},{key:"_findMediaIssues",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=t.byId[l];n.push({id:u.id,actions:u.actions})}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}},{key:"_findMapSceneIssues",value:function(e,t,n){var i=[],r=!0,o=!1,a=void 0;try{for(var s,l=e[n][Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value,c=t[n].byId[u];i.push({id:c.id,actions:c.actions,mediaType:e.mediaType,layers:[]})}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}var d=this._findLayerIssues(e.layers,t[n],t.media.layers,n);return i=i.concat(d),this._combineSharingIssues(i),i}},{key:"_findLayerIssues",value:function(e,t,n,i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value,d=n.byId[c],p=!0,f=!1,h=void 0;try{for(var m,v=function(){var e=m.value,n=t.byId[e],i=r.find(function(e){return e.id===n.id});i?i.layers.push({id:d.id,details:d.details}):r.push({id:n.id,actions:n.actions,mediaType:d.mediaType,layers:[{id:d.id,details:d.details}]})},g=d[i][Symbol.iterator]();!(p=(m=g.next()).done);p=!0)v()}catch(e){f=!0,h=e}finally{try{!p&&g.return&&g.return()}finally{if(f)throw h}}}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}return r}},{key:"_combineSharingIssues",value:function(e){var t=e.findIndex(function(e){return e.id===_.default.layers.unshared}),n=e.findIndex(function(e){return e.id===_.default.maps.unshared});if(t!==-1&&n!==-1){var i=e[t],r={id:_.default.content.unshared,actions:i.actions.map(function(e){return{fix:e.fix,id:w.default.content.share}}),mediaType:"content",layers:i.layers};e.splice(n,0,r);var o=e.findIndex(function(e){return e.id===_.default.maps.unshared});e.splice(o,1);var a=e.findIndex(function(e){return e.id===_.default.layers.unshared});e.splice(a,1)}}},{key:"getStoryOverview",value:function(){var e=[];if(!this._sections)return e;var t=!1;(3==this._sections.length||4==this._sections.length&&"credits"==this._sections[3].type)&&(t=!0);var n=!0,i=!1,r=void 0;try{for(var o,a=this._sections[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=s.type;if("credits-placeholder"!=l)if("cover"==l)e.push({id:s.id,style:"button",label:g.default.builder.builderPanel.coverLabel,hasDelete:!1,hasHide:!1,hasDuplicate:!1,hasOrganize:!1,scanResults:s.getScanResults()});else if("credits"==l)e.push({id:s.id,style:"button",label:g.default.builder.builderPanel.creditsLabel,hasDelete:!0,hasHide:!0,hasDuplicate:!1,hasOrganize:!1,scanResults:s.getScanResults()});else if("title"==l)e.push({id:s.id,style:"thumbnail",size:"short",thumbnail:s.getPreviewThumbnail(),label:s.getPreviewText(),icon:s.getPreviewIcon(),hasDelete:!t,hasHide:!0,hasDuplicate:!0,hasOrganize:!0,scanResults:s.getScanResults()});else if("sequence"==l){var u=!1;3!=this._sections.length||s.getPreviewText()||s.getPreviewThumbnail()||(u=!0),e.push({id:s.id,style:u?"simple-text":"thumbnail",size:"tall",thumbnail:s.getPreviewThumbnail(),text:u?g.default.builder.builderPanel.invite:s.getPreviewText(),hasDelete:!t,hasHide:!0,hasDuplicate:!u,hasOrganize:!t,scanResults:s.getScanResults()})}else e.push({id:s.id,style:"thumbnail",size:"tall",showTitleBar:!0,thumbnail:s.getPreviewThumbnail(),title:s.getPreviewText(),icon:s.getPreviewIcon(),hasDelete:!t,hasHide:!0,hasDuplicate:!0,hasOrganize:!0,scanResults:s.getScanResults()})}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return e}},{key:"addSection",value:function(e){if(e&&(e.type||e.section)&&!(void 0===e.index||e.index<0||e.index>this._sections.length)){var t=e.section||{type:e.type},n=app.ui.SectionFactory.createInstance(t);this._sections.splice(e.index+1,0,n),this._container.find(".section").eq(e.index).after(n.render()),n.postCreate(this._container.find(".section").eq(e.index+1)),e.navigation!==!1&&window.requestAnimationFrame(function(){this.navigateToSection({index:e.index+1,animate:!0,animateSpeed:e.animateSpeed}),n.focus()}.bind(this)),e.ensureFullyVisible&&this._ensureSectionFullyVisible(n),m.default.publish("builder-section-update")}}},{key:"_splitSection",value:function(e){var t=this._sections[e.section].serializePartially(0,e.split+1),n=this._sections[e.section].serializePartially(e.split+1);this.deleteSection({index:e.section,navigation:!1,undo:!1}),this.addSection({index:e.section-1,section:t,navigation:!1}),this.addSection({index:e.section,section:n,navigation:!1})}},{key:"splitAndAddSection",value:function(e){if(e&&e.type&&!(void 0===e.section||e.section<0||e.section>this._sections.length||void 0===e.split||e.split<0)){if(!this._sections[e.section].requireSplitAt(e.split))return void this.addSection({navigation:"title"!=e.type,index:e.section,type:e.type,animateSpeed:800,ensureFullyVisible:"title"==e.type});var t=$(window).scrollTop();this._splitSection(e),this.addSection({index:e.section,type:e.type,navigation:"title"!=e.type,animate:!0,animateSpeed:800}),"title"==e.type&&($(window).scrollTop(t),app.ui.update({forceUpdate:!0}),this._ensureSectionFullyVisible(this._sections[e.section+1]))}}},{key:"_ensureSectionFullyVisible",value:function(e){var t=e._node[0].getBoundingClientRect(),n=0;if(t.bottom>app.display.windowHeight&&(n=app.display.windowHeight-t.bottom),n){var i=document.body.scrollTop||document.documentElement.scrollTop;$("html,body").animate({scrollTop:i-n+50},150)}}},{key:"deleteActiveSection",value:function(){this.deleteSection({index:this._currentSectionIndex})}},{key:"deleteSection",value:function(e){if(e&&e.index){for(var t=[],n=this._currentSectionIndex,i=0;i<this._sections.length;i++)t[i]=this._sections[i];this._sections.splice(e.index,1),this._container[0].removeChild(this._container.find(".section").eq(e.index)[0]);var r=this._sections[this._currentSectionIndex];e.index==this._currentSectionIndex&&(r=this._sections[this._currentSectionIndex-1]);var o={hasMerged:!1};if(e.skipMerge||(o=this._mergeConsecutiveSequenceSections(r)),m.default.publish("builder-section-update"),m.default.publish("builder-should-check-story"),(e.navigation!==!1||o.hasMerged)&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:o.newCurrentSectionIndex,animate:!0,animateSpeed:800})}.bind(this)),e.undo!==!1){var a=new y.default({container:this._container.find(".section").eq(e.index+1),label:g.default.builder.controller.sectionDelete,clearFollowingsAfterUndo:!0});a.display().then(function(){this._restoreSectionBackup(t,n)}.bind(this),function(){})}}}},{key:"duplicateSection",value:function(e){if(e&&e.index){var t=this._sections.slice(e.index,e.index+1)[0],n=t.serialize();n.bookmark&&(n.bookmark.enabled=!1);var i=app.ui.SectionFactory.createInstance(n);this._sections.splice(e.index+1,0,i),this._container.find(".section").eq(e.index).after(i.render()),i.postCreate(this._container.find(".section").eq(e.index+1)),this.navigateToSection({index:e.index+1,animate:!1}),m.default.publish("builder-section-update"),m.default.publish("builder-should-check-story")}}},{key:"getSectionsIndexesByIds",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e[Symbol.iterator]();!(n=(o=a.next()).done);n=!0)for(var s=o.value,l=0;l<this._sections.length;l++){var u=this._sections[l];u.id==s&&t.push(l)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return t}},{key:"organizeSections",value:function(e,t){for(var n=!0,i=0;i<e.length-1;i++)if(e[i]>e[i+1]){n=!1;break}if(!n){for(var r=[],o=this._currentSectionIndex,a=0;a<this._sections.length;a++)r[a]=this._sections[a];for(var s=[],l=-1,u=null,c=0;c<e.length;c++)u=e[c],s.push(this._sections[u]),u==this._currentSectionIndex&&(l=c);var d=this._sections[this._sections.length-1];for("credits"==d.type?s.splice(s.length-1,0,this._sections[this._sections.length-2]):s.push(d),this._sections=s,this.prototype.__proto__.constructor._sections=this._sections,app.data.sections=s,u=this._sections.length-1;u>=0;u--){var p=this._sections[u];this._container.prepend(p._node)}var f=this._sections[l],h=this._mergeConsecutiveSequenceSections(f),v=g.default.builder.controller.sectionOrganize;if(h.hasMerged&&(l=h.newCurrentSectionIndex),l!=-1&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:l,animate:!1})}.bind(this)),!t){var b=new y.default({container:this._node,label:v});b.display({clearPreviousUndo:!0}).then(function(){this._restoreSectionBackup(r,o)}.bind(this),function(){})}m.default.publish("builder-section-update")}}},{key:"_restoreSectionBackup",value:function(e,t){this._sections=e,this.prototype.__proto__.constructor._sections=e,app.data.sections=e;for(var n=this._sections.length-1;n>=0;n--){var i=this._sections[n];this._container.prepend(i._node)}$.each(this._container.children(),function(e,t){var n=!1,i=!0,r=!1,o=void 0;try{for(var a,s=this._sections[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;$(l._node).is(t)&&(n=!0)}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}n||t.remove()}.bind(this)),m.default.publish("builder-section-update"),m.default.publish("builder-should-check-story"),this._currentSectionIndex!=t&&window.requestAnimationFrame(function(){this._currentSectionIndex=-1,this._currentSection=null,this._$currentSection=null,this.navigateToSection({index:t,animate:!1})}.bind(this))}},{key:"_mergeConsecutiveSequenceSections",value:function(e){for(var t=!1,n="",i=this._sections.length-1;i>=0;i--){var r=this._sections[i];if("sequence"==r.type&&"sequence"==n){var o=r.mergeAndSerialize(this._sections[i+1]),a=!1;e!=r&&e!=this._sections[i+1]||(a=!0),this.deleteSection({index:i+1,navigation:!1,undo:!1,skipMerge:!0}),this.deleteSection({index:i,navigation:!1,undo:!1,skipMerge:!0}),this.addSection({index:i-1,section:o,navigation:!1}),a&&(e=this._sections[i]),t=!0}n=r.type}for(var s=-1,l=this._sections.length-1;l>=0;l--){var u=this._sections[l];u==e&&(s=l)}return{hasMerged:t,newCurrentSectionIndex:s}}}]),t}(h.default);t.default=k,e.exports=t.default}),define("lib-build/tpl!storymaps/common/builder/mediaPicker/MediaPickerPopup",[],function(){return function(obj){obj||(obj={});var __t,__p="",__e=_.escape;with(obj)__p+='<div class="modal-dialog">\r\n  <div class="modal-content">\r\n    <div class="modal-logo"></div>\r\n    <div class="modal-header">\r\n      <h4 class="modal-title"></h4>\r\n      <button type="button" class="close" data-dismiss="modal" aria-label="Close">\r\n        <span aria-hidden="true">&times;</span>\r\n      </button>\r\n    </div>\r\n    <div class="modal-body" id="media-picker">\r\n    </div>\r\n  </div>\r\n</div>\r\n';return __p}}),define("lib-build/less!storymaps/common/builder/mediaPicker/MediaPickerPopup",[],function(){}),define("storymaps-react/common/builder/mediaPicker/constants",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={providers:{GOOGLE_PHOTOS:"googlePhotos",FLICKR:"flickr",ARCGIS:"arcgis",URL:"urlContent",UNSPLASH:"unsplash"},contentType:{IMAGE:"image",VIDEO:"video",WEBPAGE:"webpage",WEBMAP:"webmap",WEBSCENE:"webscene"},uploadFileExtensions:{IMAGE:[".png",".jpeg",".jpg",".gif",".bmp"]},fetchStatus:{NOT_FETCHED:"NOT_FETCHED",FETCHING:"FETCHING",SUCCESS:"SUCCESS",ERROR:"ERROR",NON_MATCHING_URL:"NON_MATCHING_URL",NOT_AUTHORIZED:"NOT_AUTHORIZED",NOT_FOUND:"NOT_FOUND",BAD_FORMAT:"BAD_FORMAT"},galleryContent:{ALBUMS:"ALBUMS",IMAGES:"IMAGES",AGOL:"AGOL",IMG_HEIGHT:100,ALBUM_HEIGHT:150},searchType:{USER:"USER",TEXT:"TEXT"},searchLocation:{STORY:"STORY",AGOL:"AGOL",ORG:"ORG",MINE:"MINE"},agolContentType:{WEBMAP:"Web Map",WEBSCENE:"Web Scene",IMAGE:"Image"},sortField:{DATE:"modified",TITLE:"title",VIEWS:"numViews"},sortOrder:{ASC:"asc",DESC:"desc"},flickrLicenseStrings:{PUBLIC_DOMAIN:"PUBLIC_DOMAIN",COMMERCIAL:"COMMERCIAL",NON_COMMERCIAL:"NON_COMMERCIAL",ALL_RIGHTS_RESERVED:"ALL_RIGHTS_RESERVED",ANY:"ANY"},flickrLicenseVals:{PUBLIC_DOMAIN:[8,9,10],COMMERCIAL:[4,5,8,9,10],NON_COMMERCIAL:[1,2,4,5,8,9,10],ANY:[0,1,2,4,5,8,9,10]},userFetchError:{NO_USER:"NO_USER",NO_PHOTOS:"NO_PHOTOS",ERROR:"ERROR"},photoSettings:{maxWidth:1920,quality:.8,idealFileSize:5e5,maxFileSize:1e7},blankBackground:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"},e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/browsePanel/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.UPDATE_ALBUMS="UPDATE_ALBUMS",e.UPDATE_ALBUM_FETCH_STATUS="UPDATE_ALBUM_FETCH_STATUS",e.UPDATE_IMAGE_FETCH_STATUS="UPDATE_IMAGE_FETCH_STATUS",e.UPDATE_USERNAME="UPDATE_USERNAME",e.UPDATE_DISPLAYED_CONTENT="UPDATE_DISPLAYED_CONTENT",e.UPDATE_IMAGES="UPDATE_IMAGES",e.UPDATE_SELECTED_ALBUM="UPDATE_SELECTED_ALBUM",e.UPDATE_SEARCH_TYPE="UPDATE_SEARCH_TYPE",e.UPDATE_USER_SEARCH_TERM="UPDATE_USER_SEARCH_TERM",e.UPDATE_PHOTO_SEARCH_TERM="UPDATE_PHOTO_SEARCH_TERM",e.UPDATE_USER_LICENSE="UPDATE_USER_LICENSE",e.UPDATE_PHOTO_LICENSE="UPDATE_PHOTO_LICENSE",e.UPDATE_SEARCH_LOCATION="UPDATE_SEARCH_LOCATION",e.UPDATE_SEARCH_TERM="UPDATE_SEARCH_TERM",e.UPDATE_AUTHORIZED_CONTENT_TYPES="UPDATE_AUTHORIZED_CONTENT_TYPES",e.UPDATE_AVAILABLE_CONTENT_TYPES="UPDATE_AVAILABLE_CONTENT_TYPES",e.UPDATE_SELECTED_CONTENT_TYPES="UPDATE_SELECTED_CONTENT_TYPES",e.UPDATE_SORT_FIELD="UPDATE_SORT_FIELD",e.UPDATE_SORT_ORDER="UPDATE_SORT_ORDER"}),define("storymaps-react/common/builder/mediaPicker/browsePanel/reducer",["module","exports","redux","../constants","./actionTypes"],function(e,t,n,i,r){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments[1];if(!f(t,m.default.providers.FLICKR))return e;var n,i;switch(t.type){case v.UPDATE_USER_SEARCH_TERM:n="userSearchTerm",i="term";break;case v.UPDATE_PHOTO_SEARCH_TERM:n="photoSearchTerm",i="term";break;case v.UPDATE_SEARCH_TYPE:n="selectedTab",i="type";break;case v.UPDATE_USER_LICENSE:n="userLicense",i="license";break;case v.UPDATE_PHOTO_LICENSE:n="photoLicense",i="license";break;default:return h(e,t)}return Object.assign({},e,s({},n,t.value[i]))}function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k,t=arguments[1];return f(t,m.default.providers.GOOGLE_PHOTOS)?h(e,t):e}function c(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments[1];if(!f(t,m.default.providers.UNSPLASH))return e;var n,i;switch(t.type){case v.UPDATE_PHOTO_SEARCH_TERM:n="photoSearchTerm",i="term";break;default:return h(e,t)}return Object.assign({},e,s({},n,t.value[i]))}function d(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:T,t=arguments[1];if(!f(t,m.default.providers.ARCGIS))return e;var n,i;switch(t.type){case v.UPDATE_SEARCH_LOCATION:n="searchLocation",i="type";break;case v.UPDATE_SEARCH_TERM:n="searchStr",i="term";break;case v.UPDATE_SORT_FIELD:n="sortField",i="field";break;case v.UPDATE_SORT_ORDER:n="sortOrder",i="order";break;default:return h(e,t)}return Object.assign({},e,s({},n,t.value[i]))}function p(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments[1];return f(t,m.default.providers.URL)?h(e,t):e}function f(e,t){return!(!e||!e.value||e.value.providerType!==t)}function h(e,t){var n,i;switch(t.type){case v.UPDATE_ALBUMS:n="albums",i="albums";break;case v.UPDATE_ALBUM_FETCH_STATUS:n="albumFetchStatus",i="fetchStatus";break;case v.UPDATE_IMAGE_FETCH_STATUS:n="imageFetchStatus",i="fetchStatus";break;case v.UPDATE_USERNAME:n="userName",i="userName";break;case v.UPDATE_DISPLAYED_CONTENT:n="displayedContent",i="displayedContent";break;case v.UPDATE_IMAGES:n="images",i="images";break;case v.UPDATE_SELECTED_ALBUM:n="selectedAlbum",i="selectedAlbum";break;default:return e}return Object.assign({},e,s({},n,t.value[i]))}Object.defineProperty(t,"__esModule",{value:!0});var m=a(i),v=o(r),g={albums:[],selectedAlbum:{},images:[],displayedContent:m.default.galleryContent.ALBUMS,albumFetchStatus:m.default.fetchStatus.NOT_FETCHED,imageFetchStatus:m.default.fetchStatus.NOT_FETCHED,userName:""},b={selectedTab:m.default.searchType.TEXT,selectedUser:"",userSearchTerm:"",userLicense:m.default.flickrLicenseStrings.ANY,photoSearchTerm:"",photoLicense:m.default.flickrLicenseStrings.COMMERCIAL},y={},_={displayedContent:m.default.galleryContent.AGOL,searchLocation:m.default.searchLocation.MINE,searchStr:"",sortField:m.default.sortField.DATE,sortOrder:m.default.sortOrder.DESC},w={photoSearchTerm:""},C={},E=Object.assign({},g,b),k=Object.assign({},g,y),T=Object.assign({},g,_),x=Object.assign({},g,w),S=Object.assign({},g,C);t.default=(0,n.combineReducers)({flickr:l,googlePhotos:u,agol:d,unsplash:c,urlContent:p}),e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/actionTypes",["exports"],function(e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.BROWSE_SELECT_PROVIDER="BROWSE_SELECT_PROVIDER"}),define("storymaps-react/common/builder/mediaPicker/reducer",["module","exports","redux","./browsePanel/reducer","./constants","./actionTypes"],function(e,t,n,i,r,o){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=s(i),u=s(r),c=a(o),d={browseSelectedProvider:u.default.providers.ARCGIS,authorizedMedia:[]},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments[1];switch(t.type){case c.BROWSE_SELECT_PROVIDER:return Object.assign({},e,{browseSelectedProvider:t.value});case c.UPDATE_AUTHORIZED_MEDIA:return Object.assign({},e,{authorizedMedia:t.value});default:return e}};t.default=(0,n.combineReducers)({ui:p,browsePanel:l.default}),e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/utils/Helper",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(e){var t=void 0;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})},r=function e(){for(var t="",i={}.hasOwnProperty,r=0;r<arguments.length;r++){var o=arguments[r];if(o){var a="undefined"==typeof o?"undefined":n(o);if("string"===a||"number"===a)t+=" "+o;else if($.isArray(o))t+=" "+e.apply(null,o);else if("object"===a)for(var s in o)i.call(o,s)&&o[s]&&(t+=" "+s)}}return t.substr(1)},o=function(e){return e.replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)})},a=function(e,t,n){return e.replace("${"+t+"}",n)},s=function(e){return"/"===e.substr(-1)?e.substr(0,e.length-1):e};t.default={classnames:r,dataURItoBlob:i,stripTrailingSlash:s,unescapeBrands:o,mixinString:a},e.exports=t.default}),define("commonResources/nls/media",{root:{mediaPicker:{browseToggle:{urls:"Link to Content",urls_short:"Link",contentType:{error:"No authorized media.",imageOnly:"In this part of the story, you can add an image.",imageAndVideo:"In this part of the story, you can add an image or a video.",imageVideoWebpage:"In this part of the story, you can add an image, a video, or a webpage."}},browsePanel:{providers:{searchingFor:'Searching for "${searchterm}"...',searchedFor:'Search results for "${searchterm}"',albumsOf:"${username}'s albums",noPhotosFound:"No photos matched your search. Please try again.",noItemsFound:"No items matched your search. Please try again.",noItemsInThisStory:"No content from ArcGIS has been added to this story yet.",limitReached:"Showing 100 items. If you didn't find what you need, try a keyword search.",galleryItems:{uploadError:"Sorry, this item failed to upload."},agol:{remove1:"Delete this unused image from your ArcGIS account.",remove2:"(You'll need to upload it again if you decide to use it later.)",removeFailed:"Remove this inaccessible image from this list.",modified:"Modified ${date}",uploaded:"Uploaded ${date}",contentByAuthor:"${contentType} by ${author}"},googlePhotos:{searchAndBrowse:"Browse photos on ${Picasa} or ${Google+}"},flickr:{photostream:"Photostream",searchAndBrowse:"Search and browse photos on ${Flickr}"},unsplash:{searchAndBrowse:"Search photos on ${Unsplash}",photoBy:"Photo by ${username}",userLink:"Go to ${username}'s ${Unsplash} page"},urlContent:{uploadHeaders:{generic:"Link to content on the web",imageOnly:"Link to an image on the web",imageAndVideo:"Link to an image or video on the web"},linkText:{imageOnly:"In the box above, you can link directly to photos.",imageAndVideo1:"In the box above, you can paste links or iframe code for videos from ${YouTube} and ${Vimeo}.",imageAndVideo2:"You can also link directly to photos.",imageVideoWebpage1:"In the box above, you can paste links or iframe code for videos from ${YouTube} and ${Vimeo}.",imageVideoWebpage2:"You can also link directly to photos, web pages, or web applications.",ender:"When possible, use secure (https) links."},embedProtocol:{embedProtocolLabel:"Load page over a secure connection (https)",embedProtocolWarning1:"If this page does not load in your story, it can't be embedded for web security reasons.",embedProtocolWarning2:"If this page does not load in your story, uncheck this option and try again. If the page still does not load, it can't be embedded for web security reasons.",
embedProtocolWarning3:"As an alternative, add a link in your narrative to open the page in a new browser tab. ${linkText}",linkText:"Learn More."},placeholder:"${https://}... or ${http://}... or ${<iframe>}",uploadErrors:{generic:"Something went wrong with the address entered. Please try again.",imageOnly1:"You must use an image in this part of the story.",imageOnly2:"Please provide a link to an image (.jpg, .png, .gif), or choose an image from ${ArcGIS}, ${Flickr}, ${Google+}, or ${Unsplash}.",imageAndVideo1:"You must use an image or video in this part of the story.",imageAndVideo2:"Please provide a link to an image (.jpg, .png, .gif) or a video on ${YouTube} or ${Vimeo}, or choose an image from ${ArcGIS}, ${Flickr}, ${Google+}, or ${Unsplash}.",badFormat:"The link to the ${media-type} you are trying to add is formatted incorrectly.",inaccessible:"The ${media-type} you are trying to add is missing or not accessible.",tryAgain:"Please check the address and try again.",mediaTypes:{VIDEO:"video",IMAGE:"image",generic:"media"}}}},sidePanel:{googlePhotos:{placeholder:"Email or ${Picasa}/${Google+} ID",helpText:"You can add photos uploaded to ${Picasa} or ${Google+} to your story. ${helpLinkText} about using images stored in your ${Google} account in your stories.",helpLinkText:"Learn more",cannotFindUser:"Cannot find user ${username}. Please try again."},unsplash:{placeholder:"Search for photos",aboutText:"${Unsplash} is a curated collection of free, high-quality photos.",copyrightText:"All photos published on ${Unsplash} are licensed under the ${CC0} License. Find more information ${moreInfoLink}.",moreInfoLink:"here"},flickr:{searchType:{account:"${Flickr} Account",text:"All ${Flickr}"},placeholders:{user:"Search for account",userText:"Search this account for photos",text:"Search for photos"},errors:{cannotFindUser:"Cannot find user ${username}.",noUserPhotos:"${username} does not have any public photos.",didYouMean:"Did you mean ${username}?",generalUserError:"Something went wrong when searching for user ${username}."},licenses:{licenseLabel:"License: ",public:"Public Domain",commercial:"OK for Commercial Use",nonCommercial:"OK for Non-Commercial Use",reserved:"All Rights Reserved",any:"Any License"}},agol:{searchLocation:{thisStory:"This Story",agol:"ArcGIS Online",myOrg:"${orgname} Organization",myContent:"My Content"},createContent:{or:"OR",dragAndDrop:"Drop image(s) here",uploadImage:"Browse for image(s)",agolInfo:"Images will be stored in your ArcGIS account and accessible only inside your story.",saveBeforeUpload:"Once you save this story, you can upload images to ArcGIS here.",fileTypesImage:"Supported file types: .png, .jpeg, .jpg, .gif, .bmp"},filterAndSort:{webmap:"Web Map",webscene:"Web Scene",image:"Image",date:"Date",sortByDate:"Sort by date",title:"Title",sortByTitle:"Sort by title",views:"Views",search:"Search by keyword or ID"}}}}}},ar:1,bs:1,cs:1,da:1,de:1,el:1,es:1,et:1,fi:1,fr:1,he:1,hi:1,hr:1,id:1,it:1,ja:1,ko:1,lt:1,lv:1,nl:1,nb:1,pl:1,"pt-br":1,"pt-pt":1,ro:1,ru:1,sr:1,sv:1,th:1,tr:1,vi:1,"zh-cn":1,"zh-hk":1,"zh-tw":1}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggle",[],function(){}),define("lib-build/css!storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggle",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggle",["module","exports","react","../utils/Helper","../constants","lib-build/i18n!commonResources/nls/media","lib-build/less!./BrowseToggle","lib-build/css!./BrowseToggle"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},m=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),v=f.default.mediaPicker.browseToggle,g=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),m(t,[{key:"getLongerTitleClass",value:function(e,t){return e.length>t?"longer-title":""}},{key:"getShrinkableTitle",value:function(e,t){if(this.props.shortTitle){var n="title-text visible-xs-inline visible-sm-inline "+this.getLongerTitleClass(this.props.shortTitle,t),i="title-text hidden-xs hidden-sm "+this.getLongerTitleClass(this.props.title,t);return c.default.createElement("span",{className:e},c.default.createElement("span",{className:n},this.props.shortTitle),c.default.createElement("span",{className:i},this.props.title))}var r=e+" title-text "+this.getLongerTitleClass(this.props.title,t);return c.default.createElement("span",{className:r},this.props.title)}},{key:"getInlineTitle",value:function(){return c.default.createElement("div",{className:"inline-title"},c.default.createElement("span",{className:"fa "+this.props.inlineIcon}),this.getShrinkableTitle("",12))}},{key:"getLogoTitle",value:function(){return c.default.createElement("div",{className:"provider-logo",alt:"this.props.title"})}},{key:"getPlainTitle",value:function(){return c.default.createElement("div",null,this.getShrinkableTitle("plain-title",16))}},{key:"differentiateTitle",value:function(){return this.props.fullLogo?this.getLogoTitle():this.props.inlineIcon?this.getInlineTitle():this.getPlainTitle()}},{key:"render",value:function(){var e=d.default.classnames(["browse-toggle",this.props.type,{selected:this.props.isSelected}]);return c.default.createElement("div",{className:e,onClick:this.props.onClick},this.differentiateTitle())}}]),t}(c.default.Component),b=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),m(t,[{key:"getInfoSpan",value:function(e){return c.default.createElement("span",{className:"mp-type-details info"},c.default.createElement("i",{className:"fa fa-info-circle"}),c.default.createElement("span",null,e))}},{key:"getErrorSpan",value:function(e){return c.default.createElement("span",{className:"mp-type-error error"},c.default.createElement("i",{className:"fa fa-warning"}),c.default.createElement("span",null,e))}},{key:"getMediaList",value:function(e){if(!e||!e.length)return this.getErrorSpan(v.contentType.error);var t=p.default.contentType.IMAGE,n=p.default.contentType.VIDEO,i=p.default.contentType.WEBPAGE;switch(e.length){case 1:return e.indexOf(t)>=0?this.getInfoSpan(v.contentType.imageOnly):this.getErrorSpan("only one authorized media, but it wasnt image!");case 2:return e.indexOf(t)>=0&&e.indexOf(n)>=0?this.getInfoSpan(v.contentType.imageAndVideo):this.getErrorSpan("two authorized media, but it wasnt image/video!");case 3:return e.indexOf(t)>=0&&e.indexOf(n)>=0&&e.indexOf(i)>=0?this.getInfoSpan(v.contentType.imageVideoWebpage):this.getErrorSpan("three authorized media, but it wasnt image/video/webpage!");default:return this.getErrorSpan("more than three but less than all authorized media... ?")}}},{key:"render",value:function(){var e=this.props.authorizedMedia;return e&&e.length&&e.length===Object.keys(p.default.contentType).length?null:c.default.createElement("div",{className:"mp-type-message"},this.getMediaList(e))}}]),t}(c.default.Component),y=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),m(t,[{key:"getDivider",value:function(e){return e<this.props.browseToggles.length-1?c.default.createElement("div",{className:"vert-divider",key:"divider-"+e}):null}},{key:"renderBrowseToggles",value:function(){var e=this,t=[];return this.props.browseToggles.forEach(function(n,i){t.push(c.default.createElement(g,h({onClick:function(){e.props.selectProvider(n.type)},key:n.type,isLast:i===e.props.browseToggles.length-1,isSelected:n.type===e.props.browseSelectedProvider},n)));var r=e.getDivider(i);r&&t.push(r)}),t}},{key:"render",value:function(){return c.default.createElement("div",{className:"mp-header"},c.default.createElement(b,{authorizedMedia:this.props.authorizedMedia}),c.default.createElement("div",{className:"mp-browse-toggles"},this.renderBrowseToggles()))}}]),t}(c.default.Component);t.default=y,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return{type:r.BROWSE_SELECT_PROVIDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.selectProvider=i;var r=n(t)}),define("storymaps-react/common/builder/mediaPicker/browseToggle/BrowseToggleContainer",["module","exports","react-redux","./BrowseToggle","./../actions","lib-build/i18n!commonResources/nls/media"],function(e,t,n,i,r,o){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var l=s(i),u=a(r),c=s(o),d=c.default.mediaPicker.browseToggle,p=[{type:"arcgis",title:"ArcGIS",media:"geo",fullLogo:!0},{type:"flickr",title:"Flickr",media:"images",inlineIcon:"fa-flickr"},{type:"googlePhotos",title:"Google+",media:"images",inlineIcon:"fa-google"},{type:"unsplash",title:"Unsplash",media:"images",inlineIcon:"fa-camera"},{type:"urlContent",title:d.urls,shortTitle:d.urls_short,media:"links",inlineIcon:"fa-link"}],f=function(e){return{browseSelectedProvider:e.ui.browseSelectedProvider,browseToggles:p}},h=function(e){return{selectProvider:function(t){e(u.selectProvider(t))}}},m=(0,n.connect)(f,h)(l.default);t.default=m,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/browsePanel/actions",["exports","./actionTypes"],function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return{type:y.UPDATE_ALBUMS,value:e}}function r(e){return{type:y.UPDATE_ALBUM_FETCH_STATUS,value:e}}function o(e){return{type:y.UPDATE_IMAGE_FETCH_STATUS,value:e}}function a(e){return{type:y.UPDATE_USERNAME,value:e}}function s(e){return{type:y.UPDATE_DISPLAYED_CONTENT,value:e}}function l(e){return{type:y.UPDATE_IMAGES,value:e}}function u(e){return{type:y.UPDATE_SELECTED_ALBUM,value:e}}function c(e){return{type:y.UPDATE_SEARCH_TYPE,value:e}}function d(e){return{type:y.UPDATE_USER_SEARCH_TERM,value:e}}function p(e){return{type:y.UPDATE_PHOTO_SEARCH_TERM,value:e}}function f(e){return{type:y.UPDATE_USER_LICENSE,value:e}}function h(e){return{type:y.UPDATE_PHOTO_LICENSE,value:e}}function m(e){return{type:y.UPDATE_SEARCH_LOCATION,value:e}}function v(e){return{type:y.UPDATE_SEARCH_TERM,value:e}}function g(e){return{type:y.UPDATE_SORT_FIELD,value:e}}function b(e){return{type:y.UPDATE_SORT_ORDER,value:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.updateAlbums=i,e.updateAlbumFetchStatus=r,e.updateImageFetchStatus=o,e.updateUsername=a,e.updateDisplayedContent=s,e.updateImages=l,e.updateSelectedAlbum=u,e.updateSearchType=c,e.updateUserSearchTerm=d,e.updatePhotoSearchTerm=p,e.updateUserLicense=f,e.updatePhotoLicense=h,e.updateSearchLocation=m,e.updateSearchTerm=v,e.updateSortField=g,e.updateSortOrder=b;var y=n(t)}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/Breadcrumbs",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/Breadcrumbs",["module","exports","react","lib-build/less!./Breadcrumbs"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){var t=function(){return e.crumbs.map(function(t){var n=function(){e.onClick({link:t.link})};return t.active?o.default.createElement("li",{key:t.id,onClick:n,className:"active"},t.title):o.default.createElement("li",{key:t.id,onClick:n},o.default.createElement("a",null,t.title))})};return o.default.createElement("div",{className:"row flex-static",style:e.crumbs&&e.crumbs.length?null:{display:"none"}},o.default.createElement("ol",{className:"breadcrumb"},t()))}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n);t.default=r,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/BreadcrumbModel",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,i,r){n(this,e),this.id=t+"-"+i,this.title=t,this.link=i,this.active=this.link===r};t.default=i,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/AGOLHeader",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/breadcrumbs/AGOLHeader",["module","exports","react","../../constants","lib-build/i18n!commonResources/nls/media","lib-build/less!./AGOLHeader"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=d.default.mediaPicker.browsePanel.sidePanel.agol,h=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u.default.createElement("span",{className:"compound-map fa fa-stack"},u.default.createElement("i",{className:"fa fa-map fa-inverse fa-stack-1x"}),u.default.createElement("i",{className:"fa fa-map-o fa-stack-1x"}),u.default.createElement("i",{className:"fa fa-circle fa-stack-1x auto-dim"}),u.default.createElement("i",{className:"fa fa-map-marker fa-stack-1x auto-dim"}))}}]),t}(u.default.Component),m=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getIconSpan",value:function(){return this.props.value===c.default.contentType.WEBMAP?u.default.createElement(h,null):u.default.createElement("span",{className:"fa fa-"+this.props.icon})}},{key:"render",value:function(){return u.default.createElement("label",{className:"btn btn-clear"+(this.props.checked?" active":""),tabIndex:"4",htmlFor:this.props.id,title:this.props.label,onKeyPress:this.props.onClick,onClick:this.props.onClick},this.getIconSpan(),u.default.createElement("span",{className:"fa fa-check floating-check"}),u.default.createElement("input",{tabIndex:"-1",onChange:this.props.onClick,checked:this.props.checked,type:"checkbox",name:"contentType",value:this.props.value,id:this.props.id}))}}]),t}(u.default.Component),v=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"thisOnClick",value:function(e){if(e.charCode+0===e.charCode){if(13!==e.charCode)return;$(e.currentTarget).toggleClass("active")}var t=$(e.currentTarget.parentElement).find(".active input");if(!t.length)return void this.props.onKeyPress([]);var n=t.map(function(e,t){return t.value}).get();this.props.onKeyPress(n)}},{key:"isSelected",value:function(e){return this.props.selectedTypes.indexOf(e)>=0&&this.props.availTypes.indexOf(e)>=0}},{key:"renderToggle",value:function(e){var t=this,n=void 0;switch(e){case c.default.contentType.WEBMAP:n=null;break;case c.default.contentType.WEBSCENE:n="globe fa-2x";break;case c.default.contentType.IMAGE:n="picture-o fa-2x";break;case c.default.contentType.VIDEO:n="video-camera fa-2x";break;case c.default.contentType.AUDIO:n="volume-up fa-2x";break;default:return console.warn("unknown toggle type",e),null}return u.default.createElement(m,{id:"agol-"+e,key:"agol-"+e,icon:n,onClick:function(e){return t.thisOnClick(e)},value:e,label:f.filterAndSort[e],checked:this.isSelected(e)})}},{key:"render",value:function(){return u.default.createElement("div",{className:"filter-toggle btn-group","data-toggle":"buttons"},this.props.availTypes.map(this.renderToggle.bind(this)))}}]),t}(u.default.Component),g=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"vert-divider"})}}]),t}(u.default.Component),b=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortClass",value:function(){return"fa-angle-"+(this.props.order===c.default.sortOrder.ASC?"up":"down")}},{key:"render",value:function(){return u.default.createElement("span",{className:"fa fa-stack calendar-sort"},u.default.createElement("i",{className:"fa fa-stack-1x fa-lg fa-calendar-o"}),u.default.createElement("i",{className:"fa fa-stack-1x "+this.getSortClass()}))}}]),t}(u.default.Component),y=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortClass",value:function(){return"fa-sort-alpha-"+(this.props.order===c.default.sortOrder.ASC?"asc":"desc")}},{key:"render",value:function(){return u.default.createElement("span",{className:"fa inline "+this.getSortClass()})}}]),t}(u.default.Component),_=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"getSortIcon",value:function(){switch(this.props.value){case c.default.sortField.DATE:return u.default.createElement(b,{order:this.props.order});case c.default.sortField.TITLE:return u.default.createElement(y,{order:this.props.order})}}},{key:"render",value:function(){return u.default.createElement("label",{className:"btn btn-clear"+(this.props.checked?" active":""),tabIndex:"5",title:this.props.hoverText,htmlFor:this.props.id,onKeyPress:this.props.onClick,onClick:this.props.onClick},this.getSortIcon(),u.default.createElement("span",{className:"btn-label"},this.props.label),u.default.createElement("input",{onChange:this.props.onClick,checked:this.props.checked,type:"radio",name:"contentType",value:this.props.value,id:this.props.id}))}}]),t}(u.default.Component),w=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"thisOnClick",value:function(e,t,n){if(e.charCode+0!==e.charCode||13===e.charCode){if(t===this.props.sortField){var i=this.switchSortOrder(n);return void this.props.onKeyPress.sortOrderChange(i,t)}this.props.onKeyPress.sortFieldChange(t,n)}}},{key:"switchSortOrder",value:function(e){return e===c.default.sortOrder.ASC?c.default.sortOrder.DESC:c.default.sortOrder.ASC}},{key:"isSelected",value:function(e){return this.props.sortField===c.default.sortField[e]}},{key:"render",value:function(){var e=this;return u.default.createElement("div",{className:"sort-toggle btn-group","data-toggle":"buttons"},u.default.createElement(_,{id:"date-sort",onClick:function(t){return e.thisOnClick(t,c.default.sortField.DATE,e.props.sortOrder.date)},value:c.default.sortField.DATE,checked:this.isSelected("DATE"),order:this.props.sortOrder.date,label:f.filterAndSort.date,hoverText:f.filterAndSort.sortByDate}),u.default.createElement(_,{id:"title-sort",onClick:function(t){return e.thisOnClick(t,c.default.sortField.TITLE,e.props.sortOrder.title)},value:c.default.sortField.TITLE,checked:this.isSelected("TITLE"),order:this.props.sortOrder.title,label:f.filterAndSort.title,hoverText:f.filterAndSort.sortByTitle}))}}]),t}(u.default.Component),C=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"render",value:function(){return u.default.createElement("div",{className:"agol-header"},u.default.createElement(v,{availTypes:this.props.containerState.availableContentTypes,selectedTypes:this.props.containerState.selectedContentTypes,onKeyPress:this.props.onKeyPress.selectedContentTypesChange}),u.default.createElement(g,null),u.default.createElement(w,{onKeyPress:this.props.onKeyPress,sortField:this.props.sortField,sortOrder:{date:this.props.containerState.dateSortOrder,title:this.props.containerState.titleSortOrder}}))}}]),t}(u.default.Component);t.default=C,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/gallery/GalleryItem",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/gallery/GalleryItem",["module","exports","react","./../../constants","../../utils/Helper","dojo/topic","lib-build/i18n!commonResources/nls/media","lib-build/less!./GalleryItem"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(e){var t=function(){e.onAlbumClicked({id:e.item.id,title:e.item.title})},n=function(){return e.item.getPicUrl?void e.item.getPicUrl(e.item).then(function(e){m.default.publish("MEDIA-PICKER-SELECTION",Object.assign(e,{type:"image"}))}):void m.default.publish("MEDIA-PICKER-SELECTION",{type:"image",width:e.item.width,height:e.item.height,url:e.item.picUrl,thumbUrl:e.item.thumbUrl})},i=function(){var t=e.item.type,n={type:t};"image"===t?Object.assign(n,{url:e.item.picUrl,thumbUrl:e.item.thumbUrl}):Object.assign(n,{id:e.item.id}),m.default.publish("MEDIA-PICKER-SELECTION",n)},r=function(){switch(e.type){case f.default.galleryContent.ALBUMS:return l();case f.default.galleryContent.IMAGES:return u();case f.default.galleryContent.AGOL:return d();default:return null}},o=function(){return{width:f.default.galleryContent.ALBUM_HEIGHT+"px"}},a=function(e){var t;if(e.thumbWidth&&e.thumbHeight){var n=f.default.galleryContent.IMG_HEIGHT/parseInt(e.thumbHeight,10);t=parseInt(e.thumbWidth,10)*n+"px"}return{width:t||"auto",maxWidth:t?null:1.5*f.default.galleryContent.IMG_HEIGHT+"px"}},s=function(e){switch(e.type){case f.default.contentType.WEBMAP:return"map-o";case f.default.contentType.WEBSCENE:return"globe fa-2x";case f.default.contentType.IMAGE:return"picture-o";default:return"star"}},l=function(){return p.default.createElement(y,{thumbUrl:e.item.tokenizedThumbUrl||e.item.thumbUrl||e.item.thumbnail,title:e.item.name||e.item.title,onClick:t,startingClasses:"album",computedStyle:o(),showPopupDescription:!1})},u=function(){return p.default.createElement(y,{thumbUrl:c(e.item),title:e.item.name||e.item.title,onClick:n,startingClasses:"image",computedStyle:a(e.item),showPopupDescription:!1,item:e.item})},c=function(e){return e.dataUrl||e.tokenizedThumbUrl||e.thumbUrl||e.thumbnail},d=function(){var t=h.default.classnames(["image",{unused:e.item.usedInStory===!1,loading:e.item.isTemp}]);return p.default.createElement(y,{thumbUrl:c(e.item),loading:e.item.isTemp,hasError:e.item.error,title:e.item.name||e.item.title,onItemDelete:e.item.isTemp?null:e.onItemDelete,onClick:e.item.error||e.item.isTemp?null:i,startingClasses:t,computedStyle:a(e.item),iconClass:s(e.item),showPopupDescription:!0,showOwner:e.showOwner,item:e.item})},v=r();return v}Object.defineProperty(t,"__esModule",{value:!0});var p=s(n),f=s(i),h=s(r),m=s(o),v=s(a),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),b=v.default.mediaPicker.browsePanel.providers.galleryItems,y=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return c(t,e),g(t,[{key:"getIconSpan",value:function(e){return p.default.createElement("span",{className:"fa fa-lg fa-"+e})}},{key:"getTextClass",value:function(e){if(!e)return null;var t=e.match(/\s|\-/);return!t||t.index>12?"break-all":null}},{key:"getHoverText",value:function(){if(!this.props.item||!this.props.item.hoverText)return null;var e=this.props.item.usedInStory===!1?"unused":null,t=this.props.showOwner?this.props.item.hoverText.typeAndOwner:this.props.item.hoverText.typeOnly;return"<div "+(e?'class="'+e+'"':"")+">"+t+"</div>"}},{key:"getImgDiv",value:function(){return this.props.hasError?p.default.createElement("div",{className:"img-wrapper load-error"},p.default.createElement("div",{className:"alert alert-danger"},p.default.createElement("span",{className:"fa fa-exclamation-triangle text-danger"}),p.default.createElement("br",null),p.default.createElement("span",{className:"text-danger"},b.uploadError),this.getDeleteButton())):this.props.showPopupDescription?p.default.createElement("div",{className:"img-wrapper"},p.default.createElement("img",{"data-toggle":"popover","data-trigger":"hover","data-html":"true","data-placement":"left","data-content":this.getHoverText(),src:this.props.thumbUrl}),this.getLoading(),this.getDeleteButton()):p.default.createElement("div",{className:"img-wrapper"},p.default.createElement("img",{src:this.props.thumbUrl}),this.getExternalLinkButton())}},{key:"getDeleteButton",value:function(){var e=this;return this.props.onItemDelete&&this.props.item&&this.props.item.usedInStory===!1?p.default.createElement("span",{className:"remove floating-btn",onClick:function(t){return e.props.onItemDelete(t,e.props.item)},"data-toggle":"popover","data-trigger":"hover","data-placement":"left","data-html":"true","data-content":this.props.item.getItemDeleteText(this.props.item)},p.default.createElement("span",{className:"fa fa-trash"})):null}},{key:"getExternalLinkButton",value:function(){if(!this.props.item||!this.props.item.externalLink)return null;var e=this.props.item.externalLink;return p.default.createElement("a",{href:e.link,target:"_blank"},p.default.createElement("span",{className:"external-link floating-btn",style:{backgroundImage:"url("+e.background+")"},"data-toggle":"popover","data-trigger":"hover","data-placement":"left","data-html":"true","data-content":e.hoverText+'&nbsp;&nbsp;<span class="fa fa-external-link"></span>',onClick:function(e){e.stopPropagation()}}))}},{key:"getDeleteHoverText",value:function(){return this.props.item.error?b.removeFailed:b.remove1+" "+b.remove2}},{key:"getLoading",value:function(){return this.props.loading?p.default.createElement("span",{className:"small-loader"}):null}},{key:"getTitle",value:function(){if(this.props.title)return p.default.createElement("div",{className:"title"},this.props.iconClass?this.getIconSpan(this.props.iconClass):null,p.default.createElement("span",{className:this.getTextClass(this.props.title)},this.props.title))}},{key:"render",value:function(){var e=h.default.classnames([this.props.startingClasses,"mp-gallery-item"]);return p.default.createElement("div",{onClick:this.props.onClick,className:e,style:this.props.computedStyle},this.getImgDiv(),this.getTitle())}}]),t}(p.default.Component);t.default=d,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/gallery/Gallery",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/gallery/Gallery",["module","exports","react","react-dom","../../utils/Helper","./GalleryItem","../../constants","lib-build/i18n!commonResources/nls/media","lib-build/less!./Gallery"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(){return h.default.createElement("div",{className:"small-loader",role:"alert"})}function f(e){return h.default.createElement("div",{className:"alert alert-danger",role:"alert"},h.default.createElement("span",null,e.text))}Object.defineProperty(t,"__esModule",{value:!0});var h=l(n),m=l(i),v=l(r),g=l(o),b=l(a),y=l(s),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=y.default.mediaPicker.browsePanel,C=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),_(t,[{key:"render",value:function(){return h.default.createElement("div",{className:"placeholder"},this.props.text)}}]),t}(h.default.Component),E=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return d(t,e),_(t,[{key:"componentDidUpdate",value:function(){var e=$(m.default.findDOMNode(this));$('.mp-gallery img[data-toggle="popover"]').popover({container:e,delay:{show:500,hide:200}}),$('.mp-gallery .remove[data-toggle="popover"]').popover({container:e,delay:{show:750,hide:200},template:'<div class="popover remove" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>'}),$('.mp-gallery .external-link[data-toggle="popover"]').popover({container:e,delay:{show:750,hide:200},template:'<div class="popover external-link" role="tooltip"><div class="arrow"></div><div class="popover-content"></div></div>'}),this.props.items&&this.props.items.length||("function"==typeof e.scrollTop?e.scrollTop(0):e.scrollTop=0)}},{key:"renderItems",value:function(){var e=this;return this.props.items&&this.props.items.length?this.props.items.map(function(t){return h.default.createElement(g.default,{key:t.id,item:t,showOwner:e.props.providerProps&&e.props.providerProps.searchLocation!==b.default.searchLocation.MINE,onItemDelete:e.props.onItemDelete,
onAlbumClicked:e.props.onAlbumClicked,type:e.props.displayedContent})}):null}},{key:"renderLimit",value:function(){if(this.props.displayedContent===b.default.galleryContent.AGOL&&this.props.items&&!(this.props.items.length<100)&&this.props.providerProps.searchLocation!==b.default.searchLocation.STORY)return h.default.createElement("div",{className:"alert alert-info limit-reached"},w.providers.limitReached)}},{key:"getSpinner",value:function(){return this.props.displayedContent===b.default.galleryContent.ALBUMS&&this.props.providerProps.albumFetchStatus===b.default.fetchStatus.FETCHING||this.props.displayedContent===b.default.galleryContent.IMAGES&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.FETCHING||this.props.displayedContent===b.default.galleryContent.AGOL&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.FETCHING?h.default.createElement(p,null):null}},{key:"getAlert",value:function(){return this.props.items&&this.props.items.length?null:this.props.displayedContent===b.default.galleryContent.IMAGES&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.SUCCESS?h.default.createElement(f,{text:w.providers.noPhotosFound}):this.props.displayedContent===b.default.galleryContent.AGOL&&this.props.providerProps.imageFetchStatus===b.default.fetchStatus.SUCCESS?this.props.providerProps.searchLocation!==b.default.searchLocation.STORY||this.props.containerState.storyResourceCount?h.default.createElement(f,{text:w.providers.noItemsFound}):h.default.createElement(f,{text:w.providers.noItemsInThisStory}):null}},{key:"getPlaceholderText",value:function(){var e=w.providers[this.props.containerState.provider].searchAndBrowse;return e?e.replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)}):""}},{key:"getPlaceholder",value:function(){return this.props.items&&this.props.items.length?null:this.props&&this.props.containerState&&this.props.containerState.provider?h.default.createElement(C,{text:this.getPlaceholderText()}):null}},{key:"render",value:function(){var e=this.getSpinner(),t=this.getAlert(),n=t||e?null:this.getPlaceholder(),i=!e&&!t&&!n,r=v.default.classnames(["row","mp-gallery",{centered:!i,"flex-grow":n}]);return h.default.createElement("div",{className:r},e||t||n,i?this.renderItems():null,i?this.renderLimit():null)}}]),t}(h.default.Component);t.default=E,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanel",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/Common",["module","exports","react","../../constants","../breadcrumbs/Breadcrumbs","../breadcrumbs/BreadcrumbModel","../breadcrumbs/AGOLHeader","../gallery/Gallery","lib-build/i18n!commonResources/nls/media","lib-build/less!../sidePanel/SidePanel"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=y.default.mediaPicker.browsePanel.providers,C=function(e){function t(e){c(this,t);var n=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onKeyPress=n.onKeyPress.bind(n),n.fetchAlbums=n.fetchAlbums.bind(n),n.onAlbumClicked=n.onAlbumClicked.bind(n),n.determineGalleryItems=n.determineGalleryItems.bind(n),n.getBreadcrumbs=n.getBreadcrumbs.bind(n),n.onBreadcrumbClicked=n.onBreadcrumbClicked.bind(n),n}return p(t,e),_(t,[{key:"onKeyPress",value:function(e){13===e.charCode&&this.fetchAlbums()}},{key:"fetchAlbums",value:function(e){var t=this,n=e||this.props.searchValue||this.props.containerState.searchValue;return this.beforeAlbumFetched(),n?(n=n.trim(),void this.props.connector.getProviderAlbums(n).then(function(e){t.onAlbumSuccess(n,e)}).catch(function(e){console.warn(e),t.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.ERROR}),t.props.handleUserError&&t.props.handleUserError(e)})):void this.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.ERROR})}},{key:"beforeAlbumFetched",value:function(){this.props.updateImages({images:[]}),this.props.updateAlbums({albums:[]}),this.props.updateDisplayedContent({displayedContent:h.default.galleryContent.ALBUMS}),this.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.FETCHING}),this.props.updateUserSearchTerm?this.props.updateUserSearchTerm({term:""}):null,this.props.updateSelectedAlbum({selectedAlbum:{}})}},{key:"onAlbumSuccess",value:function(e,t){this.props.updateAlbumFetchStatus({fetchStatus:h.default.fetchStatus.SUCCESS}),this.props.updateUsername({userName:t.username||e}),this.props.updateAlbums({albums:t.albums||t}),this.props.handleAlbumSuccess&&this.props.handleAlbumSuccess()}},{key:"onAlbumClicked",value:function(e){var t=this;return e.title===this.props.provider.selectedAlbum.title&&this.props.provider.images.length?void this.props.updateDisplayedContent({displayedContent:h.default.galleryContent.IMAGES}):(this.beforeImageFetch(),void this.props.connector.getItemsInAlbum(e.id,this.props.imageQueryParams).then(function(n){t.handleImageReturn(n),t.props.updateSelectedAlbum({selectedAlbum:e}),t.props.onChange.userTextInput?t.props.onChange.userTextInput({target:{value:""}}):null,t.props.updateUserSearchTerm?t.props.updateUserSearchTerm({term:""}):null}).catch(function(e){console.log(e),t.props.updateImageFetchStatus({fetchStatus:h.default.fetchStatus.ERROR})}))}},{key:"beforeImageFetch",value:function(){this.props.updateImages({images:[]}),this.props.updateImageFetchStatus({fetchStatus:h.default.fetchStatus.FETCHING}),this.props.updateDisplayedContent({displayedContent:h.default.galleryContent.IMAGES})}},{key:"handleImageReturn",value:function(e){this.props.updateImageFetchStatus({fetchStatus:h.default.fetchStatus.SUCCESS}),this.props.updateImages({images:e})}},{key:"determineGalleryItems",value:function(){switch(this.props.provider.displayedContent){case h.default.galleryContent.ALBUMS:return this.props.provider.albums;case h.default.galleryContent.IMAGES:return this.props.provider.images;case h.default.galleryContent.AGOL:return this.props.provider.images;default:return[]}}},{key:"getSearchLabel",value:function(e,t){return e?t===h.default.fetchStatus.SUCCESS?w.searchedFor.replace("${searchterm}",e):w.searchingFor.replace("${searchterm}",e):null}},{key:"getBreadcrumbs",value:function(){var e=[],t=this.props.provider,n=t.selectedAlbum&&t.selectedAlbum.id?t.selectedAlbum.title:this.getSearchLabel(t.userSearchTerm,t.imageFetchStatus);return t.selectedTab&&t.selectedTab===h.default.searchType.TEXT||this.props.containerState.provider===h.default.providers.UNSPLASH?t.photoSearchTerm?(e.push(new v.default(this.getSearchLabel(t.photoSearchTerm,t.imageFetchStatus),h.default.galleryContent.IMAGES,t.displayedContent)),e):e:(t.albumFetchStatus!==h.default.fetchStatus.ERROR&&(t.albums.length&&e.push(new v.default(w.albumsOf.replace("${username}",t.userName),h.default.galleryContent.ALBUMS,t.displayedContent)),t.imageFetchStatus!==h.default.fetchStatus.ERROR&&n&&(t.images.length||t.selectedAlbum.id||t.userSearchTerm)&&e.push(new v.default(n,h.default.galleryContent.IMAGES,t.displayedContent))),e)}},{key:"onBreadcrumbClicked",value:function(e){this.props.updateDisplayedContent({displayedContent:e.link})}},{key:"getGalleryHeader",value:function(){switch(this.props.provider.displayedContent){case h.default.galleryContent.ALBUMS:case h.default.galleryContent.IMAGES:return f.default.createElement(m.default,{crumbs:this.getBreadcrumbs(),onClick:this.onBreadcrumbClicked});case h.default.galleryContent.AGOL:return f.default.createElement(g.default,{containerState:this.props.containerState,sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,onKeyPress:this.props.onKeyPress})}}},{key:"render",value:function(){return f.default.createElement("div",{style:this.props.display?null:{display:"none"},className:"browse-panel-container"},f.default.createElement("div",{className:"column-sidepanel arrow-box"},f.default.createElement(this.props.sidePanel,{onChange:this.props.onChange,onClear:this.props.onClear||null,onKeyPress:this.props.onKeyPress||this.onKeyPress,containerState:this.props.containerState,providerProps:this.props.provider})),f.default.createElement("div",{className:"column-gallery"},this.getGalleryHeader(),f.default.createElement(b.default,{containerState:this.props.containerState,providerProps:this.props.provider,onAlbumClicked:this.onAlbumClicked,onItemDelete:this.props.onKeyPress&&this.props.onKeyPress.onItemDelete?this.props.onKeyPress.onItemDelete:null,items:this.determineGalleryItems(),displayedContent:this.props.provider.displayedContent})))}}]),t}(f.default.Component);t.default=C,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelGooglePhotos",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelGooglePhotos",["module","exports","react","react-dom","../../utils/Helper","lib-build/i18n!commonResources/nls/media","lib-build/less!./SidePanelGooglePhotos"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=f.default.mediaPicker.browsePanel.sidePanel.googlePhotos,v=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"},t=p.default.mixinString(m.cannotFindUser,"username",this.props.triedUser);return c.default.createElement("div",{className:"alert alert-danger",role:"alert",style:e},c.default.createElement("span",null,t))}}]),t}(c.default.Component),g=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"componentDidMount",value:function(){var e=this,t=$(d.default.findDOMNode(this)).parents(".modal");t.on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),c.default.createElement("div",{className:t},c.default.createElement("div",{className:"input-group-addon"},c.default.createElement("span",{className:"fa fa-"+this.props.icon})),c.default.createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),c.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},c.default.createElement("span",{className:"fa fa-remove"})),c.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},c.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(c.default.Component),b=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,[{key:"getHelpSpans",value:function(){var e=m.helpText.split(/\$\{(.+?)\}/);return e.map(function(e,t){var n="googlehelp-"+t,i=e;return"helpLinkText"===e?c.default.createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.picasaHelp,target:"_blank"},c.default.createElement("strong",null,m.helpLinkText)):"Picasa"===e||"Google+"===e?c.default.createElement("span",{key:n},c.default.createElement("strong",null,i)):c.default.createElement("span",{key:n},i)})}},{key:"render",value:function(){var e=""!==this.props.containerState.userErrorType,t=p.default.unescapeBrands(m.placeholder);return c.default.createElement("div",{className:"mp-sidepanel google"},c.default.createElement(g,{icon:"picture-o",placeholder:t,value:this.props.containerState.searchValue,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,onClear:this.props.onClear,setFocus:this.props.containerState.focusInput}),c.default.createElement(v,{display:e,status:this.props.containerState.userErrorType,triedUser:this.props.containerState.searchValue}),c.default.createElement("div",{className:"help-text"},this.getHelpSpans()))}}]),t}(c.default.Component);t.default=b,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/connectors/GooglePhotos",["exports","jquery"],function(e,t){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.GooglePhotosConnector=void 0;var i=n(t),r=function(){var e=function(e){return new Promise(function(t,n){var r=document.location.protocol+"//picasaweb.google.com/data/feed/base/user/"+e+"?alt=json&access=public";return e?void i.default.ajax({url:r,dataType:"jsonp",timeout:4e3}).then(function(e){var n=[];e&&e.feed&&e.feed.entry&&i.default.each(e.feed.entry,function(e,t){n.push({id:t.id.$t,title:t.title.$t||"",thumbUrl:t.media$group.media$thumbnail[0].url})}),t(n)},function(e){n(e)}):void n()})},t=function(e,t){return new Promise(function(n,r){var o="";return e?(o=e.replace("/data/entry/base/","/data/feed/base/")+"&kind=photo&fields=title,subtitle,icon,entry(title,gphoto:numphotos,media:group(media:content,media:thumbnail,media:description),georss:where)",o+="&imgmax=1600",o+=t.maxPictures?"&max-results="+t.maxPictures:"",void i.default.getJSON(o,function(e){var t=[];i.default.each(e.feed.entry,function(e,n){var i=n.media$group.media$content[0].url||"",r=n.media$group.media$thumbnail[2].url||"";i=i.replace("https://","http://"),r=r.replace("https://","http://");var o={name:n.media$group.media$description.$t||"",description:"",picUrl:i,thumbUrl:r,lat:"",lng:"",height:n.media$group.media$content[0].height,width:n.media$group.media$content[0].width,isVideo:!1,id:i,type:"googlePhotos"};n.georss$where&&n.georss$where.gml$Point&&n.georss$where.gml$Point.gml$pos&&n.georss$where.gml$Point.gml$pos.$t&&2==n.georss$where.gml$Point.gml$pos.$t.split(" ").length&&(o.lat=n.georss$where.gml$Point.gml$pos.$t.split(" ")[0],o.lng=n.georss$where.gml$Point.gml$pos.$t.split(" ")[1]),t.push(o)}),n(t)}).fail(function(e){r(e)})):void r()})};return{getProviderAlbums:e,getItemsInAlbum:t}}();e.GooglePhotosConnector=r}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/GooglePhotosContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelGooglePhotos","../../connectors/GooglePhotos"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=u(r),v=c(o),g=c(a),b=c(s),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){d(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={searchValue:"",userErrorType:"",focusInput:!1,provider:v.default.providers.GOOGLE_PHOTOS},e.onChange=e.onChange.bind(e),e}return f(t,e),_(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({focusInput:e.display&&!this.props.display||e.openFocus})}},{key:"onChange",value:function(e){this.setState({searchValue:e.target.value,userErrorType:""})}},{key:"onClear",value:function(e){var t=this;13===e.charCode&&(this.setState({searchValue:!0,focusInput:!0}),this.onChange({target:{value:""}}),setTimeout(function(){t.refs.Common.onKeyPress({charCode:13})},10))}},{key:"handleUserError",value:function(e){this.setState({userErrorType:e?e.reason:v.default.userFetchError.ERROR})}},{key:"render",value:function(){return h.default.createElement(g.default,y({ref:"Common",sidePanel:b.default,connector:l.GooglePhotosConnector,imageQueryParams:{maxPictures:200},onChange:this.onChange,onClear:this.onClear.bind(this),containerState:this.state,handleUserError:this.handleUserError.bind(this)},this.props))}}]),t}(h.default.Component),C=function(e){return{provider:e.browsePanel.googlePhotos}},E=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:v.default.providers.GOOGLE_PHOTOS});e(t(i))};return{updateAlbums:function(e){t(m.updateAlbums,e)},updateAlbumFetchStatus:function(e){t(m.updateAlbumFetchStatus,e)},updateUsername:function(e){t(m.updateUsername,e)},updateDisplayedContent:function(e){t(m.updateDisplayedContent,e)},updateImages:function(e){t(m.updateImages,e)},updateSelectedAlbum:function(e){t(m.updateSelectedAlbum,e)},updateImageFetchStatus:function(e){t(m.updateImageFetchStatus,e)}}};t.default=(0,i.connect)(C,E)(w),e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelFlickr",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelFlickr",["module","exports","react","react-dom","../../constants","lib-build/i18n!commonResources/nls/media","../../utils/Helper","lib-build/less!./SidePanelFlickr"],function(e,t,n,i,r,o,a){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var d=s(n),p=s(i),f=s(r),h=s(o),m=s(a),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),g=h.default.mediaPicker.browsePanel.sidePanel.flickr,b=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"thisOnClick",value:function(e){var t=$(e.currentTarget).find("input").val();t!==this.props.selectedTab&&this.props.onChange({type:t})}},{key:"isSelected",value:function(e){return this.props.selectedTab===f.default.searchType[e]}},{key:"render",value:function(){var e=this;return d.default.createElement("div",{className:"type-toggle btn-group","data-toggle":"buttons"},d.default.createElement("label",{className:"btn btn-gray"+(this.isSelected("TEXT")?" active":""),htmlFor:"flickr-text",onClick:function(t){return e.thisOnClick(t)}},this.props.textLabel,d.default.createElement("input",{onChange:function(t){return e.thisOnClick(t)},type:"radio",name:"searchType",value:f.default.searchType.TEXT,id:"flickr-text",checked:this.isSelected("TEXT")})),d.default.createElement("label",{className:"btn btn-gray"+(this.isSelected("USER")?" active":""),htmlFor:"flickr-user",onClick:function(t){return e.thisOnClick(t)}},this.props.userLabel,d.default.createElement("input",{onChange:function(t){return e.thisOnClick(t)},type:"radio",name:"searchType",id:"flickr-user",value:f.default.searchType.USER,checked:this.isSelected("USER")})))}}]),t}(d.default.Component),y=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"componentDidMount",value:function(){var e=this,t=$(p.default.findDOMNode(this)).parents(".modal");t.on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),d.default.createElement("div",{className:t},d.default.createElement("div",{className:"input-group-addon"},d.default.createElement("span",{className:"fa fa-"+this.props.icon})),d.default.createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),d.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},d.default.createElement("span",{className:"fa fa-remove"})),d.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},d.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(d.default.Component),_=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"getOptions",value:function(){var e=[d.default.createElement("option",{value:f.default.flickrLicenseStrings.PUBLIC_DOMAIN,key:f.default.flickrLicenseStrings.PUBLIC_DOMAIN},g.licenses.public),d.default.createElement("option",{value:f.default.flickrLicenseStrings.COMMERCIAL,key:f.default.flickrLicenseStrings.COMMERCIAL},g.licenses.commercial),d.default.createElement("option",{value:f.default.flickrLicenseStrings.NON_COMMERCIAL,key:f.default.flickrLicenseStrings.NON_COMMERCIAL},g.licenses.nonCommercial)];return this.props.searchType===f.default.searchType.USER&&e.push(d.default.createElement("option",{value:f.default.flickrLicenseStrings.ANY,key:f.default.flickrLicenseStrings.ANY},g.licenses.any)),e}},{key:"render",value:function(){return d.default.createElement("div",{className:"license-group form-group"+(this.props.disabled?" disabled":"")},d.default.createElement("label",{htmlFor:this.props.searchType+"-license"},g.licenses.licenseLabel),d.default.createElement("select",{id:this.props.searchType+"-license",onChange:this.props.onChange,disabled:this.props.disabled,className:"license form-control",defaultValue:this.props.license},this.getOptions()))}}]),t}(d.default.Component),w=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"render",value:function(){var e,t=this,n={display:this.props.display?"block":"none"};switch(this.props.status){case f.default.userFetchError.NO_USER:case f.default.userFetchError.ERROR:e=m.default.mixinString(g.errors.cannotFindUser,"username",this.props.triedUser);break;case f.default.userFetchError.NO_PHOTOS:e=m.default.mixinString(g.errors.noUserPhotos,"username",this.props.triedUser);break;default:e=m.default.mixinString(g.errors.generalUserError,"username",this.props.triedUser)}var i=this.props.altUsername;if(this.props.altNSID&&(i+=" ("+this.props.altNSID+")"),this.props.altUsername){var r=g.errors.didYouMean.split(/\$\{(.+?)\}/),o=r.map(function(e,n){var r="didyoumean-"+n,o=e;return"username"===e?d.default.createElement("a",{key:r,href:"#",className:"alert-link",onClick:t.props.tryDifferentUser},i):d.default.createElement("span",{key:r},o)});return d.default.createElement("div",{className:"alert alert-danger",role:"alert",style:n},d.default.createElement("span",null,e,""),d.default.createElement("div",{style:{display:"inline"}},o))}return d.default.createElement("div",{className:"alert alert-danger",role:"alert",style:n},d.default.createElement("span",null,e,""))}}]),t}(d.default.Component),C=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"},t=""!==this.props.containerState.userErrorType;return d.default.createElement("div",{style:e},d.default.createElement(y,{icon:"user",setFocus:this.props.containerState.focusUserNameInput&&this.props.disable.textSearch,value:this.props.containerState.userNameInputValue,placeholder:g.placeholders.user,loading:this.props.albumLoading,onChange:this.props.onChange.userNameInput,onKeyPress:this.props.onKeyPress.userNameKeypress,onClear:this.props.onKeyPress.userNameClear}),d.default.createElement(w,{display:t,triedUser:this.props.containerState.userNameInputValue,status:this.props.containerState.userErrorType,altUsername:this.props.containerState.altUsername,altNSID:this.props.containerState.altNSID,tryDifferentUser:this.props.onKeyPress.tryDifferentUser}),d.default.createElement(y,{icon:"picture-o",setFocus:this.props.containerState.focusUserTextInput&&!this.props.disable.textSearch,disabled:this.props.disable.textSearch,placeholder:g.placeholders.userText,value:this.props.containerState.userTextInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.userTextInput,onKeyPress:this.props.onKeyPress.userTextKeypress,onClear:this.props.onKeyPress.userTextClear}),d.default.createElement(_,{disabled:this.props.disable.licenseSearch,onChange:this.props.onKeyPress.userLicenseChange,searchType:f.default.searchType.USER,license:this.props.license}))}}]),t}(d.default.Component),E=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"render",value:function(){var e={display:this.props.display?"block":"none"};return d.default.createElement("div",{style:e},d.default.createElement(y,{icon:"picture-o",setFocus:this.props.containerState.focusTextInput,placeholder:g.placeholders.text,value:this.props.containerState.textInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.textInput,onKeyPress:this.props.onKeyPress.textKeypress,onClear:this.props.onKeyPress.textClear}),d.default.createElement(_,{onChange:this.props.onKeyPress.photoLicenseChange,searchType:f.default.searchType.TEXT,license:this.props.license}))}}]),t}(d.default.Component),k=function(e){function t(){return l(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return c(t,e),v(t,[{key:"render",value:function(){var e=this.props.providerProps.selectedTab===f.default.searchType.USER,t=this.props.providerProps.selectedTab===f.default.searchType.TEXT,n=!this.props.providerProps.userName||this.props.providerProps.userName.trim().toLowerCase()!==this.props.containerState.userNameInputValue.trim().toLowerCase(),i=n||""===this.props.providerProps.userSearchTerm||this.props.providerProps.userSearchTerm!==this.props.containerState.userTextInputValue;return d.default.createElement("div",{className:"mp-sidepanel flickr"},d.default.createElement(b,{textLabel:m.default.unescapeBrands(g.searchType.text),userLabel:m.default.unescapeBrands(g.searchType.account),selectedTab:this.props.providerProps.selectedTab,onChange:this.props.onKeyPress.searchType}),d.default.createElement(C,{albumLoading:this.props.providerProps.albumFetchStatus===f.default.fetchStatus.FETCHING,imageLoading:this.props.providerProps.imageFetchStatus===f.default.fetchStatus.FETCHING&&this.props.providerProps.userSearchTerm,userError:this.props.containerState.userErrorType,display:e,disable:{textSearch:n,licenseSearch:i},license:this.props.providerProps.userLicense,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,containerState:this.props.containerState}),d.default.createElement(E,{imageLoading:this.props.providerProps.imageFetchStatus===f.default.fetchStatus.FETCHING,display:t,license:this.props.providerProps.photoLicense,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,containerState:this.props.containerState}))}}]),t}(d.default.Component);t.default=k,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/config",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={APP_IS_PORTAL:!1,FLICKR_API_KEY:"750b36a2ac65a72e03cf9cef06d79f45",UNSPLASH_API_KEY:"05dea1567391cf2dcdb9bf52016953d1f878eb5a5ec4759cf839cdddebbb6ae2",YOUTUBE_API_KEY:"AIzaSyDevTFP16nz6sA-akiOVi6wWXiplJnQ4qw",YOUTUBE_DISABLE_ON_PORTAL:!0},e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/connectors/Flickr",["exports","jquery","../config","lib-build/i18n!commonResources/nls/media","../constants"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.FlickrConnector=void 0;var a=o(t),s=o(n),l=o(i),u=o(r),c=l.default.mediaPicker.browsePanel.providers.flickr,d=function(){
var e=null,t=null,n={per_page:500},i=function(t){return new Promise(function(n,i){var a=t.indexOf("@N");return a>0&&a===t.length-4?(e=t,void r(n,i)):void x("flickr.people.findByUsername",{username:t}).done(function(a){a&&"ok"===a.stat?(e=a.user.id,r(n,i,t,a.user)):P(t).then(function(e){return o(u.default.userFetchError.NO_USER,i,e)}).fail(function(e){console.warn(e),i({reason:u.default.userFetchError.ERROR})})})})},r=function(e,t,n,i){k().then(function(r,a){var s=r[0].photosets.photoset;l(s,a[0].photos.photo[0]),s&&s.length?e({sets:T(s),username:i&&i.username&&i.username._content?i.username._content:null}):n?P(n).then(function(e){return o(u.default.userFetchError.NO_PHOTOS,t,e)}).fail(function(e){console.warn(e),t({reason:u.default.userFetchError.NO_PHOTOS})}):t({reason:u.default.userFetchError.NO_PHOTOS})})},o=function(e,t,n){if(n&&"ok"===n.stat){var i=n.user.username._content;x("flickr.people.findByUsername",{username:i}).then(function(r){t(r&&"ok"===r.stat?{reason:e||u.default.userFetchError.ERROR,alternate:i}:{reason:e||u.default.userFetchError.ERROR,alternate:i,nsid:n.user.id})})}else t({reason:e||u.default.userFetchError.ERROR})},l=function(e,n){return n&&(t=n.id,e.unshift(n)),e},d=function(e,n){return e===t?p(n):h("flickr.photosets.getPhotos",Object.assign({photoset_id:e},n))},p=function(t){return h("flickr.people.getPhotos",Object.assign({user_id:e},t))},f=function(t){return t.user&&Object.assign(t,{user_id:e}),h("flickr.photos.search",t)},h=function(e,t){return new Promise(function(i,r){var o=Object.assign({extras:"geo,description,license,url_s,url_n,url_m,url_l"},n,t);x(e,o).done(function(e){e&&"ok"===e.stat||r();var t=[],n=[];e.photos?n=e.photos.photo:e.photoset&&(n=e.photoset.photo),a.default.each(n,function(e,n){var i=E(n);t.push(Object.assign({name:n.title||"",description:n.description?n.description._content||"":"",getPicUrl:y,picUrl:w(n),lat:n.latitude||"",lng:n.longitude||"",height:n.height_l||n.height_m,width:n.width_l||n.width_m,isVideo:!1,id:n.id,license:n.license,type:"flickr"},i))}),i(t)})})},m=function(e){return new Promise(function(t,n){var i=v(e);x("flickr.photos.getSizes",{photo_id:i}).done(function(i){return b(i)?g(e,i.sizes.size)?void t(i):void n({reason:"matching url not found in flickr.getSizes result"}):void n({reason:"no photo or no sizes",result:i})}).fail(function(e,t,i){console.debug("fail",e,t,i),n({reason:"getSizes call failed",status:t,err:i})})})},v=function(e){var t=e.lastIndexOf("/"),n=e.indexOf("_",t);return e.slice(t+1,n)},g=function(e,t){var n=e.replace(/^https?:/,"").replace(/^\/\//,"");return t.some(function(e){return e.source&&e.source.indexOf(n)>=0})},b=function(e){return"ok"===e.stat&&e.sizes&&e.sizes.size&&e.sizes.size.length},y=function(e){return new Promise(function(t){var n={url:e.picUrl,width:e.width,height:e.height};x("flickr.photos.getSizes",{photo_id:e.id}).done(function(e){return b(e)?void t(_(e.sizes.size,n)):void t(n)}).fail(function(e,i,r){console.warn("failed to get sizes from flickr",r),t(n)})})},_=function(e,t){var n=e.map(function(e){return{width:parseInt(e.width),height:parseInt(e.height),url:e.source}});return Object.assign({},t,{sizes:n})},w=function(e){return e.url_l||e.url_m||C(e,"b")},C=function(e,t){return"http://farm"+e.farm+".static.flickr.com/"+e.server+"/"+e.id+"_"+e.secret+"_"+t+".jpg"},E=function(e){var t,n=.8*u.default.galleryContent.IMG_HEIGHT;if(e.url_s&&e.height_s>=n)t="s";else if(e.url_n&&e.height_n>=n)t="n";else if(e.url_m&&e.height_m>=n)t="m";else{if(!e.url_l)return{thumbUrl:C(e,"m")};t="l"}return{thumbUrl:e["url_"+t],thumbWidth:e["width_"+t],thumbHeight:e["height_"+t]}},k=function(){return a.default.when(x("flickr.photosets.getList",Object.assign({},n,{user_id:e,primary_photo_extras:"url_q"})),x("flickr.people.getPhotos",Object.assign({},n,{user_id:e,per_page:1,extras:"url_q"})))},T=function(e){return a.default.each(e,function(e,t){t._thumbnail=t.url_q||!!t.primary_photo_extras&&t.primary_photo_extras.url_q||"http://farm2.static.flickr.com/"+t.server+"/"+(t.primary||t.id)+"_"+t.secret+"_q.jpg"}),e},x=function(e,t){var n="https://api.flickr.com/services/rest/?method="+e+"&format=json&api_key="+s.default.FLICKR_API_KEY+(t?"&"+a.default.param(t):"")+"&jsoncallback=?";return a.default.getJSON(n)},S=function(e){return new Promise(function(n,r){i(e).then(function(e){var i=[];e.sets.forEach(function(e){var n={id:e.id,thumbUrl:e._thumbnail,title:e.id===t?c.photostream:e.title._content,details:{photos:e.photos}};i.push(n)}),n({albums:i,username:e.username})}).catch(function(e){r(e)})})},P=function(e){return x("flickr.urls.lookupUser",{url:"http://www.flickr.com/photos/"+e})};return{getProviderAlbums:S,getItemsInAlbum:d,photoSearch:f,checkPhotoByUrl:m}}();e.FlickrConnector=d}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/FlickrContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelFlickr","../../connectors/Flickr"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=u(r),v=c(o),g=c(a),b=c(s),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){d(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={userNameInputValue:"",userTextInputValue:"",textInputValue:"",userErrorType:"",altUsername:"",altNSID:"",focusUserNameInput:!1,focusUserTextInput:!1,focusTextInput:!1,provider:v.default.providers.FLICKR},e.onChange={userNameInput:e.userNameInput.bind(e),userTextInput:e.userTextInput.bind(e),textInput:e.textInput.bind(e)},e.onKeyPress={searchType:e.searchTypeSubmit.bind(e),userNameKeypress:e.userNameKeypress.bind(e),userTextKeypress:e.userTextKeypress.bind(e),tryDifferentUser:e.tryDifferentUser.bind(e),userNameClear:e.userNameClear.bind(e),userTextClear:e.userTextClear.bind(e),textClear:e.textClear.bind(e),textKeypress:e.textKeypress.bind(e),userLicenseChange:e.userLicenseChange.bind(e),photoLicenseChange:e.photoLicenseChange.bind(e)},e}return f(t,e),_(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.provider.selectedTab===v.default.searchType.USER,n=e.display&&!this.props.display,i=this.props.provider.selectedTab!==e.provider.selectedTab;this.setState({focusUserNameInput:t&&(n||i||e.openFocus),focusUserTextInput:t&&(n||i||e.openFocus),focusTextInput:!t&&(n||i||e.openFocus)})}},{key:"userNameInput",value:function(e){this.setState({userNameInputValue:e.target.value,userErrorType:"",altUsername:"",altNSID:""})}},{key:"userTextInput",value:function(e){this.setState({userTextInputValue:e.target.value})}},{key:"textInput",value:function(e){this.setState({textInputValue:e.target.value})}},{key:"userNameKeypress",value:function(e){if(13===e.charCode){if(this.userTextInput({target:{value:""}}),!this.state.userNameInputValue)return this.refs.Common.beforeAlbumFetched(),void this.refs.Common.onAlbumSuccess("",[]);this.refs.Common.fetchAlbums(this.state.userNameInputValue)}}},{key:"userTextKeypress",value:function(e){13===e.charCode&&this.userTextSubmit()}},{key:"textKeypress",value:function(e){13===e.charCode&&this.photoTextSubmit()}},{key:"userNameClear",value:function(e){var t=this;13===e.charCode&&(this.userNameInput({target:{value:""}}),this.setState({focusUserNameInput:!0}),setTimeout(function(){t.userNameKeypress({charCode:13})},10))}},{key:"userTextClear",value:function(e){var t=this;13===e.charCode&&(this.userTextInput({target:{value:""}}),this.setState({focusUserTextInput:!0}),setTimeout(function(){t.userTextKeypress({charCode:13})},10))}},{key:"textClear",value:function(e){var t=this;13===e.charCode&&(this.setState({focusTextInput:!0}),this.textInput({target:{value:""}}),setTimeout(function(){t.textKeypress({charCode:13})},10))}},{key:"userTextSubmit",value:function(e){var t=this.state.userTextInputValue.trim();if(!t)return this.props.updateUserSearchTerm({term:""}),this.props.updateImages({images:[]}),void this.props.updateDisplayedContent({displayedContent:v.default.galleryContent.ALBUMS});e=e||{},this.props.updateUserSearchTerm({term:t}),Object.assign(e,{text:t}),this.props.updateSelectedAlbum({selectedAlbum:{}});var n=v.default.flickrLicenseVals[this.props.provider.userLicense].toString();this.imageFetch(Object.assign({user:!0,license:n},e))}},{key:"photoTextSubmit",value:function(e){var t=this.state.textInputValue.trim();if(this.props.updatePhotoSearchTerm({term:t}),!t)return this.props.updateImages({images:null}),void this.props.updateImageFetchStatus({fetchStatus:v.default.fetchStatus.NOT_FETCHED});var n=v.default.flickrLicenseVals[this.props.provider.photoLicense].toString();this.imageFetch(Object.assign({text:t,license:n},e))}},{key:"imageFetch",value:function(e){var t=this;this.refs.Common.beforeImageFetch(),l.FlickrConnector.photoSearch(e).then(function(e){return t.refs.Common.handleImageReturn(e)})}},{key:"userLicenseChange",value:function(e){var t=e.target.value;this.props.updateUserLicense({license:t}),this.userTextSubmit({license:v.default.flickrLicenseVals[t].toString()})}},{key:"photoLicenseChange",value:function(e){var t=e.target.value;this.props.updatePhotoLicense({license:t}),this.photoTextSubmit({license:v.default.flickrLicenseVals[t].toString()})}},{key:"searchTypeSubmit",value:function(e){var t=this;switch(this.props.updateSearchType(e),this.setState({userNameInputValue:this.props.provider.userName,userTextInputValue:this.props.provider.userSearchTerm,textInputValue:this.props.provider.photoSearchTerm,userErrorType:"",altUsername:"",altNSID:""}),this.props.updateImages({images:[]}),this.props.updateAlbumFetchStatus({fetchStatus:v.default.fetchStatus.NOT_FETCHED}),this.props.updateImageFetchStatus({fetchStatus:v.default.fetchStatus.NOT_FETCHED}),e.type){case v.default.searchType.USER:if(!this.props.provider.userName)return;this.props.provider.userSearchTerm?this.userTextSubmit():this.props.provider.userName&&this.props.provider.albums.length?(this.props.updateDisplayedContent({displayedContent:v.default.galleryContent.ALBUMS}),this.props.provider.selectedAlbum.id&&setTimeout(function(){t.refs.Common.onAlbumClicked(t.props.provider.selectedAlbum)},1)):this.refs.Common.fetchAlbums(this.state.userNameInputValue);break;case v.default.searchType.TEXT:this.props.updateDisplayedContent({displayedContent:v.default.galleryContent.IMAGES}),this.photoTextSubmit();break;default:return}}},{key:"handleAlbumSuccess",value:function(){this.setState({focusUserTextInput:!0})}},{key:"handleUserError",value:function(e){this.setState({userErrorType:e.reason,altUsername:e.alternate,altNSID:e.nsid})}},{key:"tryDifferentUser",value:function(){var e=this;this.userNameInput({target:{value:this.state.altNSID||this.state.altUsername}}),setTimeout(function(){e.userNameKeypress({charCode:13})},10)}},{key:"render",value:function(){return h.default.createElement(g.default,y({ref:"Common",sidePanel:b.default,connector:l.FlickrConnector,imageQueryParams:{per_page:500},onChange:this.onChange,onKeyPress:this.onKeyPress,handleAlbumSuccess:this.handleAlbumSuccess.bind(this),handleUserError:this.handleUserError.bind(this),containerState:this.state},this.props))}}]),t}(h.default.Component),C=function(e){return{provider:e.browsePanel.flickr}},E=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:v.default.providers.FLICKR});e(t(i))};return{updateAlbums:function(e){t(m.updateAlbums,e)},updateAlbumFetchStatus:function(e){t(m.updateAlbumFetchStatus,e)},updateUsername:function(e){t(m.updateUsername,e)},updateDisplayedContent:function(e){t(m.updateDisplayedContent,e)},updateImages:function(e){t(m.updateImages,e)},updateSelectedAlbum:function(e){t(m.updateSelectedAlbum,e)},updateImageFetchStatus:function(e){t(m.updateImageFetchStatus,e)},updateSearchType:function(e){t(m.updateSearchType,e)},updateUserSearchTerm:function(e){t(m.updateUserSearchTerm,e)},updatePhotoSearchTerm:function(e){t(m.updatePhotoSearchTerm,e)},updateUserLicense:function(e){t(m.updateUserLicense,e)},updatePhotoLicense:function(e){t(m.updatePhotoLicense,e)}}};t.default=(0,i.connect)(C,E)(w),e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/FileUploader/NewerImageUploadHelper",["module","exports","../../../constants"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=i(n),o=function(e,t){return new Promise(function(n,i){e.type.indexOf("gif")>=0?a(e,t).then(n).catch(i):s(e,t).then(n).catch(i)})},a=function(e,t){return new Promise(function(n,i){return u(e)?void p(e).then(function(o){return d(o)?void l({file:e,img:o,dataUrl:t?null:r.default.blankBackground},n):void i({reason:"gif dimensions"})}).catch(i):(console.warn("gif file size too big!"),void i({reason:"filesize"}))})},s=function(e,t){return new Promise(function(n,i){p(e).then(function(o){var a=f(o,{width:r.default.photoSettings.maxWidth}),s=e,p=void 0;if(!(c(e)&&d(o)||(p=a.toDataURL(e.type,r.default.photoSettings.quality),s=m(p),u(s))))return void i({reason:"compressed filesize"});var h=Math.max(r.default.galleryContent.IMG_HEIGHT,r.default.galleryContent.ALBUM_HEIGHT),v=f(o,{height:h}),g=v.toDataURL(e.type,r.default.photoSettings.quality),b=m(g),y=t?p:g;l({canvas:a,file:s,dataUrl:y,thumb:b},n)}).catch(i)})},l=function(e,t){e.img=e.img||e.canvas,t(Object.assign({type:"image",width:e.img.width,height:e.img.height,file:e.file},e.dataUrl?{dataUrl:e.dataUrl}:{},e.thumb?{thumb:e.thumb}:{}))},u=function(e){return e.size<=r.default.photoSettings.maxFileSize},c=function(e){return e.size<=r.default.photoSettings.idealFileSize},d=function(e){return e.width<=r.default.photoSettings.maxWidth},p=function(e){return new Promise(function(t,n){var i=new Image,r=window.URL||window.webkitURL;return r?(i.src=r.createObjectURL(e),void(i.onload=function(){this.onload=null,r.revokeObjectURL(e),t(this)})):void n({reason:"no window.URL"})})},f=function(e,t){var n=h(e,t),i=document.createElement("canvas");return i.width=n.width,i.height=n.height,i.getContext("2d").drawImage(e,0,0,e.width,e.height,0,0,n.width,n.height),i},h=function(e,t){var n=e.height,i=e.width;if(!d(e,t)){var r=i/n;t.width?(i=t.width,n=i/r):t.height?(n=t.height,i=r*n):console.warn("sizeOptions dont include width or height",t)}return{height:Math.round(n),width:Math.round(i)}},m=function(e){var t=void 0;t=e.split(",")[0].indexOf("base64")>=0?atob(e.split(",")[1]):unescape(e.split(",")[1]);for(var n=e.split(",")[0].split(":")[1].split(";")[0],i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return new Blob([i],{type:n})};t.default={loadImageFromFile:o},e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/connectors/ArcGIS",["exports","lib-build/i18n!commonResources/nls/media","../constants","../utils/Helper","esri/request"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.ArcGISConnector=void 0;var s=o(t),l=o(n),u=o(i),c=o(r),d=s.default.mediaPicker.browsePanel.sidePanel.agol,p=function(){var e,t,n,i,r,o={num:100},s=function(){return e=app.portal},p=function(){var t=e||s();return r="//"+t.portalHostname.replace(/\//g,"")+"/sharing/rest"},f=function(){return t=app.data&&app.data.appItem},h=function(){return n=f()&&t.item.id},m=function(){return new Promise(function(e,t){if(h())return void e(n);var i=0,r=setInterval(function(){return h()?(e(n),void clearInterval(r)):(i++,i>5?(t("no appId"),void clearInterval(r)):void 0)},1e3)})},v=function(){return i=app.portal&&app.portal.user},g=function(){return t?t.item.owner:void console.warn("no app owner")},b=function(){var e=new Promise(function(e,t){app.portal||(console.warn("no portal"),t()),i||v()||app.portal.signIn().then(function(){e()})});return e},y=function(e){return new Promise(function(t,n){if(!app.portal)return void n("no portal");if(!i&&!v())return void n("no user");if(e.searchLocation===l.default.searchLocation.STORY)return void w(e,t,n);var r=void 0;if(e.idArr){if(r=D(e.idArr),e.contentTypes){var a=B(e.contentTypes);a&&(r+=" "+a.join(" "))}}else{if(e.contentTypesArr=B(e.contentTypes),!e.contentTypesArr)return void t();r=R(e)}var s=Object.assign({},o,{q:r});e.sortField&&(s.sortField=e.sortField),e.sortOrder&&(s.sortOrder=e.sortOrder),E(s,t,n)})},_=function(){return(r||p())+"/content/items/"+n+"/resources/"},w=function(e,t,i){if(!n&&!h())return void t();var r=_();(0,c.default)({url:r,handleAs:"json",content:{num:1e3,f:"json"}}).then(function(e){return C(e,t)},function(e){return T(e,i)})},C=function(e,t){var n=I(e.resources);t(n)},E=function(e,t,n){app.portal.queryItems(e).then(function(e){return k(e,t)},function(e){return T(e,n)})},k=function(e,t){var n=A(e.results);t(n)},T=function(e,t){t(e)},x=function(e){var t=new FormData;return t.append("f","json"),S(t,e),t},S=function(e,t){e.append("file",t.file,t.processedFileName),t.thumb&&e.append("thumb",t.thumb,t.thumbName)},P=function(e){return new Promise(function(i,o){if(!n&&!h())return void o();var a=x(e),s=r||p(),l=g(),u=(t||f()).item.ownerFolder,d=s+"/content/users/"+l+(u?"/"+u:"")+"/items/"+n+"/addResources";(0,c.default)({url:d,handleAs:"json",form:a},{usePost:!0}).then(function(t){if(t.success){var n=_(),r=n+encodeURIComponent(e.processedFileName),a=e.thumb?n+encodeURIComponent(e.thumbName):null;i(Object.assign(t,{picUrl:r,thumbUrl:a}))}else o(t)},function(e){o(e)})})},O=function(e){return new Promise(function(i,o){if(!n&&!h())return void o();var a=r||p(),s=g(),l=(t||f()).item.ownerFolder,u=a+"/content/users/"+s+(l?"/"+l:"")+"/items/"+n+"/removeResources";(0,c.default)({url:u,handleAs:"json",content:{resource:e.fileName,f:"json"}},{usePost:!0}).then(function(e){e.success?i():(console.warn("removeResources .then !result.success",e),o(e))},function(e){console.warn("removeResources errback",e),o(e)}),e.thumbFile&&e.thumbFile!==e.fileName&&(0,c.default)({url:u,handleAs:"json",content:{resource:e.thumbFile,f:"json"}},{usePost:!0}).then(function(e){e&&e.success||console.warn("unsuccessful deletion of thumbnail file")},function(e){console.warn("unsuccessful deletion of thumbnail file",e)})})},I=function(e){var t=_(),n=[];return e.forEach(function(r){var o=r.resource;if(!(o.indexOf("__thumb")>=0)){var a=o.split("__"),s=a.slice(-1)[0].split("."),l=s.slice(-1)[0],c=N(l);if(c){var p=M(o,e),f=u.default.stripTrailingSlash(t)+"/"+encodeURIComponent(p),h=f+"?token="+i.credential.token,m=1===a.length?a[0]:a.slice(0,-1).join("__")+"."+l,v=s[0].match(/^[0-9]{13}$/)?new Date(parseInt(s[0])):"";n.push({name:m,modified:v,thumbUrl:f,tokenizedThumbUrl:h,thumbFile:p,type:c,picUrl:u.default.stripTrailingSlash(t)+"/"+o,displayName:d.filterAndSort.image,id:o,fileName:o,title:m,fromResources:!0})}}}),n},M=function(e,t){var n=e.lastIndexOf("."),i=n>=0?e.substr(0,n):e,r=t.find(function(e){var t=e.resource;return!(t.indexOf("__thumb")<0)&&0===t.indexOf(i)});return r=r?r.resource:e},A=function(e){return e.map(function(e){return Object.assign({name:e.title,title:e.title,id:e.id,agolType:e.type,type:j(e.type),displayName:e.displayName,owner:e.owner,modified:e.modified,snippet:e.snippet},L(e))})},N=function(e){if(!e)return!1;e="."+e.toLowerCase();for(var t in l.default.contentType)if(l.default.uploadFileExtensions[t]&&l.default.uploadFileExtensions[t].indexOf(e)>=0)return l.default.contentType[t];return!1},j=function(e){switch(e){case l.default.agolContentType.WEBMAP:return l.default.contentType.WEBMAP;case l.default.agolContentType.WEBSCENE:return l.default.contentType.WEBSCENE;case l.default.agolContentType.IMAGE:return l.default.contentType.IMAGE;default:return console.warn("no type found for",e),"agh, whats this???"}},L=function(e){var t=e.thumbnailUrl;if(!t){var n=app.portal.staticImagesUrl;if(!n)return console.warn("no staticImagesUrl in portal"),{};switch(e.type){case l.default.agolContentType.WEBSCENE:t=n+"/scene.png";break;case l.default.agolContentType.WEBMAP:default:t=n+"/desktopapp.png"}}return{thumbUrl:t,thumbHeight:133,thumbWidth:200}},D=function(e){return"id:"+e.join(" OR id:")},R=function(e){var t=[];return e.searchStr&&t.push(F(e.searchStr)),t.push.apply(t,a(e.contentTypesArr).concat([U(e.searchLocation)])),t.join(" ")},F=function(e){return e.match(/^[A-Fa-f0-9]{32}$/)?"id:"+e:e},B=function(e){var t=[],n=[];if(e.indexOf(l.default.contentType.WEBMAP)>=0&&(t.push('type:"Web Map"'),n.push('-type:"Web Mapping Application"')),e.indexOf(l.default.contentType.WEBSCENE)>=0&&(t.push('type:"Web Scene"'),n.push('-type:"CityEngine Web Scene"')),0===t.length)return!1;var i=void 0;i=1===t.length?t[0]:"("+t.join(" OR ")+")";var r=n.join(" ");return[i,r]},U=function(e){switch(e){case l.default.searchLocation.ORG:return"orgid:"+i.orgId;case l.default.searchLocation.MINE:return"owner:"+i.username;case l.default.searchLocation.AGOL:return"";default:return console.warn("TODO: deal with searchLocation",e),""}};return{checkSignin:b,getItems:y,getPortal:s,getAppItem:f,getAppId:h,getAppIdPromise:m,getUser:v,uploadSingleResource:P,removeResources:O,formatResources:I}}();e.ArcGISConnector=p}),define("lib/resample-hermite/hermite",function(){}),function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(e,!0):t(e)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function n(e){return I.call(e).slice(8,-1).toLowerCase()}function i(e){return"number"==typeof e&&!isNaN(e)}function r(e){return"object"==typeof e&&null!==e}function o(e){var t,n;if(!r(e))return!1;try{return t=e.constructor,n=t.prototype,t&&n&&M.call(n,"isPrototypeOf")}catch(e){return!1}}function a(e){return"function"===n(e)}function s(e){return Array.isArray?Array.isArray(e):"array"===n(e)}function l(e,t){var n=[];return t=t>=0?t:0,Array.from?Array.from(e).slice(t):n.slice.call(e,t)}function u(e,t){var n,o;if(e&&a(t))if(s(e)||i(e.length))for(o=0,n=e.length;o<n&&t.call(e,e[o],o,e)!==!1;o++);else if(r(e))for(o in e)if(e.hasOwnProperty(o)&&t.call(e,e[o],o,e)===!1)break;return e}function c(e){var t;if(arguments.length>1){if(t=l(arguments),Object.assign)return Object.assign.apply(Object,t);t.shift(),u(t,function(t){u(t,function(t,n){e[n]=t})})}return e}function d(e,t){var n=l(arguments,2);return function(){return e.apply(t,n.concat(l(arguments)))}}function p(e,t,n){var i="",r=t;for(n+=t;r<n;r++)i+=A(e.getUint8(r));return i}function f(e){var t,n=e.replace(_,""),i=atob(n),r=i.length,o=new b(r),a=new Uint8Array(o);for(t=0;t<r;t++)a[t]=i.charCodeAt(t);return o}function h(e){var t,n=new Uint8Array(e),i=n.length,r="";for(t=0;t<i;t++)r+=A(n[t]);return"data:image/jpeg;base64,"+btoa(r)}function m(e){var t=new Image;return t.src=e,t}function v(e){var t=S(e.degree)%180,n=(t>90?180-t:t)*C/180,i=T(n),r=x(n),o=e.width,a=e.height;return{width:o*r+a*i,height:o*i+a*r}}function g(e,t){this.image=e,this.options=c({},g.DEFAULTS,o(t)&&t),this.data=null,this.init()}var b=e.ArrayBuffer,y=/^data\:/,_=/^data\:([^\;]+)\;base64,/,w=/^data\:image\/jpeg.*;base64,/,C=Math.PI,E=Math.min,k=Math.max,T=Math.sin,x=Math.cos,S=Math.abs,P=Math.floor,O=Object.prototype,I=O.toString,M=O.hasOwnProperty,A=String.fromCharCode;g.prototype={constructor:g,init:function(){var e,t,n=this,i=this.image;if(!i||"img"!==i.tagName.toLowerCase()||!i.src)throw new Error("The given image is not a valid image");return b?(t=i.src,y.test(t)?w.test(t)?this.read(f(t)):this.load(i):(e=new XMLHttpRequest,e.onerror=e.onabort=function(){n.load(i)},e.onload=function(){n.read(this.response)},e.open("get",t),e.responseType="arraybuffer",void e.send())):this.load(i)},read:function(e){var t=this.readOrientation(e);t>1?(this.translate(t),this.load(m(h(e)))):this.load(this.image)},readOrientation:function(e){var t,n,i,r,o,a,s,l,u,c,d=new DataView(e),f=d.byteLength;if(255===d.getUint8(0)&&216===d.getUint8(1))for(u=2;u<f;){if(255===d.getUint8(u)&&225===d.getUint8(u+1)){s=u;break}u++}if(s&&(n=s+4,i=s+10,"Exif"===p(d,n,4)&&(a=d.getUint16(i),o=18761===a,(o||19789===a)&&42===d.getUint16(i+2,o)&&(r=d.getUint32(i+4,o),r>=8&&(l=i+r)))),l)for(f=d.getUint16(l,o),c=0;c<f;c++)if(u=l+12*c+2,274===d.getUint16(u,o)){t=d.getUint16(u+8,o),d.setUint16(u+8,1,o);break}return t},translate:function(e){var t=0,n=1,i=1;switch(e){case 2:n=-1;break;case 3:t=-180;break;case 4:i=-1;break;case 5:t=90,i=-1;break;case 6:t=90;break;case 7:t=90,n=-1;break;case 8:t=-90}this.data={rotate:t,scaleX:n,scaleY:i}},load:function(e){var t=d(function(){e.removeEventListener("load",t,!1),this.resize(e)},this);e.complete?this.resize(e):e.addEventListener("load",t,!1)},draw:function(e){var t,n,r,o=document.createElement("canvas"),a=o.getContext("2d"),s=this.data,l=0,u=0,c=e.naturalWidth,d=e.naturalHeight,p=s&&s.rotate,f=s&&s.scaleX,h=s&&s.scaleY,m=i(f)&&i(h)&&(1!==f||1!==h),g=i(p)&&0!==p,b=g||m,y=c,_=d;return m&&(t=c/2,n=d/2),g&&(r=v({width:c,height:d,degree:p}),y=r.width,_=r.height,t=r.width/2,n=r.height/2),o.width=y,o.height=_,b&&(l=-c/2,u=-d/2,a.save(),a.translate(t,n)),g&&a.rotate(p*C/180),m&&a.scale(f,h),a.drawImage(e,P(l),P(u),P(c),P(d)),b&&a.restore(),o},resize:function(e){var t=this.options,n=this.draw(e),r=n.width,o=n.height,a=r/o,s=document.createElement("canvas"),l=k(0,t.minWidth)||0,u=k(0,t.minHeight)||0,c=k(l,t.maxWidth)||1/0,d=k(u,t.maxHeight)||1/0,p=S(t.width)||r,f=S(t.height)||o;l>0&&isFinite(l)?u=l/a:u>0&&isFinite(u)&&(l=u*a),c>0&&isFinite(c)?d=c/a:d>0&&isFinite(d)&&(c=d*a),p=E(k(p,l),c),f=E(k(f,u),d),i(p)&&i(f)?f*a>p?f=p/a:p=f*a:(p=r,f=o),s.width=p,s.height=f,s.getContext("2d").drawImage(n,0,0,P(r),P(o),0,0,P(p),P(f)),this.done(s)},done:function(e){var t=this.options,n=e;"image"===t.type&&(n=m(e.toDataURL())),a(t.done)&&t.done.call(this,n)}},g.DEFAULTS={type:"image",width:NaN,height:NaN,minWidth:0,minHeight:0,maxWidth:1/0,maxHeight:1/0,done:null};var N=e.Loader;return g.noConflict=function(){return e.Loader=N,g},"function"==typeof define&&define.amd&&define("loader",[],function(){return g}),"undefined"==typeof t&&(e.Loader=g),g}),define("lib/loader/dist/loader",function(){}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/FileUploader/FileUploader",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/FileUploader/FileUploader",["module","exports","jquery","react","dojo/Deferred","../../../utils/Helper","lib-build/i18n!commonResources/nls/media","dojo/topic","../../../constants","./NewerImageUploadHelper","../../../connectors/ArcGIS","lib/resample-hermite/hermite","lib/loader/dist/loader","lib-build/less!./FileUploader"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=d(n),g=d(i),b=d(r),y=d(o),_=d(a),w=d(s),C=d(l),E=d(u),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=_.default.mediaPicker.browsePanel.sidePanel.agol,x=function(e){function t(e){f(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={dragging:!1,fileError:!1,singleFile:!0,contentTypes:[],uploadExtensions:[]},n.checkForCapabilities(),n.fileChange=n.fileChange.bind(n),n.onDragOver=n.onDragOver.bind(n),n.onDragLeave=n.onDragLeave.bind(n),n.onDrop=n.onDrop.bind(n),n}return m(t,e),k(t,[{key:"checkForCapabilities",value:function(){this.hasDnD=!navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i)&&"draggable"in document.createElement("span")&&"undefined"!=typeof window.FileReader,this.useCapture=navigator.userAgent.match(/iPad|iPhone|iPod/g)}},{key:"componentDidMount",value:function(){this.hasDnD&&!window.dndDisabled&&this.addDnDListener()}},{key:"componentWillReceiveProps",value:function(e){var t=[],n=[];for(var i in C.default.contentType)e.authorizedMedia.indexOf(C.default.contentType[i])>=0&&C.default.uploadFileExtensions[i]&&(t.push.apply(t,p(C.default.uploadFileExtensions[i])),n.push(C.default.contentType[i]));this.setState({contentTypes:n,uploadExtensions:t})}},{key:"addDnDListener",value:function(){window.dndDisabled=!0,window.addEventListener("dragover",function(e){e&&!(0,v.default)(e.target).hasClass("drag-area")&&e.preventDefault()}),window.addEventListener("drop",function(e){e&&e.preventDefault()})}},{key:"validateFile",value:function(e){var t=e.name.slice(e.name.lastIndexOf(".")).toLowerCase(),n=this.getSimplifiedType(e.type),i=this.state.uploadExtensions;return i.some(function(i){return i===t||i===e.type||i===n})}},{key:"validateDrag",value:function(e){for(var t=0,n=!0;t<e.length&&n;){var i=this.getSimplifiedType(e[t].type);n=this.state.contentTypes.indexOf(i)>=0,t++}return!n}},{key:"getSimplifiedType",value:function(e){return e.substring(0,e.indexOf("/"))}},{key:"fileChange",value:function(e){var t=e.target?e.target.files:e;if(t&&t.length){var n=1===t.length;this.setState({singleFile:n}),n||this.props.fileUploadFunctions.multiStart();var i=this.sequentialPreprocessing(t,n);this.sequentialProcessing(i)}}},{key:"sequentialPreprocessing",value:function(e,t){for(var n=this,i=[],r=[],o=0;o<e.length;o++)this.validateFile(e[o])?(r.push(e[o]),i.push(this.getUploadFileNames(e[o],e.length-o))):this.setErrorTimer();return t||i.forEach(function(e){n.props.fileUploadFunctions.singleProgress(Object.assign({dataUrl:C.default.blankBackground},e))}),{namesArr:i,filesArr:r,singleFile:t,uploadArr:[],processArr:[],i:0}}},{key:"sequentialProcessing",value:function(e){var t=this;if(e.i<e.filesArr.length){var n=e.namesArr[e.i],i=e.filesArr[e.i],r=this.processOneFileSequentially(i,e.singleFile,n);e.processArr.push(r),r.then(function(i){var r=t.uploadOneFileSequentially(i,e.singleFile,n);e.uploadArr.push(r),e.i++,t.sequentialProcessing(e)}).catch(function(r){console.warn("processOneFileSequentially rejected. err: ",r),t.props.fileUploadFunctions.singleFailure(Object.assign({},i,n)),e.i++,t.sequentialProcessing(e)})}else Promise.all(e.processArr).then(function(){t.onAllProcessingComplete(e.uploadArr)},function(){console.warn("Promise.all failure"),
t.onAllProcessingComplete(e.uploadArr)})}},{key:"onAllProcessingComplete",value:function(e){var t=this;Promise.all(e).then(function(){t.resetPicker(),t.props.fileUploadFunctions.allComplete()},function(){return t.props.fileUploadFunctions.allComplete})}},{key:"processOneFileSequentially",value:function(e,t,n){var i=this;return new Promise(function(r,o){return i.validateFile(e)?void i.processFile(e,t).then(function(e){Object.assign(e,n),t||i.props.fileUploadFunctions.singleProgress(e),r(e)}).catch(function(t){console.warn("rejecting processFile",t),o({file:Object.assign({},e,n),result:t})}):(i.setErrorTimer(),void o())})}},{key:"uploadOneFileSequentially",value:function(e,t,n){var i=this;return new Promise(function(r,o){i.fileUploadToAGOL(e,t).then(function(t){i.props.fileUploadFunctions.singleComplete(Object.assign(e,t)),r()},function(t){console.warn("fileUploadToAGOL catch. err:",t),Object.assign(e,n),o(t)})})}},{key:"processOneFile",value:function(e,t){var n=this;return new Promise(function(i,r){if(n.validateFile(e)){var o=n.getUploadFileNames(e);t||n.props.fileUploadFunctions.singleProgress(Object.assign({dataUrl:C.default.blankBackground},o)),n.processFile(e,t).then(function(a){Object.assign(a,o),t||n.props.fileUploadFunctions.singleProgress(a),n.fileUploadToAGOL(a,t).then(function(e){n.props.fileUploadFunctions.singleComplete(Object.assign(a,e)),i()},function(t){console.warn("fileUploadToAGOL catch. err:",t),Object.assign(e,o),r(t)})}).catch(function(t){console.warn("rejecting processFile",t),Object.assign(e,o),r(t)})}else console.warn("reject file",e.name),n.setErrorTimer(),r()})}},{key:"processFile",value:function(e,t){var n=this.getSimplifiedType(e.type);switch(n){case"image":return E.default.loadImageFromFile(e,t);case"audio":case"video":return void console.warn("unhandled file type",n);default:return void console.warn("unknown file type",e)}}},{key:"setErrorTimer",value:function(){var e=this;this.setState({fileError:!0}),setTimeout(function(){e.setState({fileError:!1})},3e3)}},{key:"onDragOver",value:function(e){e.preventDefault(),e.stopPropagation();var t=void 0;if((t=e.dataTransfer)&&(t=t.items)&&t.length){var n=this.validateDrag(t);return void this.setState({dragging:!0,canCheckFileOnDrag:!0,fileError:n})}this.setState({dragging:!0,canCheckFileOnDrag:!1})}},{key:"onDragLeave",value:function(e){e.preventDefault(),e.stopPropagation(),this.setState({dragging:!1,fileError:!1})}},{key:"onDrop",value:function(e){this.setState({dragging:!1}),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length&&(e.preventDefault(),e.stopPropagation(),this.setState({singleFile:1===e.dataTransfer.files.length}),this.fileChange(e.dataTransfer.files))}},{key:"getUploadFileNames",value:function(e,t){var n=e.name,i=new Date,r=n.lastIndexOf("."),o=r>=0?n.substr(0,r):n,a=r>=0?n.substr(r):e.type.substr(e.type.indexOf("/1")),s=o+"__"+(i.getTime()+(t||0));return{processedFileName:s+a,thumbName:s+"__thumb"+a}}},{key:"fileUploadToAGOL",value:function(e,t){var n=this,i=!1,r=new b.default;return(this.state.singleFile||t)&&(e.dataUrl?this.broadcastChosenFile(Object.assign(e,{uploadDeferred:r})):i=!0),c.ArcGISConnector.uploadSingleResource(e).then(function(t){var o={url:t.picUrl,thumbUrl:t.thumbUrl};r.resolve(o),i&&(Object.assign(e,o),e.dataUrl&&(e.dataUrl=null),n.broadcastChosenFile(e))}).catch(function(e){console.warn("uploadSingleResource catch. result:",e),r.reject(e)}),r}},{key:"broadcastChosenFile",value:function(e){var t={type:e.type,width:e.width,height:e.height};e.uploadDeferred&&Object.assign(t,{uploadDeferred:e.uploadDeferred}),e.dataUrl&&Object.assign(t,{dataUrl:e.dataUrl}),e.url&&Object.assign(t,{url:e.url}),e.thumbUrl&&Object.assign(t,{thumbUrl:e.thumbUrl}),w.default.publish("MEDIA-PICKER-SELECTION",t)}},{key:"resetPicker",value:function(){this.refs.input.value=""}},{key:"getFileTypesText",value:function(){return T.createContent.fileTypesImage}},{key:"forceClickInput",value:function(e){e.charCode&&13===e.charCode&&this.refs.input.click()}},{key:"renderDnD",value:function(){var e=this,t=y.default.classnames([this.props.className,"drag-area","uploader","alert",{"alert-gray":!this.state.dragging&&!this.state.fileError||this.state.dragging&&!this.state.canCheckFileOnDrag,"alert-danger":this.state.fileError,"alert-success":this.state.dragging&&this.state.canCheckFileOnDrag&&!this.state.fileError}]),n=y.default.classnames(["info-filetype","block-md",{"text-danger":this.state.fileError}]);return g.default.createElement("div",{className:t,onDragOver:this.onDragOver,onDragLeave:this.onDragLeave,onDrop:this.onDrop},g.default.createElement("span",{className:"bg-img fa fa-picture-o fa-5x"}),g.default.createElement("span",{className:"block-md"},g.default.createElement("span",{className:"fa fa-hand-rock-o fa-lg"}),g.default.createElement("span",null,T.createContent.dragAndDrop)),g.default.createElement("span",{className:"block-md"},T.createContent.or),g.default.createElement("button",{type:"button",className:"btn btn-bw inverse btn-file block-md",tabIndex:"3",onKeyPress:function(t){return e.forceClickInput(t)}},g.default.createElement("span",{className:"fa fa-folder-open-o fa-lg"}),g.default.createElement("span",null,T.createContent.uploadImage),g.default.createElement("input",{multiple:"multiple",id:this.props.id,ref:"input",type:"file",accept:this.state.uploadExtensions.toString(),capture:!!this.useCapture&&"camera",tabIndex:"-1",onChange:this.fileChange})),g.default.createElement("div",{className:n},g.default.createElement("span",{className:"fa fa-file-o info"}),g.default.createElement("span",{className:"fa fa-exclamation-triangle danger"}),g.default.createElement("span",null," ",this.getFileTypesText())),g.default.createElement("div",{className:"info-footer"},g.default.createElement("span",{className:"fa fa-lg fa-info-circle"}),g.default.createElement("span",null,T.createContent.agolInfo)))}},{key:"renderNoDnD",value:function(){return g.default.createElement("button",{type:"button",className:"uploader btn btn-bw inverse btn-file btn-block"},T.createContent.uploadImage,g.default.createElement("input",{id:this.props.id,ref:"input",type:"file",accept:this.state.uploadExtensions.toString(),capture:!!this.useCapture&&"camera",tabIndex:"-1",onChange:this.fileChange}))}},{key:"renderNoAppId",value:function(){return g.default.createElement("div",{className:"drag-area uploader alert alert-gray"},g.default.createElement("span",null,T.createContent.saveBeforeUpload))}},{key:"render",value:function(){var e=y.default.classnames([this.props.className,"photo-input","form-group"]),t=void 0;return t=this.props.appId?this.hasDnD?this.renderDnD():this.renderNoDnD():this.renderNoAppId(),g.default.createElement("div",{className:e},t)}}]),t}(g.default.Component);t.default=x,e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelArcGIS",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelArcGIS",["module","exports","react","react-dom","../../utils/Helper","./FileUploader/FileUploader","../../constants","lib-build/i18n!commonResources/nls/media","lib-build/less!./SidePanelArcGIS"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=g.default.mediaPicker.browsePanel.sidePanel.agol,_=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),b(t,[{key:"componentDidMount",value:function(){var e=this,t=$(f.default.findDOMNode(this)).parents(".modal");t.on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"input-group search"},p.default.createElement("div",{className:"input-group-addon"},p.default.createElement("span",{className:"fa fa-"+this.props.icon})),p.default.createElement("input",{ref:"textInput",tabIndex:"2",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),p.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"2":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},p.default.createElement("span",{className:"fa fa-remove"})),p.default.createElement("div",{tabIndex:this.props.disabled?null:"2",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},p.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(p.default.Component),w=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),b(t,[{key:"render",value:function(){var e=h.default.classnames(["btn","btn-gray",{"col-xs-3":4===this.props.toggleCount,"col-xs-4":3===this.props.toggleCount,active:this.props.checked,disabled:this.props.isDisabled}]);return p.default.createElement("label",{tabIndex:this.props.isDisabled?null:"1",className:e,htmlFor:this.props.id,onKeyPress:this.props.onClick,onClick:this.props.onClick},p.default.createElement("span",{className:"btn-label"},this.props.label),p.default.createElement("input",{disabled:this.props.isDisabled,onChange:this.props.onClick,checked:this.props.checked,type:"radio",name:"searchLocation",value:this.props.value,id:this.props.id}))}}]),t}(p.default.Component),C=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),b(t,[{key:"thisOnClick",value:function(e,t){t===this.props.searchLocation||$(e.target).closest(".btn.disabled").length||e.charCode&&13!==e.charCode||this.props.onChange({type:t})}},{key:"isSelected",value:function(e){return this.props.searchLocation===v.default.searchLocation[e]}},{key:"isDisabled",value:function(){return this.props.availableContentTypes.indexOf(v.default.contentType.WEBMAP)<0&&this.props.availableContentTypes.indexOf(v.default.contentType.WEBSCENE)<0}},{key:"getOrgToggle",value:function(){var e=this;return this.props.portalIsOrg?p.default.createElement(w,{id:"agol-org",toggleCount:4,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.ORG)},label:h.default.mixinString(y.searchLocation.myOrg,"orgname",this.props.portalName),value:v.default.searchLocation.ORG,checked:this.isSelected("ORG")}):null}},{key:"render",value:function(){var e=this;return p.default.createElement("div",{className:"content-toggle btn-group","data-toggle":"buttons"},p.default.createElement(w,{id:"agol-agol",toggleCount:this.props.portalIsOrg?4:3,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.AGOL)},label:y.searchLocation.agol,value:v.default.searchLocation.AGOL,checked:this.isSelected("AGOL")}),this.getOrgToggle(),p.default.createElement(w,{id:"agol-mine",toggleCount:this.props.portalIsOrg?4:3,isDisabled:this.isDisabled(),onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.MINE)},label:y.searchLocation.myContent,value:v.default.searchLocation.MINE,checked:this.isSelected("MINE")}),p.default.createElement(w,{id:"agol-story",toggleCount:this.props.portalIsOrg?4:3,onClick:function(t){return e.thisOnClick(t,v.default.searchLocation.STORY)},label:y.searchLocation.thisStory,value:v.default.searchLocation.STORY,checked:this.isSelected("STORY")}))}}]),t}(p.default.Component),E=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),b(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"divider"},p.default.createElement("span",null,y.createContent.or))}}]),t}(p.default.Component),k=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),b(t,[{key:"render",value:function(){return p.default.createElement("div",{className:"mp-sidepanel agol"},p.default.createElement(C,{availableContentTypes:this.props.containerState.availableContentTypes,portalIsOrg:this.props.containerState.portalIsOrg,portalName:this.props.containerState.portalName,searchLocation:this.props.providerProps.searchLocation,onChange:this.props.onKeyPress.searchLocSubmit}),p.default.createElement(_,{setFocus:this.props.containerState.focusInput,icon:"globe",placeholder:y.filterAndSort.search,value:this.props.containerState.textInputValue,loading:this.props.imageLoading,onChange:this.props.onChange.textInput,onKeyPress:this.props.onKeyPress.textKeypress,onClear:this.props.onKeyPress.textClear}),p.default.createElement(E,null),p.default.createElement(m.default,{authorizedMedia:this.props.containerState.authorizedMedia,availableContentTypes:this.props.containerState.availableContentTypes,appId:this.props.containerState.appId,fileUploadFunctions:this.props.onKeyPress.fileUploadFunctions}))}}]),t}(p.default.Component);t.default=k,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/ArcGISContainer",["module","exports","react","react-dom","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelArcGIS","../../connectors/ArcGIS","lib-build/i18n!commonResources/nls/media"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var g=p(n),b=p(i),y=d(o),_=p(a),w=p(s),C=p(l),E=p(c),k=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},T=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),x=E.default.mediaPicker.browsePanel.providers.agol,S=function(e){function t(){h(this,t);var e=m(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={textInputValue:"",dateSortOrder:_.default.sortOrder.DESC,titleSortOrder:_.default.sortOrder.ASC,appId:null,portalIsOrg:!1,portalName:"",focusInput:!1,storyResourceCount:0,availableContentTypes:[],authorizedMedia:[],selectedContentTypes:[]},e.storyCache={},e.onChange={textInput:e.textInput.bind(e)},e.onKeyPress={searchLocSubmit:e.searchLocSubmit.bind(e),textKeypress:e.textKeypress.bind(e),textClear:e.textClear.bind(e),selectedContentTypesChange:e.selectedContentTypesChange.bind(e),sortFieldChange:e.sortFieldChange.bind(e),sortOrderChange:e.sortOrderChange.bind(e),fileUploadFunctions:{multiStart:e.multiFileUploadStart.bind(e),singleProgress:e.singleFileUploadProgress.bind(e),singleComplete:e.singleFileUploadComplete.bind(e),singleFailure:e.singleFileUploadError.bind(e),allComplete:e.allFileUploadsComplete.bind(e)},onItemDelete:e.onItemDelete.bind(e)},e}return v(t,e),T(t,[{key:"componentDidMount",value:function(){var e=this;u.ArcGISConnector.checkSignin().then(function(){var t=u.ArcGISConnector.getPortal();e.setState({portalIsOrg:t.isOrganization,portalName:t.name}),e.itemFetch(),u.ArcGISConnector.getAppIdPromise().then(function(t){e.setState({appId:t}),e.thisStoryFetch({searchLocation:_.default.searchLocation.STORY})}).catch(function(e){console.warn(e)})})}},{key:"componentWillReceiveProps",value:function(e){var t=this,n=this.constructLocationSpecificContentTypes(e.authorizedMedia,e.provider.searchLocation),i={availableContentTypes:n,authorizedMedia:e.authorizedMedia,focusInput:e.display&&!this.props.display||e.openFocus},r=!this.compareArrays(e.authorizedMedia,this.props.authorizedMedia);if(r){var o={};this.isGisContentDisabled(e)&&(n=this.constructLocationSpecificContentTypes(e.authorizedMedia,_.default.searchLocation.STORY),this.props.updateSearchLocation({type:_.default.searchLocation.STORY}),Object.assign(o,{searchLocation:_.default.searchLocation.STORY})),Object.assign(o,{contentTypes:n}),i.selectedContentTypes=n,this.fetchIfNotStory(o)}else if(!this.compareArrays(n,this.state.availableContentTypes)){var a=n.filter(function(e){return t.state.availableContentTypes.indexOf(e)<0});a.length&&(i.selectedContentTypes=this.state.selectedContentTypes.concat(a))}if(this.setState(i),e.appId&&!this.state.appId)this.setState({appId:e.appId});else{if(!e.thisStory)return;if(e.thisStory===this.props.thisStory){if(e.provider.searchLocation===_.default.searchLocation.STORY){var s=this.filterAndSortThisStory({contentType:i.selectedContentTypes||this.state.selectedContentTypes});this.compareArrays(s,e.provider.images)||this.handleImageReturn(s)}return}}this.buildThisStoryCache(e.thisStory,e.appId)}},{key:"compareArrays",value:function(e,t){if(e.length!==t.length)return!1;var n=e.slice(0).sort(),i=t.slice(0).sort();return n.every(function(e,t){return i[t]===e})}},{key:"constructLocationSpecificContentTypes",value:function(e,t){var n=[],i=t===_.default.searchLocation.STORY;return e.indexOf(_.default.contentType.WEBMAP)>=0&&n.push(_.default.contentType.WEBMAP),e.indexOf(_.default.contentType.WEBSCENE)>=0&&n.push(_.default.contentType.WEBSCENE),e.indexOf(_.default.contentType.IMAGE)>=0&&i&&_.default.uploadFileExtensions.IMAGE&&n.unshift(_.default.contentType.IMAGE),e.indexOf(_.default.contentType.AUDIO)>=0&&i&&_.default.uploadFileExtensions.AUDIO&&n.unshift(_.default.contentType.AUDIO),e.indexOf(_.default.contentType.VIDEO)>=0&&i&&_.default.uploadFileExtensions.VIDEO&&n.unshift(_.default.contentType.VIDEO),n}},{key:"textInput",value:function(e){this.setState({textInputValue:e.target.value})}},{key:"textKeypress",value:function(e){13===e.charCode&&this.textSubmit()}},{key:"textClear",value:function(e){var t=this;13===e.charCode&&(this.textInput({target:{value:""}}),this.setState({focusInput:!0}),setTimeout(function(){t.textKeypress({charCode:13})},10))}},{key:"textSubmit",value:function(){var e=this.state.textInputValue.trim();this.props.updateSearchTerm({term:e}),this.fetchIfNotStory({searchStr:e})}},{key:"buildSearchOptionsFromReduxState",value:function(){return{searchLocation:this.props.provider.searchLocation,contentTypes:this.state.selectedContentTypes,sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,searchStr:this.props.provider.searchStr}}},{key:"clearThisStoryUsed",value:function(){for(var e in this.storyCache)this.storyCache[e].usedInStory=!1}},{key:"removeUnused",value:function(){for(var e in this.storyCache){var t=this.storyCache[e];t.usedInStory!==!1||t.fromResources||delete this.storyCache[e]}}},{key:"buildThisStoryCache",value:function(e,t){var n=this;this.clearThisStoryUsed();var i=[];return e.forEach(function(e){var r=n.storyCache[e.id]||n.storyCache[e.file];return r?void(r.usedInStory=!0):void(e.id&&e.id!==t&&"APPID"!==e.id?i.push(e.id):n.storeImageResourceInfo(e))}),this.removeUnused(),this.setState({storyResourceCount:Object.keys(this.storyCache).length}),i.length?void u.ArcGISConnector.getItems({idArr:i}).then(function(e){n.processThisStoryResults(e)}):void(this.props.provider.searchLocation===_.default.searchLocation.STORY&&this.handleImageReturn(this.filterAndSortThisStory()))}},{key:"handleImageReturn",value:function(e){e&&e.length&&this.moreFormattingForItems(e),this.props.updateImageFetchStatus({fetchStatus:_.default.fetchStatus.SUCCESS}),this.props.updateImages({images:e})}},{key:"moreFormattingForItems",value:function(e){var t=this;e.forEach(function(e){e.hoverText=t.getItemHoverText(e),e.hasOwnProperty("usedInStory")&&(e.getItemDeleteText=t.getItemDeleteText)})}},{key:"getItemHoverText",value:function(e){var t=e.modified,n=t&&t.toLocaleDateString?t.toLocaleDateString():t?t:"";n&&(n=e.agolType?x.modified.replace("${date}",n):x.uploaded.replace("${date}",n));var i='<span class="item-popover-title">'+(e.name||e.title)+"</span><br>",r=e.owner?x.contentByAuthor.replace("${contentType}",e.displayName).replace("${author}",e.owner):e.displayName,o=e.displayName,a=e.snippet?"<br><br>"+e.snippet:"";return{typeAndOwner:i+r+"<br>"+n+a,typeOnly:i+o+"<br>"+n+a}}},{key:"getItemDeleteText",value:function(e){return e.error?x.removeFailed:x.remove1+" "+x.remove2}},{key:"processThisStoryResults",value:function(e){var t=this;e&&(e.forEach(function(e){t.storyCache[e.id]=Object.assign(e,{usedInStory:!0})}),this.setState({storyResourceCount:Object.keys(this.storyCache).length}))}},{key:"storeImageResourceInfo",value:function(e){console.warn("resource fell through",e)}},{key:"beforeItemFetch",value:function(){this.props.updateImageFetchStatus({fetchStatus:_.default.fetchStatus.FETCHING}),this.props.updateImages({images:[]})}},{key:"fetchIfNotStory",value:function(e){var t=Object.assign({},this.buildSearchOptionsFromReduxState(),e);t.searchLocation!==_.default.searchLocation.STORY||this.isItemId(t.searchStr)?this.itemFetch(e):(this.beforeItemFetch(),this.handleImageReturn(this.filterAndSortThisStory(e)))}},{key:"isGisContentDisabled",value:function(e){return e=e||this.props,e.authorizedMedia.indexOf(_.default.contentType.WEBMAP)<0&&e.authorizedMedia.indexOf(_.default.contentType.WEBSCENE)<0}},{key:"itemFetch",value:function(e){var t=this;this.beforeItemFetch();var n=Object.assign({},this.buildSearchOptionsFromReduxState(),e);n.searchStr&&this.isItemId(n.searchStr)&&!this.isGisContentDisabled()&&(Object.assign(n,{idArr:[n.searchStr],searchLocation:_.default.searchLocation.AGOL}),this.props.updateSearchLocation({type:_.default.searchLocation.AGOL})),n.searchLocation!==_.default.searchLocation.STORY||n.idArr?u.ArcGISConnector.getItems(n).then(function(e){return t.handleImageReturn(e)}).catch(function(e){console.warn("itemFetch failed",e),t.handleImageReturn()}):this.thisStoryFetch(n)}},{key:"itemDelete",value:function(e){var t=this;u.ArcGISConnector.removeResources(e).then(function(){t.storyCache[e.fileName]&&(delete t.storyCache[e.fileName],t.handleImageReturn(t.filterAndSortThisStory())),$(b.default.findDOMNode(t)).find(".popover").popover("hide")}).catch(function(n){console.warn("deletion failed from container",n),t.storyCache[e.fileName]&&(delete t.storyCache[e.fileName],t.handleImageReturn(t.filterAndSortThisStory())),$(b.default.findDOMNode(t)).find(".popover").popover("hide")})}},{key:"thisStoryFetch",value:function(e){var t=this;return new Promise(function(n,i){u.ArcGISConnector.getItems(e).then(function(e){t.handleThisStoryResults(e),n()}).catch(function(e){i(e),console.warn("itemFetch failed",e),t.props.provider.searchLocation===_.default.searchLocation.STORY&&t.handleImageReturn()})})}},{key:"handleThisStoryResults",value:function(e){var t=this;return e?(e.forEach(function(e){var n=t.storyCache[e.fileName];!n||n.isTemp&&e.isTemp||e.error?t.storyCache[e.fileName]=Object.assign(e,{usedInStory:!1}):n.isTemp?t.storyCache[e.fileName]=Object.assign(e,{isTemp:!1,usedInStory:!1}):n.thumbFile!==e.thumbFile&&e.thumbUrl?(t.storyCache[e.fileName].thumbFile=e.thumbFile,t.storyCache[e.fileName].thumbUrl=e.thumbUrl,n.dataUrl=null):n.dataUrl&&n.thumbFile===e.thumbFile&&n.thumbUrl&&(n.dataUrl=null)}),void(this.props.provider.searchLocation===_.default.searchLocation.STORY&&this.handleImageReturn(this.filterAndSortThisStory()))):void this.handleImageReturn(this.filterAndSortThisStory())}},{key:"filterAndSortThisStory",value:function(e){var t=[],n=Object.assign({},{sortField:this.props.provider.sortField,sortOrder:this.props.provider.sortOrder,searchStr:this.props.provider.searchStr,contentTypes:this.state.selectedContentTypes},e);for(var i in this.storyCache){var r=this.storyCache[i];n.contentTypes.indexOf(r.type)>=0&&(n.searchStr&&!this.clientSideSearch(r,n.searchStr)||t.push(r))}return this.sortThisStory(t,n)}},{key:"clientSideSearch",value:function(e,t){return t=t.toLowerCase(),e.name&&e.name.toLowerCase().indexOf(t)>=0||e.title&&e.title.toLowerCase().indexOf(t)>=0||e.snippet&&e.snippet.toLowerCase().indexOf(t)>=0}},{key:"sortThisStory",value:function(e,t){var n=t.sortField,i=t.sortOrder;return e.sort(function(e,t){var r=i===_.default.sortOrder.DESC?e[n]:t[n];r.toLowerCase&&(r=r.toLowerCase());var o=i===_.default.sortOrder.DESC?t[n]:e[n];return o.toLowerCase&&(o=o.toLowerCase()),r<o?1:o<r?-1:0})}},{key:"searchLocSubmit",value:function(e){this.props.updateSearchLocation(e),e.type!==_.default.searchLocation.AGOL&&this.isItemId(this.props.provider.searchStr)?(this.textClear({charCode:13}),this.itemFetch({searchLocation:e.type,searchStr:""})):this.itemFetch({searchLocation:e.type})}},{key:"selectedContentTypesChange",value:function(e){this.setState({selectedContentTypes:e}),e.length?this.fetchIfNotStory({contentTypes:e}):this.handleImageReturn([])}},{key:"sortFieldChange",value:function(e,t){this.props.updateSortField({field:e}),this.props.updateSortOrder({order:t}),this.fetchIfNotStory({sortField:e,sortOrder:t})}},{key:"sortOrderChange",value:function(e,t){this.props.updateSortOrder({order:e});var n=t===_.default.sortField.DATE?"dateSortOrder":"titleSortOrder";this.setState(f({},n,e)),this.fetchIfNotStory({sortOrder:e})}},{key:"multiFileUploadStart",value:function(){this.beforeItemFetch();var e=_.default.searchLocation.STORY;$(".popover").popover("hide"),this.textClear({charCode:13});var t=this.constructLocationSpecificContentTypes(this.props.authorizedMedia,e);this.setState({selectedContentTypes:t}),this.props.updateSortField({field:_.default.sortField.DATE}),this.props.updateSortOrder({order:_.default.sortOrder.DESC}),this.props.provider.searchLocation!==e?(this.props.updateSearchLocation({type:e}),this.thisStoryFetch({searchLocation:e,sortField:_.default.sortField.DATE,sortOrder:_.default.sortOrder.DESC})):this.handleImageReturn(this.filterAndSortThisStory({sortField:_.default.sortField.DATE,sortOrder:_.default.sortOrder.DESC}))}},{key:"singleFileUploadProgress",value:function(e){e&&this.updateResourcesClientSide(e,{isTemp:!0})}},{key:"singleFileUploadError",value:function(e){console.warn("singleFileUploadError",e),e&&($(b.default.findDOMNode(this)).parents(".modal").hasClass("in")&&this.multiFileUploadStart(),this.updateResourcesClientSide(e,{error:!0}))}},{key:"updateResourcesClientSide",value:function(e,t){var n=u.ArcGISConnector.formatResources([Object.assign(e,{resource:e.processedFileName})]);if(!n||!n.length)return void console.warn("bad file format",e);var i=Object.assign(n[0],t,{dataUrl:e.dataUrl});this.updateSingleResourceClientSide(i)}},{key:"updateSingleResourceClientSide",value:function(e){var t=e.fileName,n={usedInStory:!1};e.isTemp||Object.assign(n,{isTemp:!1}),this.storyCache[t]=Object.assign(e,n),this.props.provider.searchLocation===_.default.searchLocation.STORY&&this.handleImageReturn(this.filterAndSortThisStory())}},{key:"singleFileUploadComplete",value:function(e){e&&this.updateResourcesClientSide(e,{isTemp:!1})}},{key:"allFileUploadsComplete",value:function(){this.thisStoryFetch({searchLocation:_.default.searchLocation.STORY})}},{key:"onItemDelete",value:function(e,t){e.stopPropagation(),e.preventDefault(),this.itemDelete(t)}},{key:"isItemId",value:function(e){return e.match(/^[A-Fa-f0-9]{32}$/)}},{key:"render",value:function(){return g.default.createElement(w.default,k({ref:"Common",sidePanel:C.default,connector:u.ArcGISConnector,onChange:this.onChange,onKeyPress:this.onKeyPress,containerState:this.state},this.props))}}]),t}(g.default.Component),P=function(e){return{provider:e.browsePanel.agol}},O=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:_.default.providers.ARCGIS});e(t(i))};return{updateImages:function(e){t(y.updateImages,e)},updateImageFetchStatus:function(e){t(y.updateImageFetchStatus,e)},updateSearchLocation:function(e){t(y.updateSearchLocation,e)},updateSearchTerm:function(e){t(y.updateSearchTerm,e)},updateSortField:function(e){t(y.updateSortField,e)},updateSortOrder:function(e){t(y.updateSortOrder,e)}}};t.default=(0,r.connect)(P,O)(S),e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelUnsplash",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/sidePanel/SidePanelUnsplash",["module","exports","react","react-dom","lib-build/i18n!commonResources/nls/media","lib-build/less!./SidePanelUnsplash"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=d.default.mediaPicker.browsePanel.sidePanel.unsplash,h=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"componentDidMount",value:function(){var e=this,t=$(c.default.findDOMNode(this)).parents(".modal");t.on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textInput&&t<=0&&$(this.refs.textInput).focus()}}
},{key:"render",value:function(){var e=this,t="input-group search";return this.props.disabled&&(t+=" disabled"),u.default.createElement("div",{className:t},u.default.createElement("div",{className:"input-group-addon"},u.default.createElement("span",{className:"fa fa-"+this.props.icon})),u.default.createElement("input",{ref:"textInput",tabIndex:"1",type:"text",disabled:this.props.disabled,value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),u.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},u.default.createElement("span",{className:"fa fa-remove"})),u.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},u.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"search")})))}}]),t}(u.default.Component),m=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,[{key:"processAboutSpan",value:function(e,t,n){return 0===e.indexOf("brand")?u.default.createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.unsplashHome,target:"_blank"},u.default.createElement("strong",null,t)):this.getDefaultSpan(t,n)}},{key:"processCopyrightSpan",value:function(e,t,n){return"CC0"===e?u.default.createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.cc0License,target:"_blank"},u.default.createElement("strong",null,"Creative Commons Zero")):"moreInfoLink"===e?u.default.createElement("a",{key:n,href:app.cfg.BUILDER_LINKS.unsplashLicense,target:"_blank"},u.default.createElement("strong",null,t)):this.getDefaultSpan(t,n)}},{key:"getDefaultSpan",value:function(e,t){return u.default.createElement("span",{key:t},e)}},{key:"getAboutSpans",value:function(e,t){var n=this,i=e.split(/\$\{(.+?)\}/);return i.map(function(e,i){var r="unsplash-"+t+"-"+i,o=e;return f[e]&&(o=f[e]),"about"===t?n.processAboutSpan(e,o,r):n.processCopyrightSpan(e,o,r)})}},{key:"render",value:function(){return u.default.createElement("div",{className:"mp-sidepanel unsplash"},u.default.createElement(h,{icon:"picture-o",placeholder:f.placeholder,value:this.props.containerState.searchValue,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress,onClear:this.props.onClear,setFocus:this.props.containerState.focusInput}),u.default.createElement("div",{className:"help-text"},u.default.createElement("p",null,this.getAboutSpans(f.aboutText,"about")),u.default.createElement("p",null,this.getAboutSpans(f.copyrightText,"copyright"))))}}]),t}(u.default.Component);t.default=m,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/connectors/Unsplash",["exports","jquery","../config","lib-build/i18n!commonResources/nls/media","../constants"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.UnsplashConnector=void 0;var a=o(t),s=o(n),l=o(i),u=o(r),c=l.default.mediaPicker.browsePanel.providers.unsplash,d=function(){var e={ixlib:"rb-0.3.5",q:"80",fm:"jpg",crop:"entropy",fit:"max"},t=function(e){return new Promise(function(t,i){p(e).done(function(r,o){return o&&"success"===o&&r&&r.results?void(r.results.length<r.total||r.total_pages>1?p(Object.assign(e,{page:2})).done(function(e,o){return o&&"success"===o&&e?void n(r.results.concat(e.results),t):void i()}):n(r.results,t)):void i()})})},n=function(e,t){var n=[],i={};a.default.each(e,function(e,t){i[t.id]||(i[t.id]=r(t),n.push(i[t.id]))}),t(n)},i=function(e,t){var n=e.replace("${username}",t);return n.replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)})},r=function(e){return Object.assign({name:i(c.photoBy,e.user.name),externalLink:{link:e.user.links.html,background:e.user.profile_image.medium,hoverText:i(c.userLink,e.user.name)},picUrl:e.urls.regular,getPicUrl:l.bind(e),height:e.height,width:e.width,isVideo:!1,id:e.id,modified:new Date(e.created_at),type:"unsplash"},o(e))},o=function(e){var t=Math.max(u.default.galleryContent.IMG_HEIGHT,u.default.galleryContent.ALBUM_HEIGHT);return{thumbUrl:e.urls.thumb.replace(/\&w\=[0-9]*/,"&h="+t)}},l=function(e){var t=this;return new Promise(function(n){var i={url:e.picUrl,width:e.width,height:e.height};if(!t.urls.raw)return i;var r=t.height/t.width,o=[d(t.urls.raw,800,r),d(t.urls.raw,1024,r),d(t.urls.raw,1600,r),d(t.urls.raw,2048,r)];n(Object.assign({},i,{sizes:o}))})},d=function(t,n,i){var r=void 0,o=void 0,s=Object.assign({},e);return i<1?(r=n,o=Math.round(i*r),Object.assign(s,{w:r})):(o=n,r=Math.round(o/i),Object.assign(s,{h:o})),{url:t+"?"+a.default.param(s),height:o,width:r}},p=function(e){var t="https://api.unsplash.com/search/photos?client_id="+s.default.UNSPLASH_API_KEY+(e?"&"+a.default.param(e):"");return a.default.getJSON(t)};return{photoSearch:t}}();e.UnsplashConnector=d}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/UnsplashContainer",["module","exports","react","react-redux","../actions","../../constants","./Common","../sidePanel/SidePanelUnsplash","../../connectors/Unsplash"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function c(e){return e&&e.__esModule?e:{default:e}}function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var h=c(n),m=u(r),v=c(o),g=c(a),b=c(s),y=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){d(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={searchValue:"",focusInput:!1,provider:v.default.providers.UNSPLASH},e.onKeyPress=e.onKeyPress.bind(e),e.onChange=e.onChange.bind(e),e}return f(t,e),_(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({focusInput:e.display&&!this.props.display||e.openFocus})}},{key:"onChange",value:function(e){this.setState({searchValue:e.target.value})}},{key:"onClear",value:function(e){var t=this;13===e.charCode&&(this.setState({searchValue:!0,focusInput:!0}),this.onChange({target:{value:""}}),setTimeout(function(){t.onKeyPress({charCode:13})},10))}},{key:"onKeyPress",value:function(e){13===e.charCode&&this.submitPhotoSearch()}},{key:"submitPhotoSearch",value:function(){var e=this.state.searchValue.trim();return this.props.updatePhotoSearchTerm({term:e}),e?void this.imageFetch(e):(this.props.updateImages({images:[]}),void this.props.updateImageFetchStatus({fetchStatus:v.default.fetchStatus.NOT_FETCHED}))}},{key:"imageFetch",value:function(e){var t=this;this.refs.Common.beforeImageFetch(),l.UnsplashConnector.photoSearch({query:e}).then(function(e){return t.refs.Common.handleImageReturn(e)})}},{key:"render",value:function(){return h.default.createElement(g.default,y({ref:"Common",sidePanel:b.default,connector:l.UnsplashConnector,onChange:this.onChange,onKeyPress:this.onKeyPress,onClear:this.onClear.bind(this),containerState:this.state},this.props))}}]),t}(h.default.Component),C=function(e){return{provider:e.browsePanel.unsplash}},E=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:v.default.providers.UNSPLASH});e(t(i))};return{updateDisplayedContent:function(e){t(m.updateDisplayedContent,e)},updatePhotoSearchTerm:function(e){t(m.updatePhotoSearchTerm,e)},updateImages:function(e){t(m.updateImages,e)},updateImageFetchStatus:function(e){t(m.updateImageFetchStatus,e)}}};t.default=(0,i.connect)(C,E)(w),e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/connectors/UrlContent",["exports","../config","../constants"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(e,"__esModule",{value:!0}),e.URLConnector=void 0;var r=i(t),o=i(n),a=function(){var e=function(e){return new Promise(function(t,n){var r=l(e);return r?void i(r).then(function(e){return e?void t({id:r,source:"vimeo",title:e.title,description:e.description,user:e.user_name,thumbUrl:e.thumbnail_small,url:c(r),viewCount:e.stats_number_of_plays,likeCount:e.stats_number_of_likes}):void n({reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO"})}).catch(function(e){n({reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO",error:e})}):void t(o.default.fetchStatus.NON_MATCHING_URL)})},t=function(e){return new Promise(function(t,i){var r=a(e);return r?s(r)?void n(r).then(function(e){return e?void t({id:r,source:"youtube",title:e.snippet.title,description:e.snippet.description,user:e.snippet.channelTitle,thumbUrl:e.snippet.thumbnails.default.url,url:u(r),viewCount:e.statistics.viewCount,likeCount:e.statistics.likeCount}):void i({reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO"})}).catch(function(e){i(e&&403==e.status?{reason:o.default.fetchStatus.NOT_AUTHORIZED,type:"VIDEO",error:e}:{reason:o.default.fetchStatus.NOT_FOUND,type:"VIDEO",error:e})}):void i({reason:o.default.fetchStatus.BAD_FORMAT,type:"VIDEO"}):void t(o.default.fetchStatus.NON_MATCHING_URL)})},n=function(e){return new Promise(function(t,n){var i="https://www.googleapis.com/youtube/v3/videos?part=snippet,statistics&id="+e+"&key="+r.default.YOUTUBE_API_KEY;$.ajax({url:i,timeout:4e3}).then(function(e){e&&e.items&&e.items.length?t(e.items[0]):n()},function(e){n(e)})})},i=function(e){return new Promise(function(t,n){var i="//vimeo.com/api/v2/video/"+e+".json";$.ajax({type:"GET",url:i,jsonp:"callback",dataType:"jsonp",timeout:4e3}).then(function(e){e&&e[0]?t(e[0]):n()},function(e){n(e)})})},a=function(e){var t=/(youtube\.com\/(watch\?v\=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{3,20})/.exec(e);return t?t.pop():null},s=function(e){return e.match(/^[a-zA-Z0-9_-]{11}$/)},l=function(e){var t=/https?:\/\/(?:www\.|player\.)?vimeo.com\/(?:channels\/(?:\w+\/)?|groups\/([^\/]*)\/videos\/|album\/(\d+)\/video\/|video\/|)(\d+)(?:$|\/|\?)/.exec(e);return t?t.pop():null},u=function(e){return"//www.youtube.com/embed/"+e+"?wmode=opaque&rel=0"},c=function(e){return"//player.vimeo.com/video/"+e},d=function(e){return e.match(/^<iframe[^>][\s\S]*<\/iframe>$/)&&e.match(/<iframe/g).length<=2},p=function(e){var t=$(e).attr("src");return t?t:null},f=function(e){return new Promise(function(t,n){if(e.match(/(.jpg)|(.jpeg)|(.png)|(.gif)$/i)){var i=new Image;i.src=e,i.onload=function(){this.onload=null,t({url:e})},i.onerror=function(e){this.onload=null,this.onerror=null,n({reason:o.default.fetchStatus.NOT_FOUND,type:"IMAGE",error:e})}}else t(o.default.fetchStatus.NON_MATCHING_URL)})};return{checkYoutubeUrl:t,checkVimeoUrl:e,checkForIframe:d,getIframeSrc:p,checkForImage:f}}();e.URLConnector=a}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/providers/UrlContainer",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/UrlContainer",["module","exports","react","react-dom","react-redux","../actions","dojo/topic","../../connectors/UrlContent","../../utils/Helper","../../constants","lib-build/i18n!commonResources/nls/media","lib-build/less!./UrlContainer"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=p(n),g=p(i),b=d(o),y=p(a),_=p(l),w=p(u),C=p(c),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),k=C.default.mediaPicker.browsePanel.providers.urlContent,T=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),E(t,[{key:"getAlertSpans",value:function(){if(Array.isArray(this.props.text)){var e=this.props.text.map(function(e,t){return v.default.createElement("span",{key:"errortext-"+t,className:"block-span"},e)});return e}return v.default.createElement("span",null,this.props.text)}},{key:"render",value:function(){return v.default.createElement("div",{className:"alert alert-danger",role:"alert"},this.getAlertSpans())}}]),t}(v.default.Component),x=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),E(t,[{key:"componentDidMount",value:function(){var e=this,t=$(g.default.findDOMNode(this)).parents(".modal");t.on("shown.bs.modal",function(){e.props.setFocus&&$(e.refs.textareaInput).focus()})}},{key:"componentDidUpdate",value:function(){if(this.props.setFocus){var e=document.activeElement,t=e.tabIndex?parseInt(e.tabIndex):0;e!==this.refs.textareaInput&&t<=0&&$(this.refs.textareaInput).focus()}}},{key:"render",value:function(){var e=this;return v.default.createElement("div",{className:"input-group search"},v.default.createElement("div",{className:"input-group-addon"},v.default.createElement("span",{className:"fa fa-link"})),v.default.createElement("textarea",{tabIndex:"1",ref:"textareaInput",type:"textarea",value:this.props.value,className:"form-control",placeholder:this.props.placeholder,onChange:this.props.onChange,onKeyPress:this.props.onKeyPress}),v.default.createElement("div",{tabIndex:this.props.disabled?null:this.props.value?"1":null,className:"btn danger input-group-addon",style:this.props.value?null:{display:"none"},onClick:this.props.value?function(t){return e.props.onClear(Object.assign({},t,{charCode:13}))}:null,onKeyPress:this.props.onClear,disabled:this.props.disabled},v.default.createElement("span",{className:"fa fa-remove"})),v.default.createElement("div",{tabIndex:this.props.disabled?null:"1",className:"btn input-group-addon",onKeyPress:this.props.onKeyPress,onClick:this.props.disabled?null:function(t){return e.props.onKeyPress(Object.assign({},t,{charCode:13}))},disabled:this.props.disabled},v.default.createElement("span",{className:"fa fa-"+(this.props.loading?"refresh fa-spin":"check")})))}}]),t}(v.default.Component),S=function(e){function t(){f(this,t);var e=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={textInputValue:"",contentTypeDescriptor:"generic",focusInput:!1,hasError:!1,errorText:""},e}return m(t,e),E(t,[{key:"compareArrays",value:function(e,t){return e.length===t.length&&(e.sort(),t.sort(),e.every(function(e,n){return t[n]===e}))}},{key:"componentWillReceiveProps",value:function(e){var t=e.display&&!this.props.display||e.openFocus,n={focusInput:t,contentTypeDescriptor:this.computeContentTypes(e.authorizedMedia)},i=!this.compareArrays(e.authorizedMedia,this.props.authorizedMedia);if((t||i)&&Object.assign(n,{textInputValue:"",hasError:!1}),e.currentMedia){var r=e.currentMedia[e.currentMedia.type],o=app.data.appItem.item.id;switch(e.currentMedia.type){case"webpage":Object.assign(n,{textInputValue:e.currentMedia.webpage.url.replace(/^\/\//,"")});break;case"image":!r.url||"url"!==r.source&&r.thumbUrl||o&&r.url.match(o+"/resources")||Object.assign(n,{textInputValue:r.url.replace(/^\/\//,"")});break;case"video":r.url?Object.assign(n,{textInputValue:r.url.replace(/^\/\//,"")}):console.warn("video fell through because no url");break;default:console.warn("currentMedia state fell through",e.currentMedia)}}this.setState(n)}},{key:"textInput",value:function(e){var t=e.target.value;t.trim()||(t=""),this.setState({textInputValue:t,hasError:!1})}},{key:"textKeypress",value:function(e){(e.charCode||0===e.charCode)&&(13!==e.charCode||e.shiftKey||(e.preventDefault&&e.preventDefault(),this.textSubmit()))}},{key:"textClear",value:function(e){13===e.charCode&&this.setState({textInputValue:"",focusInput:!0,hasError:!1})}},{key:"textSubmit",value:function(){this.processPageAddress()}},{key:"processPageAddress",value:function(){var e=this,t=this.state.textInputValue.trim();if(t){s.URLConnector.checkForIframe(t)&&(t=s.URLConnector.getIframeSrc(t));var n=[],i=[];this.checkSingleMediaType("IMAGE")&&(n.push(s.URLConnector.checkForImage(t)),i.push(w.default.contentType.IMAGE)),this.checkSingleMediaType("VIDEO")&&(n.push(s.URLConnector.checkYoutubeUrl(t)),n.push(s.URLConnector.checkVimeoUrl(t)),i.push(w.default.contentType.VIDEO),i.push(w.default.contentType.VIDEO)),Promise.all(n).then(function(n){var r=n.some(function(t,n){return t!==w.default.fetchStatus.NON_MATCHING_URL&&(e.publishSelection(Object.assign({type:i[n]},t)),!0)});if(!r)if(e.checkSingleMediaType("WEBPAGE"))0!==t.indexOf("http://")&&0!==t.indexOf("https://")&&0!==t.indexOf("//")&&(t="//"+t),e.publishSelection({type:"webpage",url:t});else{var o=[];"imageOnly"===e.state.contentTypeDescriptor?o.push(_.default.unescapeBrands(k.uploadErrors.imageOnly1),_.default.unescapeBrands(k.uploadErrors.imageOnly2)):"imageAndVideo"===e.state.contentTypeDescriptor?o.push(_.default.unescapeBrands(k.uploadErrors.imageAndVideo1),_.default.unescapeBrands(k.uploadErrors.imageAndVideo2)):o.push(_.default.unescapeBrands(k.uploadErrors.generic)),e.setState({hasError:!0,errorText:o})}}).catch(function(t){e.setState({hasError:!0,errorText:e.getErrorMessage(t)+" "+k.uploadErrors.tryAgain})})}}},{key:"getErrorMessage",value:function(e){var t=e.reason===w.default.fetchStatus.BAD_FORMAT?k.uploadErrors.badFormat:k.uploadErrors.inaccessible,n=t.split(/\$\{(.+?)\}/);return n.map(function(t){return"media-type"===t&&(t=k.uploadErrors.mediaTypes[e.type]||k.uploadErrors.mediaTypes.generic),t}).join("")}},{key:"publishSelection",value:function(e){this.textClear({charCode:13}),y.default.publish("MEDIA-PICKER-SELECTION",e)}},{key:"computeContentTypes",value:function(e){return e&&e.length?e.includes(w.default.contentType.WEBPAGE)?"generic":e.includes(w.default.contentType.VIDEO)&&e.includes(w.default.contentType.IMAGE)?"imageAndVideo":e.includes(w.default.contentType.IMAGE)?"imageOnly":(console.warn("something funny happened with authorized media",e),"generic"):(console.warn("no authorized media"),"generic")}},{key:"getUploadHeader",value:function(){return k.uploadHeaders[this.state.contentTypeDescriptor]}},{key:"getAlert",value:function(){if(this.state.hasError)return v.default.createElement(T,{text:this.state.errorText})}},{key:"getMediaIcons",value:function(){var e=[];if(this.props.authorizedMedia&&this.props.authorizedMedia.length)return this.checkSingleMediaType("IMAGE")&&e.push(v.default.createElement("span",{className:"fa fa-picture-o",key:"media-picture-o"})),this.checkSingleMediaType("VIDEO")&&e.push(v.default.createElement("span",{className:"fa fa-vimeo",key:"media-vimeo"}),v.default.createElement("span",{className:"fa fa-youtube",key:"media-youtube"})),this.checkSingleMediaType("WEBPAGE")&&e.push(v.default.createElement("span",{className:"fa fa-code",key:"media-code"}),v.default.createElement("span",{className:"www",key:"media-www"},"www.")),e}},{key:"checkSingleMediaType",value:function(e){return this.props.authorizedMedia.includes(w.default.contentType[e])}},{key:"getHelpText",value:function(){var e=this.checkSingleMediaType("IMAGE"),t=this.checkSingleMediaType("VIDEO"),n=this.checkSingleMediaType("WEBPAGE"),i=[];return e&&t&&n?(i.push(v.default.createElement("div",{key:"link-text-1"},_.default.unescapeBrands(k.linkText.imageVideoWebpage1))),i.push(v.default.createElement("div",{key:"link-text-2"},_.default.unescapeBrands(k.linkText.imageVideoWebpage2)))):e&&t?(i.push(v.default.createElement("div",{key:"link-text-1"},_.default.unescapeBrands(k.linkText.imageAndVideo1))),i.push(v.default.createElement("div",{key:"link-text-2"},_.default.unescapeBrands(k.linkText.imageAndVideo2)))):e?i.push(v.default.createElement("div",{key:"link-text-1"},_.default.unescapeBrands(k.linkText.imageOnly))):i.push(v.default.createElement("div",{key:"link-text-1"},"NO RECOGNIZABLE CONTENT TYPES")),i.push(v.default.createElement("div",{key:"link-text-ender"},k.linkText.ender)),i}},{key:"render",value:function(){var e=k.placeholder.replace(/\$\{(.*?)}/g,function(e){return e.slice(2,-1)});return v.default.createElement("div",{style:this.props.display?null:{display:"none"},className:"browse-panel-container url-container"},v.default.createElement("div",{className:"help-title"},this.getUploadHeader()),v.default.createElement(x,{placeholder:e,value:this.state.textInputValue,setFocus:this.state.focusInput,onKeyPress:this.textKeypress.bind(this),onChange:this.textInput.bind(this),onClear:this.textClear.bind(this),hasError:!this.state.isValid}),v.default.createElement("div",{className:"help-section"},v.default.createElement("div",{className:"media-icons"},this.getMediaIcons()),v.default.createElement("div",{className:"help-text"},this.getHelpText())),this.getAlert())}}]),t}(v.default.Component),P=function(e){return{provider:e.browsePanel.urlContent}},O=function(e){var t=function(t,n){var i=Object.assign({},n,{providerType:w.default.providers.URL});e(t(i))};return{updateImageFetchStatus:function(e){t(b.updateImageFetchStatus,e)}}};t.default=(0,r.connect)(P,O)(S),e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/browsePanel/providers/Providers",[],function(){}),define("storymaps-react/common/builder/mediaPicker/browsePanel/providers/Providers",["module","exports","react","./GooglePhotosContainer","./FlickrContainer","./ArcGISContainer","./UnsplashContainer","./UrlContainer","../../constants","lib-build/less!./Providers"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function p(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var f=u(n),h=u(i),m=u(r),v=u(o),g=u(a),b=u(s),y=u(l),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),w=function(e){function t(){c(this,t);var e=d(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={justOpened:!1},e}return p(t,e),_(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({justOpened:e.params.justOpened})}},{key:"displayTab",value:function(e){return this.props.browseSelectedProvider===e}},{key:"openFocus",value:function(e){return this.displayTab(e)&&this.state.justOpened}},{key:"render",value:function(){return f.default.createElement("div",{className:"mp-browse-panel-containers"},f.default.createElement(h.default,{display:this.displayTab(y.default.providers.GOOGLE_PHOTOS),openFocus:this.openFocus(y.default.providers.GOOGLE_PHOTOS),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(m.default,{display:this.displayTab(y.default.providers.FLICKR),openFocus:this.openFocus(y.default.providers.FLICKR),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(v.default,{display:this.displayTab(y.default.providers.ARCGIS),openFocus:this.openFocus(y.default.providers.ARCGIS),appId:this.props.params?this.props.params.appid:null,thisStory:this.props.params?this.props.params.arcgisThisStory:null,authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(g.default,{display:this.displayTab(y.default.providers.UNSPLASH),openFocus:this.openFocus(y.default.providers.UNSPLASH),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[]}),f.default.createElement(b.default,{display:this.displayTab(y.default.providers.URL),openFocus:this.openFocus(y.default.providers.URL),authorizedMedia:this.props.params?this.props.params.authorizedMedia:[],currentMedia:this.props.params?this.props.params.media:null}))}}]),t}(f.default.Component);t.default=w,e.exports=t.default}),define("storymaps-react/common/builder/mediaPicker/browsePanel/BrowsePanelContainer",["module","exports","react-redux","./providers/Providers"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var o=r(i),a=function(e){return{browseSelectedProvider:e.ui.browseSelectedProvider,authorizedMedia:e.ui.authorizedMedia}};t.default=(0,n.connect)(a)(o.default),e.exports=t.default}),define("lib-build/less!storymaps-react/common/builder/mediaPicker/MediaPicker",[],function(){}),define("storymaps-react/common/builder/mediaPicker/MediaPicker",["module","exports","react","react-dom","redux","react-redux","./reducer","./browseToggle/BrowseToggleContainer","./browsePanel/BrowsePanelContainer","dojo/topic","dojo/Deferred","lib-build/less!./MediaPicker"],function(e,t,n,i,r,o,a,s,l,u,c){"use strict";function d(e){return e&&e.__esModule?e:{default:e}}function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function m(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var v,g=d(n),b=d(i),y=d(a),_=d(s),w=d(l),C=d(u),E=d(c),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),T=(0,r.createStore)(y.default,window.devToolsExtension?window.devToolsExtension():{});C.default.subscribe("MEDIA-PICKER-SELECTION",function(e){v&&e&&v.resolve(m({type:e.type},e.type,e))});var x=function(e){function t(e){p(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.container=e,n.render(),n}return h(t,e),k(t,[{key:"open",value:function(e){var t=this;return v=new E.default,this.render(Object.assign(e,{justOpened:!0})),v.then(function(){t.render(Object.assign(e,{justOpened:!1}))},function(){t.render(Object.assign(e,{justOpened:!1}))}),v}},{key:"render",value:function(e){b.default.render(g.default.createElement(o.Provider,{store:T},g.default.createElement("div",{className:"media-picker"},g.default.createElement(_.default,{authorizedMedia:e?e.authorizedMedia:null}),g.default.createElement(w.default,{params:e}))),document.getElementById(this.container))}}]),t}(g.default.Component);t.default=x,e.exports=t.default}),define("storymaps/common/builder/mediaPicker/MediaPickerPopup",["lib-build/tpl!./MediaPickerPopup","lib-build/less!./MediaPickerPopup","storymaps-react/common/builder/mediaPicker/MediaPicker","dojo/Deferred"],function(e,t,n,i){var r=["image","video","webpage","webmap","webscene"];return function(t){var o=null,a=t&&t.container;return a?(a.html(e({})),o=new n("media-picker"),void(this.open=function(e){var t=new i,n=null;return e.arcgisThisStory=app.Controller.getArcGISContent(),e.appid=app.data.appItem.item.id,e.authorizedMedia=e.authorizedMedia||r,o.open(e).then(function(e){n=e,a.modal("hide")},function(){}),a.modal({keyboard:!0}),a.on("hide.bs.modal",function(){t.isFulfilled()||(n?t.resolve(n):t.reject("No media selected"))}),t})):void console.error("Could not initialize MediaPickerPopup")}}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/Popup",["Handlebars"],function(e){return e.template({compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression;return'<div class="modal-dialog hc-dialog">\r\n\t<div class="modal-content">\r\n\t\t<div class="modal-header">\r\n\t\t\t<div class="toggles">\r\n        <div class="toggle selected" data-tab="logo-sharing">'+a(o(null!=(r=null!=e?e.toggles:e)?r.logoSharing:r,e))+'</div>\r\n        <div class="toggle" data-tab="bookmarks">'+a(o(null!=(r=null!=e?e.toggles:e)?r.bookmarks:r,e))+'</div>\r\n      </div>\r\n\t\t</div>\r\n\t\t<div class="modal-body">\r\n\t    <div class="modal-tab selected" data-tab="logo-sharing"></div>\r\n\t\t\t<div class="modal-tab" data-tab="bookmarks"></div>\r\n\t\t</div>\r\n\t\t<div class="modal-footer">\r\n      <button type="button" class="btn btn-close apply">'+a(o(null!=(r=null!=e?e.dialog:e)?r.apply:r,e))+'</button>\r\n\t\t\t<button type="button" class="btn btnCancel btn-naked btn-close" data-dismiss="modal">'+a(o(null!=(r=null!=e?e.dialog:e)?r.close:r,e))+"</button>\r\n\t\t</div>\r\n\t</div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/LogoSharing",["Handlebars"],function(e){return e.template({1:function(e,t,n,i){return" hidden"},3:function(e,t,n,i){var r,o=this.lambda,a=this.escapeExpression,s='      <div class="hc-row org-logo-row">\r\n        <label class="hc-check-label">\r\n          <input type="checkbox" class="hc-checkbox org-logo-checkbox" ';return r=t.if.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.orgLogoSettings:r)?r.useOrgLogo:r,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=r&&(s+=r),s+'>\r\n          <span class="hc-check-label-text">'+a(o(null!=(r=null!=e?e.strings:e)?r.useOrgLogo:r,e))+'</span>\r\n        </label>\r\n        <i class="org-logo-tooltip fa fa-info-circle" aria-hidden="true" data-title="'+a(o(null!=(r=null!=e?e.strings:e)?r.useOrgLogoHelp:r,e))+'"></i>\r\n      </div>\r\n'},4:function(e,t,n,i){return"checked"},6:function(e,t,n,i){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i){var r,o,a=this.lambda,s=this.escapeExpression,l="function",u=t.helperMissing,c='<div class="hc-container split">\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.logo:r,e))+'</div>\r\n    <div class="hc-row">\r\n      <div class="hc-item-container" style="background: '+s((o=null!=(o=t.background||(null!=e?e.background:e))?o:u,
typeof o===l?o.call(e,{name:"background",hash:{},data:i}):o))+';">\r\n        <img src="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.url:r,e))+'" class="hc-logo';return r=t.unless.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='">\r\n        <div class="hc-logo-button',r=t.if.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"if",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' btn btn-primary">'+s((o=null!=(o=t.useEsriLogoString||(null!=e?e.useEsriLogoString:e))?o:u,typeof o===l?o.call(e,{name:"useEsriLogoString",hash:{},data:i}):o))+'</div>\r\n        <div class="hc-action-icon-underlay">\r\n          <i class="hc-action-icon hc-settings fa fa-pencil"></i>\r\n          <i class="hc-action-icon hc-remove fa fa-trash',r=t.unless.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"unless",hash:{},fn:this.program(1,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='"></i>\r\n        </div>\r\n      </div>\r\n    </div>\r\n    <div class="hc-logo-upload-msg alert" role="alert"></div>\r\n',r=t.if.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.orgLogoSettings:r)?r.hasOrgLogo:r,{name:"if",hash:{},fn:this.program(3,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='  </div>\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.logoLink:r,e))+'</div>\r\n    <div class="hc-row">\r\n      <input type="text" value="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.link:r,e))+'" class="hc-text-input logo-link" ',r=t.unless.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.logo:r)?r.enabled:r,{name:"unless",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+='>\r\n    </div>\r\n  </div>\r\n</div>\r\n<div class="hc-container split">\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.customHeaderText:r,e))+'</div>\r\n    <div class="hc-row">\r\n      <input type="text" maxlength='+s((o=null!=(o=t.maxCharacters||(null!=e?e.maxCharacters:e))?o:u,typeof o===l?o.call(e,{name:"maxCharacters",hash:{},data:i}):o))+" size="+s((o=null!=(o=t.maxCharacters||(null!=e?e.maxCharacters:e))?o:u,typeof o===l?o.call(e,{name:"maxCharacters",hash:{},data:i}):o))+' value="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.link:r)?r.title:r,e))+'" class="hc-text-input truncated link-title">\r\n    </div>\r\n  </div>\r\n  <div class="hc-item">\r\n    <div class="hc-row item-title">'+s(a(null!=(r=null!=e?e.strings:e)?r.link:r,e))+'</div>\r\n    <div class="hc-row tagline-link" data-toggle="tooltip" title="'+s(a(null!=(r=null!=e?e.strings:e)?r.taglineLinkDisabledTooltip:r,e))+'">\r\n      <input type="text" ',r=t.if.call(e,null!=e?e.emptyTagline:e,{name:"if",hash:{},fn:this.program(6,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+=' value="'+s(a(null!=(r=null!=(r=null!=e?e.settings:e)?r.link:r)?r.url:r,e))+'" class="hc-text-input link-url">\r\n    </div>\r\n  </div>\r\n  <div class="hc-item">\r\n    <div class="hc-row">\r\n      <label class="hc-check-label">\r\n        <input type="checkbox" class="hc-checkbox social-checkbox" ',r=t.if.call(e,null!=(r=null!=(r=null!=e?e.settings:e)?r.social:r)?r.enabled:r,{name:"if",hash:{},fn:this.program(4,i),inverse:this.noop,data:i}),null!=r&&(c+=r),c+'>\r\n        <span class="hc-check-label-text">'+s(a(null!=(r=null!=e?e.strings:e)?r.enableSocialSharing:r,e))+"</span>\r\n      </label>\r\n    </div>\r\n  </div>\r\n</div>\r\n"},useData:!0})}),define("lib-build/hbars!storymaps-react/tpl/builder/settings/Bookmark",["Handlebars"],function(e){return e.template({1:function(e,t,n,i,r){var o,a,s=this.lambda,l=this.escapeExpression,u="function",c=t.helperMissing,d='    <li class="hc-row bookmark-row';return o=t.if.call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(2,i,r),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='" data-index="'+l(s(i&&i.index,e))+'">\r\n      <div class="hc-column first">\r\n        <label class="hc-check-label">\r\n          <input type="checkbox" class="hc-checkbox space bookmark-checkbox" ',o=t.unless.call(e,null!=e?e.disabled:e,{name:"unless",hash:{},fn:this.program(4,i,r),inverse:this.noop,data:i}),null!=o&&(d+=o),d+='>\r\n          <span class="hc-check-label-text truncated">'+l((a=null!=(a=t.title||(null!=e?e.title:e))?a:c,typeof a===u?a.call(e,{name:"title",hash:{},data:i}):a))+'</span>\r\n        </label>\r\n      </div>\r\n      <div class="hc-column last">\r\n          <input type="text" ',o=t.if.call(e,null!=e?e.disabled:e,{name:"if",hash:{},fn:this.program(6,i,r),inverse:this.noop,data:i}),null!=o&&(d+=o),d+" maxlength="+l(s(null!=r[1]?r[1].maxCharacters:r[1],e))+" size="+l(s(null!=r[1]?r[1].maxCharacters:r[1],e))+' value="'+l((a=null!=(a=t.bookmark||(null!=e?e.bookmark:e))?a:c,typeof a===u?a.call(e,{name:"bookmark",hash:{},data:i}):a))+'" class="hc-text-input truncated bookmark-text">\r\n      </div>\r\n    </li>\r\n'},2:function(e,t,n,i){return" disabled"},4:function(e,t,n,i){return"checked"},6:function(e,t,n,i){return"disabled"},compiler:[6,">= 2.0.0-beta.1"],main:function(e,t,n,i,r){var o,a=this.lambda,s=this.escapeExpression,l='<div class="hc-intro">'+s(a(null!=(o=null!=e?e.strings:e)?o.intro:o,e))+'</div>\r\n\r\n<div class="hc-container header-container">\r\n    <div class="hc-row">\r\n        <div class="hc-column first">'+s(a(null!=(o=null!=e?e.strings:e)?o.title:o,e))+'</div>\r\n        <div class="hc-column last">'+s(a(null!=(o=null!=e?e.strings:e)?o.bookmark:o,e))+'</div>\r\n    </div>\r\n</div>\r\n<ul class="hc-container content">\r\n';return o=t.each.call(e,null!=e?e.bookmarks:e,{name:"each",hash:{},fn:this.program(1,i,r),inverse:this.noop,data:i}),null!=o&&(l+=o),l+"</ul>\r\n"},useData:!0,useDepths:!0})}),define("lib-build/less!storymaps-react/tpl/builder/settings/Popup",[],function(){}),define("storymaps-react/tpl/builder/settings/Popup",["module","exports","storymaps-react/tpl/view/media/Media","lib-build/hbars!./Popup","lib-build/hbars!./LogoSharing","lib-build/hbars!./Bookmark","storymaps/common/utils/CommonHelper","lib-build/i18n!resources/tpl/builder/nls/app","dojo/_base/lang","lib-build/less!./Popup"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=u(n),p=u(i),f=u(r),h=u(o),m=u(a),v=u(s),g=u(l),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(){function e(t){c(this,e),this.container=t.container,this.data=null,this.esriLogoUrl="resources/tpl/viewer/icons/esri-logo.png",this.esriLogoLink="https://www.esri.com",this.backupLogoUrl=this.esriLogoUrl,this.reject=null,this.resolve=null;var n={dialog:v.default.builder.dialog,toggles:v.default.builder.headerConfig.toggles};this.container.append((0,p.default)(n)),this.attachModalEvents()}return b(e,[{key:"attachModalEvents",value:function(){this.attachToggleEvents(),this.attachApplyEvents()}},{key:"attachApplyEvents",value:function(){var e=this;this.container.find(".btn-close").on("click",function(){e.detachEvents()}),this.container.find(".btn-close.btnCancel").on("click",function(){e.reject&&e.reject()}),this.container.find(".btn-close.apply").on("click",function(){e.container.find(".btn-close.apply").hasClass("disabled")||(e.applyBookmarkChanges(),e.applyLogoSharingChanges(),e.resolve&&e.resolve(e.data.settings),e.container.modal("hide"))})}},{key:"detachEvents",value:function(){this.container.find(".hc-logo-button").off("click"),this.container.find(".hc-action-icon.hc-remove").off("click"),this.container.find(".hc-action-icon.hc-settings").off("click"),this.container.find(".hc-checkbox.bookmark-checkbox").off("click")}},{key:"applyBookmarkChanges",value:function(){for(var e=this.container.find(".hc-row.bookmark-row"),t=0;t<e.length;t++){var n=$(e[t]),i=this.data.settings.bookmarks[t];if(!i)return;var r=n.find(".hc-text-input.bookmark-text").val(),o=this.sanitizeValue(r);o||n.addClass("disabled"),n.hasClass("disabled")?i.status="disabled":i.status="visible",i.bookmark=o}}},{key:"sanitizeValue",value:function(e){var t=$("<div>"+e+"</div>").text();return t}},{key:"applyLogoSharingChanges",value:function(){var e=this.container.find(".hc-checkbox.social-checkbox");this.data.settings.social.enabled=e.is(":checked");var t=!this.container.find(".hc-logo").hasClass("hidden");this.data.settings.logo.enabled=t;var n=this.container.find(".hc-text-input.logo-link").val(),i=this.sanitizeValue(n),r=m.default.prependURLHTTP(i);this.data.settings.logo.link=r;var o=this.container.find(".hc-text-input.link-title").val(),a=this.sanitizeValue(o);this.data.settings.link.title=a;var s=this.container.find(".hc-text-input.link-url").val(),l=this.sanitizeValue(s),u=m.default.prependURLHTTP(l);this.data.settings.link.url=u}},{key:"attachToggleEvents",value:function(){var e=this,t=this.container.find(".toggle"),n="selected";t.on("click",function(i){var r=$(i.currentTarget),o=r.data("tab");t.removeClass(n),r.addClass(n),e.container.find(".modal-tab").removeClass(n),e.container.find('.modal-tab[data-tab="'+o+'"]').addClass(n)})}},{key:"attachBookmarkEvents",value:function(){this.attachEnableBookmarkEvent()}},{key:"attachLogoSharingEvents",value:function(){this.attachRemoveLogoEvents(),this.attachUseEsriLogoEvents(),this.attachSelectLogoEvents(),this.attachToggleTaglineLinkEvents(),this.attachUseOrgLogoEvents(),this.container.find(".org-logo-tooltip").tooltip(),this.container.find(".hc-logo-upload-msg").removeClass("alert-success alert-warning alert-danger")}},{key:"attachUseOrgLogoEvents",value:function(){var e=this,t=this.container.find(".hc-checkbox.org-logo-checkbox");t.on("click",function(t){var n=$(t.currentTarget),i=e.container.find(".hc-text-input.logo-link"),r="";n.is(":checked")?(e.backupLogoUrl=e.data.settings.logo.url,r=e.data.settings.orgLogoSettings.orgLogo,e.container.find(".hc-logo").attr("src",r),e.enableLogo(),m.default.isDefaultLogoLink(i.val())&&i.val("")):(r=d.default.addToken(e.backupLogoUrl),e.container.find(".hc-logo").attr("src",r),r===e.esriLogoUrl&&i.val(e.esriLogoLink)),e.data.settings.logo.url=r})}},{key:"attachToggleTaglineLinkEvents",value:function(){var e=this,t=this.container.find(".hc-text-input.link-title");t.on("keyup",function(t){var n=t.currentTarget;n.value.trim().length?e.enableTaglineLink():e.disableTaglineLink()})}},{key:"enableTaglineLink",value:function(){var e=this.container.find(".hc-text-input.link-url");e.removeAttr("disabled"),this.container.find('[data-toggle="tooltip"]').tooltip("disable")}},{key:"disableTaglineLink",value:function(){var e=this.container.find(".hc-text-input.link-url");e.attr("disabled",""),this.container.find('[data-toggle="tooltip"]').tooltip("enable")}},{key:"enableLogo",value:function(){var e="hidden";this.container.find(".hc-logo-button").addClass(e),this.container.find(".hc-logo").removeClass(e),this.container.find(".hc-action-icon.hc-remove").removeClass(e),this.container.find(".hc-text-input.logo-link").removeAttr("disabled")}},{key:"attachUseEsriLogoEvents",value:function(){var e=this;this.container.find(".hc-logo-button").on("click",function(){e.container.find(".hc-logo").attr("src",e.esriLogoUrl),e.container.find(".hc-text-input.logo-link").val(e.esriLogoLink),e.data.settings.logo.url=e.esriLogoUrl,e.enableLogo()})}},{key:"attachRemoveLogoEvents",value:function(){var e=this;this.container.find(".hc-action-icon.hc-remove").on("click",function(t){var n="hidden",i=$(t.currentTarget);e.container.find(".hc-logo").addClass(n),e.container.find(".hc-logo-button").removeClass(n),e.container.find(".hc-text-input.logo-link").attr("disabled",""),e.container.find(".hc-logo").attr("src",""),e.container.find(".hc-checkbox.org-logo-checkbox").prop("checked",!1),i.addClass(n)})}},{key:"attachSelectLogoEvents",value:function(){var e=this;this.container.find(".hc-action-icon.hc-settings").on("click",function(){app.builder.mediaPicker.open({mode:"add",authorizedMedia:["image"]}).then(function(t){if("image"===t.type){var n=t.image.url;t.image.dataUrl&&t.image.uploadDeferred?(n=t.image.dataUrl,e.data.settings.logo.url="",e.container.find(".btn.apply").addClass("disabled"),e.container.find(".hc-logo-upload-msg").html(v.default.builder.headerConfig.logoSharing.logoUploadProgress).addClass("alert-warning"),t.image.uploadDeferred.then(function(e){this.container.find(".hc-logo").attr("src",d.default.addToken(e.url)),this.container.find(".btn.apply").removeClass("disabled"),this.container.find(".hc-logo-upload-msg").html(v.default.builder.headerConfig.logoSharing.logoUploadSuccess).removeClass("alert-warning").addClass("alert-success"),this.data.settings.logo.url=e.url,setTimeout(function(){this.container.find(".hc-logo-upload-msg").removeClass("alert-success")}.bind(this),2e3)}.bind(e),function(){var e="Esri";this.container.find(".hc-action-icon.hc-remove").click(),this.container.find(".btn.apply").removeClass("disabled"),this.container.find(".hc-logo-upload-msg").removeClass("alert-warning").addClass("alert-danger").html(v.default.builder.headerConfig.logoSharing.logoUploadError.replace(/\${ESRI}/g,e)),setTimeout(function(){this.container.find(".hc-logo-upload-msg").removeClass("alert-danger")}.bind(this),2e3)}.bind(e))):e.data.settings.logo.url=n,e.container.find(".hc-logo").attr("src",d.default.addToken(n)),e.enableLogo(),e.container.find(".hc-checkbox.org-logo-checkbox").prop("checked",!1)}},function(){})})}},{key:"attachEnableBookmarkEvent",value:function(){this.container.find(".hc-checkbox.bookmark-checkbox").on("click",function(e){var t=$(e.currentTarget),n="disabled",i=t.closest(".hc-row.bookmark-row");i.hasClass(n)?(i.removeClass(n),i.find(".hc-text-input.bookmark-text").removeAttr("disabled")):(i.addClass(n),i.find(".hc-text-input.bookmark-text").attr("disabled",""))})}},{key:"open",value:function(e){var t=this;return new Promise(function(n,i){t.resolve=n,t.reject=i;var r=20,o=50;t.data=$.extend(!0,{},e.settings),t.data.settings.bookmarks=t.data.settings.bookmarks.map(function(e){return e.bookmark=e.bookmark.substr(0,r),e});var a=t.data.settings.bookmarks.map(function(e){return Object.assign({},e,{disabled:"disabled"===e.status})}),s="Esri";t.data.settings.orgLogoSettings.useOrgLogo&&m.default.isDefaultLogoLink(t.data.settings.logo.link)&&(t.data.settings.logo.link="");var l=g.default.clone({settings:t.data.settings,background:t.data.context.headerBackground,maxCharacters:o,strings:v.default.builder.headerConfig.logoSharing,useEsriLogoString:v.default.builder.headerConfig.logoSharing.logoButton.replace(/\${ESRI}/g,s),emptyTagline:!t.data.settings.link.title});l.settings.logo.url=d.default.addToken(l.settings.logo.url);var u={bookmarks:a,maxCharacters:r,strings:v.default.builder.headerConfig.bookmarks};t.container.find('.modal-tab[data-tab="logo-sharing"]').html((0,f.default)(l)),t.container.find('.modal-tab[data-tab="bookmarks"]').html((0,h.default)(u)),t.attachBookmarkEvents(),t.attachLogoSharingEvents(),t.container.modal(),t.container.on("shown.bs.modal",function(){t.container.find('[data-toggle="tooltip"]').tooltip({container:"body"});var e=t.container.find(".hc-text-input.link-title")[0];e&&e.value.trim().length&&t.container.find('[data-toggle="tooltip"]').tooltip("disable")})})}}]),e}();t.default=y,e.exports=t.default}),define("storymaps-react/tpl/builder/AppParser",["module","exports","issue-checker/helpers/NormalizeHelper"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=i(n),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(){r(this,e)}return a(e,null,[{key:"getMedia",value:function(e,t){var n={maps:o.default.createObject(),scenes:o.default.createObject(),images:o.default.createObject(),videos:o.default.createObject(),webpages:o.default.createObject()};if(t)return n;if(!e)return n;for(var i=0;i<e.length;i++){var r=e[i],a=r.id;switch(r.type){case"cover":case"sequence":case"title":this._parseSection(r.background,r.foreground.blocks,n,a);break;case"immersive":this._parseImmersiveSection(r,n,a);break;case"credits":this._parseCreditsSection(r,n,a)}}return n}},{key:"_parseImmersiveSection",value:function(e,t,n){for(var i=null,r=null,o=null,a=null,s=0;s<e.views.length;s++){o=e.views[s],i=o.background,r=[];for(var l=0;l<o.foreground.panels.length;l++)a=o.foreground.panels[l],a&&a.blocks&&a.blocks.length&&(r=r.concat(a.blocks));this._parseSection(i,r,t,n)}}},{key:"_parseCreditsSection",value:function(e,t,n){for(var i=[],r=null,o=0;o<e.foreground.panels.length;o++)r=e.foreground.panels[o],"blocks"===r.type&&r.blocks&&r.blocks.length&&(i=i.concat(r.blocks));this._parseSection(e.background,i,t,n)}},{key:"_parseSection",value:function(e,t,n,i){this._parseMediaItem(e,n,i),this._parseBlocks(t,n,i)}},{key:"_parseMediaItem",value:function(e,t,n){switch(e.type){case"image":this._updateMediaItem(e.image.url,t.images,n);break;case"webmap":this._updateMediaItem(e.webmap.id,t.maps,n);break;case"webscene":this._updateMediaItem(e.webscene.id,t.scenes,n);break;case"video":this._updateMediaItem(e.video.url,t.videos,n);break;case"webpage":this._updateMediaItem(e.webpage.url,t.webpages,n)}}},{key:"_parseBlocks",value:function(e,t,n){if(e&&e.length){var i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"image-gallery"===l.type?this._parseImageGallery(l,t,n):this._parseMediaItem(l,t,n)}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}}}},{key:"_parseImageGallery",value:function(e,t,n){if(e&&e["image-gallery"]&&e["image-gallery"].images){var i=e["image-gallery"].images,r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this._updateMediaItem(u.url,t.images,n)}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}}}},{key:"_updateMediaItem",value:function(e,t,n){var i=t.byId[e];if(i){var r=-1;r=i.sections.indexOf(n),r===-1&&i.sections.push(n)}else{var o={id:e,sections:[n]};t.allItems.push(e),t.byId[e]=o}}}]),e}();t.default=s,e.exports=t.default}),define("issue-checker/CheckedItem",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function e(t,i){n(this,e),this.id=t,this.mediaType=i,this.errors=[],this.details={}};t.default=i,e.exports=t.default}),define("issue-checker/AGOLCheckedItem",["module","exports","./CheckedItem"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n),l=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.layers=[],i}return a(t,e),t}(s.default);t.default=l,e.exports=t.default}),define("issue-checker/Result",["module","exports","./helpers/NormalizeHelper","./CheckedItem","./AGOLCheckedItem"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(t){a(this,e),this.media={maps:s.default.createObject(),scenes:s.default.createObject(),layers:s.default.createObject(),images:s.default.createObject(),videos:s.default.createObject(),webpages:s.default.createObject()},this.errors=s.default.createObject(),t&&this._addMediaEntries(t)}return c(e,[{key:"_addMediaEntries",value:function(e){if(e.imageIDs){var t=!0,n=!1,i=void 0;try{for(var r,o=e.imageIDs[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,c=new l.default(a,"image");s.default.addEntry(this.media.images,a,c)}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}if(e.videoIDs){var d=!0,p=!1,f=void 0;try{for(var h,m=e.videoIDs[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var v=h.value,g=new l.default(v,"video");s.default.addEntry(this.media.videos,v,g)}}catch(e){p=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(p)throw f}}}if(e.mapIDs){var b=!0,y=!1,_=void 0;try{for(var w,C=e.mapIDs[Symbol.iterator]();!(b=(w=C.next()).done);b=!0){var E=w.value,k=new u.default(E,"map");s.default.addEntry(this.media.maps,E,k)}}catch(e){y=!0,_=e}finally{try{!b&&C.return&&C.return()}finally{if(y)throw _}}}}},{key:"addLayerEntries",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=e.layers[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value,l=this.media.layers.byId[a.id];l?l.maps.indexOf(e.id)===-1&&l.maps.push(e.id):(a.maps.push(e.id),s.default.addEntry(this.media.layers,a.id,a))}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}}}]),e}();t.default=d,e.exports=t.default}),define("issue-checker/IssueTypes",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={maps:{deleted:"maps/deleted",inaccessible:"maps/inaccessible",unauthorized:"maps/unauthorized",unshared:"maps/unshared",othersUnshared:"maps/othersUnshared"},content:{unshared:"content/unshared",othersUnshared:"content/othersUnshared"},layers:{deleted:"layers/deleted",inaccessible:"layers/inaccessible",unauthorized:"layers/unauthorized",unshared:"layers/unshared",othersUnshared:"layers/othersUnshared",premiumContent:"layers/premiumContent",subscriptionContent:"layers/subscriptionContent",secureService:"layers/secureService"},images:{inaccessible:"images/inaccessible"},videos:{inaccessible:"videos/inaccessible"}},e.exports=t.default}),define("issue-checker/media/Media",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,[{key:"_checkItem",value:function(){}}],[{key:"check",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=this._checkItem(l);n.push(u)}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return Promise.all(n).then(function(e){return{mediaType:t,items:e}})}}]),e}();t.default=r,e.exports=t.default}),define("issue-checker/media/Images",["module","exports","esri/IdentityManager","esri/arcgis/utils","./../IssueTypes","./Media"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,null,[{key:"check",value:function(e){return m(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,e,"images")}},{key:"_checkItem",value:function(e){var n=this;return new Promise(function(i,r){var o=15e3,a=new Image;e.details.source=t._getSource(e.id);var s=window.setTimeout(function(){t._onImageError(e,i)},o);a.onload=function(){window.clearTimeout(s),i(e)},a.onerror=function(){window.clearTimeout(s),t._onImageError(e,i)};var l=d.default.arcgisUrl.split("/sharing/")[0],u=c.default.findCredential(l),p=n._isAGOLImage(e),f="";u&&p&&e.id.indexOf("?token")===-1&&e.id.indexOf("&token")===-1&&(f="?token="+u.token),a.src=e.id+f})}},{key:"_onImageError",value:function(e,t){e.errors.push(p.default.images.inaccessible),t(e)}},{key:"_getSource",value:function(e){var t={};return t=new RegExp("\\/\\/fbcdn|fbcdn\\.net"),t.test(e)?"facebook":(t=new RegExp("flickr\\.com"),t.test(e)?"flickr":(t=new RegExp("\\.ggpht\\.com|lh[1-9]\\.googleusercontent\\."),t.test(e)?"googlePlus":"url"))}},{key:"_isAGOLImage",value:function(e){return!(!e.id||!e.id.match(new RegExp("/sharing/rest/content/items/.*?/resources/")))}}]),t}(f.default);t.default=v,e.exports=t.default}),define("issue-checker/media/Videos",["module","exports","esri/request","./../IssueTypes","./Media"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=o(n),c=o(i),d=o(r),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},h=function(e){function t(){return a(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,e),p(t,null,[{key:"check",value:function(e){return f(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,e,"videos")}},{key:"_checkItem",value:function(e){return new Promise(function(n,i){var r=/(youtube\.com\/(watch\?v\=|embed\/)|youtu\.be\/)([a-zA-Z0-9_-]{11})/,o=/^.*(vimeo\.com\/)((video\/))?([0-9]+)/,a=r.exec(e.id),s=o.exec(e.id);a?t._checkYouTubeVideo(e,a,n):s?t._checkVimeoVideo(e,s,n):t._onVideoError(e,n)})}},{key:"_checkYouTubeVideo",value:function(e,n,i){if(e.details.source="youTube",4!==n.length)t._onVideoError(e,i);else{var r=n[3];(0,u.default)({url:"https://www.googleapis.com/youtube/v3/videos",content:{part:"snippet",id:r,key:"AIzaSyCHc4DP7IJU2neC0lbuKh5Fg5g3RVeRoiE"},timeout:4e3}).then(function(n){n.items&&n.items.length>0?i(e):t._onVideoError(e,i)},function(){t._onVideoError(e,i)})}}},{key:"_checkVimeoVideo",value:function(e,n,i){if(e.details.source="vimeo",5!==n.length)t._onVideoError(e,i);else{var r=n[4];(0,u.default)({url:"https://api.vimeo.com/videos/"+r,headers:{Authorization:"bearer f22bff482301959a0e18a3257ee8966b",Accept:"application/vnd.vimeo.*+json;version=3.2"}}).then(function(){i(e)},function(){t._onVideoError(e,i)})}}},{key:"_onVideoError",value:function(e,t){e.errors.push(c.default.videos.inaccessible),t(e)}}]),t}(d.default);t.default=h,e.exports=t.default}),define("issue-checker/appState",["module","exports"],function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={privileges:null,orgId:"",premiumManager:null};t.default=n,e.exports=t.default}),define("issue-checker/media/AGOLItem",["module","exports","./Media","esri/arcgis/utils","esri/request","esri/IdentityManager","./../IssueTypes","./../appState"],function(e,t,n,i,r,o,a,s){"use strict";function l(e){return e&&e.__esModule?e:{default:e}}function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var p=l(n),f=l(i),h=l(r),m=l(o),v=l(a),g=l(s),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(e){function t(){return u(this,t),c(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return d(t,e),b(t,null,[{key:"check",value:function(e,t){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=e.items[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value,u=this._checkItem({item:l,appAccess:e.appAccess,mediaType:t});n.push(u)}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return Promise.all(n).then(function(e){return{mediaType:t,items:e}})}},{key:"_checkItem",value:function(e){var t=this;return new Promise(function(n){var i=f.default.arcgisUrl+"/"+e.item.id;(0,h.default)({url:i,content:{f:"json"},timeout:15e3}).then(function(i){t._onItemSuccess(i,e,n)},function(i){t._onItemError(i,e,n)})})}},{key:"_onItemError",value:function(e,t,n){400===e.httpCode?t.item.errors.push(v.default[t.mediaType].deleted):403===e.httpCode?t.item.errors.push(v.default[t.mediaType].unauthorized):t.item.errors.push(v.default[t.mediaType].inaccessible),n(t.item)}},{key:"_onItemSuccess",value:function(e,t,n){if(t.item.details.sharingLevel=this._assignSharingLevel(e.access),t.item.details.owner=e.owner,"maps"===t.mediaType)t.item.details.title=e.title;else if("layers"===t.mediaType){
var i=e.typeKeywords.indexOf("Hosted Service")!==-1,r=e.typeKeywords.indexOf("Service Proxy")!==-1;t.item.details.hostedServiceOrServiceProxy=r||i}var o=f.default.arcgisUrl.split("/sharing/")[0],a=m.default.findCredential(o).userId,s=t.item.details.owner===a,l=this._determineCanShare(s,e.itemControl);t.item.details.privileges=this._findSharingPrivileges({privileges:g.default.privileges,canShare:l,isOwner:s}),this._checkSharingLevel(t,l),n(t.item)}},{key:"_assignSharingLevel",value:function(e){return"account"===e?"org":"shared"===e?"private":e}},{key:"_determineCanShare",value:function(e,t){return!!e||("admin"===t||"update"===t)}},{key:"_findSharingPrivileges",value:function(e){return e.canShare&&e.privileges?e.isOwner?{publicly:e.privileges.canShareMinePublic,org:e.privileges.canShareMineOrg}:{publicly:e.privileges.canShareOthersPublic,org:e.privileges.canShareOthersOrg}:{publicly:!1,org:!1}}},{key:"_checkSharingLevel",value:function(e,t){"public"===e.appAccess?"org"!==e.item.details.sharingLevel&&"private"!==e.item.details.sharingLevel||(t?e.item.errors.push(v.default[e.mediaType].unshared):e.item.errors.push(v.default[e.mediaType].othersUnshared)):"org"!==e.appAccess&&"account"!==e.appAccess||"private"===e.item.details.sharingLevel&&e.item.errors.push(v.default[e.mediaType].unshared)}}]),t}(p.default);t.default=y,e.exports=t.default}),define("issue-checker/media/layers/AGOLHostedLayer",["module","exports","esri/arcgis/utils","./../AGOLItem"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(){o(this,e)}return l(e,null,[{key:"check",value:function(e){return e.layerResults.details.title=e.layerItem.title,s.default._checkItem({item:e.layerResults,appAccess:e.appAccess,mediaType:e.mediaType}).then(function(e){var t=a.default.arcgisUrl.split("/sharing/")[0];return e.details.linkURL=t+"/home/item.html?id="+e.id,e})}}]),e}();t.default=u,e.exports=t.default}),define("issue-checker/helpers/Formatter",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(){n(this,e)}return i(e,null,[{key:"removeProtocol",value:function(e){return e.replace(/(.*?):\/\//,"//")}}]),e}();t.default=r,e.exports=t.default}),define("issue-checker/media/layers/ServiceLayer",["module","exports","./../../IssueTypes","./../../appState","./../../helpers/Formatter"],function(e,t,n,i,r){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var s=o(n),l=o(i),u=o(r),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function(){function e(){a(this,e)}return c(e,null,[{key:"check",value:function(e){var t=this;return new Promise(function(n){e.layerResults.details.title=e.layer.title,e.layerResults.details.url=e.layer.url;var i=e.layer.url;i&&!e.keepProtocol&&(i=u.default.removeProtocol(e.layer.url));var r=new e.CalledClass(i),o=window.setTimeout(function(){t._onLayerError(null,e.layerResults,n)},15e3);r.on("load",function(i){window.clearTimeout(o);var r=t._checkIfCredentialedLayer(i.layer);return r?t._checkSecureLayer({layer:e.layerResults,url:e.layer.url,resolve:n,appAccess:e.appAccess}):void n(e.layerResults)}),r.on("error",function(i){window.clearTimeout(o),t._onLayerError(i,e.layerResults,n)})})}},{key:"_checkSecureLayer",value:function(e){return l.default.premiumManager?l.default.premiumManager.checkSecureService(e.url).then(function(t){"public"!==e.appAccess||t.hasProxy||(t.isPremium?e.layer.errors.push(s.default.layers.premiumContent):t.isSubscription?e.layer.errors.push(s.default.layers.subscriptionContent):e.layer.errors.push(s.default.layers.secureService)),e.resolve(e.layer)},function(){e.resolve(e.layer)}):e.resolve(e.layer)}},{key:"_checkIfCredentialedLayer",value:function(e){return!(!e.credential||!l.default.orgId)}},{key:"_onLayerError",value:function(e,t,n){t.errors.push(s.default.layers.inaccessible),n(t)}}]),e}();t.default=d,e.exports=t.default}),define("issue-checker/media/layers/FeatureLayer",["module","exports","esri/layers/FeatureLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,{layer:e.item,layerResults:e.layerResults,appAccess:e.appAccess,CalledClass:l.default})}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/ImageServiceLayer",["module","exports","esri/layers/ArcGISImageServiceLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,{layer:e.item,layerResults:e.layerResults,appAccess:e.appAccess,CalledClass:l.default})}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/TiledMapServiceLayer",["module","exports","esri/layers/ArcGISTiledMapServiceLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,{layer:e.item,layerResults:e.layerResults,appAccess:e.appAccess,CalledClass:l.default})}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/DynamicMapServiceLayer",["module","exports","esri/layers/ArcGISDynamicMapServiceLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,{layer:e.item,layerResults:e.layerResults,appAccess:e.appAccess,CalledClass:l.default})}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/VectorTileLayer",["module","exports","esri/layers/VectorTileLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,{layer:e.item,layerResults:e.layerResults,appAccess:e.appAccess,CalledClass:l.default})}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/media/layers/GeoRSSLayer",["module","exports","esri/layers/GeoRSSLayer","./ServiceLayer"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var l=r(n),u=r(i),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},p=function(e){function t(){return o(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),c(t,null,[{key:"check",value:function(e){return d(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,{layer:e.item,layerResults:e.layerResults,appAccess:e.appAccess,CalledClass:l.default,keepProtocol:!0})}}]),t}(u.default);t.default=p,e.exports=t.default}),define("issue-checker/LayerCheckedItem",["module","exports","./CheckedItem"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=i(n),l=function(e){function t(e){r(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"layer"));return n.maps=[],n}return a(t,e),t}(s.default);t.default=l,e.exports=t.default}),define("issue-checker/media/Layers",["module","exports","./Media","./layers/AGOLHostedLayer","./layers/FeatureLayer","./layers/ImageServiceLayer","./layers/TiledMapServiceLayer","./layers/DynamicMapServiceLayer","./layers/VectorTileLayer","./layers/GeoRSSLayer","./../LayerCheckedItem","./../IssueTypes"],function(e,t,n,i,r,o,a,s,l,u,c,d){"use strict";function p(e){return e&&e.__esModule?e:{default:e}}function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function m(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var v=p(n),g=p(i),b=p(r),y=p(o),_=p(a),w=p(s),C=p(l),E=p(u),k=p(c),T=p(d),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),S=function(e){function t(){return f(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return m(t,e),x(t,null,[{key:"check",value:function(e){var t=[],n=!0,i=!1,r=void 0;try{for(var o,a=e.items[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=this._checkItem({item:s,appAccess:e.appAccess});t.push(l)}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}return Promise.all(t).then(function(e){return{mediaType:"layers",items:e}})}},{key:"_checkItem",value:function(e){if("VectorTileLayer"===e.item.layerType&&(e.item.url=e.item.styleUrl),e.item.itemId||e.item.url){if(e.item.itemId&&!e.item.url){var t=new k.default(e.item.itemId);return g.default.check({layerItem:e.item,appAccess:e.appAccess,mediaType:"layers",layerResults:t})}if("CSV"===e.item.type||"KML"===e.item.type||"WMS"===e.item.type||"WFS"===e.item.type||"WebTiledLayer"===e.item.type)return Promise.resolve({id:e.item.id,mediaType:"layer",errors:[],maps:[],details:{title:e.item.title,notChecked:!0}});if(e.item.itemId&&e.item.url){var n=new k.default(e.item.itemId);return this._checkItemURLService({item:e.item,appAccess:e.appAccess,layerResults:n})}var i=new k.default(e.item.id);return this._checkURLService({item:e.item,appAccess:e.appAccess,layerResults:i})}return Promise.resolve({id:e.item.id,mediaType:"layer",errors:[],maps:[],details:{title:e.item.title}})}},{key:"_checkItemURLService",value:function(e){var t=this;return g.default.check({layerItem:e.item,appAccess:e.appAccess,mediaType:"layers",layerResults:e.layerResults}).then(function(n){return n.details.hostedServiceOrServiceProxy?n:(t._removeLayerIssue(n.errors,T.default.layers.deleted),t._removeLayerIssue(n.errors,T.default.layers.inaccessible),t._removeLayerIssue(n.errors,T.default.layers.unauthorized),t._checkURLService({item:e.item,appAccess:e.appAccess,layerResults:n}))})}},{key:"_checkURLService",value:function(e){return"ArcGISFeatureLayer"===e.item.layerType?b.default.check(e):"ArcGISImageServiceLayer"===e.item.layerType?y.default.check(e):"ArcGISTiledMapServiceLayer"===e.item.layerType?_.default.check(e):"ArcGISMapServiceLayer"===e.item.layerType?w.default.check(e):"VectorTileLayer"===e.item.layerType?C.default.check(e):"GeoRSS"===e.item.layerType?E.default.check(e):w.default.check(e)}},{key:"_removeLayerIssue",value:function(e,t){var n=e.indexOf(t);n!==-1&&e.splice(n,1)}}]),t}(v.default);t.default=S,e.exports=t.default}),define("issue-checker/media/Maps",["module","exports","esri/request","esri/arcgis/utils","./AGOLItem","./Layers"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var c=a(n),d=a(i),p=a(r),f=a(o),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),m=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,i)}if("value"in r)return r.value;var a=r.get;if(void 0!==a)return a.call(i)},v=function(e){function t(){return s(this,t),l(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return u(t,e),h(t,null,[{key:"check",value:function(e){var n=this;return m(t.__proto__||Object.getPrototypeOf(t),"check",this).call(this,e,"maps").then(function(t){return n._checkAllLayers(t,e.appAccess)})}},{key:"_checkAllLayers",value:function(e,t){var n=this,i=[],r=!0,o=!1,a=void 0;try{for(var s,l=function(){var e=s.value,r=n._getAllLayers(e.id).then(function(e){return f.default.check({items:e,appAccess:t})}).then(function(t){return e.layers=t.items,e});i.push(r)},u=e.items[Symbol.iterator]();!(r=(s=u.next()).done);r=!0)l()}catch(e){o=!0,a=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw a}}return Promise.all(i).then(function(){return e})}},{key:"_getAllLayers",value:function(e){return new Promise(function(t){(0,c.default)({url:d.default.arcgisUrl+"/"+e+"/data",content:{f:"json"},timeout:15e3}).then(function(e){var n=e.baseMap.baseMapLayers,i=!0,r=!1,o=void 0;try{for(var a,s=n[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.isBasemap=!0}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}var u=n.concat(e.operationalLayers);t(u)},function(){var e=[];t(e)})})}}]),t}(p.default);t.default=v,e.exports=t.default}),define("issue-checker/Issue",["module","exports","./IssueTypes"],function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=i(n),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),l=function(){function e(t,n){o(this,e);var i=e.getIssueDetails(t);this.id=t,this.mediaType=i.mediaType,this.media=n,this.actions=i.actions}return s(e,null,[{key:"getIssueDetails",value:function(e){var t,n=(t={},r(t,a.default.images.inaccessible,{mediaType:"images",actions:[]}),r(t,a.default.videos.inaccessible,{mediaType:"videos",actions:[]}),r(t,a.default.maps.inaccessible,{mediaType:"maps",actions:[]}),r(t,a.default.maps.deleted,{mediaType:"maps",actions:[]}),r(t,a.default.maps.unauthorized,{mediaType:"maps",actions:[]}),r(t,a.default.maps.unshared,{mediaType:"maps",actions:["maps/share"]}),r(t,a.default.maps.othersUnshared,{mediaType:"maps",actions:[]}),r(t,a.default.layers.inaccessible,{mediaType:"layers",actions:[]}),r(t,a.default.layers.deleted,{mediaType:"layers",actions:[]}),r(t,a.default.layers.unauthorized,{mediaType:"layers",actions:[]}),r(t,a.default.layers.unshared,{mediaType:"layers",actions:["layers/share"]}),r(t,a.default.layers.othersUnshared,{mediaType:"layers",actions:[]}),r(t,a.default.layers.premiumContent,{mediaType:"layers",actions:["layers/sharePremiumContent"]}),r(t,a.default.layers.subscriptionContent,{mediaType:"layers",actions:["layers/shareSubscriptionContent"]}),r(t,a.default.layers.secureService,{mediaType:"layers",actions:[]}),t);return n[e]}}]),e}();t.default=l,e.exports=t.default}),define("issue-checker/Share",["module","exports","esri/arcgis/utils","esri/request","./media/Maps","./Result","./helpers/NormalizeHelper","./IssueTypes","./appState"],function(e,t,n,i,r,o,a,s,l){"use strict";function u(e){return e&&e.__esModule?e:{default:e}}function c(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var d=u(n),p=u(i),f=u(r),h=u(o),m=u(a),v=u(s),g=u(l),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),y=function(){function e(){c(this,e)}return b(e,null,[{key:"shareApp",value:function(e){var t=this;return new Promise(function(n,i){var r=[];r.push(t.share({sharingLevel:e.sharingLevel,owner:e.owner,id:e.appID})),e.media.mapIDs&&r.push(t._shareMaps(e.media,e.sharingLevel)),Promise.all(r).then(function(t){var r=t[0],o=t[1],a=o&&o.unsharedItems.length;!r.success||a?i({appShared:r.success,sharedItems:o?o.sharedItems:[],unsharedItems:o?o.unsharedItems:[]}):n({sharingLevel:e.sharingLevel,itemsChanged:o?o.sharedItems:[]})})})}},{key:"_shareMaps",value:function(e,t){var n=this;return new Promise(function(i){var r=new h.default(e),o=m.default.getAllItems(r.media.maps);f.default.check({items:o,appAccess:t}).then(function(e){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e.items[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.errors.indexOf(v.default.maps.unshared)!==-1&&r.push(n.share({sharingLevel:t,owner:c.details.owner,id:c.id}));var d=!0,p=!1,f=void 0;try{for(var h,m=c.layers[Symbol.iterator]();!(d=(h=m.next()).done);d=!0){var g=h.value;n._shareLayer({layer:g,promises:r,sharingLevel:t})}}catch(e){p=!0,f=e}finally{try{!d&&m.return&&m.return()}finally{if(p)throw f}}}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}Promise.all(r).then(function(e){n._onBulkShareComplete(e,i)})})})}},{key:"_shareLayer",value:function(e){e.layer.errors.indexOf(v.default.layers.unshared)!==-1&&e.promises.push(this.share({sharingLevel:e.sharingLevel,owner:e.layer.details.owner,id:e.layer.id})),e.layer.errors.indexOf(v.default.layers.subscriptionContent)!==-1&&e.promises.push(g.default.premiumManager.addProxies([{id:e.layer.id,url:e.layer.details.url}]).then(function(e){return{success:!0,id:e[0].id}},function(e){return{success:!1,id:e[0].id}}))}},{key:"_onBulkShareComplete",value:function(e,t){var n={sharedItems:[],unsharedItems:[]},i=!0,r=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;l.success?n.sharedItems.push(l.id):n.unsharedItems.push(l.id)}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}t(n)}},{key:"share",value:function(e){return new Promise(function(t){var n={org:"org"===e.sharingLevel||"account"===e.sharingLevel,public:"public"===e.sharingLevel},i=d.default.arcgisUrl.split("/items")[0];(0,p.default)({url:i+"/users/"+e.owner+"/shareItems",content:{f:"json",items:[e.id],everyone:n.public,org:n.org}},{usePost:!0}).then(function(n){var i=n.results[0];t(i.success?{id:e.id,success:!0}:{id:e.id,success:!1})},function(n){t({id:e.id,success:!1})})})}}]),e}();t.default=y,e.exports=t.default}),define("issue-checker/Fix",["module","exports","./Share","./appState"],function(e,t,n,i){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var a=r(n),s=r(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),u=function(){function e(){o(this,e)}return l(e,null,[{key:"fixMapsShare",value:function(e){return new Promise(function(t,n){var i=[],r=!0,o=!1,s=void 0;try{for(var l,u=e.items[Symbol.iterator]();!(r=(l=u.next()).done);r=!0){var c=l.value;i.push(a.default.share({id:c.id,owner:c.owner,sharingLevel:e.sharingLevel}))}}catch(e){o=!0,s=e}finally{try{!r&&u.return&&u.return()}finally{if(o)throw s}}Promise.all(i).then(function(e){var i=[],r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;c.success?r.push(c.id):i.push(c.id)}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}i.length?n({fixedItems:r,unfixedItems:i}):t({fixedItems:r})})})}},{key:"fixPremiumSubscriptionContent",value:function(e){return new Promise(function(t,n){s.default.premiumManager.addProxies(e).then(function(e){var n=e.map(function(e){return e.id});t({fixedItems:n})},function(e){var t=e.map(function(e){return e.id});n({fixedItems:[],unfixedItems:t})})})}}]),e}();t.default=u,e.exports=t.default}),define("issue-checker/Privileges",["module","exports"],function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),r=function(){function e(t){n(this,e),this.canShareMineOrg=!1,this.canShareMinePublic=!1,this.canShareOthersOrg=!1,this.canShareOthersPublic=!1,t&&(this.canShareMineOrg=!0,this.canShareMinePublic=!0)}return i(e,null,[{key:"findPrivileges",value:function(t){if(t.user.orgId){var n=this._findOrgPrivileges(t.user.privileges),i=this._checkIfAdmin(t.user);return t.canSharePublic||i||(n.canShareMinePublic=!1,n.canShareOthersPublic=!1),n}return new e(!0)}},{key:"_findOrgPrivileges",value:function(t){var n=new e(!1),i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var l=a.value;"portal:user:shareToPublic"===l?n.canShareMinePublic=!0:"portal:user:shareToOrg"===l?n.canShareMineOrg=!0:"portal:admin:shareToPublic"===l?(n.canShareMinePublic=!0,t.indexOf("portal:admin:viewItems")!==-1&&t.indexOf("portal:admin:updateItems")!==-1&&(n.canShareOthersPublic=!0)):"portal:admin:shareToOrg"===l&&(n.canShareMineOrg=!0,t.indexOf("portal:admin:viewItems")!==-1&&t.indexOf("portal:admin:updateItems")!==-1&&(n.canShareOthersOrg=!0))}}catch(e){r=!0,o=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}},{key:"_checkIfAdmin",value:function(e){return"org_admin"===e.role.toLowerCase()&&!e.roleId}}]),e}();t.default=r,e.exports=t.default}),define("issue-checker/PremiumManager",["module","exports","dojo/on","esri/arcgis/AppProxyManager","esri/dijit/AppProxySettings","./helpers/Formatter"],function(e,t,n,i,r,o){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var l=(a(n),a(i)),u=a(r),c=a(o),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i);
}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),p=function(){function e(t,n){s(this,e),this._appProxyManager=null,this._appProxySettings=null;var i=/(.*\/)/.exec(n),r=i?i[0]:"",o=c.default.removeProtocol(r),a="http:"+o,d="https:"+o;this._appProxyManager=new l.default({appid:t,referrers:[a,d]}),this._appProxySettings=new u.default({proxyManagerOptions:{appid:t},webmaps:[]},null)}return d(e,[{key:"checkSecureService",value:function(e){var t=this;return this._checkIfPremiumContent(e).then(function(n){return(n.isPremium||n.isSubscription)&&(n.hasProxy=t._checkForProxy(e)),n})}},{key:"_checkForProxy",value:function(e){var t=!0,n=!1,i=void 0;try{for(var r,o=this._appProxyManager.proxies[Symbol.iterator]();!(t=(r=o.next()).done);t=!0){var a=r.value;if(c.default.removeProtocol(e)===c.default.removeProtocol(a.sourceUrl))return!0}}catch(e){n=!0,i=e}finally{try{!t&&o.return&&o.return()}finally{if(n)throw i}}return!1}},{key:"_checkIfPremiumContent",value:function(e){var t=this;return new Promise(function(n,i){if(t._appProxyManager.loaded){var r=t._resolvePremiumContent(e);n(r)}else t._appProxyManager.on("load",function(){var i=t._resolvePremiumContent(e);n(i)}),t._appProxyManager.on("error",function(){i()})})}},{key:"_resolvePremiumContent",value:function(e){var t=this._appProxySettings._isPremium(e),n=this._appProxySettings._consumesCredits(e);return n&&(t=!1),{isPremium:n,isSubscription:t,hasProxy:!1}}},{key:"addProxies",value:function(e){var t=this;return new Promise(function(n,i){var r=[],o=!0,a=!1,s=void 0;try{for(var l,u=e[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var c=l.value;r.push({sourceUrl:c.url})}}catch(e){a=!0,s=e}finally{try{!o&&u.return&&u.return()}finally{if(a)throw s}}t._appProxyManager.createProxies(r).then(function(){n(e)},function(){i(e)})})}}]),e}();t.default=p,e.exports=t.default}),define("issue-checker/IssueChecker",["module","exports","esri/config","esri/arcgis/utils","./Result","./helpers/NormalizeHelper","./media/Images","./media/Videos","./media/Maps","./Issue","./Share","./Fix","./Privileges","./appState","./PremiumManager"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f,h){"use strict";function m(e){return e&&e.__esModule?e:{default:e}}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var g=m(n),b=m(i),y=m(r),_=m(o),w=m(a),C=m(s),E=m(l),k=m(u),T=m(c),x=m(d),S=m(p),P=m(f),O=m(h),I=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),M=function(){function e(t){v(this,e),this.owner=t?t.owner:"";var n=t&&t.portal?S.default.findPrivileges(t.portal):null;P.default.privileges=n,t&&(t.proxyUrl&&(g.default.defaults.io.proxyUrl=t.proxyUrl),t.arcgisUrl&&(b.default.arcgisUrl=t.arcgisUrl),t.appId&&t.appUrl&&(P.default.premiumManager=new O.default(t.appId,t.appUrl)),t.portal&&(P.default.orgId=t.portal.user?t.portal.user.orgId:"")),g.default.defaults.io.proxyUrl||(g.default.defaults.io.proxyUrl="http://www.arcgis.com/sharing/proxy")}return I(e,[{key:"onFirstAppSave",value:function(e){P.default.premiumManager=new O.default(e.appId,e.appUrl)}},{key:"check",value:function(e){var t=this,n=new y.default(e.media),i=_.default.getAllItems(n.media.images),r=w.default.check(i),o=_.default.getAllItems(n.media.videos),a=C.default.check(o),s=_.default.getAllItems(n.media.maps),l=E.default.check({items:s,appAccess:e.appAccess}).then(function(e){return t._groomMapLayerData(n,e),e}),u=[r,a,l];return Promise.all(u).then(function(){return n.errors=t._compileIssues(n.media,n.errors),n})}},{key:"_groomMapLayerData",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=t.items[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value;e.addLayerEntries(s);var l=s.layers.slice(0);s.layers=l.map(function(e){return e.id})}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"_compileIssues",value:function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var i=_.default.getAllItems(e[n]),r=!0,o=!1,a=void 0;try{for(var s,l=i[Symbol.iterator]();!(r=(s=l.next()).done);r=!0){var u=s.value;this._compileItemErrors(u,t)}}catch(e){o=!0,a=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw a}}}return t}},{key:"_compileItemErrors",value:function(e,t){var n=!0,i=!1,r=void 0;try{for(var o,a=e.errors[Symbol.iterator]();!(n=(o=a.next()).done);n=!0){var s=o.value,l=t.byId[s];if(l)l.media.push(e.id);else{var u=new k.default(s,[e.id]);_.default.addEntry(t,s,u)}}}catch(e){i=!0,r=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw r}}}},{key:"fix",value:function(e){return"maps/share"===e.action||"layers/share"===e.action||"content/share"===e.action?x.default.fixMapsShare({items:e.items,sharingLevel:e.details.sharingLevel}):"layers/sharePremiumContent"===e.action||"layers/shareSubscriptionContent"===e.action?x.default.fixPremiumSubscriptionContent(e.items):Promise.reject({fixedItems:[],unfixedItems:e.items.map(function(e){return e.id})})}},{key:"share",value:function(e){var t=Object.assign({},e,{owner:this.owner});return T.default.shareApp(t)}}]),e}();t.default=M,e.exports=t.default}),define("storymaps/tpl/builder/BuilderView",["lib-build/tpl!./BuilderView","lib-build/less!./BuilderView","storymaps-react/tpl/builder/Controller","storymaps/common/builder/mediaPicker/MediaPickerPopup","storymaps-react/tpl/builder/settings/Popup","storymaps-react/tpl/builder/AppParser","storymaps/common/utils/CommonHelper","storymaps/common/builder/BuilderHelper","issue-checker/helpers/NormalizeHelper","issue-checker/IssueChecker","dojo/Deferred","dojo/topic","dojo/_base/lang","esri/IdentityManager","lib/color-thief/dist/color-thief.min"],function(e,t,n,i,r,o,a,s,l,u,c,d,p,f){return function(t,c){function h(){var e=app.data.sections;e&&e.length&&(app.Controller.renderHeader(),m())}function m(){var e=app.data.sections;if(e&&e.length){var t=e[e.length-1];if(t&&"credits"==t.type)e[e.length-2].setVisibility(!1);else{var n=e.length>3;n||("immersive"==e[1].type?n=!0:"sequence"==e[1].type&&e[1].getNumberOfBlocks()>=3&&(n=!0)),e[e.length-1].setVisibility(n)}}}function v(e){var t={config:{author:{name:""}},settings:{header:app.Controller.SHARED_STYLE_HEADER_SETTINGS||{}},template:{name:app.cfg.TPL_NAME,createdWith:app.version,editedWith:app.version,dataVersion:"1.0.0"},sections:[]},n=p.clone(t),i=[{type:"text",text:{value:'<p class="block block-placeholder"></p>'}}];return e.webmapId?i=[app.ui.MediaFactory.createInstance({type:"webmap",webmap:{id:e.webmapId}}).serialize()]:e.websceneId&&(i=[app.ui.MediaFactory.createInstance({type:"webscene",webscene:{id:e.websceneId}}).serialize()]),n.sections=[app.ui.SectionFactory.createInstance({type:"cover",foreground:{title:e.title,subtitle:e.subtitle}}).serialize(),app.ui.SectionFactory.createInstance({type:"sequence",background:app.ui.MediaFactory.createInstance({type:"color",color:{value:"#FFF"}}).serialize(),foreground:{blocks:i}}).serialize()],n}$("#builder-views").append(e({}));var g=null,b=null,y=null;this.init=function(){app.builder.pendingChanges=0,b=new i({container:$(".media-picker-popup")}),app.builder.mediaPicker=b,g=new r({container:$("#settings-popup")}),app.builder.settingsPopup=g,d.subscribe("builder-section-update",h),d.subscribe("tpl-ready",function(){m(),d.publish("builder-story-title-update",app.Controller.getStoryTitle());var e=s.getPortalURL(),t=p.clone(app.data.appItem.item);y=new u({owner:t.owner||f.findCredential(e).userId,portal:app.portal,appId:app.builder.isDirectCreationFirstSave?null:app.data.appItem.item.id,appUrl:app.builder.isDirectCreationFirstSave?null:app.data.appItem.item.url}),this.scanApp(),d.subscribe("builder-should-check-story",function(){this.scanApp()}.bind(this))}.bind(this))},this.appInitComplete=function(){var e=null;if(app.data.appItem||void 0===a.getUrlParams().fromScratch&&void 0===a.getUrlParams().fromscratch){if(app.data.appItem&&app.Controller.isStoryBlank()){var t=null,n=null;app.data.appItem.data&&app.data.appItem.data.values&&(t=app.data.appItem.data.values.webmap,n=app.data.appItem.data.values.webscene),e=v({webmapId:t,websceneId:n,title:app.data.appItem.item.title||"",subtitle:app.data.appItem.item.snippet||""})}}else e=v({title:"",subtitle:""}),app.data.appItem={item:s.getBlankAppJSON(),data:{values:null}},app.data.title=app.data.appItem.item.title;e&&(app.data.appItem.data.values=e),d.subscribe("builder-story-title-update",function(e){document.title=e}),d.publish("builder-story-title-update",app.Controller.getStoryTitle()),app.isProduction||"media-picker"!=a.getUrlParams().debug||app.builder.mediaPicker.open({mode:"add"}).then(function(){},function(){})},this.updateUI=function(){},this.saveApp=function(){var e=n.serializeStory(!1);app.data.title=app.Controller.getStoryTitle(),app.data.appItem.data.values.sections=e,app.data.appItem.data.values.template.editedWith=app.version,c.saveApp()},this.saveFailed=function(e){"DUPLICATE"===e&&(app.data.sections[0].showTitleError(),app.Controller.navigateToSection({index:0,animate:!1}))},this.shareApp=function(e){var t=this.getScanData();return y.share({appID:app.data.appItem.item.id,sharingLevel:e,media:t.mediaIDs})},this.resize=function(){},this.onFirstAppSave=function(){y.onFirstAppSave({appId:app.data.appItem.item.id,appUrl:app.data.appItem.item.url})},this.scanApp=function(){d.publish("check-app-started");var e=this.getScanData();return y.check({media:e.mediaIDs,appAccess:app.data.appItem.item.access}).then(function(t){this.addAppContext(t.media,e.media),this.addFixMethods(t);var n=this.compileIssueSections(t.media);app.Controller.reportScanResults(t,n)}.bind(this))},this.getScanData=function(){var e=n.serializeStory(!0),t=o.getMedia(e),i=this.getMediaIDs(t);return{mediaIDs:i,media:t}},this.getMediaIDs=function(e){var t={mapIDs:e.maps.allItems,sceneIDs:e.scenes.allItems,imageIDs:e.images.allItems,videoIDs:e.videos.allItems};return t},this.addAppContext=function(e,t){for(var n in e)e.hasOwnProperty(n)&&t.hasOwnProperty(n)&&this.addAppContextByMedia(e[n],t[n])},this.addAppContextByMedia=function(e,t){for(var n=l.getAllItems(e),i=0;i<n.length;i++){var r=n[i],o=t.byId[r.id];r.sections=[],o&&o.sections&&(r.sections=o.sections)}},this.addFixMethods=function(e){for(var t=l.getAllItems(e.errors),n=0;n<t.length;n++)this.addFixMethodsByIssue(t[n])},this.addFixMethodsByIssue=function(e){for(var t=null,n=0;n<e.actions.length;n++){t=e.actions[n];var i={id:t,fix:this.getFixFunction(t)};e.actions[n]=i}},this.getFixFunction=function(e){return function(t){return y.fix({action:e,items:t.items,details:t.details}).then(function(e){return this.scanApp().then(function(){return e})}.bind(this),function(e){return this.scanApp().then(function(){return e})}.bind(this))}.bind(this)},this.compileIssueSections=function(e){var t={errorSections:[]};for(var n in e)e.hasOwnProperty(n)&&("layers"===n?this.compileIssueSectionsByLayer(e[n],e,t.errorSections,"errors"):this.compileIssueSectionsByMedia(e[n],t.errorSections,"errors"));return t},this.compileIssueSectionsByLayer=function(e,t,n,i){for(var r=l.getAllItems(e),o=0;o<r.length;o++){var a=r[o];if(a[i].length&&a.maps&&a.maps.length)for(var s=0;s<a.maps.length;s++){var u=a.maps[s],c=t.maps.byId[u];this.addIssueSections(c.sections,n)}}},this.compileIssueSectionsByMedia=function(e,t,n){for(var i=l.getAllItems(e),r=0;r<i.length;r++){var o=i[r];o[n].length&&this.addIssueSections(o.sections,t)}},this.addIssueSections=function(e,t){for(var n=0;n<e.length;n++){var i=e[n];t.indexOf(i)===-1&&t.push(i)}}}}),require(["storymaps/common/Core","storymaps-react/tpl/view/media/FactoryBuilder","storymaps-react/tpl/view/section/FactoryBuilder","storymaps/tpl/view/section/Immersive/PanelFactoryBuilder","storymaps/tpl/core/MainView","storymaps/common/builder/Builder","storymaps/tpl/builder/BuilderView"],function(){}),define("storymaps/tpl/BuildConfigBuilder",function(){});